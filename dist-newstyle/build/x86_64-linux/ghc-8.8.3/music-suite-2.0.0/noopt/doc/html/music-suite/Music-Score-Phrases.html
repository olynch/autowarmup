<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Music.Score.Phrases</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">music-suite-2.0.0: A set of libraries for composition, analysis and manipulation of music.</span><ul class="links" id="page-menu"><li><a href="src/Music.Score.Phrases.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Music.Score.Phrases</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">HasPhrases class</a></li><li><a href="#g:2">Phrase types etc</a><ul><li><a href="#g:3">Utility</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Provides phrase-wise traversal.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> <a href="#t:HasPhrases">HasPhrases</a> s t a b | s -&gt; a, t -&gt; b, s b -&gt; t, t a -&gt; s <span class="keyword">where</span><ul class="subs"><li><a href="#v:mvoices">mvoices</a> :: Traversal s t (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b)</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:HasPhrases-39-">HasPhrases'</a> s a = <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> s s a a</li><li class="src short"><a href="#v:phrases">phrases</a> :: <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> s t a b =&gt; Traversal s t (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a) (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> b)</li><li class="src short"><a href="#v:phrases-39-">phrases'</a> :: <a href="Music-Score-Phrases.html#t:HasPhrases-39-" title="Music.Score.Phrases">HasPhrases'</a> s a =&gt; Traversal' s (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Phrase">Phrase</a> a = <a href="Music-Time-Voice.html#t:Voice" title="Music.Time.Voice">Voice</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:MVoice">MVoice</a> a = <a href="Music-Time-Voice.html#t:Voice" title="Music.Time.Voice">Voice</a> (<a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:PVoice">PVoice</a> a = [<a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Music-Time-Types.html#t:Duration" title="Music.Time.Types">Duration</a> (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a)]</li><li class="src short"><a href="#v:mVoicePVoice">mVoicePVoice</a> :: Lens (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> a) (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> b)</li><li class="src short"><a href="#v:singleMVoice">singleMVoice</a> :: a ~ b =&gt; Prism (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> a) (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> b) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b)</li><li class="src short"><a href="#v:mapPhrasesWithPrevAndCurrentOnset">mapPhrasesWithPrevAndCurrentOnset</a> :: <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> s t a b =&gt; (<a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Music-Time-Types.html#t:Time" title="Music.Time.Types">Time</a>, <a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a) -&gt; <a href="Music-Time-Types.html#t:Time" title="Music.Time.Types">Time</a> -&gt; <a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a -&gt; <a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> b) -&gt; s -&gt; t</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>HasPhrases class</h1></a><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:HasPhrases" class="def">HasPhrases</a> s t a b | s -&gt; a, t -&gt; b, s b -&gt; t, t a -&gt; s <span class="keyword">where</span> <a href="src/Music.Score.Phrases.html#HasPhrases" class="link">Source</a> <a href="#t:HasPhrases" class="selflink">#</a></p><div class="doc"><p>Class of structures that can be traversed &quot;by phrase&quot;.</p><p>A <em>phrase</em> in this context is a sequence of consecutive notes played by the
 same performer, with no rests in between. Phrase traverals are used for
 attaching articulation marks, slurs and so on, but can also be used separately.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:mvoices" class="def">mvoices</a> :: Traversal s t (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) <a href="src/Music.Score.Phrases.html#mvoices" class="link">Source</a> <a href="#v:mvoices" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:HasPhrases">Instances</h4><details id="i:HasPhrases" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasPhrases:HasPhrases:1"></span> (<a href="Music-Score-Part.html#t:HasParts-39-" title="Music.Score.Part">HasParts'</a> a, <a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Music-Score-Part.html#t:Part" title="Music.Score.Part">Part</a> a), a ~ b) =&gt; <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> a) (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> b) a b</span> <a href="src/Music.Score.Phrases.html#line-108" class="link">Source</a> <a href="#t:HasPhrases" class="selflink">#</a></td><td class="doc"><p>Traverses all phrases in each voice, using <code><a href="Music-Score-Part.html#v:extracted" title="Music.Score.Part">extracted</a></code>.
 TODO get rid of UndecidableInstances</p></td></tr><tr><td colspan="2"><details id="i:ic:HasPhrases:HasPhrases:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Music-Score-Phrases.html">Music.Score.Phrases</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mvoices">mvoices</a> :: Traversal (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> a) (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> b) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) <a href="src/Music.Score.Phrases.html#mvoices" class="link">Source</a> <a href="#v:mvoices" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasPhrases:HasPhrases:2"></span> <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> a) (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> b) a b</span> <a href="src/Music.Score.Phrases.html#line-102" class="link">Source</a> <a href="#t:HasPhrases" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasPhrases:HasPhrases:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Music-Score-Phrases.html">Music.Score.Phrases</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mvoices">mvoices</a> :: Traversal (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> a) (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> b) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) <a href="src/Music.Score.Phrases.html#mvoices" class="link">Source</a> <a href="#v:mvoices" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasPhrases:HasPhrases:3"></span> <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) a b</span> <a href="src/Music.Score.Phrases.html#line-99" class="link">Source</a> <a href="#t:HasPhrases" class="selflink">#</a></td><td class="doc"><p>Traverses all phrases in a voice.</p></td></tr><tr><td colspan="2"><details id="i:ic:HasPhrases:HasPhrases:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Music-Score-Phrases.html">Music.Score.Phrases</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mvoices">mvoices</a> :: Traversal (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) <a href="src/Music.Score.Phrases.html#mvoices" class="link">Source</a> <a href="#v:mvoices" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HasPhrases-39-" class="def">HasPhrases'</a> s a = <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> s s a a <a href="src/Music.Score.Phrases.html#HasPhrases%27" class="link">Source</a> <a href="#t:HasPhrases-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:phrases" class="def">phrases</a> :: <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> s t a b =&gt; Traversal s t (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a) (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> b) <a href="src/Music.Score.Phrases.html#phrases" class="link">Source</a> <a href="#v:phrases" class="selflink">#</a></p><div class="doc"><p>A generic phrase-traversal.</p></div></div><div class="top"><p class="src"><a id="v:phrases-39-" class="def">phrases'</a> :: <a href="Music-Score-Phrases.html#t:HasPhrases-39-" title="Music.Score.Phrases">HasPhrases'</a> s a =&gt; Traversal' s (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a) <a href="src/Music.Score.Phrases.html#phrases%27" class="link">Source</a> <a href="#v:phrases-39-" class="selflink">#</a></p><div class="doc"><p>A simple generic phrase-traversal.</p></div></div><a href="#g:2" id="g:2"><h1>Phrase types etc</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Phrase" class="def">Phrase</a> a = <a href="Music-Time-Voice.html#t:Voice" title="Music.Time.Voice">Voice</a> a <a href="src/Music.Score.Phrases.html#Phrase" class="link">Source</a> <a href="#t:Phrase" class="selflink">#</a></p><div class="doc"><p>For a phrase, we simply use a voice without rests.</p><p>To represent a sequence of phrases we provide two equivalent representations:</p><ul><li><code><a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a></code> is a sequence of notes/chords or rests. All consecutive non-rests consitute a phrase.</li><li><code><a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a></code> is a sequence of phrases or durations.</li></ul></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MVoice" class="def">MVoice</a> a = <a href="Music-Time-Voice.html#t:Voice" title="Music.Time.Voice">Voice</a> (<a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Music.Score.Phrases.html#MVoice" class="link">Source</a> <a href="#t:MVoice" class="selflink">#</a></p><div class="doc"><p>A sequence of phrases or rests, represented as notes or rests.</p><p>Each consecutive sequence of non-rest elements is considered to be a phrase.
 For a more explicit representation of the phrase structure, see <code><a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PVoice" class="def">PVoice</a> a = [<a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Music-Time-Types.html#t:Duration" title="Music.Time.Types">Duration</a> (<a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a)] <a href="src/Music.Score.Phrases.html#PVoice" class="link">Source</a> <a href="#t:PVoice" class="selflink">#</a></p><div class="doc"><p>A sequence of phrases or rests, represented with explicit phrase structure.</p></div></div><a href="#g:3" id="g:3"><h2>Utility</h2></a><div class="top"><p class="src"><a id="v:mVoicePVoice" class="def">mVoicePVoice</a> :: Lens (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> a) (<a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a> b) <a href="src/Music.Score.Phrases.html#mVoicePVoice" class="link">Source</a> <a href="#v:mVoicePVoice" class="selflink">#</a></p><div class="doc"><p>View an <code><a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a></code> as a <code><a href="Music-Score-Phrases.html#t:PVoice" title="Music.Score.Phrases">PVoice</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:singleMVoice" class="def">singleMVoice</a> :: a ~ b =&gt; Prism (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> a) (<a href="Music-Time-Score.html#t:Score" title="Music.Time.Score">Score</a> b) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> a) (<a href="Music-Score-Phrases.html#t:MVoice" title="Music.Score.Phrases">MVoice</a> b) <a href="src/Music.Score.Phrases.html#singleMVoice" class="link">Source</a> <a href="#v:singleMVoice" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mapPhrasesWithPrevAndCurrentOnset" class="def">mapPhrasesWithPrevAndCurrentOnset</a> :: <a href="Music-Score-Phrases.html#t:HasPhrases" title="Music.Score.Phrases">HasPhrases</a> s t a b =&gt; (<a href="file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Music-Time-Types.html#t:Time" title="Music.Time.Types">Time</a>, <a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a) -&gt; <a href="Music-Time-Types.html#t:Time" title="Music.Time.Types">Time</a> -&gt; <a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> a -&gt; <a href="Music-Score-Phrases.html#t:Phrase" title="Music.Score.Phrases">Phrase</a> b) -&gt; s -&gt; t <a href="src/Music.Score.Phrases.html#mapPhrasesWithPrevAndCurrentOnset" class="link">Source</a> <a href="#v:mapPhrasesWithPrevAndCurrentOnset" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>