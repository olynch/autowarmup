<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wall
  -Wcompat
  -Wincomplete-record-updates
  -Wincomplete-uni-patterns
  -Werror
  -fno-warn-name-shadowing
  -fno-warn-unused-matches
  -fno-warn-unused-imports #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Music.Time.Types</span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Basic types</span></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier">Time</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier">Duration</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#Alignment"><span class="hs-identifier">Alignment</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Convert between time and duration</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><span class="hs-comment">-- $convert</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#toAbsoluteTime"><span class="hs-identifier">toAbsoluteTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#toRelativeTime"><span class="hs-identifier">toRelativeTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#toRelativeTimeN"><span class="hs-identifier">toRelativeTimeN</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#toRelativeTimeN%27"><span class="hs-identifier">toRelativeTimeN'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- TODO Fairbairn threshold</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Time spans</span></span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier">Span</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Constructing spans</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator">(&lt;-&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#%3E-%3E"><span class="hs-operator">(&gt;-&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#%3C-%3C"><span class="hs-operator">(&lt;-&lt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier">onsetAndOffset</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier">onsetAndDuration</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#durationAndOffset"><span class="hs-identifier">durationAndOffset</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#stretchComponent"><span class="hs-identifier">stretchComponent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#delayComponent"><span class="hs-identifier">delayComponent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#fixedDurationSpan"><span class="hs-identifier">fixedDurationSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#fixedOnsetSpan"><span class="hs-identifier">fixedOnsetSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Transformations</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#normalizeSpan"><span class="hs-identifier">normalizeSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#reverseSpan"><span class="hs-identifier">reverseSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#reflectSpan"><span class="hs-identifier">reflectSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Properties</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#isDegenerateSpan"><span class="hs-identifier">isDegenerateSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#isForwardSpan"><span class="hs-identifier">isForwardSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#isBackwardSpan"><span class="hs-identifier">isBackwardSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-comment">-- delayComponent,</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-comment">-- stretchComponent,</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Combine</span></span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#hull"><span class="hs-identifier">hull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#TimeInterval"><span class="hs-identifier">TimeInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Points in spans</span></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#inside"><span class="hs-identifier">inside</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#strictlyInside"><span class="hs-identifier">strictlyInside</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#closestPointInside"><span class="hs-identifier">closestPointInside</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Predicates</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#encloses"><span class="hs-identifier">encloses</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#properlyEncloses"><span class="hs-identifier">properlyEncloses</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#overlaps"><span class="hs-identifier">overlaps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#isBefore"><span class="hs-identifier">isBefore</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-comment">-- afterOnset,</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-comment">-- strictlyAfterOnset,</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-comment">-- beforeOnset,</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-comment">-- strictlyBeforeOnset,</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-comment">-- afterOffset,</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-comment">-- strictlyAfterOffset,</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-comment">-- beforeOffset,</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-comment">-- strictlyBeforeOffset,</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">-- startsWhenStarts,</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">-- startsWhenStops,</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-comment">-- stopsWhenStops,</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-comment">-- stopsWhenStarts,</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-comment">-- startsBefore,</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-comment">-- startsLater,</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-comment">-- stopsAtTheSameTime,</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-comment">-- stopsBefore,</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-comment">-- stopsLater,</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-comment">-- union/hull</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">-- intersection (alt name 'overlap')</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-comment">-- difference (would actually become a split)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Read/Show</span></span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#showOnsetAndOffset"><span class="hs-identifier">showOnsetAndOffset</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#showOnsetAndDuration"><span class="hs-identifier">showOnsetAndDuration</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#showDurationAndOffset"><span class="hs-identifier">showDurationAndOffset</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">Control.Applicative.Backwards</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-keyword">hiding</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-operator">(&lt;|)</span></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="hs-identifier">Indexable</span></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="hs-identifier">Level</span></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><span class="hs-identifier">below</span></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="hs-identifier">index</span></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="hs-identifier">inside</span></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="hs-identifier">parts</span></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="hs-identifier">reversed</span></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="hs-identifier">transform</span></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><span class="hs-operator">(|&gt;)</span></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.State.Lazy</span></a></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JSON</span></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.AffineSpace</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.AffineSpace.Point.html"><span class="hs-identifier">Data.AffineSpace.Point</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.AffineSpace.Point.Offsets.html"><span class="hs-identifier">Data.AffineSpace.Point.Offsets</span></a></span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">mapAccumL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">mapAccumR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Ratio</span></a></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Semigroup</span></a></span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.VectorSpace</span></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Internal.Util.html"><span class="hs-identifier">Music.Score.Internal.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Util.html#unRatio"><span class="hs-identifier">unRatio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Internal.Util.html"><span class="hs-identifier">Music.Time.Internal.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Internal.Util.html#showRatio"><span class="hs-identifier">showRatio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- import           Data.Fixed</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- $convert</span><span>
</span><span id="line-126"></span><span class="hs-comment">--</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- Note that you should use '.-.' and '.+^' to convert between time and</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- duration. To refer to time zero (the beginning of the music), use</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- 'origin'.</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- Internal time representation. Can be anything with instances</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- for 'Fractional' and 'RealFrac'.</span><span>
</span><span id="line-134"></span><span class="hs-keyword">type</span><span> </span><span id="TimeBase"><span class="annot"><a href="Music.Time.Types.html#TimeBase"><span class="hs-identifier hs-var">TimeBase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">{-
type TimeBase = Fixed E12

instance HasResolution a =&gt; AdditiveGroup (Fixed a) where
  zeroV = 0
  negateV = negate
  (^+^) = (+)

instance Floating TimeBase where
deriving instance Floating Time
deriving instance Floating Duration
-}</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | 'Alignment' is a synonym for 'Duration'.</span><span>
</span><span id="line-150"></span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- See &quot;Music.Time.Aligned&quot; for its intended use.</span><span>
</span><span id="line-152"></span><span class="hs-keyword">type</span><span> </span><span id="Alignment"><span class="annot"><a href="Music.Time.Types.html#Alignment"><span class="hs-identifier hs-var">Alignment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- Duration, corresponding to note values in standard notation.</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- The standard names can be used: @1\/2@ for half note @1\/4@ for a quarter note and so on.</span><span>
</span><span id="line-157"></span><span class="hs-comment">--</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- 'Duration' is isomorphic to 'Rational'. You can use 'toRational' and 'fromRational'</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- to convert it. To convert between 'Time' and 'Duration', use the 'AffineSpace'</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- instance.</span><span>
</span><span id="line-161"></span><span id="local-6989586621680567293"><span id="local-6989586621680567294"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="Duration"><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-var">Duration</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Duration"><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-var">Duration</span></a></span></span><span> </span><span class="hs-special">{</span><span id="_getDuration"><span class="annot"><span class="annottext">Duration -&gt; TimeBase
</span><a href="Music.Time.Types.html#_getDuration"><span class="hs-identifier hs-var hs-var">_getDuration</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#TimeBase"><span class="hs-identifier hs-type">TimeBase</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680567287"><span id="local-6989586621680567289"><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Bool
(Duration -&gt; Duration -&gt; Bool)
-&gt; (Duration -&gt; Duration -&gt; Bool) -&gt; Eq Duration
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Duration -&gt; Duration -&gt; Bool
$c/= :: Duration -&gt; Duration -&gt; Bool
== :: Duration -&gt; Duration -&gt; Bool
$c== :: Duration -&gt; Duration -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567271"><span id="local-6989586621680567273"><span id="local-6989586621680567275"><span id="local-6989586621680567277"><span id="local-6989586621680567279"><span id="local-6989586621680567281"><span id="local-6989586621680567283"><span class="annot"><span class="annottext">Eq Duration
Eq Duration =&gt;
(Duration -&gt; Duration -&gt; Ordering)
-&gt; (Duration -&gt; Duration -&gt; Bool)
-&gt; (Duration -&gt; Duration -&gt; Bool)
-&gt; (Duration -&gt; Duration -&gt; Bool)
-&gt; (Duration -&gt; Duration -&gt; Bool)
-&gt; (Duration -&gt; Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration -&gt; Duration)
-&gt; Ord Duration
Duration -&gt; Duration -&gt; Bool
Duration -&gt; Duration -&gt; Ordering
Duration -&gt; Duration -&gt; Duration
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Duration -&gt; Duration -&gt; Duration
$cmin :: Duration -&gt; Duration -&gt; Duration
max :: Duration -&gt; Duration -&gt; Duration
$cmax :: Duration -&gt; Duration -&gt; Duration
&gt;= :: Duration -&gt; Duration -&gt; Bool
$c&gt;= :: Duration -&gt; Duration -&gt; Bool
&gt; :: Duration -&gt; Duration -&gt; Bool
$c&gt; :: Duration -&gt; Duration -&gt; Bool
&lt;= :: Duration -&gt; Duration -&gt; Bool
$c&lt;= :: Duration -&gt; Duration -&gt; Bool
&lt; :: Duration -&gt; Duration -&gt; Bool
$c&lt; :: Duration -&gt; Duration -&gt; Bool
compare :: Duration -&gt; Duration -&gt; Ordering
$ccompare :: Duration -&gt; Duration -&gt; Ordering
$cp1Ord :: Eq Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Duration -&gt; Rep Duration x)
-&gt; (forall x. Rep Duration x -&gt; Duration) -&gt; Generic Duration
forall x. Rep Duration x -&gt; Duration
forall x. Duration -&gt; Rep Duration x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Duration x -&gt; Duration
$cfrom :: forall x. Duration -&gt; Rep Duration x
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567251"><span id="local-6989586621680567253"><span id="local-6989586621680567255"><span id="local-6989586621680567257"><span id="local-6989586621680567259"><span id="local-6989586621680567261"><span id="local-6989586621680567263"><span id="local-6989586621680567265"><span class="annot"><span class="annottext">Int -&gt; Duration
Duration -&gt; Int
Duration -&gt; [Duration]
Duration -&gt; Duration
Duration -&gt; Duration -&gt; [Duration]
Duration -&gt; Duration -&gt; Duration -&gt; [Duration]
(Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration)
-&gt; (Int -&gt; Duration)
-&gt; (Duration -&gt; Int)
-&gt; (Duration -&gt; [Duration])
-&gt; (Duration -&gt; Duration -&gt; [Duration])
-&gt; (Duration -&gt; Duration -&gt; [Duration])
-&gt; (Duration -&gt; Duration -&gt; Duration -&gt; [Duration])
-&gt; Enum Duration
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: Duration -&gt; Duration -&gt; Duration -&gt; [Duration]
$cenumFromThenTo :: Duration -&gt; Duration -&gt; Duration -&gt; [Duration]
enumFromTo :: Duration -&gt; Duration -&gt; [Duration]
$cenumFromTo :: Duration -&gt; Duration -&gt; [Duration]
enumFromThen :: Duration -&gt; Duration -&gt; [Duration]
$cenumFromThen :: Duration -&gt; Duration -&gt; [Duration]
enumFrom :: Duration -&gt; [Duration]
$cenumFrom :: Duration -&gt; [Duration]
fromEnum :: Duration -&gt; Int
$cfromEnum :: Duration -&gt; Int
toEnum :: Int -&gt; Duration
$ctoEnum :: Int -&gt; Duration
pred :: Duration -&gt; Duration
$cpred :: Duration -&gt; Duration
succ :: Duration -&gt; Duration
$csucc :: Duration -&gt; Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567236"><span id="local-6989586621680567238"><span id="local-6989586621680567240"><span id="local-6989586621680567242"><span id="local-6989586621680567244"><span id="local-6989586621680567246"><span id="local-6989586621680567248"><span class="annot"><span class="annottext">Integer -&gt; Duration
Duration -&gt; Duration
Duration -&gt; Duration -&gt; Duration
(Duration -&gt; Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration)
-&gt; (Integer -&gt; Duration)
-&gt; Num Duration
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; Duration
$cfromInteger :: Integer -&gt; Duration
signum :: Duration -&gt; Duration
$csignum :: Duration -&gt; Duration
abs :: Duration -&gt; Duration
$cabs :: Duration -&gt; Duration
negate :: Duration -&gt; Duration
$cnegate :: Duration -&gt; Duration
* :: Duration -&gt; Duration -&gt; Duration
$c* :: Duration -&gt; Duration -&gt; Duration
- :: Duration -&gt; Duration -&gt; Duration
$c- :: Duration -&gt; Duration -&gt; Duration
+ :: Duration -&gt; Duration -&gt; Duration
$c+ :: Duration -&gt; Duration -&gt; Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567228"><span id="local-6989586621680567230"><span id="local-6989586621680567232"><span class="annot"><span class="annottext">Num Duration
Num Duration =&gt;
(Duration -&gt; Duration -&gt; Duration)
-&gt; (Duration -&gt; Duration)
-&gt; (TimeBase -&gt; Duration)
-&gt; Fractional Duration
TimeBase -&gt; Duration
Duration -&gt; Duration
Duration -&gt; Duration -&gt; Duration
forall a.
Num a =&gt;
(a -&gt; a -&gt; a) -&gt; (a -&gt; a) -&gt; (TimeBase -&gt; a) -&gt; Fractional a
fromRational :: TimeBase -&gt; Duration
$cfromRational :: TimeBase -&gt; Duration
recip :: Duration -&gt; Duration
$crecip :: Duration -&gt; Duration
/ :: Duration -&gt; Duration -&gt; Duration
$c/ :: Duration -&gt; Duration -&gt; Duration
$cp1Fractional :: Num Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Fractional</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567223"><span class="annot"><span class="annottext">Num Duration
Ord Duration
(Num Duration, Ord Duration) =&gt;
(Duration -&gt; TimeBase) -&gt; Real Duration
Duration -&gt; TimeBase
forall a. (Num a, Ord a) =&gt; (a -&gt; TimeBase) -&gt; Real a
toRational :: Duration -&gt; TimeBase
$ctoRational :: Duration -&gt; TimeBase
$cp2Real :: Ord Duration
$cp1Real :: Num Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Real</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567210"><span id="local-6989586621680567212"><span id="local-6989586621680567214"><span id="local-6989586621680567216"><span id="local-6989586621680567218"><span class="annot"><span class="annottext">Fractional Duration
Real Duration
(Real Duration, Fractional Duration) =&gt;
(forall b. Integral b =&gt; Duration -&gt; (b, Duration))
-&gt; (forall b. Integral b =&gt; Duration -&gt; b)
-&gt; (forall b. Integral b =&gt; Duration -&gt; b)
-&gt; (forall b. Integral b =&gt; Duration -&gt; b)
-&gt; (forall b. Integral b =&gt; Duration -&gt; b)
-&gt; RealFrac Duration
Duration -&gt; b
Duration -&gt; b
Duration -&gt; b
Duration -&gt; b
Duration -&gt; (b, Duration)
forall b. Integral b =&gt; Duration -&gt; b
forall b. Integral b =&gt; Duration -&gt; (b, Duration)
forall a.
(Real a, Fractional a) =&gt;
(forall b. Integral b =&gt; a -&gt; (b, a))
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; RealFrac a
floor :: Duration -&gt; b
$cfloor :: forall b. Integral b =&gt; Duration -&gt; b
ceiling :: Duration -&gt; b
$cceiling :: forall b. Integral b =&gt; Duration -&gt; b
round :: Duration -&gt; b
$cround :: forall b. Integral b =&gt; Duration -&gt; b
truncate :: Duration -&gt; b
$ctruncate :: forall b. Integral b =&gt; Duration -&gt; b
properFraction :: Duration -&gt; (b, Duration)
$cproperFraction :: forall b. Integral b =&gt; Duration -&gt; (b, Duration)
$cp2RealFrac :: Fractional Duration
$cp1RealFrac :: Real Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">RealFrac</span></a></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- Duration is a one-dimensional 'VectorSpace', and is the associated vector space of time points.</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- It is a also an 'AdditiveGroup' (and hence also 'Monoid' and 'Semigroup') under addition.</span><span>
</span><span id="line-166"></span><span class="hs-comment">--</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- 'Duration' is invariant under translation so 'delay' has no effect on it.</span><span>
</span><span id="line-168"></span><span class="hs-comment">--</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567204"><span id="local-6989586621680567207"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621680567202"><span class="annot"><span class="annottext">show :: Duration -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; String
</span><a href="Music.Time.Internal.Util.html#showRatio"><span class="hs-identifier hs-var">showRatio</span></a></span><span> </span><span class="annot"><span class="annottext">(TimeBase -&gt; String)
-&gt; (Duration -&gt; TimeBase) -&gt; Duration -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; TimeBase
forall a. Real a =&gt; a -&gt; TimeBase
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toRational</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567193"><span id="local-6989586621680567195"><span id="local-6989586621680567197"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-comment">-- toJSON = JSON.Number . realToFrac</span><span>
</span><span id="line-175"></span><span>  </span><span id="local-6989586621680567191"><span class="annot"><span class="annottext">toJSON :: Duration -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621680567189"><span class="annot"><span class="annottext">x :: Duration
</span><a href="#local-6989586621680567189"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680567188"><span class="annot"><span class="annottext">a :: Integer
</span><a href="#local-6989586621680567188"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567187"><span class="annot"><span class="annottext">b :: Integer
</span><a href="#local-6989586621680567187"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; (Integer, Integer)
forall a. Ratio a -&gt; (a, a)
</span><a href="Music.Score.Internal.Util.html#unRatio"><span class="hs-identifier hs-var">unRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; TimeBase
forall a. Real a =&gt; a -&gt; TimeBase
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toRational</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680567189"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Integer] -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680567188"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680567187"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567184"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-178"></span><span>  </span><span id="local-6989586621680567182"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Duration
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621680567180"><span class="annot"><span class="annottext">x :: Value
</span><a href="#local-6989586621680567180"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621680567179"><span class="annot"><span class="annottext">a :: Integer
</span><a href="#local-6989586621680567179"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567178"><span class="annot"><span class="annottext">b :: Integer
</span><a href="#local-6989586621680567178"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser [Integer]
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">parseJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680567180"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">Duration -&gt; Parser Duration
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Parser Duration) -&gt; Duration -&gt; Parser Duration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; Duration
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">(TimeBase -&gt; Duration) -&gt; TimeBase -&gt; Duration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680567179"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.2.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; TimeBase
forall a. Integral a =&gt; a -&gt; a -&gt; Ratio a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">Data.Ratio.%</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680567178"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567172"><span id="local-6989586621680567174"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621680567170"><span class="annot"><span class="annottext">&lt;&gt; :: Duration -&gt; Duration -&gt; Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall v. VectorSpace v =&gt; Scalar v -&gt; v -&gt; v
</span><span class="hs-operator hs-var">(*^)</span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567163"><span id="local-6989586621680567165"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>  </span><span id="local-6989586621680567161"><span class="annot"><span class="annottext">mempty :: Duration
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">1</span></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567156"><span class="annot"><span class="hs-identifier hs-type">AdditiveGroup</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>  </span><span id="local-6989586621680567154"><span class="annot"><span class="annottext">zeroV :: Duration
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">zeroV</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621680567152"><span class="annot"><span class="annottext">^+^ :: Duration -&gt; Duration -&gt; Duration
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(^+^)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(+)</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>  </span><span id="local-6989586621680567149"><span class="annot"><span class="annottext">negateV :: Duration -&gt; Duration
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">negateV</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">negate</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VectorSpace</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Scalar"><span class="annot"><span class="hs-identifier hs-var">Scalar</span></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>  </span><span id="local-6989586621680567144"><span class="annot"><span class="annottext">*^ :: Scalar Duration -&gt; Duration -&gt; Duration
</span><a href="#local-6989586621680567144"><span class="hs-operator hs-var hs-var hs-var hs-var">(*^)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Scalar Duration -&gt; Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(*)</span></a></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InnerSpace</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-203"></span><span>  </span><span id="local-6989586621680567138"><span class="annot"><span class="annottext">&lt;.&gt; :: Duration -&gt; Duration -&gt; Scalar Duration
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;.&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Scalar Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(*)</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- | 'Time' represents points in time space. The difference between two time points</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- is a 'Duration', for example in a bar of duration 4/4 (that is 1), the difference</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- between the first and third beat 1/2.</span><span>
</span><span id="line-208"></span><span class="hs-comment">--</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- Time has an origin (zero) which usually represents the beginning of the musical</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- performance, but this may not always be the case, as the modelled music may be</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- infinite, or contain a musical pickup. Hence 'Time' values can be negative.</span><span>
</span><span id="line-212"></span><span class="hs-comment">--</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- 'Duration' is isomorphic to 'Rational'. You can use 'toRational' and 'fromRational'</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- to convert it. To convert between 'Time' and 'Duration', use the 'AffineSpace'</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- instance.</span><span>
</span><span id="line-216"></span><span id="local-6989586621680567135"><span id="local-6989586621680567136"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="Time"><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-var">Time</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Time"><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-var">Time</span></a></span></span><span> </span><span class="hs-special">{</span><span id="_getTime"><span class="annot"><span class="annottext">Time -&gt; TimeBase
</span><a href="Music.Time.Types.html#_getTime"><span class="hs-identifier hs-var hs-var">_getTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#TimeBase"><span class="hs-identifier hs-type">TimeBase</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680567129"><span id="local-6989586621680567131"><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
(Time -&gt; Time -&gt; Bool) -&gt; (Time -&gt; Time -&gt; Bool) -&gt; Eq Time
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Time -&gt; Time -&gt; Bool
$c/= :: Time -&gt; Time -&gt; Bool
== :: Time -&gt; Time -&gt; Bool
$c== :: Time -&gt; Time -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567114"><span id="local-6989586621680567116"><span id="local-6989586621680567118"><span id="local-6989586621680567120"><span id="local-6989586621680567122"><span id="local-6989586621680567124"><span id="local-6989586621680567126"><span class="annot"><span class="annottext">Eq Time
Eq Time =&gt;
(Time -&gt; Time -&gt; Ordering)
-&gt; (Time -&gt; Time -&gt; Bool)
-&gt; (Time -&gt; Time -&gt; Bool)
-&gt; (Time -&gt; Time -&gt; Bool)
-&gt; (Time -&gt; Time -&gt; Bool)
-&gt; (Time -&gt; Time -&gt; Time)
-&gt; (Time -&gt; Time -&gt; Time)
-&gt; Ord Time
Time -&gt; Time -&gt; Bool
Time -&gt; Time -&gt; Ordering
Time -&gt; Time -&gt; Time
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Time -&gt; Time -&gt; Time
$cmin :: Time -&gt; Time -&gt; Time
max :: Time -&gt; Time -&gt; Time
$cmax :: Time -&gt; Time -&gt; Time
&gt;= :: Time -&gt; Time -&gt; Bool
$c&gt;= :: Time -&gt; Time -&gt; Bool
&gt; :: Time -&gt; Time -&gt; Bool
$c&gt; :: Time -&gt; Time -&gt; Bool
&lt;= :: Time -&gt; Time -&gt; Bool
$c&lt;= :: Time -&gt; Time -&gt; Bool
&lt; :: Time -&gt; Time -&gt; Bool
$c&lt; :: Time -&gt; Time -&gt; Bool
compare :: Time -&gt; Time -&gt; Ordering
$ccompare :: Time -&gt; Time -&gt; Ordering
$cp1Ord :: Eq Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Time -&gt; Rep Time x)
-&gt; (forall x. Rep Time x -&gt; Time) -&gt; Generic Time
forall x. Rep Time x -&gt; Time
forall x. Time -&gt; Rep Time x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Time x -&gt; Time
$cfrom :: forall x. Time -&gt; Rep Time x
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567096"><span id="local-6989586621680567098"><span id="local-6989586621680567100"><span id="local-6989586621680567102"><span id="local-6989586621680567104"><span id="local-6989586621680567106"><span id="local-6989586621680567108"><span id="local-6989586621680567110"><span class="annot"><span class="annottext">Int -&gt; Time
Time -&gt; Int
Time -&gt; [Time]
Time -&gt; Time
Time -&gt; Time -&gt; [Time]
Time -&gt; Time -&gt; Time -&gt; [Time]
(Time -&gt; Time)
-&gt; (Time -&gt; Time)
-&gt; (Int -&gt; Time)
-&gt; (Time -&gt; Int)
-&gt; (Time -&gt; [Time])
-&gt; (Time -&gt; Time -&gt; [Time])
-&gt; (Time -&gt; Time -&gt; [Time])
-&gt; (Time -&gt; Time -&gt; Time -&gt; [Time])
-&gt; Enum Time
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: Time -&gt; Time -&gt; Time -&gt; [Time]
$cenumFromThenTo :: Time -&gt; Time -&gt; Time -&gt; [Time]
enumFromTo :: Time -&gt; Time -&gt; [Time]
$cenumFromTo :: Time -&gt; Time -&gt; [Time]
enumFromThen :: Time -&gt; Time -&gt; [Time]
$cenumFromThen :: Time -&gt; Time -&gt; [Time]
enumFrom :: Time -&gt; [Time]
$cenumFrom :: Time -&gt; [Time]
fromEnum :: Time -&gt; Int
$cfromEnum :: Time -&gt; Int
toEnum :: Int -&gt; Time
$ctoEnum :: Int -&gt; Time
pred :: Time -&gt; Time
$cpred :: Time -&gt; Time
succ :: Time -&gt; Time
$csucc :: Time -&gt; Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567082"><span id="local-6989586621680567084"><span id="local-6989586621680567086"><span id="local-6989586621680567088"><span id="local-6989586621680567090"><span id="local-6989586621680567092"><span id="local-6989586621680567094"><span class="annot"><span class="annottext">Integer -&gt; Time
Time -&gt; Time
Time -&gt; Time -&gt; Time
(Time -&gt; Time -&gt; Time)
-&gt; (Time -&gt; Time -&gt; Time)
-&gt; (Time -&gt; Time -&gt; Time)
-&gt; (Time -&gt; Time)
-&gt; (Time -&gt; Time)
-&gt; (Time -&gt; Time)
-&gt; (Integer -&gt; Time)
-&gt; Num Time
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
fromInteger :: Integer -&gt; Time
$cfromInteger :: Integer -&gt; Time
signum :: Time -&gt; Time
$csignum :: Time -&gt; Time
abs :: Time -&gt; Time
$cabs :: Time -&gt; Time
negate :: Time -&gt; Time
$cnegate :: Time -&gt; Time
* :: Time -&gt; Time -&gt; Time
$c* :: Time -&gt; Time -&gt; Time
- :: Time -&gt; Time -&gt; Time
$c- :: Time -&gt; Time -&gt; Time
+ :: Time -&gt; Time -&gt; Time
$c+ :: Time -&gt; Time -&gt; Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567075"><span id="local-6989586621680567077"><span id="local-6989586621680567079"><span class="annot"><span class="annottext">Num Time
Num Time =&gt;
(Time -&gt; Time -&gt; Time)
-&gt; (Time -&gt; Time) -&gt; (TimeBase -&gt; Time) -&gt; Fractional Time
TimeBase -&gt; Time
Time -&gt; Time
Time -&gt; Time -&gt; Time
forall a.
Num a =&gt;
(a -&gt; a -&gt; a) -&gt; (a -&gt; a) -&gt; (TimeBase -&gt; a) -&gt; Fractional a
fromRational :: TimeBase -&gt; Time
$cfromRational :: TimeBase -&gt; Time
recip :: Time -&gt; Time
$crecip :: Time -&gt; Time
/ :: Time -&gt; Time -&gt; Time
$c/ :: Time -&gt; Time -&gt; Time
$cp1Fractional :: Num Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Fractional</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567071"><span class="annot"><span class="annottext">Num Time
Ord Time
(Num Time, Ord Time) =&gt; (Time -&gt; TimeBase) -&gt; Real Time
Time -&gt; TimeBase
forall a. (Num a, Ord a) =&gt; (a -&gt; TimeBase) -&gt; Real a
toRational :: Time -&gt; TimeBase
$ctoRational :: Time -&gt; TimeBase
$cp2Real :: Ord Time
$cp1Real :: Num Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Real</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680567059"><span id="local-6989586621680567061"><span id="local-6989586621680567063"><span id="local-6989586621680567065"><span id="local-6989586621680567067"><span class="annot"><span class="annottext">Fractional Time
Real Time
(Real Time, Fractional Time) =&gt;
(forall b. Integral b =&gt; Time -&gt; (b, Time))
-&gt; (forall b. Integral b =&gt; Time -&gt; b)
-&gt; (forall b. Integral b =&gt; Time -&gt; b)
-&gt; (forall b. Integral b =&gt; Time -&gt; b)
-&gt; (forall b. Integral b =&gt; Time -&gt; b)
-&gt; RealFrac Time
Time -&gt; b
Time -&gt; b
Time -&gt; b
Time -&gt; b
Time -&gt; (b, Time)
forall b. Integral b =&gt; Time -&gt; b
forall b. Integral b =&gt; Time -&gt; (b, Time)
forall a.
(Real a, Fractional a) =&gt;
(forall b. Integral b =&gt; a -&gt; (b, a))
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; (forall b. Integral b =&gt; a -&gt; b)
-&gt; RealFrac a
floor :: Time -&gt; b
$cfloor :: forall b. Integral b =&gt; Time -&gt; b
ceiling :: Time -&gt; b
$cceiling :: forall b. Integral b =&gt; Time -&gt; b
round :: Time -&gt; b
$cround :: forall b. Integral b =&gt; Time -&gt; b
truncate :: Time -&gt; b
$ctruncate :: forall b. Integral b =&gt; Time -&gt; b
properFraction :: Time -&gt; (b, Time)
$cproperFraction :: forall b. Integral b =&gt; Time -&gt; (b, Time)
$cp2RealFrac :: Fractional Time
$cp1RealFrac :: Real Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">RealFrac</span></a></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-comment">-- Time forms an affine space with durations as the underlying vector space, that is, we</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- can add a time to a duration to get a new time using '.+^', take the difference of two</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- times to get a duration using '.-.'. 'Time' forms an 'AffineSpace' with 'Duration' as</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- difference space.</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567054"><span id="local-6989586621680567057"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621680567053"><span class="annot"><span class="annottext">show :: Time -&gt; String
</span><a href="#local-6989586621680567053"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; String
</span><a href="Music.Time.Internal.Util.html#showRatio"><span class="hs-identifier hs-var">showRatio</span></a></span><span> </span><span class="annot"><span class="annottext">(TimeBase -&gt; String) -&gt; (Time -&gt; TimeBase) -&gt; Time -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; TimeBase
forall a. Real a =&gt; a -&gt; TimeBase
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toRational</span></a></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567046"><span id="local-6989586621680567048"><span id="local-6989586621680567050"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>  </span><span id="local-6989586621680567045"><span class="annot"><span class="annottext">toJSON :: Time -&gt; Value
</span><a href="#local-6989586621680567045"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621680567044"><span class="annot"><span class="annottext">x :: Time
</span><a href="#local-6989586621680567044"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Value) -&gt; Duration -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680567044"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Diff Time
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567040"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>  </span><span id="local-6989586621680567039"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Time
</span><a href="#local-6989586621680567039"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Time) -&gt; Parser Duration -&gt; Parser Time
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Diff Time -&gt; Time
forall p. AffineSpace p =&gt; p -&gt; Diff p -&gt; p
</span><span class="hs-operator hs-var">.+^</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Parser Duration -&gt; Parser Time)
-&gt; (Value -&gt; Parser Duration) -&gt; Value -&gt; Parser Time
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser Duration
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">parseJSON</span></a></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567033"><span id="local-6989586621680567035"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>  </span><span id="local-6989586621680567032"><span class="annot"><span class="annottext">&lt;&gt; :: Time -&gt; Time -&gt; Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(+)</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567026"><span id="local-6989586621680567028"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>  </span><span id="local-6989586621680567025"><span class="annot"><span class="annottext">mempty :: Time
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680567020"><span class="annot"><span class="hs-identifier hs-type">AdditiveGroup</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span>  </span><span id="local-6989586621680567019"><span class="annot"><span class="annottext">zeroV :: Time
</span><a href="#local-6989586621680567019"><span class="hs-identifier hs-var hs-var hs-var hs-var">zeroV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621680567018"><span class="annot"><span class="annottext">^+^ :: Time -&gt; Time -&gt; Time
</span><a href="#local-6989586621680567018"><span class="hs-operator hs-var hs-var hs-var hs-var">(^+^)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(+)</span></a></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span>  </span><span id="local-6989586621680567017"><span class="annot"><span class="annottext">negateV :: Time -&gt; Time
</span><a href="#local-6989586621680567017"><span class="hs-identifier hs-var hs-var hs-var hs-var">negateV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">negate</span></a></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VectorSpace</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Scalar"><span class="annot"><span class="hs-identifier hs-var">Scalar</span></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span id="local-6989586621680567014"><span class="annot"><a href="#local-6989586621680567014"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680567013"><span class="annot"><span class="annottext">*^ :: Scalar Time -&gt; Time -&gt; Time
</span><a href="#local-6989586621680567013"><span class="hs-operator hs-var hs-var hs-var hs-var">*^</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span id="local-6989586621680567012"><span class="annot"><span class="annottext">y :: TimeBase
</span><a href="#local-6989586621680567012"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; Time
</span><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-var">Time</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimeBase
</span><a href="#local-6989586621680567014"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; TimeBase -&gt; TimeBase
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase
</span><a href="#local-6989586621680567012"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineSpace</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Diff"><span class="annot"><span class="hs-identifier hs-var">Diff</span></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span id="local-6989586621680567007"><span class="annot"><span class="annottext">x :: TimeBase
</span><a href="#local-6989586621680567007"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680567006"><span class="annot"><span class="annottext">.-. :: Time -&gt; Time -&gt; Diff Time
</span><a href="#local-6989586621680567006"><span class="hs-operator hs-var hs-var hs-var hs-var">.-.</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span id="local-6989586621680567005"><span class="annot"><span class="annottext">y :: TimeBase
</span><a href="#local-6989586621680567005"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; Duration
</span><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-var">Duration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimeBase
</span><a href="#local-6989586621680567007"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; TimeBase -&gt; TimeBase
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase
</span><a href="#local-6989586621680567005"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span id="local-6989586621680567004"><span class="annot"><span class="annottext">x :: TimeBase
</span><a href="#local-6989586621680567004"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680567003"><span class="annot"><span class="annottext">.+^ :: Time -&gt; Diff Time -&gt; Time
</span><a href="#local-6989586621680567003"><span class="hs-operator hs-var hs-var hs-var hs-var">.+^</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span id="local-6989586621680567002"><span class="annot"><a href="#local-6989586621680567002"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; Time
</span><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-var">Time</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimeBase
</span><a href="#local-6989586621680567004"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase -&gt; TimeBase -&gt; TimeBase
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">TimeBase
</span><a href="#local-6989586621680567002"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- | Interpret as durations from 0.</span><span>
</span><span id="line-262"></span><span class="hs-comment">--</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- &gt; toAbsoluteTime (toRelativeTime xs) == xs</span><span>
</span><span id="line-264"></span><span class="hs-comment">--</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- &gt; lenght xs == length (toRelativeTime xs)</span><span>
</span><span id="line-266"></span><span class="hs-comment">--</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- &gt;&gt;&gt; toAbsoluteTime [1,1,1] :: [Time]</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- [1,2,3]</span><span>
</span><span id="line-269"></span><span class="annot"><a href="Music.Time.Types.html#toAbsoluteTime"><span class="hs-identifier hs-type">toAbsoluteTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span id="toAbsoluteTime"><span class="annot"><span class="annottext">toAbsoluteTime :: [Duration] -&gt; [Time]
</span><a href="Music.Time.Types.html#toAbsoluteTime"><span class="hs-identifier hs-var hs-var">toAbsoluteTime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Time] -&gt; [Time]
forall a. [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="annot"><span class="annottext">([Time] -&gt; [Time])
-&gt; ([Duration] -&gt; [Time]) -&gt; [Duration] -&gt; [Time]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; [Diff Time] -&gt; [Time]
forall p. AffineSpace p =&gt; p -&gt; [Diff p] -&gt; [p]
</span><a href="Data.AffineSpace.Point.Offsets.html#offsetPoints"><span class="hs-identifier hs-var">offsetPoints</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- | Duration between 0 and first value and so on until the last.</span><span>
</span><span id="line-273"></span><span class="hs-comment">--</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- &gt; toAbsoluteTime (toRelativeTime xs) == xs</span><span>
</span><span id="line-275"></span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- &gt; lenght xs == length (toRelativeTime xs)</span><span>
</span><span id="line-277"></span><span class="hs-comment">--</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- &gt;&gt;&gt; toRelativeTime [1,2,3]</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- [1,1,1]</span><span>
</span><span id="line-280"></span><span class="annot"><a href="Music.Time.Types.html#toRelativeTime"><span class="hs-identifier hs-type">toRelativeTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-281"></span><span id="toRelativeTime"><span class="annot"><span class="annottext">toRelativeTime :: [Time] -&gt; [Duration]
</span><a href="Music.Time.Types.html#toRelativeTime"><span class="hs-identifier hs-var hs-var">toRelativeTime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Duration] -&gt; [Duration]
forall a. [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="annot"><span class="annottext">([Duration] -&gt; [Duration])
-&gt; ([Time] -&gt; [Duration]) -&gt; [Time] -&gt; [Duration]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; [Time] -&gt; [Diff Time]
forall p. AffineSpace p =&gt; p -&gt; [p] -&gt; [Diff p]
</span><a href="Data.AffineSpace.Point.Offsets.html#pointOffsets"><span class="hs-identifier hs-var">pointOffsets</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- TODO rename these two...</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- | Duration between values until the last, then up to the given final value.</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- &gt; lenght xs == length (toRelativeTime xs)</span><span>
</span><span id="line-287"></span><span class="annot"><a href="Music.Time.Types.html#toRelativeTimeN%27"><span class="hs-identifier hs-type">toRelativeTimeN'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-288"></span><span id="toRelativeTimeN%27"><span class="annot"><span class="annottext">toRelativeTimeN' :: Time -&gt; [Time] -&gt; [Duration]
</span><a href="Music.Time.Types.html#toRelativeTimeN%27"><span class="hs-identifier hs-var hs-var">toRelativeTimeN'</span></a></span></span><span> </span><span id="local-6989586621680566998"><span class="annot"><span class="annottext">or :: Time
</span><a href="#local-6989586621680566998"><span class="hs-identifier hs-var">or</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time, [Duration]) -&gt; [Duration]
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Time, [Duration]) -&gt; [Duration])
-&gt; ([Time] -&gt; (Time, [Duration])) -&gt; [Time] -&gt; [Duration]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Time -&gt; (Time, Duration))
-&gt; Time -&gt; [Time] -&gt; (Time, [Duration])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.mapAccumR</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; (Time, Duration)
forall p. AffineSpace p =&gt; p -&gt; p -&gt; (p, Diff p)
</span><a href="#local-6989586621680566997"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566998"><span class="hs-identifier hs-var">or</span></a></span><span>
</span><span id="line-289"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-290"></span><span>    </span><span id="local-6989586621680566997"><span class="annot"><span class="annottext">g :: p -&gt; p -&gt; (p, Diff p)
</span><a href="#local-6989586621680566997"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621680566996"><span class="annot"><span class="annottext">prev :: p
</span><a href="#local-6989586621680566996"><span class="hs-identifier hs-var">prev</span></a></span></span><span> </span><span id="local-6989586621680566995"><span class="annot"><span class="annottext">p :: p
</span><a href="#local-6989586621680566995"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680566995"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680566996"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="annot"><span class="annottext">p -&gt; p -&gt; Diff p
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680566995"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- Same as toRelativeTimeN' but always returns 0 as the last value...</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- TODO remove</span><span>
</span><span id="line-294"></span><span class="annot"><a href="Music.Time.Types.html#toRelativeTimeN"><span class="hs-identifier hs-type">toRelativeTimeN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-295"></span><span id="toRelativeTimeN"><span class="annot"><span class="annottext">toRelativeTimeN :: [Time] -&gt; [Duration]
</span><a href="Music.Time.Types.html#toRelativeTimeN"><span class="hs-identifier hs-var hs-var">toRelativeTimeN</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-296"></span><span class="annot"><a href="Music.Time.Types.html#toRelativeTimeN"><span class="hs-identifier hs-var">toRelativeTimeN</span></a></span><span> </span><span id="local-6989586621680566994"><span class="annot"><span class="annottext">xs :: [Time]
</span><a href="#local-6989586621680566994"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; [Time] -&gt; [Duration]
</span><a href="Music.Time.Types.html#toRelativeTimeN%27"><span class="hs-identifier hs-var">toRelativeTimeN'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Time] -&gt; Time
forall a. [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">[Time]
</span><a href="#local-6989586621680566994"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Time]
</span><a href="#local-6989586621680566994"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- A 'Span' represents a /time interval/. It has a starting point called 'onset' and</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- an ending point called 'offset'.</span><span>
</span><span id="line-301"></span><span class="hs-comment">--</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- Another way of looking at 'Span' is that it represents a time transformation where</span><span>
</span><span id="line-303"></span><span class="hs-comment">-- onset is translation and duration is scaling.</span><span>
</span><span id="line-304"></span><span class="hs-comment">--</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- This type is sometimes known as /arc/ or /era/.</span><span>
</span><span id="line-306"></span><span class="hs-keyword">newtype</span><span> </span><span id="Span"><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Span"><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span></span><span> </span><span class="hs-special">{</span><span id="getSpan"><span class="annot"><span class="annottext">Span -&gt; (Time, Duration)
</span><a href="Music.Time.Types.html#getSpan"><span class="hs-identifier hs-var hs-var">getSpan</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566987"><span id="local-6989586621680566989"><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
(Span -&gt; Span -&gt; Bool) -&gt; (Span -&gt; Span -&gt; Bool) -&gt; Eq Span
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Span -&gt; Span -&gt; Bool
$c/= :: Span -&gt; Span -&gt; Bool
== :: Span -&gt; Span -&gt; Bool
$c== :: Span -&gt; Span -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566972"><span id="local-6989586621680566974"><span id="local-6989586621680566976"><span id="local-6989586621680566978"><span id="local-6989586621680566980"><span id="local-6989586621680566982"><span id="local-6989586621680566984"><span class="annot"><span class="annottext">Eq Span
Eq Span =&gt;
(Span -&gt; Span -&gt; Ordering)
-&gt; (Span -&gt; Span -&gt; Bool)
-&gt; (Span -&gt; Span -&gt; Bool)
-&gt; (Span -&gt; Span -&gt; Bool)
-&gt; (Span -&gt; Span -&gt; Bool)
-&gt; (Span -&gt; Span -&gt; Span)
-&gt; (Span -&gt; Span -&gt; Span)
-&gt; Ord Span
Span -&gt; Span -&gt; Bool
Span -&gt; Span -&gt; Ordering
Span -&gt; Span -&gt; Span
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Span -&gt; Span -&gt; Span
$cmin :: Span -&gt; Span -&gt; Span
max :: Span -&gt; Span -&gt; Span
$cmax :: Span -&gt; Span -&gt; Span
&gt;= :: Span -&gt; Span -&gt; Bool
$c&gt;= :: Span -&gt; Span -&gt; Bool
&gt; :: Span -&gt; Span -&gt; Bool
$c&gt; :: Span -&gt; Span -&gt; Bool
&lt;= :: Span -&gt; Span -&gt; Bool
$c&lt;= :: Span -&gt; Span -&gt; Bool
&lt; :: Span -&gt; Span -&gt; Bool
$c&lt; :: Span -&gt; Span -&gt; Bool
compare :: Span -&gt; Span -&gt; Ordering
$ccompare :: Span -&gt; Span -&gt; Ordering
$cp1Ord :: Eq Span
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- You can create a span using the constructors '&lt;-&gt;', '&lt;-&lt;' and '&gt;-&gt;'. Note that:</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- &gt; a &gt;-&gt; b = a         &lt;-&gt; (a .+^ b)</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- &gt; a &lt;-&lt; b = (b .-^ a) &lt;-&gt; b</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- &gt; a &lt;-&gt; b = a         &gt;-&gt; (b .-. a)</span><span>
</span><span id="line-314"></span><span class="hs-comment">--</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- To create and destruct a span (in any of its incarnations), use the provided isomorphisms:</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- 'Span' is a 'Semigroup', 'Monoid' and 'AdditiveGroup':</span><span>
</span><span id="line-318"></span><span class="hs-comment">--</span><span>
</span><span id="line-319"></span><span class="hs-comment">-- - To convert a span to a pair, use @s^.'range'@.</span><span>
</span><span id="line-320"></span><span class="hs-comment">--</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- - To construct a span from a pair, use @(t, u)^.'from' 'range'@.</span><span>
</span><span id="line-322"></span><span class="hs-comment">--</span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-comment">--</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">-- $musicTimeSpanIsos</span><span>
</span><span id="line-327"></span><span class="hs-comment">--</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- &gt;&gt;&gt; (2 &lt;-&gt; 3)^.onsetAndOffset</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- (2,3)</span><span>
</span><span id="line-330"></span><span class="hs-comment">--</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- &gt;&gt;&gt; (2 &lt;-&gt; 3)^.onsetAndDuration</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- (2,1)</span><span>
</span><span id="line-333"></span><span class="hs-comment">--</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- &gt;&gt;&gt; (10 &gt;-&gt; 5)^.onsetAndOffset</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- (10,15)</span><span>
</span><span id="line-336"></span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- &gt;&gt;&gt; (10 &gt;-&gt; 5)^.onsetAndDuration</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- (10,5)</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566967"><span id="local-6989586621680566970"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>  </span><span id="local-6989586621680566966"><span class="annot"><span class="annottext">show :: Span -&gt; String
</span><a href="#local-6989586621680566966"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; String
</span><a href="Music.Time.Types.html#showOnsetAndOffset"><span class="hs-identifier hs-var">showOnsetAndOffset</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">-- Which form should we use?</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566959"><span id="local-6989586621680566961"><span id="local-6989586621680566963"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621680566958"><span class="annot"><span class="annottext">toJSON :: Span -&gt; Value
</span><a href="#local-6989586621680566958"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566956"><span class="annot"><span class="annottext">a :: Time
</span><a href="#local-6989586621680566956"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566955"><span class="annot"><span class="annottext">b :: Time
</span><a href="#local-6989586621680566955"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">JSON.object</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;onset&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566956"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;offset&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566955"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566951"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621680566950"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Span
</span><a href="#local-6989586621680566950"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">JSON.Object</span></a></span><span> </span><span id="local-6989586621680566948"><span class="annot"><span class="annottext">x :: Object
</span><a href="#local-6989586621680566948"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Time -&gt; Span) -&gt; Parser Time -&gt; Parser Time -&gt; Parser Span
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">liftA2</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-var">(&lt;-&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Time
</span><a href="#local-6989586621680566946"><span class="hs-identifier hs-var">onset</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Time
</span><a href="#local-6989586621680566945"><span class="hs-identifier hs-var">offset</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-351"></span><span>      </span><span id="local-6989586621680566946"><span class="annot"><span class="annottext">onset :: Parser Time
</span><a href="#local-6989586621680566946"><span class="hs-identifier hs-var hs-var">onset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680566948"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Time
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-operator hs-var">JSON..:</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;onset&quot;</span></span><span>
</span><span id="line-352"></span><span>      </span><span id="local-6989586621680566945"><span class="annot"><span class="annottext">offset :: Parser Time
</span><a href="#local-6989586621680566945"><span class="hs-identifier hs-var hs-var">offset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680566948"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Time
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-operator hs-var">JSON..:</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;offset&quot;</span></span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">parseJSON</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser Span
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mzero</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566938"><span id="local-6989586621680566940"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-356"></span><span>  </span><span id="local-6989586621680566937"><span class="annot"><span class="annottext">&lt;&gt; :: Span -&gt; Span -&gt; Span
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Span
forall v. AdditiveGroup v =&gt; v -&gt; v -&gt; v
</span><span class="hs-operator hs-var">(^+^)</span></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566931"><span id="local-6989586621680566933"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-359"></span><span>  </span><span id="local-6989586621680566930"><span class="annot"><span class="annottext">mempty :: Span
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span
forall v. AdditiveGroup v =&gt; v
</span><span class="hs-identifier hs-var">zeroV</span></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566925"><span class="annot"><span class="hs-identifier hs-type">AdditiveGroup</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621680566924"><span class="annot"><span class="annottext">zeroV :: Span
</span><a href="#local-6989586621680566924"><span class="hs-identifier hs-var hs-var hs-var hs-var">zeroV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566923"><span class="annot"><span class="annottext">t1 :: Time
</span><a href="#local-6989586621680566923"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566922"><span class="annot"><span class="annottext">d1 :: Duration
</span><a href="#local-6989586621680566922"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680566921"><span class="annot"><span class="annottext">^+^ :: Span -&gt; Span -&gt; Span
</span><a href="#local-6989586621680566921"><span class="hs-operator hs-var hs-var hs-var hs-var">^+^</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566920"><span class="annot"><span class="annottext">t2 :: Time
</span><a href="#local-6989586621680566920"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566919"><span class="annot"><span class="annottext">d2 :: Duration
</span><a href="#local-6989586621680566919"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time, Duration) -&gt; Span
</span><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566923"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall v. AdditiveGroup v =&gt; v -&gt; v -&gt; v
</span><span class="hs-operator hs-var">^+^</span></span><span> </span><span class="annot"><span class="annottext">Scalar Time
Duration
</span><a href="#local-6989586621680566922"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">Scalar Time -&gt; Time -&gt; Time
forall v. VectorSpace v =&gt; Scalar v -&gt; v -&gt; v
</span><span class="hs-operator hs-var">*^</span></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566920"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566922"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566919"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621680566918"><span class="annot"><span class="annottext">negateV :: Span -&gt; Span
</span><a href="#local-6989586621680566918"><span class="hs-identifier hs-var hs-var hs-var hs-var">negateV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566917"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566917"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566916"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566916"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time, Duration) -&gt; Span
</span><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566917"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Duration -&gt; Time
forall v s.
(VectorSpace v, s ~ Scalar v, Fractional s) =&gt;
v -&gt; s -&gt; v
</span><span class="hs-operator hs-var">^/</span></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566916"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a. Fractional a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">recip</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566916"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VectorSpace</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Scalar"><span class="annot"><span class="hs-identifier hs-var">Scalar</span></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span>  </span><span id="local-6989586621680566911"><span class="annot"><span class="annottext">x :: Scalar Span
</span><a href="#local-6989586621680566911"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680566910"><span class="annot"><span class="annottext">*^ :: Scalar Span -&gt; Span -&gt; Span
</span><a href="#local-6989586621680566910"><span class="hs-operator hs-var hs-var hs-var hs-var">*^</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566909"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566909"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566908"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566908"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time, Duration) -&gt; Span
</span><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scalar Span
Scalar Time
</span><a href="#local-6989586621680566911"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Scalar Time -&gt; Time -&gt; Time
forall v. VectorSpace v =&gt; Scalar v -&gt; v -&gt; v
</span><span class="hs-operator hs-var">*^</span></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566909"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Scalar Span
Scalar Duration
</span><a href="#local-6989586621680566911"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Scalar Duration -&gt; Duration -&gt; Duration
forall v. VectorSpace v =&gt; Scalar v -&gt; v -&gt; v
</span><span class="hs-operator hs-var">*^</span></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566908"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">--</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- a &gt;-&gt; b = a         &lt;-&gt; (a .+^ b)</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- a &lt;-&lt; b = (b .-^ a) &lt;-&gt; b</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- a &lt;-&gt; b = a         &gt;-&gt; (b .-. a)</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- (b .-^ a) &lt;-&gt; b = a &lt;-&lt; b</span><span>
</span><span id="line-380"></span><span class="hs-comment">--</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">6</span><span> </span><span class="annot"><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-type">&lt;-&gt;</span></a></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">6</span><span> </span><span class="annot"><a href="Music.Time.Types.html#%3E-%3E"><span class="hs-operator hs-type">&gt;-&gt;</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">6</span><span> </span><span class="annot"><a href="Music.Time.Types.html#%3C-%3C"><span class="hs-operator hs-type">&lt;-&lt;</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- @t \&lt;-\&gt; u@ represents the span between @t@ and @u@.</span><span>
</span><span id="line-390"></span><span class="annot"><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-type">(&lt;-&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-391"></span><span id="local-6989586621680566907"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566907"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="%3C-%3E"><span class="annot"><span class="annottext">&lt;-&gt; :: Time -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-var hs-var">&lt;-&gt;</span></a></span></span><span> </span><span id="local-6989586621680566906"><span class="annot"><span class="annottext">u :: Time
</span><a href="#local-6989586621680566906"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566907"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Duration -&gt; Span
</span><a href="Music.Time.Types.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566906"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Diff Time
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566907"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- @t &gt;-&gt; d@ represents the span between @t@ and @t .+^ d@.</span><span>
</span><span id="line-395"></span><span class="annot"><a href="Music.Time.Types.html#%3E-%3E"><span class="hs-operator hs-type">(&gt;-&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-396"></span><span id="%3E-%3E"><span class="annot"><span class="annottext">&gt;-&gt; :: Time -&gt; Duration -&gt; Span
</span><a href="Music.Time.Types.html#%3E-%3E"><span class="hs-operator hs-var hs-var">(&gt;-&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Time, Duration) -&gt; Span) -&gt; Time -&gt; Duration -&gt; Span
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">curry</span></a></span><span> </span><span class="annot"><span class="annottext">(Time, Duration) -&gt; Span
</span><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- @d \&lt;-\&gt; t@ represents the span between @t .-^ d@ and @t@.</span><span>
</span><span id="line-400"></span><span class="annot"><a href="Music.Time.Types.html#%3C-%3C"><span class="hs-operator hs-type">(&lt;-&lt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-401"></span><span id="local-6989586621680566904"><span class="annot"><span class="annottext">a :: Duration
</span><a href="#local-6989586621680566904"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="%3C-%3C"><span class="annot"><span class="annottext">&lt;-&lt; :: Duration -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3C"><span class="hs-operator hs-var hs-var">&lt;-&lt;</span></a></span></span><span> </span><span id="local-6989586621680566903"><span class="annot"><span class="annottext">b :: Time
</span><a href="#local-6989586621680566903"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566903"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Diff Time -&gt; Time
forall p. AffineSpace p =&gt; p -&gt; Diff p -&gt; p
</span><span class="hs-operator hs-var">.-^</span></span><span> </span><span class="annot"><span class="annottext">Diff Time
Duration
</span><a href="#local-6989586621680566904"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566903"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- View a span as pair of onset and offset.</span><span>
</span><span id="line-405"></span><span class="annot"><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-type">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Iso'</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span id="onsetAndOffset"><span class="annot"><span class="annottext">onsetAndOffset :: p (Time, Time) (f (Time, Time)) -&gt; p Span (f Span)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var hs-var">onsetAndOffset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; (Time, Time))
-&gt; ((Time, Time) -&gt; Span) -&gt; Iso' Span (Time, Time)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680566900"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566900"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566899"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566899"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566898"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566898"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; (Time, Duration)
</span><a href="Music.Time.Types.html#getSpan"><span class="hs-identifier hs-var hs-var">getSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566900"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566899"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566899"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Diff Time -&gt; Time
forall p. AffineSpace p =&gt; p -&gt; Diff p -&gt; p
</span><span class="hs-operator hs-var">.+^</span></span><span> </span><span class="annot"><span class="annottext">Diff Time
Duration
</span><a href="#local-6989586621680566898"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Time -&gt; Time -&gt; Span) -&gt; (Time, Time) -&gt; Span
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3E"><span class="hs-operator hs-var">(&lt;-&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- View a span as a pair of onset and duration.</span><span>
</span><span id="line-410"></span><span class="annot"><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-type">onsetAndDuration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Iso'</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span id="onsetAndDuration"><span class="annot"><span class="annottext">onsetAndDuration :: p (Time, Duration) (f (Time, Duration)) -&gt; p Span (f Span)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var hs-var">onsetAndDuration</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; (Time, Duration))
-&gt; ((Time, Duration) -&gt; Span)
-&gt; Iso Span Span (Time, Duration) (Time, Duration)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Span -&gt; (Time, Duration)
</span><a href="Music.Time.Types.html#getSpan"><span class="hs-identifier hs-var hs-var">getSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Time, Duration) -&gt; Span
</span><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-var">Span</span></a></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-414"></span><span class="hs-comment">-- View a span as a pair of duration and offset.</span><span>
</span><span id="line-415"></span><span class="annot"><a href="Music.Time.Types.html#durationAndOffset"><span class="hs-identifier hs-type">durationAndOffset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Iso'</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span id="durationAndOffset"><span class="annot"><span class="annottext">durationAndOffset :: p (Duration, Time) (f (Duration, Time)) -&gt; p Span (f Span)
</span><a href="Music.Time.Types.html#durationAndOffset"><span class="hs-identifier hs-var hs-var">durationAndOffset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; (Duration, Time))
-&gt; ((Duration, Time) -&gt; Span)
-&gt; Iso Span Span (Duration, Time) (Duration, Time)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680566896"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566896"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566895"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566895"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566894"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566894"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; (Time, Duration)
</span><a href="Music.Time.Types.html#getSpan"><span class="hs-identifier hs-var hs-var">getSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566896"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566894"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566895"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Diff Time -&gt; Time
forall p. AffineSpace p =&gt; p -&gt; Diff p -&gt; p
</span><span class="hs-operator hs-var">.+^</span></span><span> </span><span class="annot"><span class="annottext">Diff Time
Duration
</span><a href="#local-6989586621680566894"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Duration -&gt; Time -&gt; Span) -&gt; (Duration, Time) -&gt; Span
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Time -&gt; Span
</span><a href="Music.Time.Types.html#%3C-%3C"><span class="hs-operator hs-var">(&lt;-&lt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- Show a span as a pair of onset and offset, i.e. @t1 \&lt;-\&gt; t2@.</span><span>
</span><span id="line-420"></span><span class="annot"><a href="Music.Time.Types.html#showOnsetAndOffset"><span class="hs-identifier hs-type">showOnsetAndOffset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-421"></span><span id="showOnsetAndOffset"><span class="annot"><span class="annottext">showOnsetAndOffset :: Span -&gt; String
</span><a href="Music.Time.Types.html#showOnsetAndOffset"><span class="hs-identifier hs-var hs-var">showOnsetAndOffset</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566893"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566893"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566892"><span class="annot"><span class="annottext">u :: Time
</span><a href="#local-6989586621680566892"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566893"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot; &lt;-&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566892"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- Show a span as a pair of onset and duration, i.e. @t &gt;-&gt; d@.</span><span>
</span><span id="line-425"></span><span class="annot"><a href="Music.Time.Types.html#showOnsetAndDuration"><span class="hs-identifier hs-type">showOnsetAndDuration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-426"></span><span id="showOnsetAndDuration"><span class="annot"><span class="annottext">showOnsetAndDuration :: Span -&gt; String
</span><a href="Music.Time.Types.html#showOnsetAndDuration"><span class="hs-identifier hs-var hs-var">showOnsetAndDuration</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
-&gt; Span -&gt; (Time, Duration)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566891"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566891"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566890"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566890"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566891"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot; &gt;-&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566890"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- Show a span as a pair of duration and offset, i.e. @t &lt;-&lt; d@.</span><span>
</span><span id="line-430"></span><span class="annot"><a href="Music.Time.Types.html#showDurationAndOffset"><span class="hs-identifier hs-type">showDurationAndOffset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-431"></span><span id="showDurationAndOffset"><span class="annot"><span class="annottext">showDurationAndOffset :: Span -&gt; String
</span><a href="Music.Time.Types.html#showDurationAndOffset"><span class="hs-identifier hs-var hs-var">showDurationAndOffset</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Duration, Time) Span (Duration, Time)
-&gt; Span -&gt; (Duration, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Duration, Time) Span (Duration, Time)
Iso Span Span (Duration, Time) (Duration, Time)
</span><a href="Music.Time.Types.html#durationAndOffset"><span class="hs-identifier hs-var">durationAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566889"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566889"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566888"><span class="annot"><span class="annottext">u :: Time
</span><a href="#local-6989586621680566888"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566889"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot; &lt;-&lt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566888"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- Access the delay component in a span.</span><span>
</span><span id="line-435"></span><span class="annot"><a href="Music.Time.Types.html#delayComponent"><span class="hs-identifier hs-type">delayComponent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span>
</span><span id="line-436"></span><span id="delayComponent"><span class="annot"><span class="annottext">delayComponent :: Span -&gt; Time
</span><a href="Music.Time.Types.html#delayComponent"><span class="hs-identifier hs-var hs-var">delayComponent</span></a></span></span><span> </span><span id="local-6989586621680566887"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566887"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566887"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Getting Time Span Time -&gt; Time
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">((Time, Duration) -&gt; Const Time (Time, Duration))
-&gt; Span -&gt; Const Time Span
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="annot"><span class="annottext">(((Time, Duration) -&gt; Const Time (Time, Duration))
 -&gt; Span -&gt; Const Time Span)
-&gt; ((Time -&gt; Const Time Time)
    -&gt; (Time, Duration) -&gt; Const Time (Time, Duration))
-&gt; Getting Time Span Time
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Const Time Time)
-&gt; (Time, Duration) -&gt; Const Time (Time, Duration)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- Access the stretch component in a span.</span><span>
</span><span id="line-440"></span><span class="annot"><a href="Music.Time.Types.html#stretchComponent"><span class="hs-identifier hs-type">stretchComponent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-441"></span><span id="stretchComponent"><span class="annot"><span class="annottext">stretchComponent :: Span -&gt; Duration
</span><a href="Music.Time.Types.html#stretchComponent"><span class="hs-identifier hs-var hs-var">stretchComponent</span></a></span></span><span> </span><span id="local-6989586621680566884"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566884"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566884"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Getting Duration Span Duration -&gt; Duration
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">((Time, Duration) -&gt; Const Duration (Time, Duration))
-&gt; Span -&gt; Const Duration Span
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="annot"><span class="annottext">(((Time, Duration) -&gt; Const Duration (Time, Duration))
 -&gt; Span -&gt; Const Duration Span)
-&gt; ((Duration -&gt; Const Duration Duration)
    -&gt; (Time, Duration) -&gt; Const Duration (Time, Duration))
-&gt; Getting Duration Span Duration
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Const Duration Duration)
-&gt; (Time, Duration) -&gt; Const Duration (Time, Duration)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- A prism to the subset of 'Span' that performs a delay but no stretch.</span><span>
</span><span id="line-445"></span><span class="annot"><a href="Music.Time.Types.html#fixedDurationSpan"><span class="hs-identifier hs-type">fixedDurationSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span>
</span><span id="line-446"></span><span id="fixedDurationSpan"><span class="annot"><span class="annottext">fixedDurationSpan :: p Time (f Time) -&gt; p Span (f Span)
</span><a href="Music.Time.Types.html#fixedDurationSpan"><span class="hs-identifier hs-var hs-var">fixedDurationSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Span) -&gt; (Span -&gt; Maybe Time) -&gt; Prism Span Span Time Time
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680566880"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566880"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Getting Span (Time, Duration) Span -&gt; (Time, Duration) -&gt; Span
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnIso Span Span (Time, Duration) (Time, Duration)
-&gt; Iso (Time, Duration) (Time, Duration) Span Span
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso Span Span (Time, Duration) (Time, Duration)
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566880"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Span -&gt; Maybe Time) -&gt; p Time (f Time) -&gt; p Span (f Span))
-&gt; (Span -&gt; Maybe Time) -&gt; p Time (f Time) -&gt; p Span (f Span)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680566878"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566878"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
-&gt; Span -&gt; (Time, Duration)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566878"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680566877"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566877"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Maybe Time
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566877"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Time
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- A prism to the subset of 'Span' that performs a stretch but no delay.</span><span>
</span><span id="line-452"></span><span class="annot"><a href="Music.Time.Types.html#fixedOnsetSpan"><span class="hs-identifier hs-type">fixedOnsetSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-453"></span><span id="fixedOnsetSpan"><span class="annot"><span class="annottext">fixedOnsetSpan :: p Duration (f Duration) -&gt; p Span (f Span)
</span><a href="Music.Time.Types.html#fixedOnsetSpan"><span class="hs-identifier hs-var hs-var">fixedOnsetSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Span)
-&gt; (Span -&gt; Maybe Duration) -&gt; Prism Span Span Duration Duration
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680566876"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566876"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Getting Span (Time, Duration) Span -&gt; (Time, Duration) -&gt; Span
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnIso Span Span (Time, Duration) (Time, Duration)
-&gt; Iso (Time, Duration) (Time, Duration) Span Span
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso Span Span (Time, Duration) (Time, Duration)
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566876"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Span -&gt; Maybe Duration)
 -&gt; p Duration (f Duration) -&gt; p Span (f Span))
-&gt; (Span -&gt; Maybe Duration)
-&gt; p Duration (f Duration)
-&gt; p Span (f Span)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680566875"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566875"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
-&gt; Span -&gt; (Time, Duration)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
Iso Span Span (Time, Duration) (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566875"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-special">(</span><span class="hs-number">0</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566874"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680566874"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Maybe Duration
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680566874"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Duration
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="hs-comment">--</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-comment">-- $forwardBackWardEmpty</span><span>
</span><span id="line-460"></span><span class="hs-comment">--</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- A span is either /forward/, /backward/ or /empty/.</span><span>
</span><span id="line-462"></span><span class="hs-comment">--</span><span>
</span><span id="line-463"></span><span class="hs-comment">-- @any id [isForwardSpan x, isBackwardSpan x, isDegenerateSpan x] == True@</span><span>
</span><span id="line-464"></span><span class="hs-comment">-- @all not [isForwardSpan x, isBackwardSpan x, isDegenerateSpan x] == False@</span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-467"></span><span class="hs-comment">-- Whether the given span has a positive duration, i.e. whether its 'onset' is before its 'offset'.</span><span>
</span><span id="line-468"></span><span class="annot"><a href="Music.Time.Types.html#isForwardSpan"><span class="hs-identifier hs-type">isForwardSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-469"></span><span id="isForwardSpan"><span class="annot"><span class="annottext">isForwardSpan :: Span -&gt; Bool
</span><a href="Music.Time.Types.html#isForwardSpan"><span class="hs-identifier hs-var hs-var">isForwardSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Bool) -&gt; (Span -&gt; Duration) -&gt; Span -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">signum</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Duration) -&gt; (Span -&gt; Duration) -&gt; Span -&gt; Duration
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Duration
</span><a href="Music.Time.Types.html#_durationS"><span class="hs-identifier hs-var">_durationS</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- Whether the given span has a negative duration, i.e. whether its 'offset' is before its 'onset'.</span><span>
</span><span id="line-473"></span><span class="annot"><a href="Music.Time.Types.html#isBackwardSpan"><span class="hs-identifier hs-type">isBackwardSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-474"></span><span id="isBackwardSpan"><span class="annot"><span class="annottext">isBackwardSpan :: Span -&gt; Bool
</span><a href="Music.Time.Types.html#isBackwardSpan"><span class="hs-identifier hs-var hs-var">isBackwardSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Bool) -&gt; (Span -&gt; Duration) -&gt; Span -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">signum</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Duration) -&gt; (Span -&gt; Duration) -&gt; Span -&gt; Duration
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Duration
</span><a href="Music.Time.Types.html#_durationS"><span class="hs-identifier hs-var">_durationS</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-477"></span><span class="hs-comment">-- Whether the given span is empty, i.e. whether its 'onset' and 'offset' are equivalent.</span><span>
</span><span id="line-478"></span><span class="annot"><a href="Music.Time.Types.html#isDegenerateSpan"><span class="hs-identifier hs-type">isDegenerateSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-479"></span><span id="isDegenerateSpan"><span class="annot"><span class="annottext">isDegenerateSpan :: Span -&gt; Bool
</span><a href="Music.Time.Types.html#isDegenerateSpan"><span class="hs-identifier hs-var hs-var">isDegenerateSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Bool) -&gt; (Span -&gt; Duration) -&gt; Span -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">signum</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Duration) -&gt; (Span -&gt; Duration) -&gt; Span -&gt; Duration
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Duration
</span><a href="Music.Time.Types.html#_durationS"><span class="hs-identifier hs-var">_durationS</span></a></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-482"></span><span class="hs-comment">-- Reflect a span through its midpoint.</span><span>
</span><span id="line-483"></span><span class="annot"><a href="Music.Time.Types.html#reverseSpan"><span class="hs-identifier hs-type">reverseSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-484"></span><span id="reverseSpan"><span class="annot"><span class="annottext">reverseSpan :: Span -&gt; Span
</span><a href="Music.Time.Types.html#reverseSpan"><span class="hs-identifier hs-var hs-var">reverseSpan</span></a></span></span><span> </span><span id="local-6989586621680566869"><span class="annot"><span class="annottext">s :: Span
</span><a href="#local-6989586621680566869"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Span -&gt; Span
</span><a href="Music.Time.Types.html#reflectSpan"><span class="hs-identifier hs-var">reflectSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_midpointS"><span class="hs-identifier hs-var">_midpointS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566869"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566869"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- Reflect a span through an arbitrary point.</span><span>
</span><span id="line-488"></span><span class="annot"><a href="Music.Time.Types.html#reflectSpan"><span class="hs-identifier hs-type">reflectSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-489"></span><span id="reflectSpan"><span class="annot"><span class="annottext">reflectSpan :: Time -&gt; Span -&gt; Span
</span><a href="Music.Time.Types.html#reflectSpan"><span class="hs-identifier hs-var hs-var">reflectSpan</span></a></span></span><span> </span><span id="local-6989586621680566867"><span class="annot"><span class="annottext">p :: Time
</span><a href="#local-6989586621680566867"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter Span Span Time Time -&gt; (Time -&gt; Time) -&gt; Span -&gt; Span
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Time, Time) -&gt; Identity (Time, Time)) -&gt; Span -&gt; Identity Span
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="annot"><span class="annottext">(((Time, Time) -&gt; Identity (Time, Time)) -&gt; Span -&gt; Identity Span)
-&gt; ((Time -&gt; Identity Time)
    -&gt; (Time, Time) -&gt; Identity (Time, Time))
-&gt; ASetter Span Span Time Time
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Identity Time) -&gt; (Time, Time) -&gt; Identity (Time, Time)
forall (r :: * -&gt; * -&gt; *) a b.
Bitraversable r =&gt;
Traversal (r a a) (r b b) a b
</span><span class="hs-identifier hs-var">both</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall p. AffineSpace p =&gt; p -&gt; p -&gt; p
</span><a href="Data.AffineSpace.Point.html#reflectThrough"><span class="hs-identifier hs-var">reflectThrough</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566867"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- Normalize a span, i.e. reverse it if negative, and do nothing otherwise.</span><span>
</span><span id="line-493"></span><span class="hs-comment">--</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- abs $ s^.'duration' = abs $ ('normalizeSpan' s)^.'duration'</span><span>
</span><span id="line-496"></span><span class="hs-comment">-- s^.'midpoint' = ('normalizeSpan' s)^.'midpoint'</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-498"></span><span class="annot"><a href="Music.Time.Types.html#normalizeSpan"><span class="hs-identifier hs-type">normalizeSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-499"></span><span id="normalizeSpan"><span class="annot"><span class="annottext">normalizeSpan :: Span -&gt; Span
</span><a href="Music.Time.Types.html#normalizeSpan"><span class="hs-identifier hs-var hs-var">normalizeSpan</span></a></span></span><span> </span><span id="local-6989586621680566863"><span class="annot"><span class="annottext">s :: Span
</span><a href="#local-6989586621680566863"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Bool
</span><a href="Music.Time.Types.html#isForwardSpan"><span class="hs-identifier hs-var">isForwardSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566863"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566863"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span
</span><a href="Music.Time.Types.html#reverseSpan"><span class="hs-identifier hs-var">reverseSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566863"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-comment">-- TODO Duplicate as normalizeNoteSpan</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Music.Time.Types.html#inside"><span class="hs-operator hs-type">`inside`</span></a></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Music.Time.Types.html#encloses"><span class="hs-operator hs-type">`encloses`</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Music.Time.Types.html#properlyEncloses"><span class="hs-operator hs-type">`properlyEncloses`</span></a></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Music.Time.Types.html#overlaps"><span class="hs-operator hs-type">`overlaps`</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-512"></span><span class="hs-comment">-- Whether the given point falls inside the given span.</span><span>
</span><span id="line-513"></span><span class="hs-comment">--</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- Designed to be used infix, for example</span><span>
</span><span id="line-515"></span><span class="hs-comment">--</span><span>
</span><span id="line-516"></span><span class="hs-comment">-- &gt;&gt;&gt; 0.5 `inside` 1 &lt;-&gt; 2</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- False</span><span>
</span><span id="line-518"></span><span class="hs-comment">--</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- &gt;&gt;&gt; 1.5 `inside` 1 &lt;-&gt; 2</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-521"></span><span class="hs-comment">--</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- &gt;&gt;&gt; 1 `inside` 1 &lt;-&gt; 2</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-524"></span><span class="hs-comment">--</span><span>
</span><span id="line-525"></span><span class="hs-comment">-- &gt;&gt;&gt; 2 `inside` 1 &lt;-&gt; 2</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-527"></span><span class="annot"><a href="Music.Time.Types.html#inside"><span class="hs-identifier hs-type">inside</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-528"></span><span id="inside"><span class="annot"><span class="annottext">inside :: Time -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#inside"><span class="hs-identifier hs-var hs-var">inside</span></a></span></span><span> </span><span id="local-6989586621680566862"><span class="annot"><span class="annottext">x :: Time
</span><a href="#local-6989586621680566862"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566861"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566861"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566860"><span class="annot"><span class="annottext">u :: Time
</span><a href="#local-6989586621680566860"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566861"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566862"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566862"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566860"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- Whether the given point falls inside the given span.</span><span>
</span><span id="line-532"></span><span class="hs-comment">--</span><span>
</span><span id="line-533"></span><span class="hs-comment">-- &gt;&gt;&gt; 2 `inside` (3&lt;-&gt;4)</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- False</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- &gt;&gt;&gt; 3 `inside` (3&lt;-&gt;4)</span><span>
</span><span id="line-536"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-537"></span><span class="hs-comment">--</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- &gt;&gt;&gt; 2 `strictlyInside` (3&lt;-&gt;4)</span><span>
</span><span id="line-539"></span><span class="hs-comment">-- False</span><span>
</span><span id="line-540"></span><span class="hs-comment">-- &gt;&gt;&gt; 3 `strictlyInside` (3&lt;-&gt;4)</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- False</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- &gt;&gt;&gt; 3.5 `strictlyInside` (3&lt;-&gt;4)</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-544"></span><span class="annot"><a href="Music.Time.Types.html#strictlyInside"><span class="hs-identifier hs-type">strictlyInside</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-545"></span><span id="strictlyInside"><span class="annot"><span class="annottext">strictlyInside :: Time -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#strictlyInside"><span class="hs-identifier hs-var hs-var">strictlyInside</span></a></span></span><span> </span><span id="local-6989586621680566857"><span class="annot"><span class="annottext">x :: Time
</span><a href="#local-6989586621680566857"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566856"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566856"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566855"><span class="annot"><span class="annottext">u :: Time
</span><a href="#local-6989586621680566855"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566856"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566857"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566857"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566855"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-comment">-- | If the given time is outside the given span, return the closest point inside.</span><span>
</span><span id="line-548"></span><span class="hs-comment">--   Otherwise return the given time.</span><span>
</span><span id="line-549"></span><span class="hs-comment">--</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- &gt;&gt;&gt; closestPointInside (1 &lt;-&gt; 3) 0</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- 1</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- &gt;&gt;&gt; closestPointInside (1 &lt;-&gt; 3) 55</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- 3</span><span>
</span><span id="line-554"></span><span class="hs-comment">-- &gt;&gt;&gt; closestPointInside (1 &lt;-&gt; 3) 2</span><span>
</span><span id="line-555"></span><span class="hs-comment">-- 2</span><span>
</span><span id="line-556"></span><span class="annot"><a href="Music.Time.Types.html#closestPointInside"><span class="hs-identifier hs-type">closestPointInside</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span>
</span><span id="line-557"></span><span id="closestPointInside"><span class="annot"><span class="annottext">closestPointInside :: Span -&gt; Time -&gt; Time
</span><a href="Music.Time.Types.html#closestPointInside"><span class="hs-identifier hs-var hs-var">closestPointInside</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Getting (Time, Time) Span (Time, Time) -&gt; (Time, Time)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566854"><span class="annot"><span class="annottext">m :: Time
</span><a href="#local-6989586621680566854"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566853"><span class="annot"><span class="annottext">n :: Time
</span><a href="#local-6989586621680566853"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680566852"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680566852"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566852"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566854"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566854"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566852"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566853"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566853"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-560"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566852"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-563"></span><span class="hs-comment">-- Whether the first given span encloses the second span.</span><span>
</span><span id="line-564"></span><span class="hs-comment">--</span><span>
</span><span id="line-565"></span><span class="hs-comment">-- &gt;&gt;&gt; 0 &lt;-&gt; 3 `encloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-567"></span><span class="hs-comment">--</span><span>
</span><span id="line-568"></span><span class="hs-comment">-- &gt;&gt;&gt; 0 &lt;-&gt; 2 `encloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-569"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-570"></span><span class="hs-comment">--</span><span>
</span><span id="line-571"></span><span class="hs-comment">-- &gt;&gt;&gt; 1 &lt;-&gt; 3 `encloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-572"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-573"></span><span class="hs-comment">--</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- &gt;&gt;&gt; 1 &lt;-&gt; 2 `encloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-576"></span><span class="annot"><a href="Music.Time.Types.html#encloses"><span class="hs-identifier hs-type">encloses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-577"></span><span id="local-6989586621680566851"><span class="annot"><span class="annottext">a :: Span
</span><a href="#local-6989586621680566851"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="encloses"><span class="annot"><span class="annottext">encloses :: Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#encloses"><span class="hs-operator hs-var hs-var">`encloses`</span></a></span></span><span> </span><span id="local-6989586621680566850"><span class="annot"><span class="annottext">b :: Span
</span><a href="#local-6989586621680566850"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-var">_onsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566850"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#inside"><span class="hs-operator hs-var">`inside`</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566851"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_offsetS"><span class="hs-identifier hs-var">_offsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566850"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#inside"><span class="hs-operator hs-var">`inside`</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566851"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- Whether the first given span encloses the second span.</span><span>
</span><span id="line-581"></span><span class="hs-comment">--</span><span>
</span><span id="line-582"></span><span class="hs-comment">-- &gt;&gt;&gt; 0 &lt;-&gt; 3 `properlyEncloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-583"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-584"></span><span class="hs-comment">--</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- &gt;&gt;&gt; 0 &lt;-&gt; 2 `properlyEncloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-586"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-587"></span><span class="hs-comment">--</span><span>
</span><span id="line-588"></span><span class="hs-comment">-- &gt;&gt;&gt; 1 &lt;-&gt; 3 `properlyEncloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-589"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-590"></span><span class="hs-comment">--</span><span>
</span><span id="line-591"></span><span class="hs-comment">-- &gt;&gt;&gt; 1 &lt;-&gt; 2 `properlyEncloses` 1 &lt;-&gt; 2</span><span>
</span><span id="line-592"></span><span class="hs-comment">-- False</span><span>
</span><span id="line-593"></span><span class="annot"><a href="Music.Time.Types.html#properlyEncloses"><span class="hs-identifier hs-type">properlyEncloses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-594"></span><span id="local-6989586621680566847"><span class="annot"><span class="annottext">a :: Span
</span><a href="#local-6989586621680566847"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="properlyEncloses"><span class="annot"><span class="annottext">properlyEncloses :: Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#properlyEncloses"><span class="hs-operator hs-var hs-var">`properlyEncloses`</span></a></span></span><span> </span><span id="local-6989586621680566846"><span class="annot"><span class="annottext">b :: Span
</span><a href="#local-6989586621680566846"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566847"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#encloses"><span class="hs-operator hs-var">`encloses`</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566846"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566847"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566846"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="hs-comment">-- | Return the convex hull of two spans.</span><span>
</span><span id="line-597"></span><span class="hs-comment">--</span><span>
</span><span id="line-598"></span><span class="hs-comment">-- This is associative. Its identity would be the empty span, but this</span><span>
</span><span id="line-599"></span><span class="hs-comment">-- 'Span' represents non-empty time spans only.</span><span>
</span><span id="line-600"></span><span class="annot"><a href="Music.Time.Types.html#hull"><span class="hs-identifier hs-type">hull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-601"></span><span id="hull"><span class="annot"><span class="annottext">hull :: Span -&gt; Span -&gt; Span
</span><a href="Music.Time.Types.html#hull"><span class="hs-identifier hs-var hs-var">hull</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566844"><span class="annot"><span class="annottext">s :: Time
</span><a href="#local-6989586621680566844"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566843"><span class="annot"><span class="annottext">e :: Time
</span><a href="#local-6989586621680566843"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566842"><span class="annot"><span class="annottext">s' :: Time
</span><a href="#local-6989586621680566842"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566841"><span class="annot"><span class="annottext">e' :: Time
</span><a href="#local-6989586621680566841"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting Span (Time, Time) Span -&gt; (Time, Time) -&gt; Span
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnIso Span Span (Time, Time) (Time, Time)
-&gt; Iso (Time, Time) (Time, Time) Span Span
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso Span Span (Time, Time) (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">min</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566844"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566842"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">max</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566843"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566841"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-keyword">data</span><span> </span><span id="TimeInterval"><span class="annot"><a href="Music.Time.Types.html#TimeInterval"><span class="hs-identifier hs-var">TimeInterval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EmptyInterval"><span class="annot"><a href="Music.Time.Types.html#EmptyInterval"><span class="hs-identifier hs-var">EmptyInterval</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NonEmptyInterval"><span class="annot"><a href="Music.Time.Types.html#NonEmptyInterval"><span class="hs-identifier hs-var">NonEmptyInterval</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span>
</span><span id="line-604"></span><span>
</span><span id="line-605"></span><span class="hs-comment">-- | Semigroup with 'hull' and 'EmptyInterval'.</span><span>
</span><span id="line-606"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566832"><span id="local-6989586621680566834"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#TimeInterval"><span class="hs-identifier hs-type">TimeInterval</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-607"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#NonEmptyInterval"><span class="hs-identifier hs-type">NonEmptyInterval</span></a></span><span> </span><span id="local-6989586621680566831"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680566831"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680566830"><span class="annot"><span class="annottext">&lt;&gt; :: TimeInterval -&gt; TimeInterval -&gt; TimeInterval
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="Music.Time.Types.html#NonEmptyInterval"><span class="hs-identifier hs-type">NonEmptyInterval</span></a></span><span> </span><span id="local-6989586621680566829"><span class="annot"><span class="annottext">y :: Span
</span><a href="#local-6989586621680566829"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; TimeInterval
</span><a href="Music.Time.Types.html#NonEmptyInterval"><span class="hs-identifier hs-var">NonEmptyInterval</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; TimeInterval) -&gt; Span -&gt; TimeInterval
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Span
</span><a href="Music.Time.Types.html#hull"><span class="hs-identifier hs-var">hull</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566831"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566829"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-608"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#EmptyInterval"><span class="hs-identifier hs-type">EmptyInterval</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span id="local-6989586621680566828"><span class="annot"><span class="annottext">y :: TimeInterval
</span><a href="#local-6989586621680566828"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeInterval
</span><a href="#local-6989586621680566828"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-609"></span><span>  </span><span id="local-6989586621680566827"><span class="annot"><span class="annottext">x :: TimeInterval
</span><a href="#local-6989586621680566827"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#EmptyInterval"><span class="hs-identifier hs-type">EmptyInterval</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeInterval
</span><a href="#local-6989586621680566827"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-610"></span><span>
</span><span id="line-611"></span><span class="hs-comment">-- | Monoid with 'hull' and 'EmptyInterval'.</span><span>
</span><span id="line-612"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680566821"><span id="local-6989586621680566823"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#TimeInterval"><span class="hs-identifier hs-type">TimeInterval</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-613"></span><span>  </span><span id="local-6989586621680566820"><span class="annot"><span class="annottext">mempty :: TimeInterval
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeInterval
</span><a href="Music.Time.Types.html#EmptyInterval"><span class="hs-identifier hs-var">EmptyInterval</span></a></span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span class="hs-comment">-- TODO more intuitive param order</span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="hs-comment">{-
afterOnset :: Time -&gt; Span -&gt; Bool
t `afterOnset` s = t &gt;= _onsetS s

strictlyAfterOnset :: Time -&gt; Span -&gt; Bool
t `strictlyAfterOnset` s = t &gt; _onsetS s

beforeOnset :: Time -&gt; Span -&gt; Bool
t `beforeOnset` s = t &lt;= _onsetS s

strictlyBeforeOnset :: Time -&gt; Span -&gt; Bool
t `strictlyBeforeOnset` s = t &lt; _onsetS s

afterOffset :: Time -&gt; Span -&gt; Bool
t `afterOffset` s = t &gt;= _offsetS s

strictlyAfterOffset :: Time -&gt; Span -&gt; Bool
t `strictlyAfterOffset` s = t &gt; _offsetS s

beforeOffset :: Time -&gt; Span -&gt; Bool
t `beforeOffset` s = t &lt;= _offsetS s

strictlyBeforeOffset :: Time -&gt; Span -&gt; Bool
t `strictlyBeforeOffset` s = t &lt; _offsetS s
-}</span><span>
</span><span id="line-642"></span><span class="hs-comment">-- Param order OK</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="hs-comment">{-
-- Name?
startsWhenStarts :: Span -&gt; Span -&gt; Bool
a `startsWhenStarts` b = _onsetS a == _onsetS b

-- Name?
startsWhenStops :: Span -&gt; Span -&gt; Bool
a `startsWhenStops` b = _onsetS a == _offsetS b

-- Name?
stopsWhenStops :: Span -&gt; Span -&gt; Bool
a `stopsWhenStops` b = _offsetS a == _offsetS b

-- Name?
stopsWhenStarts :: Span -&gt; Span -&gt; Bool
a `stopsWhenStarts` b = _offsetS a == _onsetS b

startsBefore :: Span -&gt; Span -&gt; Bool
a `startsBefore` b = _onsetS a &lt; _onsetS b

startsLater :: Span -&gt; Span -&gt; Bool
a `startsLater` b = _onsetS a &gt; _onsetS b

stopsAtTheSameTime :: Span -&gt; Span -&gt; Bool
a `stopsAtTheSameTime` b = _offsetS a == _offsetS b

stopsBefore :: Span -&gt; Span -&gt; Bool
a `stopsBefore` b = _offsetS a &lt; _offsetS b

stopsLater :: Span -&gt; Span -&gt; Bool
a `stopsLater` b = _offsetS a &gt; _offsetS b
-}</span><span>
</span><span id="line-676"></span><span class="hs-comment">{-
contains
curtails
delays
happensDuring
intersects
trisects
isCongruentTo
overlapsAllOf
overlapsOnlyOnsetOf
overlapsOnlyOffsetOf
overlapsOnsetOf
overlapsOffsetOf



-}</span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span class="hs-comment">-- timespantools.timespan_2_starts_during_timespan_1</span><span>
</span><span id="line-695"></span><span class="hs-comment">-- timespantools.timespan_2_starts_when_timespan_1_starts</span><span>
</span><span id="line-696"></span><span class="hs-comment">-- timespantools.timespan_2_starts_when_timespan_1_stops</span><span>
</span><span id="line-697"></span><span class="hs-comment">-- timespantools.timespan_2_stops_after_timespan_1_starts</span><span>
</span><span id="line-698"></span><span class="hs-comment">-- timespantools.timespan_2_stops_after_timespan_1_stops</span><span>
</span><span id="line-699"></span><span class="hs-comment">-- timespantools.timespan_2_stops_before_timespan_1_starts</span><span>
</span><span id="line-700"></span><span class="hs-comment">-- timespantools.timespan_2_stops_before_timespan_1_stops</span><span>
</span><span id="line-701"></span><span class="hs-comment">-- timespantools.timespan_2_stops_during_timespan_1</span><span>
</span><span id="line-702"></span><span class="hs-comment">-- timespantools.timespan_2_stops_when_timespan_1_starts</span><span>
</span><span id="line-703"></span><span class="hs-comment">-- timespantools.timespan_2_stops_when_timespan_1_stops</span><span>
</span><span id="line-704"></span><span class="hs-comment">-- timespantools.timespan_2_trisects_timespan_1</span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-707"></span><span class="hs-comment">-- Whether the given span overlaps.</span><span>
</span><span id="line-708"></span><span class="annot"><a href="Music.Time.Types.html#overlaps"><span class="hs-identifier hs-type">overlaps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-709"></span><span id="local-6989586621680566819"><span class="annot"><span class="annottext">a :: Span
</span><a href="#local-6989586621680566819"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="overlaps"><span class="annot"><span class="annottext">overlaps :: Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#overlaps"><span class="hs-operator hs-var hs-var">`overlaps`</span></a></span></span><span> </span><span id="local-6989586621680566818"><span class="annot"><span class="annottext">b :: Span
</span><a href="#local-6989586621680566818"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566819"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#isBefore"><span class="hs-operator hs-var">`isBefore`</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566818"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566818"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#isBefore"><span class="hs-operator hs-var">`isBefore`</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566819"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- Whether the first given span occurs before the second span.</span><span>
</span><span id="line-713"></span><span class="annot"><a href="Music.Time.Types.html#isBefore"><span class="hs-identifier hs-type">isBefore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-714"></span><span id="local-6989586621680566816"><span class="annot"><span class="annottext">a :: Span
</span><a href="#local-6989586621680566816"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="isBefore"><span class="annot"><span class="annottext">isBefore :: Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#isBefore"><span class="hs-operator hs-var hs-var">`isBefore`</span></a></span></span><span> </span><span id="local-6989586621680566815"><span class="annot"><span class="annottext">b :: Span
</span><a href="#local-6989586621680566815"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-var">_onsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566816"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">`max`</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_offsetS"><span class="hs-identifier hs-var">_offsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566816"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-var">_onsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566815"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Time
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">`min`</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_offsetS"><span class="hs-identifier hs-var">_offsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566815"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="hs-comment">-- TODO resolve this so we can use actual onset/offset etc in the above definitions</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- Same as (onset, offset), defined here for bootstrapping reasons</span><span>
</span><span id="line-718"></span><span id="_onsetS"><span class="annot"><span class="annottext">_onsetS :: Span -&gt; Time
</span><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-var hs-var">_onsetS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566814"><span class="annot"><span class="annottext">t1 :: Time
</span><a href="#local-6989586621680566814"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566813"><span class="annot"><span class="annottext">t2 :: Time
</span><a href="#local-6989586621680566813"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566814"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-719"></span><span>
</span><span id="line-720"></span><span id="_offsetS"><span class="annot"><span class="annottext">_offsetS :: Span -&gt; Time
</span><a href="Music.Time.Types.html#_offsetS"><span class="hs-identifier hs-var hs-var">_offsetS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680566812"><span class="annot"><span class="annottext">t1 :: Time
</span><a href="#local-6989586621680566812"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680566811"><span class="annot"><span class="annottext">t2 :: Time
</span><a href="#local-6989586621680566811"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680566811"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span id="_midpointS"><span class="annot"><span class="annottext">_midpointS :: Span -&gt; Time
</span><a href="Music.Time.Types.html#_midpointS"><span class="hs-identifier hs-var hs-var">_midpointS</span></a></span></span><span> </span><span id="local-6989586621680566810"><span class="annot"><span class="annottext">s :: Span
</span><a href="#local-6989586621680566810"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-var">_onsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566810"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Diff Time -&gt; Time
forall p. AffineSpace p =&gt; p -&gt; Diff p -&gt; p
</span><span class="hs-operator hs-var">.+^</span></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Duration
</span><a href="Music.Time.Types.html#_durationS"><span class="hs-identifier hs-var">_durationS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566810"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span id="_durationS"><span class="annot"><span class="annottext">_durationS :: Span -&gt; Duration
</span><a href="Music.Time.Types.html#_durationS"><span class="hs-identifier hs-var hs-var">_durationS</span></a></span></span><span> </span><span id="local-6989586621680566808"><span class="annot"><span class="annottext">s :: Span
</span><a href="#local-6989586621680566808"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_offsetS"><span class="hs-identifier hs-var">_offsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566808"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Diff Time
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Time
</span><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-var">_onsetS</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680566808"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span class="hs-comment">{-
Two alternative definitions for midpoint:

midpoint x = onset x + duration x / 2
midpoint x = (onset x + offset x) / 2

Both equivalent. Proof:

  let d = b - a
  (a + b)/2 = a + d/2
  (a + b)/2 = a + (b - a)/2
  a + b     = 2a + (b - a)
  a + b     = a + b
-}</span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span class="annot"><a href="Music.Time.Types.html#_onsetS"><span class="hs-identifier hs-type">_onsetS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="annot"><a href="Music.Time.Types.html#_offsetS"><span class="hs-identifier hs-type">_offsetS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="annot"><a href="Music.Time.Types.html#_midpointS"><span class="hs-identifier hs-type">_midpointS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span>
</span><span id="line-746"></span><span>
</span><span id="line-747"></span><span class="annot"><a href="Music.Time.Types.html#_durationS"><span class="hs-identifier hs-type">_durationS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-748"></span></pre></body></html>