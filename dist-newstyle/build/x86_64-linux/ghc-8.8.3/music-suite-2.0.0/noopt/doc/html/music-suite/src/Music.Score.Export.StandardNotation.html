<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_IWLOVkGBg0N0y1vTGA6IGQ"><span id="%24con2tag_E9laSOOloUG2qtIcxdoUvr"><span id="%24con2tag_H4GTaWWFJEQ0xBeGqqPt5V"><span id="%24con2tag_Dy1BbAYkx5OF5Elsq9PCPf"><span id="%24con2tag_4zhBRugW7n2GYR3VX9qdyp"><span id="%24con2tag_1Gp5rzVSkcy5fMQ7Ov7giL"></span></span></span></span></span></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveFoldable #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveTraversable #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeSynonymInstances #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE NoMonomorphismRestriction #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wall
  -Wcompat
  -Wincomplete-record-updates
  -Wincomplete-uni-patterns
  -Werror
  -fno-warn-name-shadowing
  -fno-warn-unused-imports #-}</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- This module defines a monomorphic representation of Western music notation.</span><span>
</span><span id="line-29"></span><span class="hs-comment">--</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- Its main use to simplify the addition of notation-centric backends such as</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- Sibelius, MusicXML, Lilypond, ABC notation and so on.</span><span>
</span><span id="line-32"></span><span class="hs-comment">--</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- It generally follows the conventions of MusixXML but has a slightly more</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- semantic flavor:</span><span>
</span><span id="line-35"></span><span class="hs-comment">--</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- - Bars, staves and rhytmical structure is explicit.</span><span>
</span><span id="line-37"></span><span class="hs-comment">--</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- - Spanners (legato, cresc dim etc) are represented by begin/end tags.</span><span>
</span><span id="line-39"></span><span class="hs-comment">--</span><span>
</span><span id="line-40"></span><span class="hs-comment">--   This is a consequence of representing the score as a tree rather than a graph,</span><span>
</span><span id="line-41"></span><span class="hs-comment">--   as spanners exist independently of the /time/ hierarchy, and trees by</span><span>
</span><span id="line-42"></span><span class="hs-comment">--   definition do not allow multiple hierarchical relationships.</span><span>
</span><span id="line-43"></span><span class="hs-comment">--</span><span>
</span><span id="line-44"></span><span class="hs-comment">--   It could be interesting to use some kind of graph structure instead.</span><span>
</span><span id="line-45"></span><span class="hs-comment">--</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- - Harmoncics are represented as played, i.e. not by specifying note head shape</span><span>
</span><span id="line-47"></span><span class="hs-comment">--   etc explicitly.</span><span>
</span><span id="line-48"></span><span class="hs-comment">--</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- - Time and key signatures are global. Stave-specific key signatures, time</span><span>
</span><span id="line-50"></span><span class="hs-comment">--   signatures or tempi is not allowed.</span><span>
</span><span id="line-51"></span><span class="hs-comment">--</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- - The top level type is 'Work', which allow for representation of multi-movement</span><span>
</span><span id="line-53"></span><span class="hs-comment">--   concert pieces as well as film&#160;and theatre music.</span><span>
</span><span id="line-54"></span><span class="hs-comment">--</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- - Like Sibelius (and unlike MusicXML/Lilypond) we use a conceptual \&quot;system</span><span>
</span><span id="line-56"></span><span class="hs-comment">--   staff\&quot; that contains information pertaining to all parts, such as key and</span><span>
</span><span id="line-57"></span><span class="hs-comment">--   time signatures.</span><span>
</span><span id="line-58"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Music.Score.Export.StandardNotation</span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier">LabelTree</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier">foldLabelTree</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#fromListLT"><span class="hs-identifier">fromListLT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Common music notation</span></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BarNumber"><span class="hs-identifier">BarNumber</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TimeSignature"><span class="hs-identifier">TimeSignature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#KeySignature"><span class="hs-identifier">KeySignature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#RehearsalMark"><span class="hs-identifier">RehearsalMark</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TempoMark"><span class="hs-identifier">TempoMark</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier">BracketType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SpecialBarline"><span class="hs-identifier">SpecialBarline</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier">SystemBar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#barNumbers"><span class="hs-identifier">barNumbers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#timeSignature"><span class="hs-identifier">timeSignature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#keySignature"><span class="hs-identifier">keySignature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#rehearsalMark"><span class="hs-identifier">rehearsalMark</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#tempoMark"><span class="hs-identifier">tempoMark</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier">SystemStaff</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#systemStaffLength"><span class="hs-identifier">systemStaffLength</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#systemStaffTakeBars"><span class="hs-identifier">systemStaffTakeBars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#InstrumentShortName"><span class="hs-identifier">InstrumentShortName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#InstrumentFullName"><span class="hs-identifier">InstrumentFullName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Transposition"><span class="hs-identifier">Transposition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SibeliusFriendlyName"><span class="hs-identifier">SibeliusFriendlyName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SmallOrLarge"><span class="hs-identifier">SmallOrLarge</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ScoreOrder"><span class="hs-identifier">ScoreOrder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier">StaffInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#instrumentShortName"><span class="hs-identifier">instrumentShortName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#instrumentFullName"><span class="hs-identifier">instrumentFullName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#sibeliusFriendlyName"><span class="hs-identifier">sibeliusFriendlyName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#instrumentDefaultClef"><span class="hs-identifier">instrumentDefaultClef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#transposition"><span class="hs-identifier">transposition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#smallOrLarge"><span class="hs-identifier">smallOrLarge</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#scoreOrder"><span class="hs-identifier">scoreOrder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier">Pitch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArpeggioNotation"><span class="hs-identifier">ArpeggioNotation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TremoloNotation"><span class="hs-identifier">TremoloNotation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BreathNotation"><span class="hs-identifier">BreathNotation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArticulationNotation"><span class="hs-identifier">ArticulationNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#DynamicNotation"><span class="hs-identifier">DynamicNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#HarmonicNotation"><span class="hs-identifier">HarmonicNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier">SlideNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#beginGliss"><span class="hs-identifier">beginGliss</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#endGliss"><span class="hs-identifier">endGliss</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#beginSlide"><span class="hs-identifier">beginSlide</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#endSlide"><span class="hs-identifier">endSlide</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier">Fermata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Ties"><span class="hs-identifier">Ties</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier">Chord</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#pitches"><span class="hs-identifier">pitches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#arpeggioNotation"><span class="hs-identifier">arpeggioNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#tremoloNotation"><span class="hs-identifier">tremoloNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#breathNotation"><span class="hs-identifier">breathNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#articulationNotation"><span class="hs-identifier">articulationNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#dynamicNotation"><span class="hs-identifier">dynamicNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#fermata"><span class="hs-identifier">fermata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#chordColor"><span class="hs-identifier">chordColor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#chordText"><span class="hs-identifier">chordText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#harmonicNotation"><span class="hs-identifier">harmonicNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#slideNotation"><span class="hs-identifier">slideNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ties"><span class="hs-identifier">ties</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier">PitchLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier">Bar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#clefChanges"><span class="hs-identifier">clefChanges</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#pitchLayers"><span class="hs-identifier">pitchLayers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier">Staff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#staffInfo"><span class="hs-identifier">staffInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#bars"><span class="hs-identifier">bars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#staffLength"><span class="hs-identifier">staffLength</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#staffTakeBars"><span class="hs-identifier">staffTakeBars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Title"><span class="hs-identifier">Title</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Annotations"><span class="hs-identifier">Annotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Attribution"><span class="hs-identifier">Attribution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier">MovementInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementTitle"><span class="hs-identifier">movementTitle</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementAnnotations"><span class="hs-identifier">movementAnnotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementAttribution"><span class="hs-identifier">movementAttribution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier">Movement</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementInfo"><span class="hs-identifier">movementInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#systemStaff"><span class="hs-identifier">systemStaff</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#staves"><span class="hs-identifier">staves</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementAssureSameNumberOfBars"><span class="hs-identifier">movementAssureSameNumberOfBars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier">WorkInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#title"><span class="hs-identifier">title</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#annotations"><span class="hs-identifier">annotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#attribution"><span class="hs-identifier">attribution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier">Work</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#workInfo"><span class="hs-identifier">workInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movements"><span class="hs-identifier">movements</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="hs-comment">-- * MonadLog</span></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier">MonadLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Pure export monad</span></span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PureExportM"><span class="hs-identifier">PureExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runPureExportM"><span class="hs-identifier">runPureExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runPureExportMNoLog"><span class="hs-identifier">runPureExportMNoLog</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><span class="hs-comment">-- * IO export monad</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#IOExportM"><span class="hs-identifier">IOExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier">runIOExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Standard notation</span></span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1"><span class="hs-identifier">Asp1</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier">Asp1a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp"><span class="hs-identifier">Asp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StandardNotationExportM"><span class="hs-identifier">StandardNotationExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toStandardNotation"><span class="hs-identifier">toStandardNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Lilypond backend</span></span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondLayout"><span class="hs-identifier">LilypondLayout</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier">LilypondOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#defaultLilypondLayout"><span class="hs-identifier">defaultLilypondLayout</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#defaultLilypondOptions"><span class="hs-identifier">defaultLilypondOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier">LilypondExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLy"><span class="hs-identifier">toLy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><span class="hs-comment">-- * MusicXML backend</span></span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier">MusicXmlExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toXml"><span class="hs-identifier">toXml</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><span class="hs-comment">-- * MIDI backend</span></span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiExportM"><span class="hs-identifier">MidiExportM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toMidi"><span class="hs-identifier">toMidi</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">BasePrelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator">(&lt;&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">First</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">first</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">second</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.Midi</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Midi</span></span><span>
</span><span id="line-189"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Lens'</span></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="hs-identifier">_1</span></span><span class="hs-special">,</span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><span class="hs-identifier">_2</span></span><span class="hs-special">,</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><span class="hs-identifier">_head</span></span><span class="hs-special">,</span><span>
</span><span id="line-194"></span><span>    </span><span class="annot"><span class="hs-identifier">at</span></span><span class="hs-special">,</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="hs-identifier">from</span></span><span class="hs-special">,</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="hs-identifier">over</span></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="hs-identifier">preview</span></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="hs-identifier">set</span></span><span class="hs-special">,</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="hs-identifier">to</span></span><span class="hs-special">,</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="hs-identifier">under</span></span><span class="hs-special">,</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">,</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens.Operators</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(|&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens.TH</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">makeLenses</span></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span>
</span><span id="line-206"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Plus</span></span><span>
</span><span id="line-207"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.State</span></a></span><span>
</span><span id="line-208"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Writer</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator">(&lt;&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">First</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.AffineSpace</span></span><span>
</span><span id="line-210"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">bimap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">first</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">second</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/bytestring-0.10.10.0/src"><span class="hs-identifier">Data.ByteString.Char8</span></a></span><span>
</span><span id="line-212"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Char</span></a></span><span>
</span><span id="line-213"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier">Data.Colour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier">Colour</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier">Data.Colour.Names</span></a></span><span>
</span><span id="line-215"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.FileEmbed</span></span><span>
</span><span id="line-216"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Functor.Couple.html"><span class="hs-identifier">Data.Functor.Couple</span></a></span><span>
</span><span id="line-217"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.List</span></a></span><span>
</span><span id="line-219"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span>
</span><span id="line-221"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/z1vq9w077996zxf2ywkhxcr9wis9qsg8-split-0.2.3.4-doc/share/doc/split-0.2.3.4/html/src"><span class="hs-identifier">Data.List.Split</span></a></span><span>
</span><span id="line-222"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Map</span></a></span><span>
</span><span id="line-224"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-225"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Monoid</span></a></span><span>
</span><span id="line-226"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html"><span class="hs-identifier">Data.Music.Lilypond</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lilypond</span></span><span>
</span><span id="line-227"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html"><span class="hs-identifier">Data.Music.Lilypond</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-228"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Simple.html"><span class="hs-identifier">Data.Music.MusicXml.Simple</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MusicXml</span></span><span>
</span><span id="line-229"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Simple.html"><span class="hs-identifier">Data.Music.MusicXml.Simple</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-230"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Semigroup</span></a></span><span>
</span><span id="line-231"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Set</span></a></span><span>
</span><span id="line-232"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.VectorSpace</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Sum</span></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Articulation.html"><span class="hs-identifier">Music.Articulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Articulation.html#Articulation"><span class="hs-identifier">Articulation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Dynamics.html"><span class="hs-identifier">Music.Dynamics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Dynamics.Common.html#Dynamics"><span class="hs-identifier">Dynamics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Dynamics.Literal.html"><span class="hs-identifier">Music.Dynamics.Literal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Dynamics.Literal.html#DynamicsL"><span class="hs-identifier">DynamicsL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Dynamics.Literal.html#fromDynamics"><span class="hs-identifier">fromDynamics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Dynamics.Literal.html"><span class="hs-identifier">Music.Dynamics.Literal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">D</span></span><span>
</span><span id="line-237"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Parts.html"><span class="hs-identifier">Music.Parts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Instrument.html#Instrument"><span class="hs-identifier">Instrument</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Parts.Group.html#ScoreLayout"><span class="hs-identifier">ScoreLayout</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Parts.html"><span class="hs-identifier">Music.Parts</span></a></span><span>
</span><span id="line-239"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Pitch.html"><span class="hs-identifier">Music.Pitch</span></a></span><span>
</span><span id="line-240"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Pitch.html"><span class="hs-identifier">Music.Pitch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Pitch.Common.Internal.html#IsPitch"><span class="hs-identifier">IsPitch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier">Pitch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#fromPitch"><span class="hs-identifier">fromPitch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Pitch.Literal.html"><span class="hs-identifier">Music.Pitch.Literal</span></a></span><span>
</span><span id="line-242"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Pitch.Literal.html"><span class="hs-identifier">Music.Pitch.Literal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-243"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Articulation.html"><span class="hs-identifier">Music.Score.Articulation</span></a></span><span>
</span><span id="line-244"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Articulation.html"><span class="hs-identifier">Music.Score.Articulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Articulation.html#ArticulationT"><span class="hs-identifier">ArticulationT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Color.html"><span class="hs-identifier">Music.Score.Color</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Color.html#ColorT"><span class="hs-identifier">ColorT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Color.html#runColorT"><span class="hs-identifier">runColorT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Dynamics.html"><span class="hs-identifier">Music.Score.Dynamics</span></a></span><span>
</span><span id="line-247"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Dynamics.html"><span class="hs-identifier">Music.Score.Dynamics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Dynamics.html#DynamicT"><span class="hs-identifier">DynamicT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html"><span class="hs-identifier">Music.Score.Export.ArticulationNotation</span></a></span><span>
</span><span id="line-249"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html"><span class="hs-identifier">Music.Score.Export.ArticulationNotation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#marks"><span class="hs-identifier">marks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#slurs"><span class="hs-identifier">slurs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html"><span class="hs-identifier">Music.Score.Export.ArticulationNotation</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AN</span></span><span>
</span><span id="line-251"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html"><span class="hs-identifier">Music.Score.Export.DynamicNotation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#crescDim"><span class="hs-identifier">crescDim</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#dynamicLevel"><span class="hs-identifier">dynamicLevel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html"><span class="hs-identifier">Music.Score.Export.DynamicNotation</span></a></span><span>
</span><span id="line-253"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html"><span class="hs-identifier">Music.Score.Export.DynamicNotation</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DN</span></span><span>
</span><span id="line-254"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Export.TechniqueNotation.html"><span class="hs-identifier">Music.Score.Export.TechniqueNotation</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TN</span></span><span>
</span><span id="line-255"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Harmonics.html"><span class="hs-identifier">Music.Score.Harmonics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Harmonics.html#HarmonicT"><span class="hs-identifier">HarmonicT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Harmonics.html#runHarmonicT"><span class="hs-identifier">runHarmonicT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Internal.Export.html"><span class="hs-identifier">Music.Score.Internal.Export</span></a></span><span>
</span><span id="line-257"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Internal.Instances.html"><span class="hs-identifier">Music.Score.Internal.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Internal.Quantize.html"><span class="hs-identifier">Music.Score.Internal.Quantize</span></a></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#dotMod"><span class="hs-identifier">dotMod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#quantize"><span class="hs-identifier">quantize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#rewrite"><span class="hs-identifier">rewrite</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Internal.Util.html"><span class="hs-identifier">Music.Score.Internal.Util</span></a></span><span>
</span><span id="line-265"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Internal.Util.html"><span class="hs-identifier">Music.Score.Internal.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Util.html#unRatio"><span class="hs-identifier">unRatio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.html"><span class="hs-identifier">Music.Score.Meta</span></a></span><span>
</span><span id="line-267"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.Attribution.html"><span class="hs-identifier">Music.Score.Meta.Attribution</span></a></span><span>
</span><span id="line-268"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.Key.html"><span class="hs-identifier">Music.Score.Meta.Key</span></a></span><span>
</span><span id="line-269"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.RehearsalMark.html"><span class="hs-identifier">Music.Score.Meta.RehearsalMark</span></a></span><span>
</span><span id="line-270"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.Tempo.html"><span class="hs-identifier">Music.Score.Meta.Tempo</span></a></span><span>
</span><span id="line-271"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Meta.Tempo.html"><span class="hs-identifier">Music.Score.Meta.Tempo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Meta.Tempo.html#Tempo"><span class="hs-identifier">Tempo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.Time.html"><span class="hs-identifier">Music.Score.Meta.Time</span></a></span><span>
</span><span id="line-273"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Meta.Title.html"><span class="hs-identifier">Music.Score.Meta.Title</span></a></span><span>
</span><span id="line-274"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Part.html"><span class="hs-identifier">Music.Score.Part</span></a></span><span>
</span><span id="line-275"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Part.html"><span class="hs-identifier">Music.Score.Part</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Part.html#PartT"><span class="hs-identifier">PartT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Phrases.html"><span class="hs-identifier">Music.Score.Phrases</span></a></span><span>
</span><span id="line-277"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Phrases.html"><span class="hs-identifier">Music.Score.Phrases</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Phrases.html#MVoice"><span class="hs-identifier">MVoice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Pitch.html"><span class="hs-identifier">Music.Score.Pitch</span></a></span><span>
</span><span id="line-279"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Pitch.html"><span class="hs-identifier">Music.Score.Pitch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Slide.html"><span class="hs-identifier">Music.Score.Slide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Slide.html#SlideT"><span class="hs-identifier">SlideT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Slide.html#runSlideT"><span class="hs-identifier">runSlideT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.StaffNumber.html"><span class="hs-identifier">Music.Score.StaffNumber</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.StaffNumber.html#StaffNumberT"><span class="hs-identifier">StaffNumberT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.StaffNumber.html#runStaffNumberT"><span class="hs-identifier">runStaffNumberT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Technique.html"><span class="hs-identifier">Music.Score.Technique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Technique.html#HasTechniques"><span class="hs-identifier">HasTechniques</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Technique.html#techniques"><span class="hs-identifier">techniques</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Technique.html#SomeTechnique"><span class="hs-identifier">SomeTechnique</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Technique.html#TechniqueT"><span class="hs-identifier">TechniqueT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Technique.html"><span class="hs-identifier">Music.Score.Technique</span></a></span><span>
</span><span id="line-284"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Text.html"><span class="hs-identifier">Music.Score.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Text.html#TextT"><span class="hs-identifier">TextT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Text.html#runTextT"><span class="hs-identifier">runTextT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Ties.html"><span class="hs-identifier">Music.Score.Ties</span></a></span><span>
</span><span id="line-286"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Ties.html"><span class="hs-identifier">Music.Score.Ties</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Ties.html#Tiable"><span class="hs-identifier">Tiable</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Ties.html"><span class="hs-identifier">Music.Score.Ties</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Ties.html#TieT"><span class="hs-identifier">TieT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Tremolo.html"><span class="hs-identifier">Music.Score.Tremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Tremolo.html#TremoloT"><span class="hs-identifier">TremoloT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Tremolo.html#runTremoloT"><span class="hs-identifier">runTremoloT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.html"><span class="hs-identifier">Music.Time</span></a></span><span>
</span><span id="line-290"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Meta.html"><span class="hs-identifier">Music.Time.Meta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Meta.html#meta"><span class="hs-identifier">meta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- Annotated tree</span><span>
</span><span id="line-293"></span><span class="hs-keyword">data</span><span> </span><span id="LabelTree"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-var">LabelTree</span></a></span></span><span> </span><span id="local-6989586621680604370"><span class="annot"><a href="#local-6989586621680604370"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680604369"><span class="annot"><a href="#local-6989586621680604369"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Branch"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621680604370"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604370"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604369"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Leaf"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Leaf"><span class="hs-identifier hs-var">Leaf</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621680604369"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603494"><span id="local-6989586621680603496"><span class="annot"><span class="annottext">a -&gt; LabelTree b b -&gt; LabelTree b a
(a -&gt; b) -&gt; LabelTree b a -&gt; LabelTree b b
(forall a b. (a -&gt; b) -&gt; LabelTree b a -&gt; LabelTree b b)
-&gt; (forall a b. a -&gt; LabelTree b b -&gt; LabelTree b a)
-&gt; Functor (LabelTree b)
forall a b. a -&gt; LabelTree b b -&gt; LabelTree b a
forall a b. (a -&gt; b) -&gt; LabelTree b a -&gt; LabelTree b b
forall b a b. a -&gt; LabelTree b b -&gt; LabelTree b a
forall b a b. (a -&gt; b) -&gt; LabelTree b a -&gt; LabelTree b b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; LabelTree b b -&gt; LabelTree b a
$c&lt;$ :: forall b a b. a -&gt; LabelTree b b -&gt; LabelTree b a
fmap :: (a -&gt; b) -&gt; LabelTree b a -&gt; LabelTree b b
$cfmap :: forall b a b. (a -&gt; b) -&gt; LabelTree b a -&gt; LabelTree b b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603459"><span id="local-6989586621680603461"><span id="local-6989586621680603463"><span id="local-6989586621680603465"><span id="local-6989586621680603467"><span id="local-6989586621680603469"><span id="local-6989586621680603471"><span id="local-6989586621680603473"><span id="local-6989586621680603475"><span id="local-6989586621680603477"><span id="local-6989586621680603479"><span id="local-6989586621680603481"><span id="local-6989586621680603483"><span id="local-6989586621680603485"><span id="local-6989586621680603487"><span id="local-6989586621680603489"><span id="local-6989586621680603491"><span class="annot"><span class="annottext">LabelTree b a -&gt; Bool
(a -&gt; m) -&gt; LabelTree b a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
(forall m. Monoid m =&gt; LabelTree b m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; LabelTree b a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; LabelTree b a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a)
-&gt; (forall a. LabelTree b a -&gt; [a])
-&gt; (forall a. LabelTree b a -&gt; Bool)
-&gt; (forall a. LabelTree b a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; LabelTree b a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; LabelTree b a -&gt; a)
-&gt; (forall a. Ord a =&gt; LabelTree b a -&gt; a)
-&gt; (forall a. Num a =&gt; LabelTree b a -&gt; a)
-&gt; (forall a. Num a =&gt; LabelTree b a -&gt; a)
-&gt; Foldable (LabelTree b)
forall a. Eq a =&gt; a -&gt; LabelTree b a -&gt; Bool
forall a. Num a =&gt; LabelTree b a -&gt; a
forall a. Ord a =&gt; LabelTree b a -&gt; a
forall m. Monoid m =&gt; LabelTree b m -&gt; m
forall a. LabelTree b a -&gt; Bool
forall a. LabelTree b a -&gt; Int
forall a. LabelTree b a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a
forall b a. Eq a =&gt; a -&gt; LabelTree b a -&gt; Bool
forall b a. Num a =&gt; LabelTree b a -&gt; a
forall b a. Ord a =&gt; LabelTree b a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; LabelTree b a -&gt; m
forall b m. Monoid m =&gt; LabelTree b m -&gt; m
forall b a. LabelTree b a -&gt; Bool
forall b a. LabelTree b a -&gt; Int
forall b a. LabelTree b a -&gt; [a]
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
forall b a. (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a
forall b m a. Monoid m =&gt; (a -&gt; m) -&gt; LabelTree b a -&gt; m
forall b b a. (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
forall b a b. (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: LabelTree b a -&gt; a
$cproduct :: forall b a. Num a =&gt; LabelTree b a -&gt; a
sum :: LabelTree b a -&gt; a
$csum :: forall b a. Num a =&gt; LabelTree b a -&gt; a
minimum :: LabelTree b a -&gt; a
$cminimum :: forall b a. Ord a =&gt; LabelTree b a -&gt; a
maximum :: LabelTree b a -&gt; a
$cmaximum :: forall b a. Ord a =&gt; LabelTree b a -&gt; a
elem :: a -&gt; LabelTree b a -&gt; Bool
$celem :: forall b a. Eq a =&gt; a -&gt; LabelTree b a -&gt; Bool
length :: LabelTree b a -&gt; Int
$clength :: forall b a. LabelTree b a -&gt; Int
null :: LabelTree b a -&gt; Bool
$cnull :: forall b a. LabelTree b a -&gt; Bool
toList :: LabelTree b a -&gt; [a]
$ctoList :: forall b a. LabelTree b a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a
$cfoldl1 :: forall b a. (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a
$cfoldr1 :: forall b a. (a -&gt; a -&gt; a) -&gt; LabelTree b a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
$cfoldl' :: forall b b a. (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
$cfoldl :: forall b b a. (b -&gt; a -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
$cfoldr' :: forall b a b. (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
$cfoldr :: forall b a b. (a -&gt; b -&gt; b) -&gt; b -&gt; LabelTree b a -&gt; b
foldMap' :: (a -&gt; m) -&gt; LabelTree b a -&gt; m
$cfoldMap' :: forall b m a. Monoid m =&gt; (a -&gt; m) -&gt; LabelTree b a -&gt; m
foldMap :: (a -&gt; m) -&gt; LabelTree b a -&gt; m
$cfoldMap :: forall b m a. Monoid m =&gt; (a -&gt; m) -&gt; LabelTree b a -&gt; m
fold :: LabelTree b m -&gt; m
$cfold :: forall b m. Monoid m =&gt; LabelTree b m -&gt; m
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603448"><span id="local-6989586621680603450"><span id="local-6989586621680603452"><span id="local-6989586621680603454"><span class="annot"><span class="annottext">Functor (LabelTree b)
Foldable (LabelTree b)
(Functor (LabelTree b), Foldable (LabelTree b)) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; LabelTree b a -&gt; f (LabelTree b b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    LabelTree b (f a) -&gt; f (LabelTree b a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; LabelTree b a -&gt; m (LabelTree b b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    LabelTree b (m a) -&gt; m (LabelTree b a))
-&gt; Traversable (LabelTree b)
(a -&gt; f b) -&gt; LabelTree b a -&gt; f (LabelTree b b)
forall b. Functor (LabelTree b)
forall b. Foldable (LabelTree b)
forall b (m :: * -&gt; *) a.
Monad m =&gt;
LabelTree b (m a) -&gt; m (LabelTree b a)
forall b (f :: * -&gt; *) a.
Applicative f =&gt;
LabelTree b (f a) -&gt; f (LabelTree b a)
forall b (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; LabelTree b a -&gt; m (LabelTree b b)
forall b (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; LabelTree b a -&gt; f (LabelTree b b)
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
LabelTree b (m a) -&gt; m (LabelTree b a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
LabelTree b (f a) -&gt; f (LabelTree b a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; LabelTree b a -&gt; m (LabelTree b b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; LabelTree b a -&gt; f (LabelTree b b)
sequence :: LabelTree b (m a) -&gt; m (LabelTree b a)
$csequence :: forall b (m :: * -&gt; *) a.
Monad m =&gt;
LabelTree b (m a) -&gt; m (LabelTree b a)
mapM :: (a -&gt; m b) -&gt; LabelTree b a -&gt; m (LabelTree b b)
$cmapM :: forall b (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; LabelTree b a -&gt; m (LabelTree b b)
sequenceA :: LabelTree b (f a) -&gt; f (LabelTree b a)
$csequenceA :: forall b (f :: * -&gt; *) a.
Applicative f =&gt;
LabelTree b (f a) -&gt; f (LabelTree b a)
traverse :: (a -&gt; f b) -&gt; LabelTree b a -&gt; f (LabelTree b b)
$ctraverse :: forall b (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; LabelTree b a -&gt; f (LabelTree b b)
$cp2Traversable :: forall b. Foldable (LabelTree b)
$cp1Traversable :: forall b. Functor (LabelTree b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603443"><span id="local-6989586621680603445"><span class="annot"><span class="annottext">LabelTree b a -&gt; LabelTree b a -&gt; Bool
(LabelTree b a -&gt; LabelTree b a -&gt; Bool)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; Bool) -&gt; Eq (LabelTree b a)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall b a. (Eq b, Eq a) =&gt; LabelTree b a -&gt; LabelTree b a -&gt; Bool
/= :: LabelTree b a -&gt; LabelTree b a -&gt; Bool
$c/= :: forall b a. (Eq b, Eq a) =&gt; LabelTree b a -&gt; LabelTree b a -&gt; Bool
== :: LabelTree b a -&gt; LabelTree b a -&gt; Bool
$c== :: forall b a. (Eq b, Eq a) =&gt; LabelTree b a -&gt; LabelTree b a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603427"><span id="local-6989586621680603429"><span id="local-6989586621680603431"><span id="local-6989586621680603433"><span id="local-6989586621680603435"><span id="local-6989586621680603437"><span id="local-6989586621680603439"><span class="annot"><span class="annottext">Eq (LabelTree b a)
Eq (LabelTree b a) =&gt;
(LabelTree b a -&gt; LabelTree b a -&gt; Ordering)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; Bool)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; Bool)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; Bool)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; Bool)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a)
-&gt; (LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a)
-&gt; Ord (LabelTree b a)
LabelTree b a -&gt; LabelTree b a -&gt; Bool
LabelTree b a -&gt; LabelTree b a -&gt; Ordering
LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall b a. (Ord b, Ord a) =&gt; Eq (LabelTree b a)
forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Bool
forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Ordering
forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a
min :: LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a
$cmin :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a
max :: LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a
$cmax :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; LabelTree b a
&gt;= :: LabelTree b a -&gt; LabelTree b a -&gt; Bool
$c&gt;= :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Bool
&gt; :: LabelTree b a -&gt; LabelTree b a -&gt; Bool
$c&gt; :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Bool
&lt;= :: LabelTree b a -&gt; LabelTree b a -&gt; Bool
$c&lt;= :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Bool
&lt; :: LabelTree b a -&gt; LabelTree b a -&gt; Bool
$c&lt; :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Bool
compare :: LabelTree b a -&gt; LabelTree b a -&gt; Ordering
$ccompare :: forall b a.
(Ord b, Ord a) =&gt;
LabelTree b a -&gt; LabelTree b a -&gt; Ordering
$cp1Ord :: forall b a. (Ord b, Ord a) =&gt; Eq (LabelTree b a)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603420"><span id="local-6989586621680603422"><span id="local-6989586621680603424"><span class="annot"><span class="annottext">Int -&gt; LabelTree b a -&gt; ShowS
[LabelTree b a] -&gt; ShowS
LabelTree b a -&gt; String
(Int -&gt; LabelTree b a -&gt; ShowS)
-&gt; (LabelTree b a -&gt; String)
-&gt; ([LabelTree b a] -&gt; ShowS)
-&gt; Show (LabelTree b a)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall b a. (Show b, Show a) =&gt; Int -&gt; LabelTree b a -&gt; ShowS
forall b a. (Show b, Show a) =&gt; [LabelTree b a] -&gt; ShowS
forall b a. (Show b, Show a) =&gt; LabelTree b a -&gt; String
showList :: [LabelTree b a] -&gt; ShowS
$cshowList :: forall b a. (Show b, Show a) =&gt; [LabelTree b a] -&gt; ShowS
show :: LabelTree b a -&gt; String
$cshow :: forall b a. (Show b, Show a) =&gt; LabelTree b a -&gt; String
showsPrec :: Int -&gt; LabelTree b a -&gt; ShowS
$cshowsPrec :: forall b a. (Show b, Show a) =&gt; Int -&gt; LabelTree b a -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">-- forall x . concatLT x . fmap pure = id</span><span>
</span><span id="line-297"></span><span id="local-6989586621680603708"><span id="local-6989586621680603709"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#concatLT"><span class="hs-identifier hs-type">concatLT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680603709"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603709"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603708"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603709"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603708"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-298"></span><span id="concatLT"><span class="annot"><span class="annottext">concatLT :: b -&gt; LabelTree b [a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#concatLT"><span class="hs-identifier hs-var hs-var">concatLT</span></a></span></span><span> </span><span id="local-6989586621680603417"><span class="annot"><span class="annottext">b :: b
</span><a href="#local-6989586621680603417"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; LabelTree b a)
-&gt; (b -&gt; [LabelTree b a] -&gt; LabelTree b a)
-&gt; LabelTree b [a]
-&gt; LabelTree b a
forall a c b. (a -&gt; c) -&gt; (b -&gt; [c] -&gt; c) -&gt; LabelTree b a -&gt; c
</span><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-var">foldLabelTree</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; LabelTree b a
</span><a href="#local-6989586621680603416"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; [LabelTree b a] -&gt; LabelTree b a
forall b a. b -&gt; [LabelTree b a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621680603416"><span class="annot"><span class="annottext">f :: [a] -&gt; LabelTree b a
</span><a href="#local-6989586621680603416"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621680603415"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680603415"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; LabelTree b a
forall b a. a -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Leaf"><span class="hs-identifier hs-var">Leaf</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680603415"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><a href="#local-6989586621680603416"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680603414"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680603414"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; [LabelTree b a] -&gt; LabelTree b a
forall b a. b -&gt; [LabelTree b a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680603417"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; LabelTree b a) -&gt; [a] -&gt; [LabelTree b a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; LabelTree b a
forall b a. a -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Leaf"><span class="hs-identifier hs-var">Leaf</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680603414"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span id="local-6989586621680603412"><span id="local-6989586621680603413"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#fromListLT"><span class="hs-identifier hs-type">fromListLT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603413"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603412"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603413"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603412"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-304"></span><span id="fromListLT"><span class="annot"><span class="annottext">fromListLT :: [a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#fromListLT"><span class="hs-identifier hs-var hs-var">fromListLT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; [LabelTree b a] -&gt; LabelTree b a
forall b a. b -&gt; [LabelTree b a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span><span> </span><span class="annot"><span class="annottext">b
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">([LabelTree b a] -&gt; LabelTree b a)
-&gt; ([a] -&gt; [LabelTree b a]) -&gt; [a] -&gt; LabelTree b a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; LabelTree b a) -&gt; [a] -&gt; [LabelTree b a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; LabelTree b a
forall b a. a -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Leaf"><span class="hs-identifier hs-var">Leaf</span></a></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span id="local-6989586621680604371"><span id="local-6989586621680604372"><span id="local-6989586621680604373"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-type">foldLabelTree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680604373"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604372"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680604371"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680604372"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604372"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604371"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604373"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604372"><span class="hs-identifier hs-type">c</span></a></span></span></span></span><span>
</span><span id="line-307"></span><span id="foldLabelTree"><span class="annot"><span class="annottext">foldLabelTree :: (a -&gt; c) -&gt; (b -&gt; [c] -&gt; c) -&gt; LabelTree b a -&gt; c
</span><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-var hs-var">foldLabelTree</span></a></span></span><span> </span><span id="local-6989586621680603410"><span class="annot"><span class="annottext">f :: a -&gt; c
</span><a href="#local-6989586621680603410"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Leaf"><span class="hs-identifier hs-type">Leaf</span></a></span><span> </span><span id="local-6989586621680603409"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680603409"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; c
</span><a href="#local-6989586621680603410"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680603409"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-308"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-var">foldLabelTree</span></a></span><span> </span><span id="local-6989586621680603408"><span class="annot"><span class="annottext">f :: a -&gt; c
</span><a href="#local-6989586621680603408"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680603407"><span class="annot"><span class="annottext">g :: b -&gt; [c] -&gt; c
</span><a href="#local-6989586621680603407"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Branch"><span class="hs-identifier hs-type">Branch</span></a></span><span> </span><span id="local-6989586621680603406"><span class="annot"><span class="annottext">b :: b
</span><a href="#local-6989586621680603406"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680603405"><span class="annot"><span class="annottext">xs :: [LabelTree b a]
</span><a href="#local-6989586621680603405"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; [c] -&gt; c
</span><a href="#local-6989586621680603407"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680603406"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LabelTree b a -&gt; c) -&gt; [LabelTree b a] -&gt; [c]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; c) -&gt; (b -&gt; [c] -&gt; c) -&gt; LabelTree b a -&gt; c
forall a c b. (a -&gt; c) -&gt; (b -&gt; [c] -&gt; c) -&gt; LabelTree b a -&gt; c
</span><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-var">foldLabelTree</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; c
</span><a href="#local-6989586621680603408"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; [c] -&gt; c
</span><a href="#local-6989586621680603407"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LabelTree b a]
</span><a href="#local-6989586621680603405"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="hs-comment">{-
Remember:

- Purpose here is to represent a standard/common/Western etc classical score.
- This type does /not/ have to be easy to enter manually.
- Keep it as simple as possible and CLEAR.
-

-}</span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="hs-comment">-- TODO w/wo connecting barlines</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- TODO parg group names (i.e. &quot;archi&quot;, &quot;horns&quot;, &quot;chorus&quot;, &quot;fl (I &amp;&amp; II)&quot;)</span><span>
</span><span id="line-322"></span><span class="hs-keyword">data</span><span> </span><span id="BracketType"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-var">BracketType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoBracket"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoBracket"><span class="hs-identifier hs-var">NoBracket</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Bracket"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bracket"><span class="hs-identifier hs-var">Bracket</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Brace"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Brace"><span class="hs-identifier hs-var">Brace</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Subbracket"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Subbracket"><span class="hs-identifier hs-var">Subbracket</span></a></span></span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603397"><span id="local-6989586621680603399"><span class="annot"><span class="annottext">BracketType -&gt; BracketType -&gt; Bool
(BracketType -&gt; BracketType -&gt; Bool)
-&gt; (BracketType -&gt; BracketType -&gt; Bool) -&gt; Eq BracketType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BracketType -&gt; BracketType -&gt; Bool
$c/= :: BracketType -&gt; BracketType -&gt; Bool
== :: BracketType -&gt; BracketType -&gt; Bool
$c== :: BracketType -&gt; BracketType -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603382"><span id="local-6989586621680603384"><span id="local-6989586621680603386"><span id="local-6989586621680603388"><span id="local-6989586621680603390"><span id="local-6989586621680603392"><span id="local-6989586621680603394"><span class="annot"><span class="annottext">Eq BracketType
Eq BracketType =&gt;
(BracketType -&gt; BracketType -&gt; Ordering)
-&gt; (BracketType -&gt; BracketType -&gt; Bool)
-&gt; (BracketType -&gt; BracketType -&gt; Bool)
-&gt; (BracketType -&gt; BracketType -&gt; Bool)
-&gt; (BracketType -&gt; BracketType -&gt; Bool)
-&gt; (BracketType -&gt; BracketType -&gt; BracketType)
-&gt; (BracketType -&gt; BracketType -&gt; BracketType)
-&gt; Ord BracketType
BracketType -&gt; BracketType -&gt; Bool
BracketType -&gt; BracketType -&gt; Ordering
BracketType -&gt; BracketType -&gt; BracketType
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BracketType -&gt; BracketType -&gt; BracketType
$cmin :: BracketType -&gt; BracketType -&gt; BracketType
max :: BracketType -&gt; BracketType -&gt; BracketType
$cmax :: BracketType -&gt; BracketType -&gt; BracketType
&gt;= :: BracketType -&gt; BracketType -&gt; Bool
$c&gt;= :: BracketType -&gt; BracketType -&gt; Bool
&gt; :: BracketType -&gt; BracketType -&gt; Bool
$c&gt; :: BracketType -&gt; BracketType -&gt; Bool
&lt;= :: BracketType -&gt; BracketType -&gt; Bool
$c&lt;= :: BracketType -&gt; BracketType -&gt; Bool
&lt; :: BracketType -&gt; BracketType -&gt; Bool
$c&lt; :: BracketType -&gt; BracketType -&gt; Bool
compare :: BracketType -&gt; BracketType -&gt; Ordering
$ccompare :: BracketType -&gt; BracketType -&gt; Ordering
$cp1Ord :: Eq BracketType
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603376"><span id="local-6989586621680603378"><span id="local-6989586621680603380"><span class="annot"><span class="annottext">Int -&gt; BracketType -&gt; ShowS
[BracketType] -&gt; ShowS
BracketType -&gt; String
(Int -&gt; BracketType -&gt; ShowS)
-&gt; (BracketType -&gt; String)
-&gt; ([BracketType] -&gt; ShowS)
-&gt; Show BracketType
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BracketType] -&gt; ShowS
$cshowList :: [BracketType] -&gt; ShowS
show :: BracketType -&gt; String
$cshow :: BracketType -&gt; String
showsPrec :: Int -&gt; BracketType -&gt; ShowS
$cshowsPrec :: Int -&gt; BracketType -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-keyword">type</span><span> </span><span id="BarNumber"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BarNumber"><span class="hs-identifier hs-var">BarNumber</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-keyword">type</span><span> </span><span id="TimeSignature"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TimeSignature"><span class="hs-identifier hs-var">TimeSignature</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Meta.Time.html#TimeSignature"><span class="hs-identifier hs-type">Music.Score.Meta.Time.TimeSignature</span></a></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-keyword">type</span><span> </span><span id="KeySignature"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#KeySignature"><span class="hs-identifier hs-var">KeySignature</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Meta.Key.html#KeySignature"><span class="hs-identifier hs-type">Music.Score.Meta.Key.KeySignature</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-keyword">type</span><span> </span><span id="RehearsalMark"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#RehearsalMark"><span class="hs-identifier hs-var">RehearsalMark</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Meta.RehearsalMark.html#RehearsalMark"><span class="hs-identifier hs-type">Music.Score.Meta.RehearsalMark.RehearsalMark</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">type</span><span> </span><span id="TempoMark"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TempoMark"><span class="hs-identifier hs-var">TempoMark</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Meta.Tempo.html#Tempo"><span class="hs-identifier hs-type">Music.Score.Meta.Tempo.Tempo</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-keyword">type</span><span> </span><span id="SpecialBarline"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SpecialBarline"><span class="hs-identifier hs-var">SpecialBarline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- TODO Dashed | Double | Final</span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-comment">-- type BarLines               = (Maybe SpecialBarline, Maybe SpecialBarline)</span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-comment">-- (prev,next) biased to next</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-comment">-- TODO lyrics</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-keyword">data</span><span> </span><span id="SystemBar"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-var">SystemBar</span></a></span></span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SystemBar"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-var">SystemBar</span></a></span></span><span>
</span><span id="line-343"></span><span>      </span><span class="hs-comment">{-
      We treat all the following information as global.

      This is more restrictive than most classical notations, but greatly
      simplifies representation. In this view, a score is a matrix of bars
      (each belonging to a single staff). Each bar must have a single
      time sig/key sig/rehearsal mark/tempo mark.

      ----
      Note: Option First ~ Maybe

      Alternatively we could just make these things into Monoids such that
      mempty means &quot;no notation at this point&quot;, and remove the &quot;Option First&quot;
      part here.

      Actually I'm pretty sure this is the right approach. See also #242
      -}</span><span>
</span><span id="line-360"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_barNumbers"><span class="annot"><span class="annottext">SystemBar -&gt; Option (First Int)
</span><a href="Music.Score.Export.StandardNotation.html#_barNumbers"><span class="hs-identifier hs-var hs-var">_barNumbers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BarNumber"><span class="hs-identifier hs-type">BarNumber</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-361"></span><span>        </span><span id="_timeSignature"><span class="annot"><span class="annottext">SystemBar -&gt; Option (First TimeSignature)
</span><a href="Music.Score.Export.StandardNotation.html#_timeSignature"><span class="hs-identifier hs-var hs-var">_timeSignature</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TimeSignature"><span class="hs-identifier hs-type">TimeSignature</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-362"></span><span>        </span><span id="_keySignature"><span class="annot"><span class="annottext">SystemBar -&gt; KeySignature
</span><a href="Music.Score.Export.StandardNotation.html#_keySignature"><span class="hs-identifier hs-var hs-var">_keySignature</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#KeySignature"><span class="hs-identifier hs-type">KeySignature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-363"></span><span>        </span><span id="_rehearsalMark"><span class="annot"><span class="annottext">SystemBar -&gt; Option (First RehearsalMark)
</span><a href="Music.Score.Export.StandardNotation.html#_rehearsalMark"><span class="hs-identifier hs-var hs-var">_rehearsalMark</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#RehearsalMark"><span class="hs-identifier hs-type">RehearsalMark</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-364"></span><span>        </span><span id="_tempoMark"><span class="annot"><span class="annottext">SystemBar -&gt; Option (First TempoMark)
</span><a href="Music.Score.Export.StandardNotation.html#_tempoMark"><span class="hs-identifier hs-var hs-var">_tempoMark</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TempoMark"><span class="hs-identifier hs-type">TempoMark</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>        </span><span class="hs-comment">-- ,_barLines :: BarLines</span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-comment">-- Tricky because of ambiguity. Use balanced pair</span><span>
</span><span id="line-367"></span><span>        </span><span class="hs-comment">-- or an alt-list in SystemStaff.</span><span>
</span><span id="line-368"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603363"><span id="local-6989586621680603365"><span class="annot"><span class="annottext">SystemBar -&gt; SystemBar -&gt; Bool
(SystemBar -&gt; SystemBar -&gt; Bool)
-&gt; (SystemBar -&gt; SystemBar -&gt; Bool) -&gt; Eq SystemBar
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SystemBar -&gt; SystemBar -&gt; Bool
$c/= :: SystemBar -&gt; SystemBar -&gt; Bool
== :: SystemBar -&gt; SystemBar -&gt; Bool
$c== :: SystemBar -&gt; SystemBar -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603348"><span id="local-6989586621680603350"><span id="local-6989586621680603352"><span id="local-6989586621680603354"><span id="local-6989586621680603356"><span id="local-6989586621680603358"><span id="local-6989586621680603360"><span class="annot"><span class="annottext">Eq SystemBar
Eq SystemBar =&gt;
(SystemBar -&gt; SystemBar -&gt; Ordering)
-&gt; (SystemBar -&gt; SystemBar -&gt; Bool)
-&gt; (SystemBar -&gt; SystemBar -&gt; Bool)
-&gt; (SystemBar -&gt; SystemBar -&gt; Bool)
-&gt; (SystemBar -&gt; SystemBar -&gt; Bool)
-&gt; (SystemBar -&gt; SystemBar -&gt; SystemBar)
-&gt; (SystemBar -&gt; SystemBar -&gt; SystemBar)
-&gt; Ord SystemBar
SystemBar -&gt; SystemBar -&gt; Bool
SystemBar -&gt; SystemBar -&gt; Ordering
SystemBar -&gt; SystemBar -&gt; SystemBar
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: SystemBar -&gt; SystemBar -&gt; SystemBar
$cmin :: SystemBar -&gt; SystemBar -&gt; SystemBar
max :: SystemBar -&gt; SystemBar -&gt; SystemBar
$cmax :: SystemBar -&gt; SystemBar -&gt; SystemBar
&gt;= :: SystemBar -&gt; SystemBar -&gt; Bool
$c&gt;= :: SystemBar -&gt; SystemBar -&gt; Bool
&gt; :: SystemBar -&gt; SystemBar -&gt; Bool
$c&gt; :: SystemBar -&gt; SystemBar -&gt; Bool
&lt;= :: SystemBar -&gt; SystemBar -&gt; Bool
$c&lt;= :: SystemBar -&gt; SystemBar -&gt; Bool
&lt; :: SystemBar -&gt; SystemBar -&gt; Bool
$c&lt; :: SystemBar -&gt; SystemBar -&gt; Bool
compare :: SystemBar -&gt; SystemBar -&gt; Ordering
$ccompare :: SystemBar -&gt; SystemBar -&gt; Ordering
$cp1Ord :: Eq SystemBar
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603342"><span id="local-6989586621680603344"><span id="local-6989586621680603346"><span class="annot"><span class="annottext">Int -&gt; SystemBar -&gt; ShowS
[SystemBar] -&gt; ShowS
SystemBar -&gt; String
(Int -&gt; SystemBar -&gt; ShowS)
-&gt; (SystemBar -&gt; String)
-&gt; ([SystemBar] -&gt; ShowS)
-&gt; Show SystemBar
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SystemBar] -&gt; ShowS
$cshowList :: [SystemBar] -&gt; ShowS
show :: SystemBar -&gt; String
$cshow :: SystemBar -&gt; String
showsPrec :: Int -&gt; SystemBar -&gt; ShowS
$cshowsPrec :: Int -&gt; SystemBar -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">type</span><span> </span><span id="SystemStaff"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-var">SystemStaff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-keyword">type</span><span> </span><span id="InstrumentShortName"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#InstrumentShortName"><span class="hs-identifier hs-var">InstrumentShortName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-keyword">type</span><span> </span><span id="InstrumentFullName"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#InstrumentFullName"><span class="hs-identifier hs-var">InstrumentFullName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-keyword">type</span><span> </span><span id="Transposition"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Transposition"><span class="hs-identifier hs-var">Transposition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Interval"><span class="hs-identifier hs-type">Music.Pitch.Interval</span></a></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-keyword">type</span><span> </span><span id="SibeliusFriendlyName"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SibeliusFriendlyName"><span class="hs-identifier hs-var">SibeliusFriendlyName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">type</span><span> </span><span id="SmallOrLarge"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SmallOrLarge"><span class="hs-identifier hs-var">SmallOrLarge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-comment">-- def False</span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="hs-keyword">type</span><span> </span><span id="ScoreOrder"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ScoreOrder"><span class="hs-identifier hs-var">ScoreOrder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-comment">-- def 0</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">{-
Staff-related information (not system staff).

We do *not* allow mid-staff instrument changes, so all instrument-related
information goes here as well.

TODO add instrument part no. (I, II.1 etc)
-}</span><span>
</span><span id="line-393"></span><span class="hs-keyword">data</span><span> </span><span id="StaffInfo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier hs-var">StaffInfo</span></a></span></span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="StaffInfo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier hs-var">StaffInfo</span></a></span></span><span>
</span><span id="line-395"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_instrumentShortName"><span class="annot"><span class="annottext">StaffInfo -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#_instrumentShortName"><span class="hs-identifier hs-var hs-var">_instrumentShortName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#InstrumentShortName"><span class="hs-identifier hs-type">InstrumentShortName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-396"></span><span>        </span><span id="_instrumentFullName"><span class="annot"><span class="annottext">StaffInfo -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#_instrumentFullName"><span class="hs-identifier hs-var hs-var">_instrumentFullName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#InstrumentFullName"><span class="hs-identifier hs-type">InstrumentFullName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>        </span><span id="_sibeliusFriendlyName"><span class="annot"><span class="annottext">StaffInfo -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#_sibeliusFriendlyName"><span class="hs-identifier hs-var hs-var">_sibeliusFriendlyName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SibeliusFriendlyName"><span class="hs-identifier hs-type">SibeliusFriendlyName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-398"></span><span>        </span><span class="hs-comment">{-
        See also clefChanges

        TODO change name of _instrumentDefaultClef
        More accurately, it represents the first clef to be used on the staff
        (and the only one if there are no changes.)

        OTOH having clef in the staff at all is redundant, specifying clef
        is optional (along with everything else) in this representation anyway.
        This is arguably wrong, as stanard notation generally requires a clef.
        -}</span><span>
</span><span id="line-409"></span><span>        </span><span id="_instrumentDefaultClef"><span class="annot"><span class="annottext">StaffInfo -&gt; Clef
</span><a href="Music.Score.Export.StandardNotation.html#_instrumentDefaultClef"><span class="hs-identifier hs-var hs-var">_instrumentDefaultClef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Pitch.Clef.html#Clef"><span class="hs-identifier hs-type">Music.Pitch.Clef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-410"></span><span>        </span><span class="hs-comment">{-
        I.e. -P5 for horn

        Note that this representation indicates *written pitch*, not sounding (as does MusicXML),
        so this value is redundant when rendering a graphical score. OTOH if this representation
        is used to render *sound*, pitches need to be transposed acconrdingly.
        -}</span><span>
</span><span id="line-417"></span><span>        </span><span id="_transposition"><span class="annot"><span class="annottext">StaffInfo -&gt; Transposition
</span><a href="Music.Score.Export.StandardNotation.html#_transposition"><span class="hs-identifier hs-var hs-var">_transposition</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Transposition"><span class="hs-identifier hs-type">Transposition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-418"></span><span>        </span><span id="_smallOrLarge"><span class="annot"><span class="annottext">StaffInfo -&gt; SmallOrLarge
</span><a href="Music.Score.Export.StandardNotation.html#_smallOrLarge"><span class="hs-identifier hs-var hs-var">_smallOrLarge</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SmallOrLarge"><span class="hs-identifier hs-type">SmallOrLarge</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-419"></span><span>        </span><span id="_scoreOrder"><span class="annot"><span class="annottext">StaffInfo -&gt; ScoreOrder
</span><a href="Music.Score.Export.StandardNotation.html#_scoreOrder"><span class="hs-identifier hs-var hs-var">_scoreOrder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ScoreOrder"><span class="hs-identifier hs-type">ScoreOrder</span></a></span><span>
</span><span id="line-420"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603327"><span id="local-6989586621680603329"><span class="annot"><span class="annottext">StaffInfo -&gt; StaffInfo -&gt; Bool
(StaffInfo -&gt; StaffInfo -&gt; Bool)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; Bool) -&gt; Eq StaffInfo
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: StaffInfo -&gt; StaffInfo -&gt; Bool
$c/= :: StaffInfo -&gt; StaffInfo -&gt; Bool
== :: StaffInfo -&gt; StaffInfo -&gt; Bool
$c== :: StaffInfo -&gt; StaffInfo -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603312"><span id="local-6989586621680603314"><span id="local-6989586621680603316"><span id="local-6989586621680603318"><span id="local-6989586621680603320"><span id="local-6989586621680603322"><span id="local-6989586621680603324"><span class="annot"><span class="annottext">Eq StaffInfo
Eq StaffInfo =&gt;
(StaffInfo -&gt; StaffInfo -&gt; Ordering)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; Bool)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; Bool)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; Bool)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; Bool)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; StaffInfo)
-&gt; (StaffInfo -&gt; StaffInfo -&gt; StaffInfo)
-&gt; Ord StaffInfo
StaffInfo -&gt; StaffInfo -&gt; Bool
StaffInfo -&gt; StaffInfo -&gt; Ordering
StaffInfo -&gt; StaffInfo -&gt; StaffInfo
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: StaffInfo -&gt; StaffInfo -&gt; StaffInfo
$cmin :: StaffInfo -&gt; StaffInfo -&gt; StaffInfo
max :: StaffInfo -&gt; StaffInfo -&gt; StaffInfo
$cmax :: StaffInfo -&gt; StaffInfo -&gt; StaffInfo
&gt;= :: StaffInfo -&gt; StaffInfo -&gt; Bool
$c&gt;= :: StaffInfo -&gt; StaffInfo -&gt; Bool
&gt; :: StaffInfo -&gt; StaffInfo -&gt; Bool
$c&gt; :: StaffInfo -&gt; StaffInfo -&gt; Bool
&lt;= :: StaffInfo -&gt; StaffInfo -&gt; Bool
$c&lt;= :: StaffInfo -&gt; StaffInfo -&gt; Bool
&lt; :: StaffInfo -&gt; StaffInfo -&gt; Bool
$c&lt; :: StaffInfo -&gt; StaffInfo -&gt; Bool
compare :: StaffInfo -&gt; StaffInfo -&gt; Ordering
$ccompare :: StaffInfo -&gt; StaffInfo -&gt; Ordering
$cp1Ord :: Eq StaffInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603306"><span id="local-6989586621680603308"><span id="local-6989586621680603310"><span class="annot"><span class="annottext">Int -&gt; StaffInfo -&gt; ShowS
[StaffInfo] -&gt; ShowS
StaffInfo -&gt; String
(Int -&gt; StaffInfo -&gt; ShowS)
-&gt; (StaffInfo -&gt; String)
-&gt; ([StaffInfo] -&gt; ShowS)
-&gt; Show StaffInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [StaffInfo] -&gt; ShowS
$cshowList :: [StaffInfo] -&gt; ShowS
show :: StaffInfo -&gt; String
$cshow :: StaffInfo -&gt; String
showsPrec :: Int -&gt; StaffInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; StaffInfo -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="hs-keyword">type</span><span> </span><span id="Title"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Title"><span class="hs-identifier hs-var">Title</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-keyword">type</span><span> </span><span id="Annotations"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Annotations"><span class="hs-identifier hs-var">Annotations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="hs-keyword">type</span><span> </span><span id="Attribution"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Attribution"><span class="hs-identifier hs-var">Attribution</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-comment">-- composer, lyricist etc</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-keyword">data</span><span> </span><span id="MovementInfo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier hs-var">MovementInfo</span></a></span></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MovementInfo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier hs-var">MovementInfo</span></a></span></span><span>
</span><span id="line-431"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_movementTitle"><span class="annot"><span class="annottext">MovementInfo -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#_movementTitle"><span class="hs-identifier hs-var hs-var">_movementTitle</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Title"><span class="hs-identifier hs-type">Title</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-432"></span><span>        </span><span id="_movementAnnotations"><span class="annot"><span class="annottext">MovementInfo -&gt; Annotations
</span><a href="Music.Score.Export.StandardNotation.html#_movementAnnotations"><span class="hs-identifier hs-var hs-var">_movementAnnotations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Annotations"><span class="hs-identifier hs-type">Annotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-433"></span><span>        </span><span id="_movementAttribution"><span class="annot"><span class="annottext">MovementInfo -&gt; Attribution
</span><a href="Music.Score.Export.StandardNotation.html#_movementAttribution"><span class="hs-identifier hs-var hs-var">_movementAttribution</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Attribution"><span class="hs-identifier hs-type">Attribution</span></a></span><span>
</span><span id="line-434"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603298"><span id="local-6989586621680603300"><span class="annot"><span class="annottext">MovementInfo -&gt; MovementInfo -&gt; Bool
(MovementInfo -&gt; MovementInfo -&gt; Bool)
-&gt; (MovementInfo -&gt; MovementInfo -&gt; Bool) -&gt; Eq MovementInfo
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MovementInfo -&gt; MovementInfo -&gt; Bool
$c/= :: MovementInfo -&gt; MovementInfo -&gt; Bool
== :: MovementInfo -&gt; MovementInfo -&gt; Bool
$c== :: MovementInfo -&gt; MovementInfo -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603292"><span id="local-6989586621680603294"><span id="local-6989586621680603296"><span class="annot"><span class="annottext">Int -&gt; MovementInfo -&gt; ShowS
[MovementInfo] -&gt; ShowS
MovementInfo -&gt; String
(Int -&gt; MovementInfo -&gt; ShowS)
-&gt; (MovementInfo -&gt; String)
-&gt; ([MovementInfo] -&gt; ShowS)
-&gt; Show MovementInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MovementInfo] -&gt; ShowS
$cshowList :: [MovementInfo] -&gt; ShowS
show :: MovementInfo -&gt; String
$cshow :: MovementInfo -&gt; String
showsPrec :: Int -&gt; MovementInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; MovementInfo -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-keyword">data</span><span> </span><span id="WorkInfo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier hs-var">WorkInfo</span></a></span></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="WorkInfo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier hs-var">WorkInfo</span></a></span></span><span>
</span><span id="line-439"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_title"><span class="annot"><span class="annottext">WorkInfo -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#_title"><span class="hs-identifier hs-var hs-var">_title</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Title"><span class="hs-identifier hs-type">Title</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-440"></span><span>        </span><span id="_annotations"><span class="annot"><span class="annottext">WorkInfo -&gt; Annotations
</span><a href="Music.Score.Export.StandardNotation.html#_annotations"><span class="hs-identifier hs-var hs-var">_annotations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Annotations"><span class="hs-identifier hs-type">Annotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-441"></span><span>        </span><span id="_attribution"><span class="annot"><span class="annottext">WorkInfo -&gt; Attribution
</span><a href="Music.Score.Export.StandardNotation.html#_attribution"><span class="hs-identifier hs-var hs-var">_attribution</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Attribution"><span class="hs-identifier hs-type">Attribution</span></a></span><span>
</span><span id="line-442"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603284"><span id="local-6989586621680603286"><span class="annot"><span class="annottext">WorkInfo -&gt; WorkInfo -&gt; Bool
(WorkInfo -&gt; WorkInfo -&gt; Bool)
-&gt; (WorkInfo -&gt; WorkInfo -&gt; Bool) -&gt; Eq WorkInfo
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: WorkInfo -&gt; WorkInfo -&gt; Bool
$c/= :: WorkInfo -&gt; WorkInfo -&gt; Bool
== :: WorkInfo -&gt; WorkInfo -&gt; Bool
$c== :: WorkInfo -&gt; WorkInfo -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603278"><span id="local-6989586621680603280"><span id="local-6989586621680603282"><span class="annot"><span class="annottext">Int -&gt; WorkInfo -&gt; ShowS
[WorkInfo] -&gt; ShowS
WorkInfo -&gt; String
(Int -&gt; WorkInfo -&gt; ShowS)
-&gt; (WorkInfo -&gt; String) -&gt; ([WorkInfo] -&gt; ShowS) -&gt; Show WorkInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [WorkInfo] -&gt; ShowS
$cshowList :: [WorkInfo] -&gt; ShowS
show :: WorkInfo -&gt; String
$cshow :: WorkInfo -&gt; String
showsPrec :: Int -&gt; WorkInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; WorkInfo -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="hs-keyword">data</span><span> </span><span id="ArpeggioNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArpeggioNotation"><span class="hs-identifier hs-var">ArpeggioNotation</span></a></span></span><span>
</span><span id="line-446"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Don't show anything</span><span>
</span><span id="line-447"></span><span>    </span><span id="NoArpeggio"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoArpeggio"><span class="hs-identifier hs-var">NoArpeggio</span></a></span></span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Show &quot;no arpeggio&quot; bracket</span><span>
</span><span id="line-449"></span><span>    </span><span id="NoArpeggioBracket"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoArpeggioBracket"><span class="hs-identifier hs-var">NoArpeggioBracket</span></a></span></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Arpeggio"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Arpeggio"><span class="hs-identifier hs-var">Arpeggio</span></a></span></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpArpeggio"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#UpArpeggio"><span class="hs-identifier hs-var">UpArpeggio</span></a></span></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DownArpeggio"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#DownArpeggio"><span class="hs-identifier hs-var">DownArpeggio</span></a></span></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603269"><span id="local-6989586621680603271"><span class="annot"><span class="annottext">ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
(ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool)
-&gt; Eq ArpeggioNotation
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
$c/= :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
== :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
$c== :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603254"><span id="local-6989586621680603256"><span id="local-6989586621680603258"><span id="local-6989586621680603260"><span id="local-6989586621680603262"><span id="local-6989586621680603264"><span id="local-6989586621680603266"><span class="annot"><span class="annottext">Eq ArpeggioNotation
Eq ArpeggioNotation =&gt;
(ArpeggioNotation -&gt; ArpeggioNotation -&gt; Ordering)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation)
-&gt; (ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation)
-&gt; Ord ArpeggioNotation
ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
ArpeggioNotation -&gt; ArpeggioNotation -&gt; Ordering
ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation
$cmin :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation
max :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation
$cmax :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation
&gt;= :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
$c&gt;= :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
&gt; :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
$c&gt; :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
&lt;= :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
$c&lt;= :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
&lt; :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
$c&lt; :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
compare :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Ordering
$ccompare :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; Ordering
$cp1Ord :: Eq ArpeggioNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603248"><span id="local-6989586621680603250"><span id="local-6989586621680603252"><span class="annot"><span class="annottext">Int -&gt; ArpeggioNotation -&gt; ShowS
[ArpeggioNotation] -&gt; ShowS
ArpeggioNotation -&gt; String
(Int -&gt; ArpeggioNotation -&gt; ShowS)
-&gt; (ArpeggioNotation -&gt; String)
-&gt; ([ArpeggioNotation] -&gt; ShowS)
-&gt; Show ArpeggioNotation
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ArpeggioNotation] -&gt; ShowS
$cshowList :: [ArpeggioNotation] -&gt; ShowS
show :: ArpeggioNotation -&gt; String
$cshow :: ArpeggioNotation -&gt; String
showsPrec :: Int -&gt; ArpeggioNotation -&gt; ShowS
$cshowsPrec :: Int -&gt; ArpeggioNotation -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-456"></span><span class="hs-comment">-- As written, i.e. 1/16-notes twice, can be represented as 1/8 note with 1 beams</span><span>
</span><span id="line-457"></span><span class="hs-comment">--</span><span>
</span><span id="line-458"></span><span class="hs-comment">-- These attach to chords</span><span>
</span><span id="line-459"></span><span class="hs-comment">--</span><span>
</span><span id="line-460"></span><span class="hs-comment">-- The distinction between MultiPitchTremolo and CrossBeamTremolo only really make sense</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- for string and keyboard instruments.</span><span>
</span><span id="line-462"></span><span class="hs-comment">--</span><span>
</span><span id="line-463"></span><span class="hs-comment">-- @Just n@ indicates n of extra beams/cross-beams.</span><span>
</span><span id="line-464"></span><span class="hs-comment">-- For unmeasured tremolo, use @Nothing@.</span><span>
</span><span id="line-465"></span><span class="hs-keyword">data</span><span> </span><span id="TremoloNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TremoloNotation"><span class="hs-identifier hs-var">TremoloNotation</span></a></span></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MultiPitchTremolo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MultiPitchTremolo"><span class="hs-identifier hs-var">MultiPitchTremolo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CrossBeamTremolo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#CrossBeamTremolo"><span class="hs-identifier hs-var">CrossBeamTremolo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoTremolo"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoTremolo"><span class="hs-identifier hs-var">NoTremolo</span></a></span></span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603241"><span id="local-6989586621680603243"><span class="annot"><span class="annottext">TremoloNotation -&gt; TremoloNotation -&gt; Bool
(TremoloNotation -&gt; TremoloNotation -&gt; Bool)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; Bool)
-&gt; Eq TremoloNotation
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
$c/= :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
== :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
$c== :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603226"><span id="local-6989586621680603228"><span id="local-6989586621680603230"><span id="local-6989586621680603232"><span id="local-6989586621680603234"><span id="local-6989586621680603236"><span id="local-6989586621680603238"><span class="annot"><span class="annottext">Eq TremoloNotation
Eq TremoloNotation =&gt;
(TremoloNotation -&gt; TremoloNotation -&gt; Ordering)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; Bool)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; Bool)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; Bool)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; Bool)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation)
-&gt; (TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation)
-&gt; Ord TremoloNotation
TremoloNotation -&gt; TremoloNotation -&gt; Bool
TremoloNotation -&gt; TremoloNotation -&gt; Ordering
TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation
$cmin :: TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation
max :: TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation
$cmax :: TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation
&gt;= :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
$c&gt;= :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
&gt; :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
$c&gt; :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
&lt;= :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
$c&lt;= :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
&lt; :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
$c&lt; :: TremoloNotation -&gt; TremoloNotation -&gt; Bool
compare :: TremoloNotation -&gt; TremoloNotation -&gt; Ordering
$ccompare :: TremoloNotation -&gt; TremoloNotation -&gt; Ordering
$cp1Ord :: Eq TremoloNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603220"><span id="local-6989586621680603222"><span id="local-6989586621680603224"><span class="annot"><span class="annottext">Int -&gt; TremoloNotation -&gt; ShowS
[TremoloNotation] -&gt; ShowS
TremoloNotation -&gt; String
(Int -&gt; TremoloNotation -&gt; ShowS)
-&gt; (TremoloNotation -&gt; String)
-&gt; ([TremoloNotation] -&gt; ShowS)
-&gt; Show TremoloNotation
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TremoloNotation] -&gt; ShowS
$cshowList :: [TremoloNotation] -&gt; ShowS
show :: TremoloNotation -&gt; String
$cshow :: TremoloNotation -&gt; String
showsPrec :: Int -&gt; TremoloNotation -&gt; ShowS
$cshowsPrec :: Int -&gt; TremoloNotation -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-comment">-- type UpDown       = Up | Down</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- data CrossStaff   = NoCrossStaff | NextNoteCrossStaff UpDown | PreviousNoteCrossStaff UpDown</span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span class="hs-comment">-- Always apply *after* the indicated chord.</span><span>
</span><span id="line-475"></span><span class="hs-keyword">data</span><span> </span><span id="BreathNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BreathNotation"><span class="hs-identifier hs-var">BreathNotation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoBreath"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoBreath"><span class="hs-identifier hs-var">NoBreath</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Comma"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Comma"><span class="hs-identifier hs-var">Comma</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Caesura"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Caesura"><span class="hs-identifier hs-var">Caesura</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="CaesuraWithFermata"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#CaesuraWithFermata"><span class="hs-identifier hs-var">CaesuraWithFermata</span></a></span></span><span>
</span><span id="line-476"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603212"><span id="local-6989586621680603214"><span class="annot"><span class="annottext">BreathNotation -&gt; BreathNotation -&gt; Bool
(BreathNotation -&gt; BreathNotation -&gt; Bool)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; Bool) -&gt; Eq BreathNotation
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BreathNotation -&gt; BreathNotation -&gt; Bool
$c/= :: BreathNotation -&gt; BreathNotation -&gt; Bool
== :: BreathNotation -&gt; BreathNotation -&gt; Bool
$c== :: BreathNotation -&gt; BreathNotation -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603197"><span id="local-6989586621680603199"><span id="local-6989586621680603201"><span id="local-6989586621680603203"><span id="local-6989586621680603205"><span id="local-6989586621680603207"><span id="local-6989586621680603209"><span class="annot"><span class="annottext">Eq BreathNotation
Eq BreathNotation =&gt;
(BreathNotation -&gt; BreathNotation -&gt; Ordering)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; Bool)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; Bool)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; Bool)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; Bool)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; BreathNotation)
-&gt; (BreathNotation -&gt; BreathNotation -&gt; BreathNotation)
-&gt; Ord BreathNotation
BreathNotation -&gt; BreathNotation -&gt; Bool
BreathNotation -&gt; BreathNotation -&gt; Ordering
BreathNotation -&gt; BreathNotation -&gt; BreathNotation
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: BreathNotation -&gt; BreathNotation -&gt; BreathNotation
$cmin :: BreathNotation -&gt; BreathNotation -&gt; BreathNotation
max :: BreathNotation -&gt; BreathNotation -&gt; BreathNotation
$cmax :: BreathNotation -&gt; BreathNotation -&gt; BreathNotation
&gt;= :: BreathNotation -&gt; BreathNotation -&gt; Bool
$c&gt;= :: BreathNotation -&gt; BreathNotation -&gt; Bool
&gt; :: BreathNotation -&gt; BreathNotation -&gt; Bool
$c&gt; :: BreathNotation -&gt; BreathNotation -&gt; Bool
&lt;= :: BreathNotation -&gt; BreathNotation -&gt; Bool
$c&lt;= :: BreathNotation -&gt; BreathNotation -&gt; Bool
&lt; :: BreathNotation -&gt; BreathNotation -&gt; Bool
$c&lt; :: BreathNotation -&gt; BreathNotation -&gt; Bool
compare :: BreathNotation -&gt; BreathNotation -&gt; Ordering
$ccompare :: BreathNotation -&gt; BreathNotation -&gt; Ordering
$cp1Ord :: Eq BreathNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603191"><span id="local-6989586621680603193"><span id="local-6989586621680603195"><span class="annot"><span class="annottext">Int -&gt; BreathNotation -&gt; ShowS
[BreathNotation] -&gt; ShowS
BreathNotation -&gt; String
(Int -&gt; BreathNotation -&gt; ShowS)
-&gt; (BreathNotation -&gt; String)
-&gt; ([BreathNotation] -&gt; ShowS)
-&gt; Show BreathNotation
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BreathNotation] -&gt; ShowS
$cshowList :: [BreathNotation] -&gt; ShowS
show :: BreathNotation -&gt; String
$cshow :: BreathNotation -&gt; String
showsPrec :: Int -&gt; BreathNotation -&gt; ShowS
$cshowsPrec :: Int -&gt; BreathNotation -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-keyword">type</span><span> </span><span id="ArticulationNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArticulationNotation"><span class="hs-identifier hs-var">ArticulationNotation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">Music.Score.Export.ArticulationNotation.ArticulationNotation</span></a></span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="hs-keyword">type</span><span> </span><span id="DynamicNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#DynamicNotation"><span class="hs-identifier hs-var">DynamicNotation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#DynamicNotation"><span class="hs-identifier hs-type">Music.Score.Export.DynamicNotation.DynamicNotation</span></a></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="hs-keyword">type</span><span> </span><span id="HarmonicNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#HarmonicNotation"><span class="hs-identifier hs-var">HarmonicNotation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="hs-comment">-- (artificial?, partial number)</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-keyword">type</span><span> </span><span id="SlideNotation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-var">SlideNotation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- (endGliss?,endSlide?),(beginGliss?,beginSlide?)</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-comment">{-
For historical reasons we have two equivalent conventions for representing
begin/end of spanners:

  - (beginSlide::Any, endSlide::Any)
  - [EndCresc, BeginCresc]

These are isomorphic (at least as long as the list is considered as Set).
Both are monoids (assuming Any is being used and abscence in the set is taken
to mean &quot;no begin/end&quot;). Both also support the following type of access:

  endGliss :: Lens' SlideNotation Any

-}</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#endGliss"><span class="hs-identifier hs-type">endGliss</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span>
</span><span id="line-506"></span><span id="endGliss"><span class="annot"><span class="annottext">endGliss :: (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation -&gt; f SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#endGliss"><span class="hs-identifier hs-var hs-var">endGliss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; SlideNotation -&gt; f SlideNotation
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
 -&gt; SlideNotation -&gt; f SlideNotation)
-&gt; ((SmallOrLarge -&gt; f SmallOrLarge)
    -&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation
-&gt; f SlideNotation
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SmallOrLarge -&gt; f SmallOrLarge)
-&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#endSlide"><span class="hs-identifier hs-type">endSlide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span>
</span><span id="line-509"></span><span id="endSlide"><span class="annot"><span class="annottext">endSlide :: (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation -&gt; f SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#endSlide"><span class="hs-identifier hs-var hs-var">endSlide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; SlideNotation -&gt; f SlideNotation
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">(((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
 -&gt; SlideNotation -&gt; f SlideNotation)
-&gt; ((SmallOrLarge -&gt; f SmallOrLarge)
    -&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation
-&gt; f SlideNotation
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SmallOrLarge -&gt; f SmallOrLarge)
-&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#beginGliss"><span class="hs-identifier hs-type">beginGliss</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span>
</span><span id="line-512"></span><span id="beginGliss"><span class="annot"><span class="annottext">beginGliss :: (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation -&gt; f SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#beginGliss"><span class="hs-identifier hs-var hs-var">beginGliss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; SlideNotation -&gt; f SlideNotation
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span> </span><span class="annot"><span class="annottext">(((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
 -&gt; SlideNotation -&gt; f SlideNotation)
-&gt; ((SmallOrLarge -&gt; f SmallOrLarge)
    -&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation
-&gt; f SlideNotation
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SmallOrLarge -&gt; f SmallOrLarge)
-&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#beginSlide"><span class="hs-identifier hs-type">beginSlide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span>
</span><span id="line-515"></span><span id="beginSlide"><span class="annot"><span class="annottext">beginSlide :: (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation -&gt; f SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#beginSlide"><span class="hs-identifier hs-var hs-var">beginSlide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; SlideNotation -&gt; f SlideNotation
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span> </span><span class="annot"><span class="annottext">(((SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
 -&gt; SlideNotation -&gt; f SlideNotation)
-&gt; ((SmallOrLarge -&gt; f SmallOrLarge)
    -&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge))
-&gt; (SmallOrLarge -&gt; f SmallOrLarge)
-&gt; SlideNotation
-&gt; f SlideNotation
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SmallOrLarge -&gt; f SmallOrLarge)
-&gt; (SmallOrLarge, SmallOrLarge) -&gt; f (SmallOrLarge, SmallOrLarge)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="hs-keyword">type</span><span> </span><span id="Ties"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Ties"><span class="hs-identifier hs-var">Ties</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="hs-comment">-- (endTie?,beginTie?)</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-comment">-- TODO unify with Score.Meta.Fermata</span><span>
</span><span id="line-522"></span><span class="hs-keyword">data</span><span> </span><span id="Fermata"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier hs-var">Fermata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoFermata"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoFermata"><span class="hs-identifier hs-var">NoFermata</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Fermata"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier hs-var">Fermata</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ShortFermata"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ShortFermata"><span class="hs-identifier hs-var">ShortFermata</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="LongFermata"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LongFermata"><span class="hs-identifier hs-var">LongFermata</span></a></span></span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603181"><span id="local-6989586621680603183"><span class="annot"><span class="annottext">Fermata -&gt; Fermata -&gt; Bool
(Fermata -&gt; Fermata -&gt; Bool)
-&gt; (Fermata -&gt; Fermata -&gt; Bool) -&gt; Eq Fermata
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Fermata -&gt; Fermata -&gt; Bool
$c/= :: Fermata -&gt; Fermata -&gt; Bool
== :: Fermata -&gt; Fermata -&gt; Bool
$c== :: Fermata -&gt; Fermata -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603166"><span id="local-6989586621680603168"><span id="local-6989586621680603170"><span id="local-6989586621680603172"><span id="local-6989586621680603174"><span id="local-6989586621680603176"><span id="local-6989586621680603178"><span class="annot"><span class="annottext">Eq Fermata
Eq Fermata =&gt;
(Fermata -&gt; Fermata -&gt; Ordering)
-&gt; (Fermata -&gt; Fermata -&gt; Bool)
-&gt; (Fermata -&gt; Fermata -&gt; Bool)
-&gt; (Fermata -&gt; Fermata -&gt; Bool)
-&gt; (Fermata -&gt; Fermata -&gt; Bool)
-&gt; (Fermata -&gt; Fermata -&gt; Fermata)
-&gt; (Fermata -&gt; Fermata -&gt; Fermata)
-&gt; Ord Fermata
Fermata -&gt; Fermata -&gt; Bool
Fermata -&gt; Fermata -&gt; Ordering
Fermata -&gt; Fermata -&gt; Fermata
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Fermata -&gt; Fermata -&gt; Fermata
$cmin :: Fermata -&gt; Fermata -&gt; Fermata
max :: Fermata -&gt; Fermata -&gt; Fermata
$cmax :: Fermata -&gt; Fermata -&gt; Fermata
&gt;= :: Fermata -&gt; Fermata -&gt; Bool
$c&gt;= :: Fermata -&gt; Fermata -&gt; Bool
&gt; :: Fermata -&gt; Fermata -&gt; Bool
$c&gt; :: Fermata -&gt; Fermata -&gt; Bool
&lt;= :: Fermata -&gt; Fermata -&gt; Bool
$c&lt;= :: Fermata -&gt; Fermata -&gt; Bool
&lt; :: Fermata -&gt; Fermata -&gt; Bool
$c&lt; :: Fermata -&gt; Fermata -&gt; Bool
compare :: Fermata -&gt; Fermata -&gt; Ordering
$ccompare :: Fermata -&gt; Fermata -&gt; Ordering
$cp1Ord :: Eq Fermata
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603160"><span id="local-6989586621680603162"><span id="local-6989586621680603164"><span class="annot"><span class="annottext">Int -&gt; Fermata -&gt; ShowS
[Fermata] -&gt; ShowS
Fermata -&gt; String
(Int -&gt; Fermata -&gt; ShowS)
-&gt; (Fermata -&gt; String) -&gt; ([Fermata] -&gt; ShowS) -&gt; Show Fermata
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Fermata] -&gt; ShowS
$cshowList :: [Fermata] -&gt; ShowS
show :: Fermata -&gt; String
$cshow :: Fermata -&gt; String
showsPrec :: Int -&gt; Fermata -&gt; ShowS
$cshowsPrec :: Int -&gt; Fermata -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-comment">-- TODO appogiatura/acciatura</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- TODO beaming</span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-comment">-- Rests, single-notes and chords (most attributes are not shown for rests)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- A chord. A possibly empty list of pitches, played simultaneously.</span><span>
</span><span id="line-532"></span><span class="hs-comment">-- Naturally, an empty pitch list renders as a rest and a singleton list as</span><span>
</span><span id="line-533"></span><span class="hs-comment">-- a single note.</span><span>
</span><span id="line-534"></span><span class="hs-comment">--</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- In MusicXML our chords are rendered using &lt;note&gt; elements. The MusicXML convention</span><span>
</span><span id="line-536"></span><span class="hs-comment">-- is to render each note or rest using a &lt;note&gt;. If the note is actually a rest,</span><span>
</span><span id="line-537"></span><span class="hs-comment">-- it is tagged with a &lt;rest/&gt; element inside the note. If it is part of a chord,</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- each note except one (typically the first) is tagged with a &lt;chord/&gt; element.</span><span>
</span><span id="line-539"></span><span class="hs-comment">--</span><span>
</span><span id="line-540"></span><span class="hs-comment">-- It makes more sense if you think of the note element as representing a note/rest</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- symbol and an implicit advancement of the time counter, and he chord element as</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- an instruction to draw a note but skip advancing time (conversely backup/forward)</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- do affect the time counter but do not draw anything.</span><span>
</span><span id="line-544"></span><span class="hs-comment">--</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- TODO arguably ties, colors, harmonics and slide/gliss should be represented</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- per notehead, and not per chord. This is simpler but may require more</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- voices/layers to represent certain music.</span><span>
</span><span id="line-548"></span><span class="hs-comment">--</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- TODO Better text. Separate different text types (again based on graphical</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- presentation rather than semantics).</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- Note that MusicXML unfortunately makes no distinction between expressive marks</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- (i.e. dolce) versus instructions (i.e. pizz, sul pont).</span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span class="hs-comment">-- TODO pedal notation</span><span>
</span><span id="line-555"></span><span class="hs-comment">-- TODO 8va notations</span><span>
</span><span id="line-556"></span><span class="hs-comment">-- TODO trills</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- TODO brackets/dashed lines?</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="hs-keyword">data</span><span> </span><span id="Chord"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-var">Chord</span></a></span></span><span>
</span><span id="line-560"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Chord"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-var">Chord</span></a></span></span><span>
</span><span id="line-561"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_pitches"><span class="annot"><span class="annottext">Chord -&gt; [Pitch]
</span><a href="Music.Score.Export.StandardNotation.html#_pitches"><span class="hs-identifier hs-var hs-var">_pitches</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-562"></span><span>        </span><span id="_arpeggioNotation"><span class="annot"><span class="annottext">Chord -&gt; ArpeggioNotation
</span><a href="Music.Score.Export.StandardNotation.html#_arpeggioNotation"><span class="hs-identifier hs-var hs-var">_arpeggioNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArpeggioNotation"><span class="hs-identifier hs-type">ArpeggioNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-563"></span><span>        </span><span id="_tremoloNotation"><span class="annot"><span class="annottext">Chord -&gt; TremoloNotation
</span><a href="Music.Score.Export.StandardNotation.html#_tremoloNotation"><span class="hs-identifier hs-var hs-var">_tremoloNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TremoloNotation"><span class="hs-identifier hs-type">TremoloNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-564"></span><span>        </span><span id="_breathNotation"><span class="annot"><span class="annottext">Chord -&gt; BreathNotation
</span><a href="Music.Score.Export.StandardNotation.html#_breathNotation"><span class="hs-identifier hs-var hs-var">_breathNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BreathNotation"><span class="hs-identifier hs-type">BreathNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-565"></span><span>        </span><span id="_articulationNotation"><span class="annot"><span class="annottext">Chord -&gt; ArticulationNotation
</span><a href="Music.Score.Export.StandardNotation.html#_articulationNotation"><span class="hs-identifier hs-var hs-var">_articulationNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">ArticulationNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-566"></span><span>        </span><span class="hs-comment">-- I'd like to put dynamics in a separate layer, but neither Lily nor MusicXML thinks this way</span><span>
</span><span id="line-567"></span><span>        </span><span id="_dynamicNotation"><span class="annot"><span class="annottext">Chord -&gt; DynamicNotation
</span><a href="Music.Score.Export.StandardNotation.html#_dynamicNotation"><span class="hs-identifier hs-var hs-var">_dynamicNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#DynamicNotation"><span class="hs-identifier hs-type">DynamicNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-568"></span><span>        </span><span id="_fermata"><span class="annot"><span class="annottext">Chord -&gt; Fermata
</span><a href="Music.Score.Export.StandardNotation.html#_fermata"><span class="hs-identifier hs-var hs-var">_fermata</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier hs-type">Fermata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-569"></span><span>        </span><span id="_chordColor"><span class="annot"><span class="annottext">Chord -&gt; Option (First (Colour Double))
</span><a href="Music.Score.Export.StandardNotation.html#_chordColor"><span class="hs-identifier hs-var hs-var">_chordColor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier hs-type">Colour</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-570"></span><span>        </span><span id="_chordText"><span class="annot"><span class="annottext">Chord -&gt; [String]
</span><a href="Music.Score.Export.StandardNotation.html#_chordText"><span class="hs-identifier hs-var hs-var">_chordText</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-571"></span><span>        </span><span id="_harmonicNotation"><span class="annot"><span class="annottext">Chord -&gt; HarmonicNotation
</span><a href="Music.Score.Export.StandardNotation.html#_harmonicNotation"><span class="hs-identifier hs-var hs-var">_harmonicNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#HarmonicNotation"><span class="hs-identifier hs-type">HarmonicNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-572"></span><span>        </span><span id="_slideNotation"><span class="annot"><span class="annottext">Chord -&gt; SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#_slideNotation"><span class="hs-identifier hs-var hs-var">_slideNotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-573"></span><span>        </span><span id="_ties"><span class="annot"><span class="annottext">Chord -&gt; (SmallOrLarge, SmallOrLarge)
</span><a href="Music.Score.Export.StandardNotation.html#_ties"><span class="hs-identifier hs-var hs-var">_ties</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Ties"><span class="hs-identifier hs-type">Ties</span></a></span><span>
</span><span id="line-574"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603143"><span id="local-6989586621680603145"><span class="annot"><span class="annottext">Chord -&gt; Chord -&gt; Bool
(Chord -&gt; Chord -&gt; Bool) -&gt; (Chord -&gt; Chord -&gt; Bool) -&gt; Eq Chord
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Chord -&gt; Chord -&gt; Bool
$c/= :: Chord -&gt; Chord -&gt; Bool
== :: Chord -&gt; Chord -&gt; Bool
$c== :: Chord -&gt; Chord -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603137"><span id="local-6989586621680603139"><span id="local-6989586621680603141"><span class="annot"><span class="annottext">Int -&gt; Chord -&gt; ShowS
[Chord] -&gt; ShowS
Chord -&gt; String
(Int -&gt; Chord -&gt; ShowS)
-&gt; (Chord -&gt; String) -&gt; ([Chord] -&gt; ShowS) -&gt; Show Chord
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Chord] -&gt; ShowS
$cshowList :: [Chord] -&gt; ShowS
show :: Chord -&gt; String
$cshow :: Chord -&gt; String
showsPrec :: Int -&gt; Chord -&gt; ShowS
$cshowsPrec :: Int -&gt; Chord -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-578"></span><span class="hs-comment">-- A layer. A sequential composition of chords.</span><span>
</span><span id="line-579"></span><span class="hs-comment">--</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- TODO we should replace 'Rhythm' with something similar that also allows</span><span>
</span><span id="line-581"></span><span class="hs-comment">-- time-floating elements (i.e. grace notes).</span><span>
</span><span id="line-582"></span><span class="hs-comment">--</span><span>
</span><span id="line-583"></span><span class="hs-comment">-- Note that can /not/ use @Rhythm (Bool, Chord)@ (or similar) as that would scew up</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- the time semantics of the 'Rhythm' value, in other words: the floating nature</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- of these notes should be captured in the time type.</span><span>
</span><span id="line-586"></span><span class="hs-keyword">newtype</span><span> </span><span id="PitchLayer"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier hs-var">PitchLayer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PitchLayer"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier hs-var">PitchLayer</span></a></span></span><span> </span><span class="hs-special">{</span><span id="getPitchLayer"><span class="annot"><span class="annottext">PitchLayer -&gt; Rhythm Chord
</span><a href="Music.Score.Export.StandardNotation.html#getPitchLayer"><span class="hs-identifier hs-var hs-var">getPitchLayer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603131"><span id="local-6989586621680603133"><span class="annot"><span class="annottext">PitchLayer -&gt; PitchLayer -&gt; Bool
(PitchLayer -&gt; PitchLayer -&gt; Bool)
-&gt; (PitchLayer -&gt; PitchLayer -&gt; Bool) -&gt; Eq PitchLayer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PitchLayer -&gt; PitchLayer -&gt; Bool
$c/= :: PitchLayer -&gt; PitchLayer -&gt; Bool
== :: PitchLayer -&gt; PitchLayer -&gt; Bool
$c== :: PitchLayer -&gt; PitchLayer -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603125"><span id="local-6989586621680603127"><span id="local-6989586621680603129"><span class="annot"><span class="annottext">Int -&gt; PitchLayer -&gt; ShowS
[PitchLayer] -&gt; ShowS
PitchLayer -&gt; String
(Int -&gt; PitchLayer -&gt; ShowS)
-&gt; (PitchLayer -&gt; String)
-&gt; ([PitchLayer] -&gt; ShowS)
-&gt; Show PitchLayer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PitchLayer] -&gt; ShowS
$cshowList :: [PitchLayer] -&gt; ShowS
show :: PitchLayer -&gt; String
$cshow :: PitchLayer -&gt; String
showsPrec :: Int -&gt; PitchLayer -&gt; ShowS
$cshowsPrec :: Int -&gt; PitchLayer -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-590"></span><span class="hs-comment">-- A bar. A parallel composition of layers.</span><span>
</span><span id="line-591"></span><span class="hs-comment">--</span><span>
</span><span id="line-592"></span><span class="hs-comment">-- All layers that make up a bar should have the same duration.</span><span>
</span><span id="line-593"></span><span class="hs-comment">-- An bar with no layers is allowed (this is 'mempty') and should be rendered</span><span>
</span><span id="line-594"></span><span class="hs-comment">-- as a bar rest.</span><span>
</span><span id="line-595"></span><span class="hs-comment">--</span><span>
</span><span id="line-596"></span><span class="hs-comment">-- MusicXML is a part/measure matrix (typically using column-major order) to allow</span><span>
</span><span id="line-597"></span><span class="hs-comment">-- it to be represented as a tree. Parts and measures are indexed by unique elements</span><span>
</span><span id="line-598"></span><span class="hs-comment">-- (called id and number respectively). Neither of these are rendered in the score</span><span>
</span><span id="line-599"></span><span class="hs-comment">-- (don't confuse with actual *visible* bar numbers), instead they are just token</span><span>
</span><span id="line-600"></span><span class="hs-comment">-- identifiers, and are conventionally named P1,P2,P3... and 1,2,3... respectively.</span><span>
</span><span id="line-601"></span><span class="hs-comment">--</span><span>
</span><span id="line-602"></span><span class="hs-comment">--     &lt;part id=&quot;P1&quot;&gt;</span><span>
</span><span id="line-603"></span><span class="hs-comment">--       &lt;measure number=&quot;1&quot;&gt;</span><span>
</span><span id="line-604"></span><span class="hs-comment">--         ...</span><span>
</span><span id="line-605"></span><span class="hs-comment">--       &lt;/measure&gt;</span><span>
</span><span id="line-606"></span><span class="hs-comment">--       &lt;measure number=&quot;2&quot;&gt;</span><span>
</span><span id="line-607"></span><span class="hs-comment">--         ...</span><span>
</span><span id="line-608"></span><span class="hs-comment">--       &lt;/measure&gt;</span><span>
</span><span id="line-609"></span><span class="hs-comment">--     &lt;/part&gt;</span><span>
</span><span id="line-610"></span><span class="hs-comment">--     ...</span><span>
</span><span id="line-611"></span><span class="hs-comment">--</span><span>
</span><span id="line-612"></span><span class="hs-comment">-- TODO free floating text/symbols?</span><span>
</span><span id="line-613"></span><span class="hs-keyword">data</span><span> </span><span id="Bar"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-var">Bar</span></a></span></span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Bar"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-var">Bar</span></a></span></span><span>
</span><span id="line-615"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_clefChanges"><span class="annot"><span class="annottext">Bar -&gt; Map Duration Clef
</span><a href="Music.Score.Export.StandardNotation.html#_clefChanges"><span class="hs-identifier hs-var hs-var">_clefChanges</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="annot"><a href="Music.Pitch.Clef.html#Clef"><span class="hs-identifier hs-type">Music.Pitch.Clef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-616"></span><span>        </span><span id="_pitchLayers"><span class="annot"><span class="annottext">Bar -&gt; [PitchLayer]
</span><a href="Music.Score.Export.StandardNotation.html#_pitchLayers"><span class="hs-identifier hs-var hs-var">_pitchLayers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier hs-type">PitchLayer</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-617"></span><span>        </span><span class="hs-comment">{-, _dynamicLayer :: DynamicLayer-}</span><span>
</span><span id="line-618"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603118"><span id="local-6989586621680603120"><span class="annot"><span class="annottext">Bar -&gt; Bar -&gt; Bool
(Bar -&gt; Bar -&gt; Bool) -&gt; (Bar -&gt; Bar -&gt; Bool) -&gt; Eq Bar
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Bar -&gt; Bar -&gt; Bool
$c/= :: Bar -&gt; Bar -&gt; Bool
== :: Bar -&gt; Bar -&gt; Bool
$c== :: Bar -&gt; Bar -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603112"><span id="local-6989586621680603114"><span id="local-6989586621680603116"><span class="annot"><span class="annottext">Int -&gt; Bar -&gt; ShowS
[Bar] -&gt; ShowS
Bar -&gt; String
(Int -&gt; Bar -&gt; ShowS)
-&gt; (Bar -&gt; String) -&gt; ([Bar] -&gt; ShowS) -&gt; Show Bar
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Bar] -&gt; ShowS
$cshowList :: [Bar] -&gt; ShowS
show :: Bar -&gt; String
$cshow :: Bar -&gt; String
showsPrec :: Int -&gt; Bar -&gt; ShowS
$cshowsPrec :: Int -&gt; Bar -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-622"></span><span class="hs-comment">-- A staff. A sequential composition of /bars/ with meta-information.</span><span>
</span><span id="line-623"></span><span class="hs-comment">--</span><span>
</span><span id="line-624"></span><span class="hs-comment">-- By this we mean an actual staff on the page, whether it correlates with a single</span><span>
</span><span id="line-625"></span><span class="hs-comment">-- instrument or not (i.e. because it is part of a multi-staff part for i.e. piano,</span><span>
</span><span id="line-626"></span><span class="hs-comment">-- organ or percussion).</span><span>
</span><span id="line-627"></span><span class="hs-comment">--</span><span>
</span><span id="line-628"></span><span class="hs-comment">-- The hireachy we use here is clear: a score contains staves which are organized</span><span>
</span><span id="line-629"></span><span class="hs-comment">-- as a tree with bracket symbols at the branches. Traversing the tree gives us</span><span>
</span><span id="line-630"></span><span class="hs-comment">-- the staves top-to-botom.</span><span>
</span><span id="line-631"></span><span class="hs-comment">--</span><span>
</span><span id="line-632"></span><span class="hs-comment">-- MusicXML by contrast includes two separate notions of parts and staves.</span><span>
</span><span id="line-633"></span><span class="hs-comment">--</span><span>
</span><span id="line-634"></span><span class="hs-comment">-- The score is a part/measure matrix, and the part-list element provides a</span><span>
</span><span id="line-635"></span><span class="hs-comment">-- separate annotation for how parts are grouped (i.e. for brackets, barline convention</span><span>
</span><span id="line-636"></span><span class="hs-comment">-- and in-between staff names). In MusicXML staves are not part of the hierarchy, but</span><span>
</span><span id="line-637"></span><span class="hs-comment">-- are indicated separately: each part may specify a number of staves using</span><span>
</span><span id="line-638"></span><span class="hs-comment">--</span><span>
</span><span id="line-639"></span><span class="hs-comment">--   &lt;attribute&gt;</span><span>
</span><span id="line-640"></span><span class="hs-comment">--     &lt;staves&gt;</span><span>
</span><span id="line-641"></span><span class="hs-comment">--       N</span><span>
</span><span id="line-642"></span><span class="hs-comment">--     &lt;/staves&gt;</span><span>
</span><span id="line-643"></span><span class="hs-comment">--   &lt;/attribute&gt;</span><span>
</span><span id="line-644"></span><span class="hs-comment">--</span><span>
</span><span id="line-645"></span><span class="hs-comment">-- and certain elements (including notes note, forward and direction) [1] can</span><span>
</span><span id="line-646"></span><span class="hs-comment">-- be tagget to indicate which staff they should be placed on.</span><span>
</span><span id="line-647"></span><span class="hs-comment">--</span><span>
</span><span id="line-648"></span><span class="hs-comment">-- Consequently things like a piano staff can be represented in two ways:</span><span>
</span><span id="line-649"></span><span class="hs-comment">-- by using 2 (or more) explicist staves and a part-group, ur using a single part</span><span>
</span><span id="line-650"></span><span class="hs-comment">-- and the staff annotations. The single-part approach seem to be favored for piano</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- music.</span><span>
</span><span id="line-652"></span><span class="hs-comment">--</span><span>
</span><span id="line-653"></span><span class="hs-comment">-- TODO we can also define multiple instrument parts using score-instrument,</span><span>
</span><span id="line-654"></span><span class="hs-comment">-- and then assign individual notes (and which other objects?) to this.</span><span>
</span><span id="line-655"></span><span class="hs-comment">--</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- [1]: http://www.musicxml.com/tutorial/notation-basics/multi-part-music-2/)</span><span>
</span><span id="line-657"></span><span class="hs-keyword">data</span><span> </span><span id="Staff"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-var">Staff</span></a></span></span><span>
</span><span id="line-658"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Staff"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-var">Staff</span></a></span></span><span>
</span><span id="line-659"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_staffInfo"><span class="annot"><span class="annottext">Staff -&gt; StaffInfo
</span><a href="Music.Score.Export.StandardNotation.html#_staffInfo"><span class="hs-identifier hs-var hs-var">_staffInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier hs-type">StaffInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-660"></span><span>        </span><span id="_bars"><span class="annot"><span class="annottext">Staff -&gt; [Bar]
</span><a href="Music.Score.Export.StandardNotation.html#_bars"><span class="hs-identifier hs-var hs-var">_bars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-661"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-662"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603105"><span id="local-6989586621680603107"><span class="annot"><span class="annottext">Staff -&gt; Staff -&gt; Bool
(Staff -&gt; Staff -&gt; Bool) -&gt; (Staff -&gt; Staff -&gt; Bool) -&gt; Eq Staff
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Staff -&gt; Staff -&gt; Bool
$c/= :: Staff -&gt; Staff -&gt; Bool
== :: Staff -&gt; Staff -&gt; Bool
$c== :: Staff -&gt; Staff -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603099"><span id="local-6989586621680603101"><span id="local-6989586621680603103"><span class="annot"><span class="annottext">Int -&gt; Staff -&gt; ShowS
[Staff] -&gt; ShowS
Staff -&gt; String
(Int -&gt; Staff -&gt; ShowS)
-&gt; (Staff -&gt; String) -&gt; ([Staff] -&gt; ShowS) -&gt; Show Staff
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Staff] -&gt; ShowS
$cshowList :: [Staff] -&gt; ShowS
show :: Staff -&gt; String
$cshow :: Staff -&gt; String
showsPrec :: Int -&gt; Staff -&gt; ShowS
$cshowsPrec :: Int -&gt; Staff -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-665"></span><span class="hs-comment">-- A movement. A parallel composition of staves grouped by various types of brackets,</span><span>
</span><span id="line-666"></span><span class="hs-comment">-- with meta-information.</span><span>
</span><span id="line-667"></span><span class="hs-comment">--</span><span>
</span><span id="line-668"></span><span class="hs-comment">-- Each staff (including the system-staff) should have the same number of bars</span><span>
</span><span id="line-669"></span><span class="hs-comment">-- (TODO backends should truncate to enforce this).</span><span>
</span><span id="line-670"></span><span class="hs-comment">--</span><span>
</span><span id="line-671"></span><span class="hs-comment">-- The /system staff/ contains information that pertains to all simultaneous bars,</span><span>
</span><span id="line-672"></span><span class="hs-comment">-- such as key and time signature changes (implying that this model does not allow</span><span>
</span><span id="line-673"></span><span class="hs-comment">-- different time- or key singatures in different staves).</span><span>
</span><span id="line-674"></span><span class="hs-keyword">data</span><span> </span><span id="Movement"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-var">Movement</span></a></span></span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Movement"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-var">Movement</span></a></span></span><span>
</span><span id="line-676"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_movementInfo"><span class="annot"><span class="annottext">Movement -&gt; MovementInfo
</span><a href="Music.Score.Export.StandardNotation.html#_movementInfo"><span class="hs-identifier hs-var hs-var">_movementInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier hs-type">MovementInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-677"></span><span>        </span><span id="_systemStaff"><span class="annot"><span class="annottext">Movement -&gt; [SystemBar]
</span><a href="Music.Score.Export.StandardNotation.html#_systemStaff"><span class="hs-identifier hs-var hs-var">_systemStaff</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-type">SystemStaff</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-678"></span><span>        </span><span class="hs-comment">-- Don't allow names for staff groups, only staves</span><span>
</span><span id="line-679"></span><span>        </span><span id="_staves"><span class="annot"><span class="annottext">Movement -&gt; LabelTree BracketType Staff
</span><a href="Music.Score.Export.StandardNotation.html#_staves"><span class="hs-identifier hs-var hs-var">_staves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span>
</span><span id="line-680"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-681"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603091"><span id="local-6989586621680603093"><span class="annot"><span class="annottext">Movement -&gt; Movement -&gt; Bool
(Movement -&gt; Movement -&gt; Bool)
-&gt; (Movement -&gt; Movement -&gt; Bool) -&gt; Eq Movement
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Movement -&gt; Movement -&gt; Bool
$c/= :: Movement -&gt; Movement -&gt; Bool
== :: Movement -&gt; Movement -&gt; Bool
$c== :: Movement -&gt; Movement -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680603085"><span id="local-6989586621680603087"><span id="local-6989586621680603089"><span class="annot"><span class="annottext">Int -&gt; Movement -&gt; ShowS
[Movement] -&gt; ShowS
Movement -&gt; String
(Int -&gt; Movement -&gt; ShowS)
-&gt; (Movement -&gt; String) -&gt; ([Movement] -&gt; ShowS) -&gt; Show Movement
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Movement] -&gt; ShowS
$cshowList :: [Movement] -&gt; ShowS
show :: Movement -&gt; String
$cshow :: Movement -&gt; String
showsPrec :: Int -&gt; Movement -&gt; ShowS
$cshowsPrec :: Int -&gt; Movement -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-684"></span><span class="hs-comment">-- A musical work. A sequential composition of /movements/ with meta-information.</span><span>
</span><span id="line-685"></span><span class="hs-comment">--</span><span>
</span><span id="line-686"></span><span class="hs-comment">-- Called work to avoid confusion with 'Score'.</span><span>
</span><span id="line-687"></span><span class="hs-keyword">data</span><span> </span><span id="Work"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-var">Work</span></a></span></span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Work"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-var">Work</span></a></span></span><span>
</span><span id="line-689"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="_workInfo"><span class="annot"><span class="annottext">Work -&gt; WorkInfo
</span><a href="Music.Score.Export.StandardNotation.html#_workInfo"><span class="hs-identifier hs-var hs-var">_workInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier hs-type">WorkInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-690"></span><span>        </span><span id="_movements"><span class="annot"><span class="annottext">Work -&gt; [Movement]
</span><a href="Music.Score.Export.StandardNotation.html#_movements"><span class="hs-identifier hs-var hs-var">_movements</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-691"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-692"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680603076"><span id="local-6989586621680603078"><span id="local-6989586621680603080"><span class="annot"><span class="annottext">Int -&gt; Work -&gt; ShowS
[Work] -&gt; ShowS
Work -&gt; String
(Int -&gt; Work -&gt; ShowS)
-&gt; (Work -&gt; String) -&gt; ([Work] -&gt; ShowS) -&gt; Show Work
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Work] -&gt; ShowS
$cshowList :: [Work] -&gt; ShowS
show :: Work -&gt; String
$cshow :: Work -&gt; String
showsPrec :: Int -&gt; Work -&gt; ShowS
$cshowsPrec :: Int -&gt; Work -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span id="tempoMark"><span id="rehearsalMark"><span id="keySignature"><span id="timeSignature"><span id="barNumbers"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SystemBar</span></span></span></span></span></span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span id="scoreOrder"><span id="smallOrLarge"><span id="transposition"><span id="instrumentDefaultClef"><span id="sibeliusFriendlyName"><span id="instrumentFullName"><span id="instrumentShortName"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">StaffInfo</span></span></span></span></span></span></span></span><span>
</span><span id="line-697"></span><span>
</span><span id="line-698"></span><span id="ties"><span id="slideNotation"><span id="harmonicNotation"><span id="chordText"><span id="chordColor"><span id="fermata"><span id="dynamicNotation"><span id="articulationNotation"><span id="breathNotation"><span id="tremoloNotation"><span id="arpeggioNotation"><span id="pitches"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Chord</span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-699"></span><span>
</span><span id="line-700"></span><span id="pitchLayers"><span id="clefChanges"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Bar</span></span></span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span id="bars"><span id="staffInfo"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Staff</span></span></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span id="movementAttribution"><span id="movementAnnotations"><span id="movementTitle"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">MovementInfo</span></span></span></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span id="staves"><span id="systemStaff"><span id="movementInfo"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Movement</span></span></span></span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span id="attribution"><span id="annotations"><span id="title"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">WorkInfo</span></span></span></span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span id="movements"><span id="workInfo"><span class="hs-identifier">makeLenses</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Work</span></span></span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603071"><span id="local-6989586621680603073"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-713"></span><span>  </span><span id="local-6989586621680603069"><span class="annot"><span class="annottext">x :: BracketType
</span><a href="#local-6989586621680603069"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680603068"><span class="annot"><span class="annottext">&lt;&gt; :: BracketType -&gt; BracketType -&gt; BracketType
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680603067"><span class="annot"><span class="annottext">y :: BracketType
</span><a href="#local-6989586621680603067"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-714"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="#local-6989586621680603069"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">BracketType -&gt; BracketType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">BracketType
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="#local-6989586621680603067"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-715"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="#local-6989586621680603069"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603061"><span id="local-6989586621680603063"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-718"></span><span>  </span><span id="local-6989586621680603059"><span class="annot"><span class="annottext">mempty :: BracketType
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#NoBracket"><span class="hs-identifier hs-var">NoBracket</span></a></span><span>
</span><span id="line-719"></span><span>
</span><span id="line-720"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603054"><span id="local-6989586621680603056"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-721"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span><span> </span><span id="local-6989586621680603053"><span class="annot"><span class="annottext">a1 :: Option (First Int)
</span><a href="#local-6989586621680603053"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621680603052"><span class="annot"><span class="annottext">a2 :: Option (First TimeSignature)
</span><a href="#local-6989586621680603052"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span id="local-6989586621680603051"><span class="annot"><span class="annottext">a3 :: KeySignature
</span><a href="#local-6989586621680603051"><span class="hs-identifier hs-var">a3</span></a></span></span><span> </span><span id="local-6989586621680603050"><span class="annot"><span class="annottext">a4 :: Option (First RehearsalMark)
</span><a href="#local-6989586621680603050"><span class="hs-identifier hs-var">a4</span></a></span></span><span> </span><span id="local-6989586621680603049"><span class="annot"><span class="annottext">a5 :: Option (First TempoMark)
</span><a href="#local-6989586621680603049"><span class="hs-identifier hs-var">a5</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680603048"><span class="annot"><span class="annottext">&lt;&gt; :: SystemBar -&gt; SystemBar -&gt; SystemBar
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span><span> </span><span id="local-6989586621680603047"><span class="annot"><span class="annottext">b1 :: Option (First Int)
</span><a href="#local-6989586621680603047"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621680603046"><span class="annot"><span class="annottext">b2 :: Option (First TimeSignature)
</span><a href="#local-6989586621680603046"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621680603045"><span class="annot"><span class="annottext">b3 :: KeySignature
</span><a href="#local-6989586621680603045"><span class="hs-identifier hs-var">b3</span></a></span></span><span> </span><span id="local-6989586621680603044"><span class="annot"><span class="annottext">b4 :: Option (First RehearsalMark)
</span><a href="#local-6989586621680603044"><span class="hs-identifier hs-var">b4</span></a></span></span><span> </span><span id="local-6989586621680603043"><span class="annot"><span class="annottext">b5 :: Option (First TempoMark)
</span><a href="#local-6989586621680603043"><span class="hs-identifier hs-var">b5</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><span class="annottext">Option (First Int)
-&gt; Option (First TimeSignature)
-&gt; KeySignature
-&gt; Option (First RehearsalMark)
-&gt; Option (First TempoMark)
-&gt; SystemBar
</span><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-var">SystemBar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Option (First Int)
</span><a href="#local-6989586621680603053"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First Int) -&gt; Option (First Int) -&gt; Option (First Int)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First Int)
</span><a href="#local-6989586621680603047"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Option (First TimeSignature)
</span><a href="#local-6989586621680603052"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TimeSignature)
-&gt; Option (First TimeSignature) -&gt; Option (First TimeSignature)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TimeSignature)
</span><a href="#local-6989586621680603046"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeySignature
</span><a href="#local-6989586621680603051"><span class="hs-identifier hs-var">a3</span></a></span><span> </span><span class="annot"><span class="annottext">KeySignature -&gt; KeySignature -&gt; KeySignature
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">KeySignature
</span><a href="#local-6989586621680603045"><span class="hs-identifier hs-var">b3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Option (First RehearsalMark)
</span><a href="#local-6989586621680603050"><span class="hs-identifier hs-var">a4</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First RehearsalMark)
-&gt; Option (First RehearsalMark) -&gt; Option (First RehearsalMark)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First RehearsalMark)
</span><a href="#local-6989586621680603044"><span class="hs-identifier hs-var">b4</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Option (First TempoMark)
</span><a href="#local-6989586621680603049"><span class="hs-identifier hs-var">a5</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TempoMark)
-&gt; Option (First TempoMark) -&gt; Option (First TempoMark)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TempoMark)
</span><a href="#local-6989586621680603043"><span class="hs-identifier hs-var">b5</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603037"><span id="local-6989586621680603039"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-725"></span><span>  </span><span id="local-6989586621680603036"><span class="annot"><span class="annottext">mempty :: SystemBar
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Option (First Int)
-&gt; Option (First TimeSignature)
-&gt; KeySignature
-&gt; Option (First RehearsalMark)
-&gt; Option (First TempoMark)
-&gt; SystemBar
</span><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-var">SystemBar</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First Int)
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TimeSignature)
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">KeySignature
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First RehearsalMark)
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TempoMark)
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603031"><span id="local-6989586621680603033"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier hs-type">StaffInfo</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-728"></span><span>  </span><span id="local-6989586621680603030"><span class="annot"><span class="annottext">x :: StaffInfo
</span><a href="#local-6989586621680603030"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680603029"><span class="annot"><span class="annottext">&lt;&gt; :: StaffInfo -&gt; StaffInfo -&gt; StaffInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680603028"><span class="annot"><span class="annottext">y :: StaffInfo
</span><a href="#local-6989586621680603028"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-729"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680603030"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo -&gt; StaffInfo -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680603028"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-730"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680603030"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603022"><span id="local-6989586621680603024"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier hs-type">StaffInfo</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-733"></span><span>  </span><span id="local-6989586621680603021"><span class="annot"><span class="annottext">mempty :: StaffInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; String
-&gt; String
-&gt; Clef
-&gt; Transposition
-&gt; SmallOrLarge
-&gt; ScoreOrder
-&gt; StaffInfo
</span><a href="Music.Score.Export.StandardNotation.html#StaffInfo"><span class="hs-identifier hs-var">StaffInfo</span></a></span><span> </span><span class="annot"><span class="annottext">String
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">String
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">String
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Music.Pitch.Clef.html#trebleClef"><span class="hs-identifier hs-var">Music.Pitch.trebleClef</span></a></span><span> </span><span class="annot"><span class="annottext">Transposition
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">SmallOrLarge
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">ScoreOrder
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603015"><span id="local-6989586621680603017"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArpeggioNotation"><span class="hs-identifier hs-type">ArpeggioNotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-736"></span><span>  </span><span id="local-6989586621680603014"><span class="annot"><span class="annottext">x :: ArpeggioNotation
</span><a href="#local-6989586621680603014"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680603013"><span class="annot"><span class="annottext">&lt;&gt; :: ArpeggioNotation -&gt; ArpeggioNotation -&gt; ArpeggioNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680603012"><span class="annot"><span class="annottext">y :: ArpeggioNotation
</span><a href="#local-6989586621680603012"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-737"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation
</span><a href="#local-6989586621680603014"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation -&gt; ArpeggioNotation -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation
</span><a href="#local-6989586621680603012"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-738"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation
</span><a href="#local-6989586621680603014"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603006"><span id="local-6989586621680603008"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArpeggioNotation"><span class="hs-identifier hs-type">ArpeggioNotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-741"></span><span>  </span><span id="local-6989586621680603005"><span class="annot"><span class="annottext">mempty :: ArpeggioNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation
</span><a href="Music.Score.Export.StandardNotation.html#NoArpeggio"><span class="hs-identifier hs-var">NoArpeggio</span></a></span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680603000"><span id="local-6989586621680603002"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TremoloNotation"><span class="hs-identifier hs-type">TremoloNotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-744"></span><span>  </span><span id="local-6989586621680602999"><span class="annot"><span class="annottext">x :: TremoloNotation
</span><a href="#local-6989586621680602999"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602998"><span class="annot"><span class="annottext">&lt;&gt; :: TremoloNotation -&gt; TremoloNotation -&gt; TremoloNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680602997"><span class="annot"><span class="annottext">y :: TremoloNotation
</span><a href="#local-6989586621680602997"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-745"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TremoloNotation
</span><a href="#local-6989586621680602999"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TremoloNotation -&gt; TremoloNotation -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TremoloNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TremoloNotation
</span><a href="#local-6989586621680602997"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-746"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TremoloNotation
</span><a href="#local-6989586621680602999"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602991"><span id="local-6989586621680602993"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TremoloNotation"><span class="hs-identifier hs-type">TremoloNotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-749"></span><span>  </span><span id="local-6989586621680602990"><span class="annot"><span class="annottext">mempty :: TremoloNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TremoloNotation
</span><a href="Music.Score.Export.StandardNotation.html#NoTremolo"><span class="hs-identifier hs-var">NoTremolo</span></a></span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602985"><span id="local-6989586621680602987"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BreathNotation"><span class="hs-identifier hs-type">BreathNotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-752"></span><span>  </span><span id="local-6989586621680602984"><span class="annot"><span class="annottext">x :: BreathNotation
</span><a href="#local-6989586621680602984"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602983"><span class="annot"><span class="annottext">&lt;&gt; :: BreathNotation -&gt; BreathNotation -&gt; BreathNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680602982"><span class="annot"><span class="annottext">y :: BreathNotation
</span><a href="#local-6989586621680602982"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-753"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">BreathNotation
</span><a href="#local-6989586621680602984"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">BreathNotation -&gt; BreathNotation -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">BreathNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BreathNotation
</span><a href="#local-6989586621680602982"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-754"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BreathNotation
</span><a href="#local-6989586621680602984"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602976"><span id="local-6989586621680602978"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BreathNotation"><span class="hs-identifier hs-type">BreathNotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-757"></span><span>  </span><span id="local-6989586621680602975"><span class="annot"><span class="annottext">mempty :: BreathNotation
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BreathNotation
</span><a href="Music.Score.Export.StandardNotation.html#NoBreath"><span class="hs-identifier hs-var">NoBreath</span></a></span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602970"><span id="local-6989586621680602972"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier hs-type">Fermata</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-760"></span><span>  </span><span id="local-6989586621680602969"><span class="annot"><span class="annottext">x :: Fermata
</span><a href="#local-6989586621680602969"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602968"><span class="annot"><span class="annottext">&lt;&gt; :: Fermata -&gt; Fermata -&gt; Fermata
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680602967"><span class="annot"><span class="annottext">y :: Fermata
</span><a href="#local-6989586621680602967"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-761"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Fermata
</span><a href="#local-6989586621680602969"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Fermata -&gt; Fermata -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Fermata
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fermata
</span><a href="#local-6989586621680602967"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-762"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fermata
</span><a href="#local-6989586621680602969"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-763"></span><span>
</span><span id="line-764"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602961"><span id="local-6989586621680602963"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier hs-type">Fermata</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-765"></span><span>  </span><span id="local-6989586621680602960"><span class="annot"><span class="annottext">mempty :: Fermata
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fermata
</span><a href="Music.Score.Export.StandardNotation.html#NoFermata"><span class="hs-identifier hs-var">NoFermata</span></a></span><span>
</span><span id="line-766"></span><span>
</span><span id="line-767"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602955"><span id="local-6989586621680602957"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-768"></span><span>  </span><span id="local-6989586621680602954"><span class="annot"><span class="annottext">x :: Chord
</span><a href="#local-6989586621680602954"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602953"><span class="annot"><span class="annottext">&lt;&gt; :: Chord -&gt; Chord -&gt; Chord
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680602952"><span class="annot"><span class="annottext">y :: Chord
</span><a href="#local-6989586621680602952"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-769"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602954"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Chord -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602952"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602954"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602946"><span id="local-6989586621680602948"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-773"></span><span>  </span><span id="local-6989586621680602945"><span class="annot"><span class="annottext">mempty :: Chord
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-774"></span><span>    </span><span class="annot"><span class="annottext">[Pitch]
-&gt; ArpeggioNotation
-&gt; TremoloNotation
-&gt; BreathNotation
-&gt; ArticulationNotation
-&gt; DynamicNotation
-&gt; Fermata
-&gt; Option (First (Colour Double))
-&gt; [String]
-&gt; HarmonicNotation
-&gt; SlideNotation
-&gt; (SmallOrLarge, SmallOrLarge)
-&gt; Chord
</span><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-var">Chord</span></a></span><span>
</span><span id="line-775"></span><span>      </span><span class="annot"><span class="annottext">[Pitch]
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-776"></span><span>      </span><span class="annot"><span class="annottext">ArpeggioNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-777"></span><span>      </span><span class="annot"><span class="annottext">TremoloNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-778"></span><span>      </span><span class="annot"><span class="annottext">BreathNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-779"></span><span>      </span><span class="annot"><span class="annottext">ArticulationNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-780"></span><span>      </span><span class="annot"><span class="annottext">DynamicNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-781"></span><span>      </span><span class="annot"><span class="annottext">Fermata
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-782"></span><span>      </span><span class="annot"><span class="annottext">Option (First (Colour Double))
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-783"></span><span>      </span><span class="annot"><span class="annottext">[String]
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-784"></span><span>      </span><span class="annot"><span class="annottext">HarmonicNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-785"></span><span>      </span><span class="annot"><span class="annottext">SlideNotation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-786"></span><span>      </span><span class="annot"><span class="annottext">(SmallOrLarge, SmallOrLarge)
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602940"><span id="local-6989586621680602942"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-789"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span id="local-6989586621680602939"><span class="annot"><span class="annottext">a1 :: Map Duration Clef
</span><a href="#local-6989586621680602939"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621680602938"><span class="annot"><span class="annottext">a2 :: [PitchLayer]
</span><a href="#local-6989586621680602938"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680602937"><span class="annot"><span class="annottext">&lt;&gt; :: Bar -&gt; Bar -&gt; Bar
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span id="local-6989586621680602936"><span class="annot"><span class="annottext">b1 :: Map Duration Clef
</span><a href="#local-6989586621680602936"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621680602935"><span class="annot"><span class="annottext">b2 :: [PitchLayer]
</span><a href="#local-6989586621680602935"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Duration Clef -&gt; [PitchLayer] -&gt; Bar
</span><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-var">Bar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Duration Clef
</span><a href="#local-6989586621680602939"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Duration Clef -&gt; Map Duration Clef -&gt; Map Duration Clef
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Duration Clef
</span><a href="#local-6989586621680602936"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[PitchLayer]
</span><a href="#local-6989586621680602938"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">[PitchLayer] -&gt; [PitchLayer] -&gt; [PitchLayer]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[PitchLayer]
</span><a href="#local-6989586621680602935"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602929"><span id="local-6989586621680602931"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-792"></span><span>  </span><span id="local-6989586621680602928"><span class="annot"><span class="annottext">mempty :: Bar
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Duration Clef -&gt; [PitchLayer] -&gt; Bar
</span><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-var">Bar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Duration Clef
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">[PitchLayer]
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602923"><span id="local-6989586621680602925"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span id="local-6989586621680602922"><span class="annot"><span class="annottext">a1 :: StaffInfo
</span><a href="#local-6989586621680602922"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621680602921"><span class="annot"><span class="annottext">a2 :: [Bar]
</span><a href="#local-6989586621680602921"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680602920"><span class="annot"><span class="annottext">&lt;&gt; :: Staff -&gt; Staff -&gt; Staff
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span id="local-6989586621680602919"><span class="annot"><span class="annottext">b1 :: StaffInfo
</span><a href="#local-6989586621680602919"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621680602918"><span class="annot"><span class="annottext">b2 :: [Bar]
</span><a href="#local-6989586621680602918"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaffInfo -&gt; [Bar] -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-var">Staff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680602922"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo -&gt; StaffInfo -&gt; StaffInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680602919"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bar]
</span><a href="#local-6989586621680602921"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">[Bar] -&gt; [Bar] -&gt; [Bar]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Bar]
</span><a href="#local-6989586621680602918"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602912"><span id="local-6989586621680602914"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-798"></span><span>  </span><span id="local-6989586621680602911"><span class="annot"><span class="annottext">mempty :: Staff
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaffInfo -&gt; [Bar] -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-var">Staff</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">[Bar]
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602906"><span id="local-6989586621680602908"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier hs-type">MovementInfo</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-801"></span><span>  </span><span id="local-6989586621680602905"><span class="annot"><span class="annottext">x :: MovementInfo
</span><a href="#local-6989586621680602905"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602904"><span class="annot"><span class="annottext">&lt;&gt; :: MovementInfo -&gt; MovementInfo -&gt; MovementInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680602903"><span class="annot"><span class="annottext">y :: MovementInfo
</span><a href="#local-6989586621680602903"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-802"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">MovementInfo
</span><a href="#local-6989586621680602905"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MovementInfo -&gt; MovementInfo -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">MovementInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MovementInfo
</span><a href="#local-6989586621680602903"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-803"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MovementInfo
</span><a href="#local-6989586621680602905"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602897"><span id="local-6989586621680602899"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier hs-type">MovementInfo</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-806"></span><span>  </span><span id="local-6989586621680602896"><span class="annot"><span class="annottext">mempty :: MovementInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Annotations -&gt; Attribution -&gt; MovementInfo
</span><a href="Music.Score.Export.StandardNotation.html#MovementInfo"><span class="hs-identifier hs-var">MovementInfo</span></a></span><span> </span><span class="annot"><span class="annottext">String
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Annotations
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602891"><span id="local-6989586621680602893"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span><span> </span><span id="local-6989586621680602890"><span class="annot"><span class="annottext">a1 :: WorkInfo
</span><a href="#local-6989586621680602890"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621680602889"><span class="annot"><span class="annottext">a2 :: [Movement]
</span><a href="#local-6989586621680602889"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680602888"><span class="annot"><span class="annottext">&lt;&gt; :: Work -&gt; Work -&gt; Work
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span><span> </span><span id="local-6989586621680602887"><span class="annot"><span class="annottext">b1 :: WorkInfo
</span><a href="#local-6989586621680602887"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621680602886"><span class="annot"><span class="annottext">b2 :: [Movement]
</span><a href="#local-6989586621680602886"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WorkInfo -&gt; [Movement] -&gt; Work
</span><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-var">Work</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WorkInfo
</span><a href="#local-6989586621680602890"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo -&gt; WorkInfo -&gt; WorkInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo
</span><a href="#local-6989586621680602887"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Movement]
</span><a href="#local-6989586621680602889"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">[Movement] -&gt; [Movement] -&gt; [Movement]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Movement]
</span><a href="#local-6989586621680602886"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602880"><span id="local-6989586621680602882"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-812"></span><span>  </span><span id="local-6989586621680602879"><span class="annot"><span class="annottext">mempty :: Work
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WorkInfo -&gt; [Movement] -&gt; Work
</span><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-var">Work</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">[Movement]
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602874"><span id="local-6989586621680602876"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier hs-type">WorkInfo</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-815"></span><span>  </span><span id="local-6989586621680602873"><span class="annot"><span class="annottext">x :: WorkInfo
</span><a href="#local-6989586621680602873"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602872"><span class="annot"><span class="annottext">&lt;&gt; :: WorkInfo -&gt; WorkInfo -&gt; WorkInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621680602871"><span class="annot"><span class="annottext">y :: WorkInfo
</span><a href="#local-6989586621680602871"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-816"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WorkInfo
</span><a href="#local-6989586621680602873"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo -&gt; WorkInfo -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WorkInfo
</span><a href="#local-6989586621680602871"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-817"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WorkInfo
</span><a href="#local-6989586621680602873"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602865"><span id="local-6989586621680602867"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier hs-type">WorkInfo</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-820"></span><span>  </span><span id="local-6989586621680602864"><span class="annot"><span class="annottext">mempty :: WorkInfo
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Annotations -&gt; Attribution -&gt; WorkInfo
</span><a href="Music.Score.Export.StandardNotation.html#WorkInfo"><span class="hs-identifier hs-var">WorkInfo</span></a></span><span> </span><span class="annot"><span class="annottext">String
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Annotations
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#IsPitch"><span class="hs-identifier hs-type">IsPitch</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-823"></span><span>  </span><span id="local-6989586621680602861"><span class="annot"><span class="annottext">fromPitch :: Pitch -&gt; Chord
</span><a href="#local-6989586621680602861"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPitch</span></a></span></span><span> </span><span id="local-6989586621680602860"><span class="annot"><span class="annottext">p :: Pitch
</span><a href="#local-6989586621680602860"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Pitch] -&gt; Identity [Pitch]) -&gt; Chord -&gt; Identity Chord
Lens' Chord [Pitch]
</span><a href="Music.Score.Export.StandardNotation.html#pitches"><span class="hs-identifier hs-var">pitches</span></a></span><span> </span><span class="annot"><span class="annottext">(([Pitch] -&gt; Identity [Pitch]) -&gt; Chord -&gt; Identity Chord)
-&gt; [Pitch] -&gt; Chord -&gt; Chord
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602860"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#systemStaffTakeBars"><span class="hs-identifier hs-type">systemStaffTakeBars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-type">SystemStaff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-type">SystemStaff</span></a></span><span>
</span><span id="line-826"></span><span id="systemStaffTakeBars"><span class="annot"><span class="annottext">systemStaffTakeBars :: Int -&gt; [SystemBar] -&gt; [SystemBar]
</span><a href="Music.Score.Export.StandardNotation.html#systemStaffTakeBars"><span class="hs-identifier hs-var hs-var">systemStaffTakeBars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [SystemBar] -&gt; [SystemBar]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">take</span></a></span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#systemStaffLength"><span class="hs-identifier hs-type">systemStaffLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-type">SystemStaff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-829"></span><span id="systemStaffLength"><span class="annot"><span class="annottext">systemStaffLength :: [SystemBar] -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#systemStaffLength"><span class="hs-identifier hs-var hs-var">systemStaffLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SystemBar] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#staffTakeBars"><span class="hs-identifier hs-type">staffTakeBars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span>
</span><span id="line-832"></span><span id="staffTakeBars"><span class="annot"><span class="annottext">staffTakeBars :: Int -&gt; Staff -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#staffTakeBars"><span class="hs-identifier hs-var hs-var">staffTakeBars</span></a></span></span><span> </span><span id="local-6989586621680602856"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602856"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span id="local-6989586621680602855"><span class="annot"><span class="annottext">i :: StaffInfo
</span><a href="#local-6989586621680602855"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680602854"><span class="annot"><span class="annottext">bs :: [Bar]
</span><a href="#local-6989586621680602854"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaffInfo -&gt; [Bar] -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-var">Staff</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680602855"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Bar] -&gt; [Bar]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602856"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[Bar]
</span><a href="#local-6989586621680602854"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#staffLength"><span class="hs-identifier hs-type">staffLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-835"></span><span id="staffLength"><span class="annot"><span class="annottext">staffLength :: Staff -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#staffLength"><span class="hs-identifier hs-var hs-var">staffLength</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span id="local-6989586621680602853"><span class="annot"><span class="annottext">_i :: StaffInfo
</span><a href="#local-6989586621680602853"><span class="hs-identifier hs-var">_i</span></a></span></span><span> </span><span id="local-6989586621680602852"><span class="annot"><span class="annottext">bs :: [Bar]
</span><a href="#local-6989586621680602852"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bar] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Bar]
</span><a href="#local-6989586621680602852"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-838"></span><span class="hs-comment">-- If all layers have the same duration, return this duration wrapped in 'Right',</span><span>
</span><span id="line-839"></span><span class="hs-comment">-- otherwise return a list of mismatching durations in 'Left'.</span><span>
</span><span id="line-840"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#barLayersHaveEqualDuration"><span class="hs-identifier hs-type">barLayersHaveEqualDuration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span>
</span><span id="line-841"></span><span id="barLayersHaveEqualDuration"><span class="annot"><span class="annottext">barLayersHaveEqualDuration :: Bar -&gt; Either [Duration] Duration
</span><a href="Music.Score.Export.StandardNotation.html#barLayersHaveEqualDuration"><span class="hs-identifier hs-var hs-var">barLayersHaveEqualDuration</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Duration] -&gt; Either [Duration] Duration
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-842"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#barLayersHaveEqualDuration"><span class="hs-identifier hs-var">barLayersHaveEqualDuration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602850"><span class="annot"><span class="annottext">layers :: [PitchLayer]
</span><a href="#local-6989586621680602850"><span class="hs-identifier hs-var">layers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Duration] -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; Bool
</span><a href="#local-6989586621680602849"><span class="hs-identifier hs-var">allEqual</span></a></span><span> </span><span class="annot"><span class="annottext">[Duration]
</span><a href="#local-6989586621680602848"><span class="hs-identifier hs-var">durs</span></a></span><span>
</span><span id="line-844"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Either [Duration] Duration
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Duration] -&gt; Duration
forall a. [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[Duration]
</span><a href="#local-6989586621680602848"><span class="hs-identifier hs-var">durs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Duration] -&gt; Either [Duration] Duration
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">[Duration]
</span><a href="#local-6989586621680602848"><span class="hs-identifier hs-var">durs</span></a></span><span>
</span><span id="line-846"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-847"></span><span>    </span><span id="local-6989586621680602849"><span class="annot"><span class="annottext">allEqual :: [a] -&gt; Bool
</span><a href="#local-6989586621680602849"><span class="hs-identifier hs-var hs-var">allEqual</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-848"></span><span>    </span><span class="annot"><a href="#local-6989586621680602849"><span class="hs-identifier hs-var">allEqual</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602846"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680602846"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621680602845"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680602845"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Bool) -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680602846"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680602845"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-849"></span><span>    </span><span id="local-6989586621680602848"><span class="annot"><span class="annottext">durs :: [Duration]
</span><a href="#local-6989586621680602848"><span class="hs-identifier hs-var hs-var">durs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PitchLayer -&gt; Duration) -&gt; [PitchLayer] -&gt; [Duration]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">PitchLayer -&gt; Duration
</span><a href="#local-6989586621680602843"><span class="hs-identifier hs-var">layerDur</span></a></span><span> </span><span class="annot"><span class="annottext">[PitchLayer]
</span><a href="#local-6989586621680602850"><span class="hs-identifier hs-var">layers</span></a></span><span>
</span><span id="line-850"></span><span>    </span><span id="local-6989586621680602843"><span class="annot"><span class="annottext">layerDur :: PitchLayer -&gt; Duration
</span><a href="#local-6989586621680602843"><span class="hs-identifier hs-var hs-var">layerDur</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier hs-type">PitchLayer</span></a></span><span> </span><span id="local-6989586621680602842"><span class="annot"><span class="annottext">rh :: Rhythm Chord
</span><a href="#local-6989586621680602842"><span class="hs-identifier hs-var">rh</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rhythm Chord -&gt; Duration
forall a. HasDuration a =&gt; a -&gt; Duration
</span><a href="Music.Time.Duration.html#_duration"><span class="hs-identifier hs-var">_duration</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm Chord
</span><a href="#local-6989586621680602842"><span class="hs-identifier hs-var">rh</span></a></span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-853"></span><span class="hs-comment">-- Pad all staves to the same number of bars.</span><span>
</span><span id="line-854"></span><span class="hs-comment">--</span><span>
</span><span id="line-855"></span><span class="hs-comment">-- All staves excepting the system staff must have a finite number of bars,</span><span>
</span><span id="line-856"></span><span class="hs-comment">-- or this will diverge. The system staff is not taken into account when</span><span>
</span><span id="line-857"></span><span class="hs-comment">-- calculating the number of bars (but it is padded if necessary).</span><span>
</span><span id="line-858"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementAssureSameNumberOfBars"><span class="hs-identifier hs-type">movementAssureSameNumberOfBars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span>
</span><span id="line-859"></span><span id="movementAssureSameNumberOfBars"><span class="annot"><span class="annottext">movementAssureSameNumberOfBars :: Movement -&gt; Movement
</span><a href="Music.Score.Export.StandardNotation.html#movementAssureSameNumberOfBars"><span class="hs-identifier hs-var hs-var">movementAssureSameNumberOfBars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span> </span><span id="local-6989586621680602840"><span class="annot"><span class="annottext">i :: MovementInfo
</span><a href="#local-6989586621680602840"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680602839"><span class="annot"><span class="annottext">ss :: [SystemBar]
</span><a href="#local-6989586621680602839"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span id="local-6989586621680602838"><span class="annot"><span class="annottext">st :: LabelTree BracketType Staff
</span><a href="#local-6989586621680602838"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-860"></span><span>  </span><span class="annot"><span class="annottext">MovementInfo
-&gt; [SystemBar] -&gt; LabelTree BracketType Staff -&gt; Movement
</span><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-var">Movement</span></a></span><span> </span><span class="annot"><span class="annottext">MovementInfo
</span><a href="#local-6989586621680602840"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [SystemBar] -&gt; [SystemBar]
</span><a href="#local-6989586621680602837"><span class="hs-identifier hs-var">addSystemBars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602836"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[SystemBar]
</span><a href="#local-6989586621680602839"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Staff -&gt; Staff)
-&gt; LabelTree BracketType Staff -&gt; LabelTree BracketType Staff
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASetter Staff Staff [Bar] [Bar]
-&gt; ([Bar] -&gt; [Bar]) -&gt; Staff -&gt; Staff
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">ASetter Staff Staff [Bar] [Bar]
Lens' Staff [Bar]
</span><a href="Music.Score.Export.StandardNotation.html#bars"><span class="hs-identifier hs-var">bars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Bar] -&gt; [Bar]
</span><a href="#local-6989586621680602835"><span class="hs-identifier hs-var">addBars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602836"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Staff
</span><a href="#local-6989586621680602838"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-862"></span><span>    </span><span id="local-6989586621680602834"><span class="annot"><span class="annottext">SystemBar
</span><a href="#local-6989586621680602834"><span class="hs-identifier hs-var">emptySystemBar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemBar
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-863"></span><span>    </span><span id="local-6989586621680602833"><span class="annot"><span class="annottext">Bar
</span><a href="#local-6989586621680602833"><span class="hs-identifier hs-var">emptyBar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bar
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-864"></span><span>    </span><span id="local-6989586621680602835"><span class="annot"><span class="annottext">addBars :: Int -&gt; [Bar] -&gt; [Bar]
</span><a href="#local-6989586621680602835"><span class="hs-identifier hs-var hs-var">addBars</span></a></span></span><span> </span><span id="local-6989586621680602832"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602832"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Bar] -&gt; [Bar]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602832"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">([Bar] -&gt; [Bar]) -&gt; ([Bar] -&gt; [Bar]) -&gt; [Bar] -&gt; [Bar]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bar] -&gt; [Bar] -&gt; [Bar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Bar -&gt; [Bar]
forall a. a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">Bar
</span><a href="#local-6989586621680602833"><span class="hs-identifier hs-var">emptyBar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>    </span><span id="local-6989586621680602837"><span class="annot"><span class="annottext">addSystemBars :: Int -&gt; [SystemBar] -&gt; [SystemBar]
</span><a href="#local-6989586621680602837"><span class="hs-identifier hs-var hs-var">addSystemBars</span></a></span></span><span> </span><span id="local-6989586621680602830"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602830"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [SystemBar] -&gt; [SystemBar]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602830"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">([SystemBar] -&gt; [SystemBar])
-&gt; ([SystemBar] -&gt; [SystemBar]) -&gt; [SystemBar] -&gt; [SystemBar]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SystemBar] -&gt; [SystemBar] -&gt; [SystemBar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">SystemBar -&gt; [SystemBar]
forall a. a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">SystemBar
</span><a href="#local-6989586621680602834"><span class="hs-identifier hs-var">emptySystemBar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-866"></span><span>    </span><span id="local-6989586621680602836"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602836"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">maximum</span></a></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; [Int] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; [Int]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680602828"><span class="hs-identifier hs-var">numBars</span></a></span><span>
</span><span id="line-867"></span><span>    </span><span class="hs-comment">-- numSystemBars :: Int = length ss</span><span>
</span><span id="line-868"></span><span>    </span><span id="local-6989586621680602828"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680602828"><span class="hs-identifier hs-var">numBars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Staff -&gt; Int) -&gt; [Staff] -&gt; [Int]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bar] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">([Bar] -&gt; Int) -&gt; (Staff -&gt; [Bar]) -&gt; Staff -&gt; Int
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; [Bar]
</span><a href="Music.Score.Export.StandardNotation.html#_bars"><span class="hs-identifier hs-var hs-var">_bars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Staff] -&gt; [Int]) -&gt; [Staff] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Staff -&gt; [Staff]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Staff
</span><a href="#local-6989586621680602838"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-869"></span><span>
</span><span id="line-870"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-871"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-872"></span><span>
</span><span id="line-873"></span><span class="hs-comment">-- | A weaker form of 'MonadWriter' which also supports imperative logging.</span><span>
</span><span id="line-874"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604225"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MonadLog"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-var">MonadLog</span></a></span></span><span> </span><span id="local-6989586621680604226"><span class="annot"><a href="#local-6989586621680604226"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621680604225"><span class="annot"><a href="#local-6989586621680604225"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621680604225"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604226"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-875"></span><span>
</span><span id="line-876"></span><span>  </span><span id="local-6989586621680604221"><span id="logger"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#logger"><span class="hs-identifier hs-type">logger</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680604221"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680604226"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604225"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604221"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-877"></span><span>  </span><span id="local-6989586621680602825"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#logger"><span class="hs-identifier hs-var hs-var">logger</span></a></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621680602824"><span class="annot"><span class="annottext">a :: a
</span><a href="#local-6989586621680602824"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602823"><span class="annot"><span class="annottext">w :: w
</span><a href="#local-6989586621680602823"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-878"></span><span>    </span><span class="annot"><span class="annottext">w -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621680602823"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-879"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680602824"><span class="hs-identifier hs-var">a</span></a></span></span><span>
</span><span id="line-880"></span><span>
</span><span id="line-881"></span><span>  </span><span id="say"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-type">say</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680604226"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604225"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-882"></span><span>  </span><span id="local-6989586621680602821"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var hs-var">say</span></a></span><span> </span><span id="local-6989586621680602820"><span class="annot"><span class="annottext">w :: w
</span><a href="#local-6989586621680602820"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((), w) -&gt; m ()
forall w (m :: * -&gt; *) a. MonadLog w m =&gt; (a, w) -&gt; m a
</span><a href="Music.Score.Export.StandardNotation.html#logger"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621680602820"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-885"></span><span class="hs-comment">-- Basic monad for exporting music.</span><span>
</span><span id="line-886"></span><span class="hs-comment">--</span><span>
</span><span id="line-887"></span><span class="hs-comment">-- Run as a pure computation with internal logging.</span><span>
</span><span id="line-888"></span><span class="hs-keyword">newtype</span><span> </span><span id="PureExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PureExportM"><span class="hs-identifier hs-var">PureExportM</span></a></span></span><span> </span><span id="local-6989586621680604143"><span class="annot"><a href="#local-6989586621680604143"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PureExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PureExportM"><span class="hs-identifier hs-var">PureExportM</span></a></span></span><span> </span><span class="hs-special">{</span><span id="runE"><span class="annot"><span class="annottext">PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a
</span><a href="Music.Score.Export.StandardNotation.html#runE"><span class="hs-identifier hs-var hs-var">runE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680604143"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-889"></span><span>  </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-890"></span><span>    </span><span class="hs-special">(</span><span> </span><span id="local-6989586621680602814"><span id="local-6989586621680602816"><span class="annot"><span class="annottext">a -&gt; PureExportM b -&gt; PureExportM a
(a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
(forall a b. (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b)
-&gt; (forall a b. a -&gt; PureExportM b -&gt; PureExportM a)
-&gt; Functor PureExportM
forall a b. a -&gt; PureExportM b -&gt; PureExportM a
forall a b. (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; PureExportM b -&gt; PureExportM a
$c&lt;$ :: forall a b. a -&gt; PureExportM b -&gt; PureExportM a
fmap :: (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
$cfmap :: forall a b. (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-891"></span><span>      </span><span id="local-6989586621680602803"><span id="local-6989586621680602805"><span id="local-6989586621680602807"><span id="local-6989586621680602809"><span id="local-6989586621680602811"><span class="annot"><span class="annottext">Functor PureExportM
a -&gt; PureExportM a
Functor PureExportM =&gt;
(forall a. a -&gt; PureExportM a)
-&gt; (forall a b.
    PureExportM (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; PureExportM a -&gt; PureExportM b -&gt; PureExportM c)
-&gt; (forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM b)
-&gt; (forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM a)
-&gt; Applicative PureExportM
PureExportM a -&gt; PureExportM b -&gt; PureExportM b
PureExportM a -&gt; PureExportM b -&gt; PureExportM a
PureExportM (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
(a -&gt; b -&gt; c) -&gt; PureExportM a -&gt; PureExportM b -&gt; PureExportM c
forall a. a -&gt; PureExportM a
forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM a
forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM b
forall a b. PureExportM (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
forall a b c.
(a -&gt; b -&gt; c) -&gt; PureExportM a -&gt; PureExportM b -&gt; PureExportM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: PureExportM a -&gt; PureExportM b -&gt; PureExportM a
$c&lt;* :: forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM a
*&gt; :: PureExportM a -&gt; PureExportM b -&gt; PureExportM b
$c*&gt; :: forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM b
liftA2 :: (a -&gt; b -&gt; c) -&gt; PureExportM a -&gt; PureExportM b -&gt; PureExportM c
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; PureExportM a -&gt; PureExportM b -&gt; PureExportM c
&lt;*&gt; :: PureExportM (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
$c&lt;*&gt; :: forall a b. PureExportM (a -&gt; b) -&gt; PureExportM a -&gt; PureExportM b
pure :: a -&gt; PureExportM a
$cpure :: forall a. a -&gt; PureExportM a
$cp1Applicative :: Functor PureExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-892"></span><span>      </span><span id="local-6989586621680602795"><span id="local-6989586621680602797"><span id="local-6989586621680602799"><span class="annot"><span class="annottext">Applicative PureExportM
a -&gt; PureExportM a
Applicative PureExportM =&gt;
(forall a b.
 PureExportM a -&gt; (a -&gt; PureExportM b) -&gt; PureExportM b)
-&gt; (forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM b)
-&gt; (forall a. a -&gt; PureExportM a)
-&gt; Monad PureExportM
PureExportM a -&gt; (a -&gt; PureExportM b) -&gt; PureExportM b
PureExportM a -&gt; PureExportM b -&gt; PureExportM b
forall a. a -&gt; PureExportM a
forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM b
forall a b. PureExportM a -&gt; (a -&gt; PureExportM b) -&gt; PureExportM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; PureExportM a
$creturn :: forall a. a -&gt; PureExportM a
&gt;&gt; :: PureExportM a -&gt; PureExportM b -&gt; PureExportM b
$c&gt;&gt; :: forall a b. PureExportM a -&gt; PureExportM b -&gt; PureExportM b
&gt;&gt;= :: PureExportM a -&gt; (a -&gt; PureExportM b) -&gt; PureExportM b
$c&gt;&gt;= :: forall a b. PureExportM a -&gt; (a -&gt; PureExportM b) -&gt; PureExportM b
$cp1Monad :: Applicative PureExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-893"></span><span>      </span><span id="local-6989586621680602785"><span id="local-6989586621680602787"><span id="local-6989586621680602789"><span id="local-6989586621680602791"><span class="annot"><span class="annottext">Applicative PureExportM
PureExportM a
Applicative PureExportM =&gt;
(forall a. PureExportM a)
-&gt; (forall a. PureExportM a -&gt; PureExportM a -&gt; PureExportM a)
-&gt; (forall a. PureExportM a -&gt; PureExportM [a])
-&gt; (forall a. PureExportM a -&gt; PureExportM [a])
-&gt; Alternative PureExportM
PureExportM a -&gt; PureExportM a -&gt; PureExportM a
PureExportM a -&gt; PureExportM [a]
PureExportM a -&gt; PureExportM [a]
forall a. PureExportM a
forall a. PureExportM a -&gt; PureExportM [a]
forall a. PureExportM a -&gt; PureExportM a -&gt; PureExportM a
forall (f :: * -&gt; *).
Applicative f =&gt;
(forall a. f a)
-&gt; (forall a. f a -&gt; f a -&gt; f a)
-&gt; (forall a. f a -&gt; f [a])
-&gt; (forall a. f a -&gt; f [a])
-&gt; Alternative f
many :: PureExportM a -&gt; PureExportM [a]
$cmany :: forall a. PureExportM a -&gt; PureExportM [a]
some :: PureExportM a -&gt; PureExportM [a]
$csome :: forall a. PureExportM a -&gt; PureExportM [a]
&lt;|&gt; :: PureExportM a -&gt; PureExportM a -&gt; PureExportM a
$c&lt;|&gt; :: forall a. PureExportM a -&gt; PureExportM a -&gt; PureExportM a
empty :: PureExportM a
$cempty :: forall a. PureExportM a
$cp1Alternative :: Applicative PureExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Alternative</span></a></span></span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-894"></span><span>      </span><span id="local-6989586621680602778"><span id="local-6989586621680602780"><span class="annot"><span class="annottext">Monad PureExportM
Alternative PureExportM
PureExportM a
(Alternative PureExportM, Monad PureExportM) =&gt;
(forall a. PureExportM a)
-&gt; (forall a. PureExportM a -&gt; PureExportM a -&gt; PureExportM a)
-&gt; MonadPlus PureExportM
PureExportM a -&gt; PureExportM a -&gt; PureExportM a
forall a. PureExportM a
forall a. PureExportM a -&gt; PureExportM a -&gt; PureExportM a
forall (m :: * -&gt; *).
(Alternative m, Monad m) =&gt;
(forall a. m a) -&gt; (forall a. m a -&gt; m a -&gt; m a) -&gt; MonadPlus m
mplus :: PureExportM a -&gt; PureExportM a -&gt; PureExportM a
$cmplus :: forall a. PureExportM a -&gt; PureExportM a -&gt; PureExportM a
mzero :: PureExportM a
$cmzero :: forall a. PureExportM a
$cp2MonadPlus :: Monad PureExportM
$cp1MonadPlus :: Alternative PureExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadPlus</span></a></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-895"></span><span>      </span><span id="local-6989586621680602772"><span id="local-6989586621680602774"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-896"></span><span>      </span><span id="local-6989586621680602761"><span id="local-6989586621680602763"><span id="local-6989586621680602765"><span id="local-6989586621680602767"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadWriter</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span></span></span></span></span><span>
</span><span id="line-897"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602757"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-type">MonadLog</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PureExportM"><span class="hs-identifier hs-type">PureExportM</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-900"></span><span>  </span><span id="local-6989586621680602754"><span class="annot"><span class="annottext">say :: String -&gt; PureExportM ()
</span><a href="#local-6989586621680602754"><span class="hs-identifier hs-var hs-var hs-var hs-var">say</span></a></span></span><span> </span><span id="local-6989586621680602753"><span class="annot"><span class="annottext">x :: String
</span><a href="#local-6989586621680602753"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; PureExportM ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602753"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-903"></span><span class="hs-comment">-- Run the computation.</span><span>
</span><span id="line-904"></span><span class="hs-comment">--</span><span>
</span><span id="line-905"></span><span class="hs-comment">-- Return the result and all emitted log messages, or an error message.</span><span>
</span><span id="line-906"></span><span id="local-6989586621680602751"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runPureExportM"><span class="hs-identifier hs-type">runPureExportM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PureExportM"><span class="hs-identifier hs-type">PureExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602751"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680602751"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-907"></span><span id="runPureExportM"><span class="annot"><span class="annottext">runPureExportM :: PureExportM a -&gt; Either String (a, [String])
</span><a href="Music.Score.Export.StandardNotation.html#runPureExportM"><span class="hs-identifier hs-var hs-var">runPureExportM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Except String (a, [String]) -&gt; Either String (a, [String])
forall e a. Except e a -&gt; Either e a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runExcept</span></a></span><span> </span><span class="annot"><span class="annottext">(Except String (a, [String]) -&gt; Either String (a, [String]))
-&gt; (PureExportM a -&gt; Except String (a, [String]))
-&gt; PureExportM a
-&gt; Either String (a, [String])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WriterT [String] (ExceptT String Identity) a
-&gt; Except String (a, [String])
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var hs-var">runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT [String] (ExceptT String Identity) a
 -&gt; Except String (a, [String]))
-&gt; (PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a)
-&gt; PureExportM a
-&gt; Except String (a, [String])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a
forall a.
PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a
</span><a href="Music.Score.Export.StandardNotation.html#runE"><span class="hs-identifier hs-var hs-var">runE</span></a></span><span>
</span><span id="line-908"></span><span>
</span><span id="line-909"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-910"></span><span class="hs-comment">-- Run the computation.</span><span>
</span><span id="line-911"></span><span class="hs-comment">--</span><span>
</span><span id="line-912"></span><span class="hs-comment">-- Return the result or an error message. The log messages are discarded.</span><span>
</span><span id="line-913"></span><span id="local-6989586621680602748"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runPureExportMNoLog"><span class="hs-identifier hs-type">runPureExportMNoLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PureExportM"><span class="hs-identifier hs-type">PureExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602748"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602748"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-914"></span><span id="runPureExportMNoLog"><span class="annot"><span class="annottext">runPureExportMNoLog :: PureExportM a -&gt; Either String a
</span><a href="Music.Score.Export.StandardNotation.html#runPureExportMNoLog"><span class="hs-identifier hs-var hs-var">runPureExportMNoLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, [String]) -&gt; a)
-&gt; Either String (a, [String]) -&gt; Either String a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(a, [String]) -&gt; a
forall a b. (a, b) -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">(Either String (a, [String]) -&gt; Either String a)
-&gt; (PureExportM a -&gt; Either String (a, [String]))
-&gt; PureExportM a
-&gt; Either String a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Except String (a, [String]) -&gt; Either String (a, [String])
forall e a. Except e a -&gt; Either e a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runExcept</span></a></span><span> </span><span class="annot"><span class="annottext">(Except String (a, [String]) -&gt; Either String (a, [String]))
-&gt; (PureExportM a -&gt; Except String (a, [String]))
-&gt; PureExportM a
-&gt; Either String (a, [String])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WriterT [String] (ExceptT String Identity) a
-&gt; Except String (a, [String])
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var hs-var">runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT [String] (ExceptT String Identity) a
 -&gt; Except String (a, [String]))
-&gt; (PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a)
-&gt; PureExportM a
-&gt; Except String (a, [String])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a
forall a.
PureExportM a -&gt; WriterT [String] (ExceptT String Identity) a
</span><a href="Music.Score.Export.StandardNotation.html#runE"><span class="hs-identifier hs-var hs-var">runE</span></a></span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-917"></span><span class="hs-comment">-- Basic failure and logging in the 'IO' monad.</span><span>
</span><span id="line-918"></span><span class="hs-comment">--</span><span>
</span><span id="line-919"></span><span class="hs-comment">-- Logs to standard output.</span><span>
</span><span id="line-920"></span><span class="hs-keyword">newtype</span><span> </span><span id="IOExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#IOExportM"><span class="hs-identifier hs-var">IOExportM</span></a></span></span><span> </span><span id="local-6989586621680604098"><span class="annot"><a href="#local-6989586621680604098"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IOExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#IOExportM"><span class="hs-identifier hs-var">IOExportM</span></a></span></span><span> </span><span class="hs-special">{</span><span id="runIOExportM_"><span class="annot"><span class="annottext">IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM_"><span class="hs-identifier hs-var hs-var">runIOExportM_</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604098"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-921"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602742"><span id="local-6989586621680602744"><span class="annot"><span class="annottext">a -&gt; IOExportM b -&gt; IOExportM a
(a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
(forall a b. (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b)
-&gt; (forall a b. a -&gt; IOExportM b -&gt; IOExportM a)
-&gt; Functor IOExportM
forall a b. a -&gt; IOExportM b -&gt; IOExportM a
forall a b. (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; IOExportM b -&gt; IOExportM a
$c&lt;$ :: forall a b. a -&gt; IOExportM b -&gt; IOExportM a
fmap :: (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
$cfmap :: forall a b. (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602731"><span id="local-6989586621680602733"><span id="local-6989586621680602735"><span id="local-6989586621680602737"><span id="local-6989586621680602739"><span class="annot"><span class="annottext">Functor IOExportM
a -&gt; IOExportM a
Functor IOExportM =&gt;
(forall a. a -&gt; IOExportM a)
-&gt; (forall a b. IOExportM (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; IOExportM a -&gt; IOExportM b -&gt; IOExportM c)
-&gt; (forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM b)
-&gt; (forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM a)
-&gt; Applicative IOExportM
IOExportM a -&gt; IOExportM b -&gt; IOExportM b
IOExportM a -&gt; IOExportM b -&gt; IOExportM a
IOExportM (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
(a -&gt; b -&gt; c) -&gt; IOExportM a -&gt; IOExportM b -&gt; IOExportM c
forall a. a -&gt; IOExportM a
forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM a
forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM b
forall a b. IOExportM (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
forall a b c.
(a -&gt; b -&gt; c) -&gt; IOExportM a -&gt; IOExportM b -&gt; IOExportM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: IOExportM a -&gt; IOExportM b -&gt; IOExportM a
$c&lt;* :: forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM a
*&gt; :: IOExportM a -&gt; IOExportM b -&gt; IOExportM b
$c*&gt; :: forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM b
liftA2 :: (a -&gt; b -&gt; c) -&gt; IOExportM a -&gt; IOExportM b -&gt; IOExportM c
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; IOExportM a -&gt; IOExportM b -&gt; IOExportM c
&lt;*&gt; :: IOExportM (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
$c&lt;*&gt; :: forall a b. IOExportM (a -&gt; b) -&gt; IOExportM a -&gt; IOExportM b
pure :: a -&gt; IOExportM a
$cpure :: forall a. a -&gt; IOExportM a
$cp1Applicative :: Functor IOExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602724"><span id="local-6989586621680602726"><span id="local-6989586621680602728"><span class="annot"><span class="annottext">Applicative IOExportM
a -&gt; IOExportM a
Applicative IOExportM =&gt;
(forall a b. IOExportM a -&gt; (a -&gt; IOExportM b) -&gt; IOExportM b)
-&gt; (forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM b)
-&gt; (forall a. a -&gt; IOExportM a)
-&gt; Monad IOExportM
IOExportM a -&gt; (a -&gt; IOExportM b) -&gt; IOExportM b
IOExportM a -&gt; IOExportM b -&gt; IOExportM b
forall a. a -&gt; IOExportM a
forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM b
forall a b. IOExportM a -&gt; (a -&gt; IOExportM b) -&gt; IOExportM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; IOExportM a
$creturn :: forall a. a -&gt; IOExportM a
&gt;&gt; :: IOExportM a -&gt; IOExportM b -&gt; IOExportM b
$c&gt;&gt; :: forall a b. IOExportM a -&gt; IOExportM b -&gt; IOExportM b
&gt;&gt;= :: IOExportM a -&gt; (a -&gt; IOExportM b) -&gt; IOExportM b
$c&gt;&gt;= :: forall a b. IOExportM a -&gt; (a -&gt; IOExportM b) -&gt; IOExportM b
$cp1Monad :: Applicative IOExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602721"><span class="annot"><span class="annottext">Monad IOExportM
Monad IOExportM =&gt;
(forall a. String -&gt; IOExportM a) -&gt; MonadFail IOExportM
String -&gt; IOExportM a
forall a. String -&gt; IOExportM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. String -&gt; m a) -&gt; MonadFail m
fail :: String -&gt; IOExportM a
$cfail :: forall a. String -&gt; IOExportM a
$cp1MonadFail :: Monad IOExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadFail</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602711"><span id="local-6989586621680602713"><span id="local-6989586621680602715"><span id="local-6989586621680602717"><span class="annot"><span class="annottext">Applicative IOExportM
IOExportM a
Applicative IOExportM =&gt;
(forall a. IOExportM a)
-&gt; (forall a. IOExportM a -&gt; IOExportM a -&gt; IOExportM a)
-&gt; (forall a. IOExportM a -&gt; IOExportM [a])
-&gt; (forall a. IOExportM a -&gt; IOExportM [a])
-&gt; Alternative IOExportM
IOExportM a -&gt; IOExportM a -&gt; IOExportM a
IOExportM a -&gt; IOExportM [a]
IOExportM a -&gt; IOExportM [a]
forall a. IOExportM a
forall a. IOExportM a -&gt; IOExportM [a]
forall a. IOExportM a -&gt; IOExportM a -&gt; IOExportM a
forall (f :: * -&gt; *).
Applicative f =&gt;
(forall a. f a)
-&gt; (forall a. f a -&gt; f a -&gt; f a)
-&gt; (forall a. f a -&gt; f [a])
-&gt; (forall a. f a -&gt; f [a])
-&gt; Alternative f
many :: IOExportM a -&gt; IOExportM [a]
$cmany :: forall a. IOExportM a -&gt; IOExportM [a]
some :: IOExportM a -&gt; IOExportM [a]
$csome :: forall a. IOExportM a -&gt; IOExportM [a]
&lt;|&gt; :: IOExportM a -&gt; IOExportM a -&gt; IOExportM a
$c&lt;|&gt; :: forall a. IOExportM a -&gt; IOExportM a -&gt; IOExportM a
empty :: IOExportM a
$cempty :: forall a. IOExportM a
$cp1Alternative :: Applicative IOExportM
</span><a href="#local-6989586621680602711"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Alternative</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602705"><span id="local-6989586621680602707"><span class="annot"><span class="annottext">Monad IOExportM
Alternative IOExportM
IOExportM a
(Alternative IOExportM, Monad IOExportM) =&gt;
(forall a. IOExportM a)
-&gt; (forall a. IOExportM a -&gt; IOExportM a -&gt; IOExportM a)
-&gt; MonadPlus IOExportM
IOExportM a -&gt; IOExportM a -&gt; IOExportM a
forall a. IOExportM a
forall a. IOExportM a -&gt; IOExportM a -&gt; IOExportM a
forall (m :: * -&gt; *).
(Alternative m, Monad m) =&gt;
(forall a. m a) -&gt; (forall a. m a -&gt; m a -&gt; m a) -&gt; MonadPlus m
mplus :: IOExportM a -&gt; IOExportM a -&gt; IOExportM a
$cmplus :: forall a. IOExportM a -&gt; IOExportM a -&gt; IOExportM a
mzero :: IOExportM a
$cmzero :: forall a. IOExportM a
$cp2MonadPlus :: Monad IOExportM
$cp1MonadPlus :: Alternative IOExportM
</span><a href="#local-6989586621680602705"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadPlus</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602702"><span class="annot"><span class="annottext">Monad IOExportM
Monad IOExportM =&gt;
(forall a. IO a -&gt; IOExportM a) -&gt; MonadIO IOExportM
IO a -&gt; IOExportM a
forall a. IO a -&gt; IOExportM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
liftIO :: IO a -&gt; IOExportM a
$cliftIO :: forall a. IO a -&gt; IOExportM a
$cp1MonadIO :: Monad IOExportM
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>
</span><span id="line-923"></span><span class="hs-comment">-- TODO add reader for indentation level etc</span><span>
</span><span id="line-924"></span><span>
</span><span id="line-925"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#IOExportM"><span class="hs-identifier hs-type">IOExportM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-926"></span><span>
</span><span id="line-927"></span><span>  </span><span id="local-6989586621680602697"><span class="annot"><span class="annottext">throwError :: String -&gt; IOExportM a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">throwError</span></a></span></span><span> </span><span id="local-6989586621680602695"><span class="annot"><span class="annottext">e :: String
</span><a href="#local-6989586621680602695"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IOExportM a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602695"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-928"></span><span>
</span><span id="line-929"></span><span>  </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-930"></span><span>  </span><span class="hs-comment">-- catchError (IOExportM k) = IOExportM $ do</span><span>
</span><span id="line-931"></span><span>  </span><span class="hs-comment">--   catchError k (\e -&gt; throwError (show e))</span><span>
</span><span id="line-932"></span><span>  </span><span id="local-6989586621680602694"><span class="annot"><span class="annottext">catchError :: IOExportM a -&gt; (String -&gt; IOExportM a) -&gt; IOExportM a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">catchError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IOExportM a -&gt; (String -&gt; IOExportM a) -&gt; IOExportM a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MonadError String IOExportM: catchError: No implementation&quot;</span></span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680602689"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-type">MonadLog</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#IOExportM"><span class="hs-identifier hs-type">IOExportM</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-935"></span><span>  </span><span id="local-6989586621680602687"><span class="annot"><span class="annottext">say :: String -&gt; IOExportM ()
</span><a href="#local-6989586621680602687"><span class="hs-identifier hs-var hs-var hs-var hs-var">say</span></a></span></span><span> </span><span id="local-6989586621680602686"><span class="annot"><span class="annottext">x :: String
</span><a href="#local-6989586621680602686"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IOExportM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IOExportM ()) -&gt; IO () -&gt; IOExportM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602686"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span id="local-6989586621680602683"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-type">runIOExportM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#IOExportM"><span class="hs-identifier hs-type">IOExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602683"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602683"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-938"></span><span id="runIOExportM"><span class="annot"><span class="annottext">runIOExportM :: IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-var hs-var">runIOExportM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IOExportM a -&gt; IO a
forall a. IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM_"><span class="hs-identifier hs-var hs-var">runIOExportM_</span></a></span><span>
</span><span id="line-939"></span><span>
</span><span id="line-940"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-941"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-942"></span><span>
</span><span id="line-943"></span><span class="hs-keyword">type</span><span> </span><span id="Template"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Template"><span class="hs-identifier hs-var">Template</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-946"></span><span class="hs-comment">-- One-function templating system.</span><span>
</span><span id="line-947"></span><span class="hs-comment">--</span><span>
</span><span id="line-948"></span><span class="hs-comment">-- TODO&gt;&gt;&gt; expand &quot;me : $(name)&quot; (Map.fromList [(&quot;name&quot;,&quot;Hans&quot;)])</span><span>
</span><span id="line-949"></span><span class="hs-comment">-- &quot;me : Hans&quot;</span><span>
</span><span id="line-950"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#expandTemplate"><span class="hs-identifier hs-type">expandTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Template"><span class="hs-identifier hs-type">Template</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-951"></span><span id="expandTemplate"><span class="annot"><span class="annottext">expandTemplate :: String -&gt; Attribution -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#expandTemplate"><span class="hs-identifier hs-var hs-var">expandTemplate</span></a></span></span><span> </span><span id="local-6989586621680602680"><span class="annot"><span class="annottext">t :: String
</span><a href="#local-6989586621680602680"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621680602679"><span class="annot"><span class="annottext">vs :: Attribution
</span><a href="#local-6989586621680602679"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ShowS] -&gt; ShowS
forall (t :: * -&gt; *) (cat :: * -&gt; * -&gt; *) b.
(Foldable t, Category cat) =&gt;
t (cat b b) -&gt; cat b b
</span><a href="#local-6989586621680602678"><span class="hs-identifier hs-var">composed</span></a></span><span> </span><span class="annot"><span class="annottext">([ShowS] -&gt; ShowS) -&gt; [ShowS] -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ShowS) -&gt; [String] -&gt; [ShowS]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Attribution -&gt; String -&gt; ShowS
</span><a href="#local-6989586621680602677"><span class="hs-identifier hs-var">expander</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution
</span><a href="#local-6989586621680602679"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [ShowS]) -&gt; [String] -&gt; [ShowS]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution -&gt; [String]
forall k a. Map k a -&gt; [k]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(Attribution -&gt; [String]) -&gt; Attribution -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution
</span><a href="#local-6989586621680602679"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602680"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-952"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-953"></span><span>    </span><span id="local-6989586621680602677"><span class="annot"><span class="annottext">expander :: Attribution -&gt; String -&gt; ShowS
</span><a href="#local-6989586621680602677"><span class="hs-identifier hs-var hs-var">expander</span></a></span></span><span> </span><span id="local-6989586621680602675"><span class="annot"><span class="annottext">vs :: Attribution
</span><a href="#local-6989586621680602675"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621680602674"><span class="annot"><span class="annottext">k :: String
</span><a href="#local-6989586621680602674"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; ShowS
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621680602673"><span class="hs-identifier hs-var">replace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;$(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602674"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe String -&gt; String
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.Maybe.fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; String) -&gt; Maybe String -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Attribution -&gt; Maybe String
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602674"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution
</span><a href="#local-6989586621680602675"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>    </span><span id="local-6989586621680602678"><span class="annot"><span class="annottext">composed :: t (cat b b) -&gt; cat b b
</span><a href="#local-6989586621680602678"><span class="hs-identifier hs-var hs-var">composed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(cat b b -&gt; cat b b -&gt; cat b b)
-&gt; cat b b -&gt; t (cat b b) -&gt; cat b b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">cat b b -&gt; cat b b -&gt; cat b b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(.)</span></a></span><span> </span><span class="annot"><span class="annottext">cat b b
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-955"></span><span>    </span><span id="local-6989586621680602673"><span class="annot"><span class="annottext">replace :: [a] -&gt; [a] -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621680602673"><span class="hs-identifier hs-var hs-var">replace</span></a></span></span><span> </span><span id="local-6989586621680602668"><span class="annot"><span class="annottext">old :: [a]
</span><a href="#local-6989586621680602668"><span class="hs-identifier hs-var">old</span></a></span></span><span> </span><span id="local-6989586621680602667"><span class="annot"><span class="annottext">new :: [a]
</span><a href="#local-6989586621680602667"><span class="hs-identifier hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [[a]] -&gt; [a]
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.intercalate</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680602667"><span class="hs-identifier hs-var">new</span></a></span><span> </span><span class="annot"><span class="annottext">([[a]] -&gt; [a]) -&gt; ([a] -&gt; [[a]]) -&gt; [a] -&gt; [a]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [[a]]
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [[a]]
</span><a href="../file:///nix/store/z1vq9w077996zxf2ywkhxcr9wis9qsg8-split-0.2.3.4-doc/share/doc/split-0.2.3.4/html/src"><span class="hs-identifier hs-var">Data.List.Split.splitOn</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680602668"><span class="hs-identifier hs-var">old</span></a></span><span>
</span><span id="line-956"></span><span>
</span><span id="line-957"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-958"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-959"></span><span>
</span><span id="line-960"></span><span class="hs-keyword">type</span><span> </span><span id="LilypondExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-var">LilypondExportM</span></a></span></span><span> </span><span id="local-6989586621680602664"><span class="annot"><a href="#local-6989586621680602664"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-type">MonadLog</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602664"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602664"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span class="hs-keyword">data</span><span> </span><span id="LilypondLayout"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondLayout"><span class="hs-identifier hs-var">LilypondLayout</span></a></span></span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Render all music on a single page, without titles (e.g. for inline examples</span><span>
</span><span id="line-964"></span><span>    </span><span class="hs-comment">-- in the documentation).</span><span>
</span><span id="line-965"></span><span>    </span><span id="LilypondInline"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondInline"><span class="hs-identifier hs-var">LilypondInline</span></a></span></span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Render normally.</span><span>
</span><span id="line-967"></span><span>    </span><span id="LilypondScore"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondScore"><span class="hs-identifier hs-var">LilypondScore</span></a></span></span><span>
</span><span id="line-968"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Render all music on a single page, with titles.</span><span>
</span><span id="line-969"></span><span>    </span><span id="LilypondBigScore"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondBigScore"><span class="hs-identifier hs-var">LilypondBigScore</span></a></span></span><span>
</span><span id="line-970"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602657"><span id="local-6989586621680602659"><span class="annot"><span class="annottext">LilypondLayout -&gt; LilypondLayout -&gt; Bool
(LilypondLayout -&gt; LilypondLayout -&gt; Bool)
-&gt; (LilypondLayout -&gt; LilypondLayout -&gt; Bool) -&gt; Eq LilypondLayout
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: LilypondLayout -&gt; LilypondLayout -&gt; Bool
$c/= :: LilypondLayout -&gt; LilypondLayout -&gt; Bool
== :: LilypondLayout -&gt; LilypondLayout -&gt; Bool
$c== :: LilypondLayout -&gt; LilypondLayout -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602651"><span id="local-6989586621680602653"><span id="local-6989586621680602655"><span class="annot"><span class="annottext">Int -&gt; LilypondLayout -&gt; ShowS
[LilypondLayout] -&gt; ShowS
LilypondLayout -&gt; String
(Int -&gt; LilypondLayout -&gt; ShowS)
-&gt; (LilypondLayout -&gt; String)
-&gt; ([LilypondLayout] -&gt; ShowS)
-&gt; Show LilypondLayout
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [LilypondLayout] -&gt; ShowS
$cshowList :: [LilypondLayout] -&gt; ShowS
show :: LilypondLayout -&gt; String
$cshow :: LilypondLayout -&gt; String
showsPrec :: Int -&gt; LilypondLayout -&gt; ShowS
$cshowsPrec :: Int -&gt; LilypondLayout -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#defaultLilypondLayout"><span class="hs-identifier hs-type">defaultLilypondLayout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondLayout"><span class="hs-identifier hs-type">LilypondLayout</span></a></span><span>
</span><span id="line-973"></span><span id="defaultLilypondLayout"><span class="annot"><span class="annottext">defaultLilypondLayout :: LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#defaultLilypondLayout"><span class="hs-identifier hs-var hs-var">defaultLilypondLayout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#LilypondBigScore"><span class="hs-identifier hs-var">LilypondBigScore</span></a></span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span class="hs-keyword">data</span><span> </span><span id="LilypondOptions"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-var">LilypondOptions</span></a></span></span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LilypondOptions"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-var">LilypondOptions</span></a></span></span><span>
</span><span id="line-977"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="layout"><span class="annot"><span class="annottext">LilypondOptions -&gt; LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#layout"><span class="hs-identifier hs-var hs-var">layout</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondLayout"><span class="hs-identifier hs-type">LilypondLayout</span></a></span><span>
</span><span id="line-978"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602645"><span id="local-6989586621680602647"><span class="annot"><span class="annottext">LilypondOptions -&gt; LilypondOptions -&gt; Bool
(LilypondOptions -&gt; LilypondOptions -&gt; Bool)
-&gt; (LilypondOptions -&gt; LilypondOptions -&gt; Bool)
-&gt; Eq LilypondOptions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: LilypondOptions -&gt; LilypondOptions -&gt; Bool
$c/= :: LilypondOptions -&gt; LilypondOptions -&gt; Bool
== :: LilypondOptions -&gt; LilypondOptions -&gt; Bool
$c== :: LilypondOptions -&gt; LilypondOptions -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602639"><span id="local-6989586621680602641"><span id="local-6989586621680602643"><span class="annot"><span class="annottext">Int -&gt; LilypondOptions -&gt; ShowS
[LilypondOptions] -&gt; ShowS
LilypondOptions -&gt; String
(Int -&gt; LilypondOptions -&gt; ShowS)
-&gt; (LilypondOptions -&gt; String)
-&gt; ([LilypondOptions] -&gt; ShowS)
-&gt; Show LilypondOptions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [LilypondOptions] -&gt; ShowS
$cshowList :: [LilypondOptions] -&gt; ShowS
show :: LilypondOptions -&gt; String
$cshow :: LilypondOptions -&gt; String
showsPrec :: Int -&gt; LilypondOptions -&gt; ShowS
$cshowsPrec :: Int -&gt; LilypondOptions -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-980"></span><span>
</span><span id="line-981"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#defaultLilypondOptions"><span class="hs-identifier hs-type">defaultLilypondOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-type">LilypondOptions</span></a></span><span>
</span><span id="line-982"></span><span id="defaultLilypondOptions"><span class="annot"><span class="annottext">defaultLilypondOptions :: LilypondOptions
</span><a href="Music.Score.Export.StandardNotation.html#defaultLilypondOptions"><span class="hs-identifier hs-var hs-var">defaultLilypondOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LilypondOptions :: LilypondLayout -&gt; LilypondOptions
</span><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-type hs-type">LilypondOptions</span></a></span><span>
</span><span id="line-983"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">layout :: LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#layout"><span class="hs-identifier hs-var">layout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#defaultLilypondLayout"><span class="hs-identifier hs-var">defaultLilypondLayout</span></a></span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span id="local-6989586621680602637"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLy"><span class="hs-identifier hs-type">toLy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602637"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-type">LilypondOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602637"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-987"></span><span id="toLy"><span class="annot"><span class="annottext">toLy :: LilypondOptions -&gt; Work -&gt; m (String, Music)
</span><a href="Music.Score.Export.StandardNotation.html#toLy"><span class="hs-identifier hs-var hs-var">toLy</span></a></span></span><span> </span><span id="local-6989586621680602636"><span class="annot"><span class="annottext">opts :: LilypondOptions
</span><a href="#local-6989586621680602636"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621680602635"><span class="annot"><span class="annottext">work :: Work
</span><a href="#local-6989586621680602635"><span class="hs-identifier hs-var">work</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-988"></span><span>  </span><span class="hs-comment">-- TODO assumes one movement</span><span>
</span><span id="line-989"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Lilypond: Assuming one movement only&quot;</span></span><span>
</span><span id="line-990"></span><span>  </span><span id="local-6989586621680602634"><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602634"><span class="hs-identifier hs-var">firstMovement</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Work
</span><a href="#local-6989586621680602635"><span class="hs-identifier hs-var">work</span></a></span><span> </span><span class="annot"><span class="annottext">Work -&gt; Getting (First Movement) Work Movement -&gt; Maybe Movement
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">([Movement] -&gt; Const (First Movement) [Movement])
-&gt; Work -&gt; Const (First Movement) Work
Lens' Work [Movement]
</span><a href="Music.Score.Export.StandardNotation.html#movements"><span class="hs-identifier hs-var">movements</span></a></span><span> </span><span class="annot"><span class="annottext">(([Movement] -&gt; Const (First Movement) [Movement])
 -&gt; Work -&gt; Const (First Movement) Work)
-&gt; ((Movement -&gt; Const (First Movement) Movement)
    -&gt; [Movement] -&gt; Const (First Movement) [Movement])
-&gt; Getting (First Movement) Work Movement
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Movement -&gt; Const (First Movement) Movement)
-&gt; [Movement] -&gt; Const (First Movement) [Movement]
forall s a. Cons s s a a =&gt; Traversal' s a
</span><span class="hs-identifier hs-var">_head</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-991"></span><span>    </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Movement
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;StandardNotation: Expected a one-movement piece&quot;</span></span><span>
</span><span id="line-992"></span><span>    </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602632"><span class="annot"><span class="annottext">x :: Movement
</span><a href="#local-6989586621680602632"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Movement -&gt; m Movement
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602632"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602631"><span class="annot"><span class="annottext">headerTempl :: Attribution
</span><a href="#local-6989586621680602631"><span class="hs-identifier hs-var hs-var">headerTempl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-994"></span><span>        </span><span class="annot"><span class="annottext">[(String, String)] -&gt; Attribution
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.fromList</span></a></span><span>
</span><span id="line-995"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;title&quot;</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602634"><span class="hs-identifier hs-var">firstMovement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Getting String Movement String -&gt; String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(MovementInfo -&gt; Const String MovementInfo)
-&gt; Movement -&gt; Const String Movement
Lens' Movement MovementInfo
</span><a href="Music.Score.Export.StandardNotation.html#movementInfo"><span class="hs-identifier hs-var">movementInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((MovementInfo -&gt; Const String MovementInfo)
 -&gt; Movement -&gt; Const String Movement)
-&gt; ((String -&gt; Const String String)
    -&gt; MovementInfo -&gt; Const String MovementInfo)
-&gt; Getting String Movement String
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Const String String)
-&gt; MovementInfo -&gt; Const String MovementInfo
Lens' MovementInfo String
</span><a href="Music.Score.Export.StandardNotation.html#movementTitle"><span class="hs-identifier hs-var">movementTitle</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-996"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-string">&quot;composer&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-997"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; String
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.Maybe.fromMaybe</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; String) -&gt; Maybe String -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-998"></span><span>                </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602634"><span class="hs-identifier hs-var">firstMovement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
-&gt; Getting (Maybe String) Movement (Maybe String) -&gt; Maybe String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(MovementInfo -&gt; Const (Maybe String) MovementInfo)
-&gt; Movement -&gt; Const (Maybe String) Movement
Lens' Movement MovementInfo
</span><a href="Music.Score.Export.StandardNotation.html#movementInfo"><span class="hs-identifier hs-var">movementInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((MovementInfo -&gt; Const (Maybe String) MovementInfo)
 -&gt; Movement -&gt; Const (Maybe String) Movement)
-&gt; ((Maybe String -&gt; Const (Maybe String) (Maybe String))
    -&gt; MovementInfo -&gt; Const (Maybe String) MovementInfo)
-&gt; Getting (Maybe String) Movement (Maybe String)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Attribution -&gt; Const (Maybe String) Attribution)
-&gt; MovementInfo -&gt; Const (Maybe String) MovementInfo
Lens' MovementInfo Attribution
</span><a href="Music.Score.Export.StandardNotation.html#movementAttribution"><span class="hs-identifier hs-var">movementAttribution</span></a></span><span> </span><span class="annot"><span class="annottext">((Attribution -&gt; Const (Maybe String) Attribution)
 -&gt; MovementInfo -&gt; Const (Maybe String) MovementInfo)
-&gt; ((Maybe String -&gt; Const (Maybe String) (Maybe String))
    -&gt; Attribution -&gt; Const (Maybe String) Attribution)
-&gt; (Maybe String -&gt; Const (Maybe String) (Maybe String))
-&gt; MovementInfo
-&gt; Const (Maybe String) MovementInfo
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Index Attribution
-&gt; Lens' Attribution (Maybe (IxValue Attribution))
forall m. At m =&gt; Index m -&gt; Lens' m (Maybe (IxValue m))
</span><span class="hs-identifier hs-var">at</span></span><span> </span><span class="annot"><span class="hs-string">&quot;composer&quot;</span></span><span>
</span><span id="line-999"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602627"><span class="annot"><span class="annottext">headerData :: ByteString
</span><a href="#local-6989586621680602627"><span class="hs-identifier hs-var hs-var">headerData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LilypondOptions -&gt; LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#layout"><span class="hs-identifier hs-var hs-var">layout</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondOptions
</span><a href="#local-6989586621680602636"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1002"></span><span>        </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondBigScore"><span class="hs-identifier hs-type">LilypondBigScore</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">embedFile</span><span> </span><span class="hs-string">&quot;data/ly_big_score.ly&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-1003"></span><span>        </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondScore"><span class="hs-identifier hs-type">LilypondScore</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">embedFile</span><span> </span><span class="hs-string">&quot;data/ly_score.ly&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-1004"></span><span>        </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondInline"><span class="hs-identifier hs-type">LilypondInline</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">embedFile</span><span> </span><span class="hs-string">&quot;data/ly_inline.ly&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602624"><span class="annot"><span class="annottext">header :: String
</span><a href="#local-6989586621680602624"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/bytestring-0.10.10.0/src"><span class="hs-identifier hs-var">Data.ByteString.Char8.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621680602627"><span class="hs-identifier hs-var">headerData</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Attribution -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#expandTemplate"><span class="hs-operator hs-var">`expandTemplate`</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution
</span><a href="#local-6989586621680602631"><span class="hs-identifier hs-var">headerTempl</span></a></span><span>
</span><span id="line-1006"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Lilypond: Converting music&quot;</span></span><span>
</span><span id="line-1007"></span><span>  </span><span id="local-6989586621680602622"><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602622"><span class="hs-identifier hs-var">music</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Movement -&gt; m Music
forall (m :: * -&gt; *). LilypondExportM m =&gt; Movement -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyMusic"><span class="hs-identifier hs-var">toLyMusic</span></a></span><span> </span><span class="annot"><span class="annottext">(Movement -&gt; m Music) -&gt; Movement -&gt; m Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602634"><span class="hs-identifier hs-var">firstMovement</span></a></span><span>
</span><span id="line-1008"></span><span>  </span><span class="annot"><span class="annottext">(String, Music) -&gt; m (String, Music)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602624"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602622"><span class="hs-identifier hs-var">music</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>
</span><span id="line-1010"></span><span id="local-6989586621680604061"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyMusic"><span class="hs-identifier hs-type">toLyMusic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604061"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604061"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1011"></span><span id="toLyMusic"><span class="annot"><span class="annottext">toLyMusic :: Movement -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyMusic"><span class="hs-identifier hs-var hs-var">toLyMusic</span></a></span></span><span> </span><span id="local-6989586621680602620"><span class="annot"><span class="annottext">m2 :: Movement
</span><a href="#local-6989586621680602620"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1012"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602619"><span class="annot"><span class="annottext">m :: Movement
</span><a href="#local-6989586621680602619"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Movement
</span><a href="Music.Score.Export.StandardNotation.html#movementAssureSameNumberOfBars"><span class="hs-identifier hs-var">movementAssureSameNumberOfBars</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602620"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-1013"></span><span>  </span><span class="hs-comment">-- We will copy system-staff info to each bar (time sigs, key sigs and so on,</span><span>
</span><span id="line-1014"></span><span>  </span><span class="hs-comment">-- which seems to be what Lilypond expects), so the system staff is included</span><span>
</span><span id="line-1015"></span><span>  </span><span class="hs-comment">-- in the rendering of each staff</span><span>
</span><span id="line-1016"></span><span>  </span><span id="local-6989586621680602618"><span class="annot"><span class="annottext">LabelTree BracketType Music
</span><a href="#local-6989586621680602618"><span class="hs-identifier hs-var">renderedStaves</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Staff -&gt; m Music)
-&gt; LabelTree BracketType Staff -&gt; m (LabelTree BracketType Music)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SystemBar] -&gt; Staff -&gt; m Music
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
[SystemBar] -&gt; Staff -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyStaff"><span class="hs-identifier hs-var">toLyStaff</span></a></span><span> </span><span class="annot"><span class="annottext">([SystemBar] -&gt; Staff -&gt; m Music)
-&gt; [SystemBar] -&gt; Staff -&gt; m Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602619"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Getting [SystemBar] Movement [SystemBar] -&gt; [SystemBar]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [SystemBar] Movement [SystemBar]
Lens' Movement [SystemBar]
</span><a href="Music.Score.Export.StandardNotation.html#systemStaff"><span class="hs-identifier hs-var">systemStaff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602619"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
-&gt; Getting
     (LabelTree BracketType Staff)
     Movement
     (LabelTree BracketType Staff)
-&gt; LabelTree BracketType Staff
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (LabelTree BracketType Staff)
  Movement
  (LabelTree BracketType Staff)
Lens' Movement (LabelTree BracketType Staff)
</span><a href="Music.Score.Export.StandardNotation.html#staves"><span class="hs-identifier hs-var">staves</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1017"></span><span>  </span><span class="hs-comment">-- Now we still have (LabelTree BracketType), which is converted to a parallel</span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-comment">-- music expression, using \StaffGroup etc</span><span>
</span><span id="line-1019"></span><span>  </span><span class="annot"><span class="annottext">LabelTree BracketType Music -&gt; m Music
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
LabelTree BracketType Music -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyStaffGroup"><span class="hs-identifier hs-var">toLyStaffGroup</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Music
</span><a href="#local-6989586621680602618"><span class="hs-identifier hs-var">renderedStaves</span></a></span><span>
</span><span id="line-1020"></span><span>
</span><span id="line-1021"></span><span id="local-6989586621680604058"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyStaff"><span class="hs-identifier hs-type">toLyStaff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604058"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-type">SystemStaff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604058"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1022"></span><span id="toLyStaff"><span class="annot"><span class="annottext">toLyStaff :: [SystemBar] -&gt; Staff -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyStaff"><span class="hs-identifier hs-var hs-var">toLyStaff</span></a></span></span><span> </span><span id="local-6989586621680602614"><span class="annot"><span class="annottext">sysBars :: [SystemBar]
</span><a href="#local-6989586621680602614"><span class="hs-identifier hs-var">sysBars</span></a></span></span><span> </span><span id="local-6989586621680602613"><span class="annot"><span class="annottext">staff :: Staff
</span><a href="#local-6989586621680602613"><span class="hs-identifier hs-var">staff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1023"></span><span>  </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1024"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#New"><span class="hs-identifier hs-var">Lilypond.New</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Staff&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1025"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; ([Music] -&gt; Music) -&gt; [Music] -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Sequential"><span class="hs-identifier hs-var">Lilypond.Sequential</span></a></span><span>
</span><span id="line-1026"></span><span>    </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; ([Music] -&gt; [Music]) -&gt; [Music] -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addPartName"><span class="hs-identifier hs-var">addPartName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Staff
</span><a href="#local-6989586621680602613"><span class="hs-identifier hs-var">staff</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; Getting String Staff String -&gt; String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(StaffInfo -&gt; Const String StaffInfo)
-&gt; Staff -&gt; Const String Staff
Lens' Staff StaffInfo
</span><a href="Music.Score.Export.StandardNotation.html#staffInfo"><span class="hs-identifier hs-var">staffInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((StaffInfo -&gt; Const String StaffInfo)
 -&gt; Staff -&gt; Const String Staff)
-&gt; ((String -&gt; Const String String)
    -&gt; StaffInfo -&gt; Const String StaffInfo)
-&gt; Getting String Staff String
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Const String String)
-&gt; StaffInfo -&gt; Const String StaffInfo
Lens' StaffInfo String
</span><a href="Music.Score.Export.StandardNotation.html#instrumentFullName"><span class="hs-identifier hs-var">instrumentFullName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1027"></span><span>    </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; ([Music] -&gt; [Music]) -&gt; [Music] -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Clef -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addClef"><span class="hs-identifier hs-var">addClef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clef -&gt; Clef
</span><a href="Music.Score.Export.StandardNotation.html#toLyClef"><span class="hs-identifier hs-var">toLyClef</span></a></span><span> </span><span class="annot"><span class="annottext">(Clef -&gt; Clef) -&gt; Clef -&gt; Clef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Staff
</span><a href="#local-6989586621680602613"><span class="hs-identifier hs-var">staff</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; Getting Clef Staff Clef -&gt; Clef
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(StaffInfo -&gt; Const Clef StaffInfo) -&gt; Staff -&gt; Const Clef Staff
Lens' Staff StaffInfo
</span><a href="Music.Score.Export.StandardNotation.html#staffInfo"><span class="hs-identifier hs-var">staffInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((StaffInfo -&gt; Const Clef StaffInfo) -&gt; Staff -&gt; Const Clef Staff)
-&gt; ((Clef -&gt; Const Clef Clef) -&gt; StaffInfo -&gt; Const Clef StaffInfo)
-&gt; Getting Clef Staff Clef
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Clef -&gt; Const Clef Clef) -&gt; StaffInfo -&gt; Const Clef StaffInfo
Lens' StaffInfo Clef
</span><a href="Music.Score.Export.StandardNotation.html#instrumentDefaultClef"><span class="hs-identifier hs-var">instrumentDefaultClef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1028"></span><span>    </span><span class="hs-comment">-- TODO Currently score is always in C with no oct-transp.</span><span>
</span><span id="line-1029"></span><span>    </span><span class="hs-comment">-- To get a transposing score, add \transpose &lt;written&gt; &lt;sounding&gt;</span><span>
</span><span id="line-1030"></span><span>
</span><span id="line-1031"></span><span>    </span><span class="hs-comment">-- Lilypond key signatures have to be applied to all staves</span><span>
</span><span id="line-1032"></span><span>    </span><span class="hs-comment">-- See http://lilypond.org/doc/v2.19/Documentation/learning/multiple-staves</span><span>
</span><span id="line-1033"></span><span>    </span><span class="hs-comment">-- TODO correct key sig</span><span>
</span><span id="line-1034"></span><span>    </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; m [Music] -&gt; m Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[m Music] -&gt; m [Music]
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">sequence</span></a></span><span> </span><span class="annot"><span class="annottext">([m Music] -&gt; m [Music]) -&gt; [m Music] -&gt; m [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(SystemBar -&gt; Bar -&gt; m Music) -&gt; [SystemBar] -&gt; [Bar] -&gt; [m Music]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="annot"><span class="annottext">SystemBar -&gt; Bar -&gt; m Music
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
SystemBar -&gt; Bar -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyBar"><span class="hs-identifier hs-var">toLyBar</span></a></span><span> </span><span class="annot"><span class="annottext">[SystemBar]
</span><a href="#local-6989586621680602614"><span class="hs-identifier hs-var">sysBars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Staff
</span><a href="#local-6989586621680602613"><span class="hs-identifier hs-var">staff</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; Getting [Bar] Staff [Bar] -&gt; [Bar]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Bar] Staff [Bar]
Lens' Staff [Bar]
</span><a href="Music.Score.Export.StandardNotation.html#bars"><span class="hs-identifier hs-var">bars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyClef"><span class="hs-identifier hs-type">toLyClef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Pitch.Clef.html#Clef"><span class="hs-identifier hs-type">Music.Pitch.Clef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Clef"><span class="hs-identifier hs-type">L.Clef</span></a></span><span>
</span><span id="line-1037"></span><span id="toLyClef"><span class="annot"><span class="annottext">toLyClef :: Clef -&gt; Clef
</span><a href="Music.Score.Export.StandardNotation.html#toLyClef"><span class="hs-identifier hs-var hs-var">toLyClef</span></a></span></span><span> </span><span id="local-6989586621680602603"><span class="annot"><span class="annottext">c :: Clef
</span><a href="#local-6989586621680602603"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-1038"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602603"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Clef -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Music.Pitch.Clef.html#trebleClef"><span class="hs-identifier hs-var">Music.Pitch.trebleClef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Data.Music.Lilypond.html#Treble"><span class="hs-identifier hs-var">Lilypond.Treble</span></a></span><span>
</span><span id="line-1039"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602603"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Clef -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Music.Pitch.Clef.html#altoClef"><span class="hs-identifier hs-var">Music.Pitch.altoClef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Data.Music.Lilypond.html#Alto"><span class="hs-identifier hs-var">Lilypond.Alto</span></a></span><span>
</span><span id="line-1040"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602603"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Clef -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Music.Pitch.Clef.html#tenorClef"><span class="hs-identifier hs-var">Music.Pitch.tenorClef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Data.Music.Lilypond.html#Tenor"><span class="hs-identifier hs-var">Lilypond.Tenor</span></a></span><span>
</span><span id="line-1041"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602603"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Clef -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Music.Pitch.Clef.html#bassClef"><span class="hs-identifier hs-var">Music.Pitch.bassClef</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Data.Music.Lilypond.html#Bass"><span class="hs-identifier hs-var">Lilypond.Bass</span></a></span><span>
</span><span id="line-1042"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="Data.Music.Lilypond.html#Treble"><span class="hs-identifier hs-var">Lilypond.Treble</span></a></span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#addClef"><span class="hs-identifier hs-type">addClef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Clef"><span class="hs-identifier hs-type">L.Clef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">L.Music</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">L.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1045"></span><span id="addClef"><span class="annot"><span class="annottext">addClef :: Clef -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addClef"><span class="hs-identifier hs-var hs-var">addClef</span></a></span></span><span> </span><span id="local-6989586621680602595"><span class="annot"><span class="annottext">c :: Clef
</span><a href="#local-6989586621680602595"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680602594"><span class="annot"><span class="annottext">xs :: [Music]
</span><a href="#local-6989586621680602594"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Music
</span><a href="Data.Music.Lilypond.html#Clef"><span class="hs-identifier hs-var">Lilypond.Clef</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602595"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602594"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#addPartName"><span class="hs-identifier hs-type">addPartName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">L.Music</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">L.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1048"></span><span id="addPartName"><span class="annot"><span class="annottext">addPartName :: String -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addPartName"><span class="hs-identifier hs-var hs-var">addPartName</span></a></span></span><span> </span><span id="local-6989586621680602592"><span class="annot"><span class="annottext">partName :: String
</span><a href="#local-6989586621680602592"><span class="hs-identifier hs-var">partName</span></a></span></span><span> </span><span id="local-6989586621680602591"><span class="annot"><span class="annottext">xs :: [Music]
</span><a href="#local-6989586621680602591"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602590"><span class="hs-identifier hs-var">longName</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602589"><span class="hs-identifier hs-var">shortName</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602591"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1049"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1050"></span><span>    </span><span id="local-6989586621680602590"><span class="annot"><span class="annottext">longName :: Music
</span><a href="#local-6989586621680602590"><span class="hs-identifier hs-var hs-var">longName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Music
</span><a href="Data.Music.Lilypond.html#Set"><span class="hs-identifier hs-var">Lilypond.Set</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Staff.instrumentName&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Value
forall a. Show a =&gt; a -&gt; Value
</span><a href="Data.Music.Lilypond.Value.html#toValue"><span class="hs-identifier hs-var">Lilypond.toValue</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602592"><span class="hs-identifier hs-var">partName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1051"></span><span>    </span><span id="local-6989586621680602589"><span class="annot"><span class="annottext">shortName :: Music
</span><a href="#local-6989586621680602589"><span class="hs-identifier hs-var hs-var">shortName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Music
</span><a href="Data.Music.Lilypond.html#Set"><span class="hs-identifier hs-var">Lilypond.Set</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Staff.shortInstrumentName&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Value
forall a. Show a =&gt; a -&gt; Value
</span><a href="Data.Music.Lilypond.Value.html#toValue"><span class="hs-identifier hs-var">Lilypond.toValue</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602592"><span class="hs-identifier hs-var">partName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1052"></span><span>
</span><span id="line-1053"></span><span id="local-6989586621680604048"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyBar"><span class="hs-identifier hs-type">toLyBar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604048"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemBar"><span class="hs-identifier hs-type">SystemBar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604048"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1054"></span><span id="toLyBar"><span class="annot"><span class="annottext">toLyBar :: SystemBar -&gt; Bar -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyBar"><span class="hs-identifier hs-var hs-var">toLyBar</span></a></span></span><span> </span><span id="local-6989586621680602586"><span class="annot"><span class="annottext">sysBar :: SystemBar
</span><a href="#local-6989586621680602586"><span class="hs-identifier hs-var">sysBar</span></a></span></span><span> </span><span id="local-6989586621680602585"><span class="annot"><span class="annottext">bar :: Bar
</span><a href="#local-6989586621680602585"><span class="hs-identifier hs-var">bar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1055"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602584"><span class="annot"><span class="annottext">layers :: [PitchLayer]
</span><a href="#local-6989586621680602584"><span class="hs-identifier hs-var hs-var">layers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bar
</span><a href="#local-6989586621680602585"><span class="hs-identifier hs-var">bar</span></a></span><span> </span><span class="annot"><span class="annottext">Bar -&gt; Getting [PitchLayer] Bar [PitchLayer] -&gt; [PitchLayer]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [PitchLayer] Bar [PitchLayer]
Lens' Bar [PitchLayer]
</span><a href="Music.Score.Export.StandardNotation.html#pitchLayers"><span class="hs-identifier hs-var">pitchLayers</span></a></span><span>
</span><span id="line-1056"></span><span>  </span><span class="hs-comment">-- TODO emit \new Voice for each layer?</span><span>
</span><span id="line-1057"></span><span>  </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="#local-6989586621680602583"><span class="hs-identifier hs-var">sim</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; ([Music] -&gt; [Music]) -&gt; [Music] -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; [Music]
</span><a href="#local-6989586621680602582"><span class="hs-identifier hs-var">sysStuff</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; m [Music] -&gt; m Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(PitchLayer -&gt; m Music) -&gt; [PitchLayer] -&gt; m [Music]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rhythm Chord -&gt; m Music
forall (m :: * -&gt; *). LilypondExportM m =&gt; Rhythm Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="annot"><span class="annottext">(Rhythm Chord -&gt; m Music)
-&gt; (PitchLayer -&gt; Rhythm Chord) -&gt; PitchLayer -&gt; m Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PitchLayer -&gt; Rhythm Chord
</span><a href="Music.Score.Export.StandardNotation.html#getPitchLayer"><span class="hs-identifier hs-var hs-var">getPitchLayer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PitchLayer]
</span><a href="#local-6989586621680602584"><span class="hs-identifier hs-var">layers</span></a></span><span>
</span><span id="line-1058"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1059"></span><span>    </span><span class="hs-comment">-- System information need not be replicated in all layers</span><span>
</span><span id="line-1060"></span><span>    </span><span class="hs-comment">-- TODO other system stuff (reh marks, special barlines etc)</span><span>
</span><span id="line-1061"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1062"></span><span>    </span><span class="hs-comment">-- TODO is this really necessary? Is duplicating system info</span><span>
</span><span id="line-1063"></span><span>    </span><span class="hs-comment">-- actually a problem? Is the empty case correct?</span><span>
</span><span id="line-1064"></span><span>    </span><span id="local-6989586621680602582"><span class="annot"><span class="annottext">sysStuff :: [Music] -&gt; [Music]
</span><a href="#local-6989586621680602582"><span class="hs-identifier hs-var hs-var">sysStuff</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1065"></span><span>    </span><span class="annot"><a href="#local-6989586621680602582"><span class="hs-identifier hs-var">sysStuff</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602580"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602580"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621680602579"><span class="annot"><span class="annottext">xs :: [Music]
</span><a href="#local-6989586621680602579"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1066"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#lySeq"><span class="hs-identifier hs-var">lySeq</span></a></span><span>
</span><span id="line-1067"></span><span>            </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; [Music] -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TimeSignature) -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addTimeSignature"><span class="hs-identifier hs-var">addTimeSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemBar
</span><a href="#local-6989586621680602586"><span class="hs-identifier hs-var">sysBar</span></a></span><span> </span><span class="annot"><span class="annottext">SystemBar
-&gt; Getting
     (Option (First TimeSignature))
     SystemBar
     (Option (First TimeSignature))
-&gt; Option (First TimeSignature)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Option (First TimeSignature))
  SystemBar
  (Option (First TimeSignature))
Lens' SystemBar (Option (First TimeSignature))
</span><a href="Music.Score.Export.StandardNotation.html#timeSignature"><span class="hs-identifier hs-var">timeSignature</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1068"></span><span>            </span><span class="annot"><span class="annottext">([Music] -&gt; [Music]) -&gt; [Music] -&gt; [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KeySignature -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addKeySignature"><span class="hs-identifier hs-var">addKeySignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemBar
</span><a href="#local-6989586621680602586"><span class="hs-identifier hs-var">sysBar</span></a></span><span> </span><span class="annot"><span class="annottext">SystemBar
-&gt; Getting KeySignature SystemBar KeySignature -&gt; KeySignature
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting KeySignature SystemBar KeySignature
Lens' SystemBar KeySignature
</span><a href="Music.Score.Export.StandardNotation.html#keySignature"><span class="hs-identifier hs-var">keySignature</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1069"></span><span>            </span><span class="annot"><span class="annottext">([Music] -&gt; [Music]) -&gt; [Music] -&gt; [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602580"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1070"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1071"></span><span>          </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602579"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1072"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>    </span><span id="local-6989586621680602583"><span class="annot"><span class="annottext">sim :: [Music] -&gt; Music
</span><a href="#local-6989586621680602583"><span class="hs-identifier hs-var hs-var">sim</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621680602575"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602575"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602575"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1074"></span><span>    </span><span class="annot"><a href="#local-6989586621680602583"><span class="hs-identifier hs-var">sim</span></a></span><span> </span><span id="local-6989586621680602574"><span class="annot"><span class="annottext">xs :: [Music]
</span><a href="#local-6989586621680602574"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Music] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Simultaneous"><span class="hs-identifier hs-var">Lilypond.Simultaneous</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602574"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1075"></span><span>
</span><span id="line-1076"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#addKeySignature"><span class="hs-identifier hs-type">addKeySignature</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1077"></span><span>  </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#KeySignature"><span class="hs-identifier hs-type">KeySignature</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1078"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1079"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1080"></span><span id="addKeySignature"><span class="annot"><span class="annottext">addKeySignature :: KeySignature -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addKeySignature"><span class="hs-identifier hs-var hs-var">addKeySignature</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Meta.Key.html#KeySignature"><span class="hs-identifier hs-type">Music.Score.Meta.Key.KeySignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Data.Monoid.First</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602570"><span class="annot"><span class="annottext">tonic :: Pitch
</span><a href="#local-6989586621680602570"><span class="hs-identifier hs-var">tonic</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602569"><span class="annot"><span class="annottext">isMajor :: MajorMinor
</span><a href="#local-6989586621680602569"><span class="hs-identifier hs-var">isMajor</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1081"></span><span>  </span><span class="hs-comment">-- TODO convert</span><span>
</span><span id="line-1082"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Mode -&gt; Music
</span><a href="Data.Music.Lilypond.html#Key"><span class="hs-identifier hs-var">Lilypond.Key</span></a></span><span>
</span><span id="line-1083"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch -&gt; Pitch
forall a. IsPitch a =&gt; Pitch -&gt; a
</span><a href="Music.Pitch.Common.Internal.html#fromPitch"><span class="hs-identifier hs-var">Music.Pitch.Literal.fromPitch</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602570"><span class="hs-identifier hs-var">tonic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>      </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MajorMinor
</span><a href="#local-6989586621680602569"><span class="hs-identifier hs-var">isMajor</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Names.html#MajorMode"><span class="hs-identifier hs-type">Music.Pitch.MajorMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="Data.Music.Lilypond.Pitch.html#Major"><span class="hs-identifier hs-var">Lilypond.Major</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Names.html#MinorMode"><span class="hs-identifier hs-type">Music.Pitch.MinorMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="Data.Music.Lilypond.Pitch.html#Minor"><span class="hs-identifier hs-var">Lilypond.Minor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1085"></span><span>      </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span>
</span><span id="line-1086"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1087"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#addKeySignature"><span class="hs-identifier hs-var">addKeySignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Meta.Key.html#KeySignature"><span class="hs-identifier hs-type">Music.Score.Meta.Key.KeySignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Data.Monoid.First</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; [Music]
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#addTimeSignature"><span class="hs-identifier hs-type">addTimeSignature</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1090"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TimeSignature"><span class="hs-identifier hs-type">TimeSignature</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1091"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1092"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1093"></span><span id="addTimeSignature"><span class="annot"><span class="annottext">addTimeSignature :: Option (First TimeSignature) -&gt; [Music] -&gt; [Music]
</span><a href="Music.Score.Export.StandardNotation.html#addTimeSignature"><span class="hs-identifier hs-var hs-var">addTimeSignature</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimeSignature -&gt; ([Integer], Integer)
</span><a href="Music.Score.Meta.Time.html#getTimeSignature"><span class="hs-identifier hs-var hs-var">Music.Score.Meta.Time.getTimeSignature</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602560"><span class="annot"><span class="annottext">ms :: [Integer]
</span><a href="#local-6989586621680602560"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602559"><span class="annot"><span class="annottext">n :: Integer
</span><a href="#local-6989586621680602559"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1094"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Music
</span><a href="Data.Music.Lilypond.html#Time"><span class="hs-identifier hs-var">Lilypond.Time</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Integer] -&gt; Integer
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="annot"><span class="annottext">[Integer]
</span><a href="#local-6989586621680602560"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680602559"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#addTimeSignature"><span class="hs-identifier hs-var">addTimeSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; [Music]
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1096"></span><span>
</span><span id="line-1097"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#lySeq"><span class="hs-identifier hs-type">lySeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1098"></span><span id="lySeq"><span class="annot"><span class="annottext">lySeq :: [Music] -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#lySeq"><span class="hs-identifier hs-var hs-var">lySeq</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621680602556"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602556"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602556"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1099"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#lySeq"><span class="hs-identifier hs-var">lySeq</span></a></span><span> </span><span id="local-6989586621680602555"><span class="annot"><span class="annottext">xs :: [Music]
</span><a href="#local-6989586621680602555"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Sequential"><span class="hs-identifier hs-var">Lilypond.Sequential</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602555"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1100"></span><span>
</span><span id="line-1101"></span><span id="local-6989586621680604044"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-type">toLyLayer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604044"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604044"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1102"></span><span id="toLyLayer"><span class="annot"><span class="annottext">toLyLayer :: Rhythm Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var hs-var">toLyLayer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Beat"><span class="hs-identifier hs-type">Beat</span></a></span><span> </span><span id="local-6989586621680602553"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602553"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602552"><span class="annot"><span class="annottext">x :: Chord
</span><a href="#local-6989586621680602552"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Chord -&gt; m Music
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
Duration -&gt; Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyChord"><span class="hs-identifier hs-var">toLyChord</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602553"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602552"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1103"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Dotted"><span class="hs-identifier hs-type">Dotted</span></a></span><span> </span><span id="local-6989586621680602549"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602549"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Beat"><span class="hs-identifier hs-type">Beat</span></a></span><span> </span><span id="local-6989586621680602548"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602548"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602547"><span class="annot"><span class="annottext">x :: Chord
</span><a href="#local-6989586621680602547"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Chord -&gt; m Music
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
Duration -&gt; Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyChord"><span class="hs-identifier hs-var">toLyChord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Duration
</span><a href="Music.Score.Internal.Quantize.html#dotMod"><span class="hs-identifier hs-var">dotMod</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602549"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602548"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602547"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1104"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Dotted"><span class="hs-identifier hs-type">Dotted</span></a></span><span> </span><span id="local-6989586621680602545"><span class="annot"><span class="annottext">_n :: Int
</span><a href="#local-6989586621680602545"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Music
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Lilypond export: (Dotted x) requires x to be (Beat _)&quot;</span></span><span>
</span><span id="line-1105"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Group"><span class="hs-identifier hs-type">Group</span></a></span><span> </span><span id="local-6989586621680602543"><span class="annot"><span class="annottext">rs :: [Rhythm Chord]
</span><a href="#local-6989586621680602543"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Sequential"><span class="hs-identifier hs-var">Lilypond.Sequential</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; m [Music] -&gt; m Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Rhythm Chord -&gt; m Music) -&gt; [Rhythm Chord] -&gt; m [Music]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm Chord -&gt; m Music
forall (m :: * -&gt; *). LilypondExportM m =&gt; Rhythm Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="annot"><span class="annottext">[Rhythm Chord]
</span><a href="#local-6989586621680602543"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-1106"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Tuplet"><span class="hs-identifier hs-type">Tuplet</span></a></span><span> </span><span id="local-6989586621680602541"><span class="annot"><span class="annottext">m :: Duration
</span><a href="#local-6989586621680602541"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621680602540"><span class="annot"><span class="annottext">r :: Rhythm Chord
</span><a href="#local-6989586621680602540"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#Times"><span class="hs-identifier hs-var">Lilypond.Times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Rational
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602541"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; m Music -&gt; m Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rhythm Chord -&gt; m Music
forall (m :: * -&gt; *). LilypondExportM m =&gt; Rhythm Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyLayer"><span class="hs-identifier hs-var">toLyLayer</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm Chord
</span><a href="#local-6989586621680602540"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>
</span><span id="line-1108"></span><span class="hs-comment">{-
TODO _arpeggioNotation::Maybe ArpeggioNotation,
TODO _tremoloNotation::Maybe TremoloNotation,
TODO _breathNotation::Maybe BreathNotation,
-}</span><span>
</span><span id="line-1113"></span><span id="local-6989586621680604039"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyChord"><span class="hs-identifier hs-type">toLyChord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604039"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604039"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1114"></span><span id="toLyChord"><span class="annot"><span class="annottext">toLyChord :: Duration -&gt; Chord -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyChord"><span class="hs-identifier hs-var hs-var">toLyChord</span></a></span></span><span> </span><span id="local-6989586621680602538"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602538"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602537"><span class="annot"><span class="annottext">chord :: Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1115"></span><span>  </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1116"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(SmallOrLarge, SmallOrLarge) -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateTies"><span class="hs-identifier hs-var">notateTies</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting
     (SmallOrLarge, SmallOrLarge) Chord (SmallOrLarge, SmallOrLarge)
-&gt; (SmallOrLarge, SmallOrLarge)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (SmallOrLarge, SmallOrLarge) Chord (SmallOrLarge, SmallOrLarge)
Lens' Chord (SmallOrLarge, SmallOrLarge)
</span><a href="Music.Score.Export.StandardNotation.html#ties"><span class="hs-identifier hs-var">ties</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1117"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SlideNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateGliss"><span class="hs-identifier hs-var">notateGliss</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting SlideNotation Chord SlideNotation -&gt; SlideNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting SlideNotation Chord SlideNotation
Lens' Chord SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#slideNotation"><span class="hs-identifier hs-var">slideNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HarmonicNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateHarmonic"><span class="hs-identifier hs-var">notateHarmonic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting HarmonicNotation Chord HarmonicNotation
-&gt; HarmonicNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting HarmonicNotation Chord HarmonicNotation
Lens' Chord HarmonicNotation
</span><a href="Music.Score.Export.StandardNotation.html#harmonicNotation"><span class="hs-identifier hs-var">harmonicNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateText"><span class="hs-identifier hs-var">notateText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting [String] Chord [String] -&gt; [String]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [String] Chord [String]
Lens' Chord [String]
</span><a href="Music.Score.Export.StandardNotation.html#chordText"><span class="hs-identifier hs-var">chordText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1120"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First (Colour Double)) -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateColor"><span class="hs-identifier hs-var">notateColor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting
     (Option (First (Colour Double)))
     Chord
     (Option (First (Colour Double)))
-&gt; Option (First (Colour Double))
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Option (First (Colour Double)))
  Chord
  (Option (First (Colour Double)))
Lens' Chord (Option (First (Colour Double)))
</span><a href="Music.Score.Export.StandardNotation.html#chordColor"><span class="hs-identifier hs-var">chordColor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>    </span><span class="hs-comment">-- &lt;$&gt; notateTremolo (chord^.tremoloNotation)</span><span>
</span><span id="line-1122"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DynamicNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateDynamicLy"><span class="hs-identifier hs-var">notateDynamicLy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting DynamicNotation Chord DynamicNotation -&gt; DynamicNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting DynamicNotation Chord DynamicNotation
Lens' Chord DynamicNotation
</span><a href="Music.Score.Export.StandardNotation.html#dynamicNotation"><span class="hs-identifier hs-var">dynamicNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1123"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ArticulationNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateArticulationLy"><span class="hs-identifier hs-var">notateArticulationLy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting ArticulationNotation Chord ArticulationNotation
-&gt; ArticulationNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting ArticulationNotation Chord ArticulationNotation
Lens' Chord ArticulationNotation
</span><a href="Music.Score.Export.StandardNotation.html#articulationNotation"><span class="hs-identifier hs-var">articulationNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; m Music -&gt; m Music
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; [Pitch] -&gt; m Music
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
Duration -&gt; [Pitch] -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#notatePitches"><span class="hs-identifier hs-var">notatePitches</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602538"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602537"><span class="hs-identifier hs-var">chord</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting [Pitch] Chord [Pitch] -&gt; [Pitch]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Pitch] Chord [Pitch]
Lens' Chord [Pitch]
</span><a href="Music.Score.Export.StandardNotation.html#pitches"><span class="hs-identifier hs-var">pitches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span>
</span><span id="line-1126"></span><span id="local-6989586621680604034"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notatePitches"><span class="hs-identifier hs-type">notatePitches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604034"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604034"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1127"></span><span id="notatePitches"><span class="annot"><span class="annottext">notatePitches :: Duration -&gt; [Pitch] -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#notatePitches"><span class="hs-identifier hs-var hs-var">notatePitches</span></a></span></span><span> </span><span id="local-6989586621680602528"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602528"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602527"><span class="annot"><span class="annottext">pitches :: [Pitch]
</span><a href="#local-6989586621680602527"><span class="hs-identifier hs-var">pitches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Pitch]
</span><a href="#local-6989586621680602527"><span class="hs-identifier hs-var">pitches</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1128"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; m Music
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; m Music) -&gt; Music -&gt; m Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Duration -&gt; [PostEvent] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Rest"><span class="hs-identifier hs-var">Lilypond.Rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Maybe Duration
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602528"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1129"></span><span>  </span><span class="hs-special">[</span><span id="local-6989586621680602525"><span class="annot"><span class="annottext">x :: Pitch
</span><a href="#local-6989586621680602525"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; m Music
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; m Music) -&gt; Music -&gt; m Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Note -&gt; Maybe Duration -&gt; [PostEvent] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Note"><span class="hs-identifier hs-var">Lilypond.Note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch -&gt; Note
</span><a href="Music.Score.Export.StandardNotation.html#toLyNote"><span class="hs-identifier hs-var">toLyNote</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602525"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Maybe Duration
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602528"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1130"></span><span>  </span><span id="local-6989586621680602522"><span class="annot"><span class="annottext">xs :: [Pitch]
</span><a href="#local-6989586621680602522"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; m Music
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; m Music) -&gt; Music -&gt; m Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Note, [ChordPostEvent])]
-&gt; Maybe Duration -&gt; [PostEvent] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Chord"><span class="hs-identifier hs-var">Lilypond.Chord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pitch -&gt; (Note, [ChordPostEvent]))
-&gt; [Pitch] -&gt; [(Note, [ChordPostEvent])]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Note -&gt; (Note, [ChordPostEvent]))
-&gt; (Pitch -&gt; Note) -&gt; Pitch -&gt; (Note, [ChordPostEvent])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Note
</span><a href="Music.Score.Export.StandardNotation.html#toLyNote"><span class="hs-identifier hs-var">toLyNote</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Pitch]
</span><a href="#local-6989586621680602522"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Maybe Duration
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602528"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1131"></span><span>
</span><span id="line-1132"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyNote"><span class="hs-identifier hs-type">toLyNote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Note"><span class="hs-identifier hs-type">Lilypond.Note</span></a></span><span>
</span><span id="line-1133"></span><span id="toLyNote"><span class="annot"><span class="annottext">toLyNote :: Pitch -&gt; Note
</span><a href="Music.Score.Export.StandardNotation.html#toLyNote"><span class="hs-identifier hs-var hs-var">toLyNote</span></a></span></span><span> </span><span id="local-6989586621680602520"><span class="annot"><span class="annottext">p :: Pitch
</span><a href="#local-6989586621680602520"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1134"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch -&gt; Maybe OctaveCheck -&gt; Note
</span><a href="Data.Music.Lilypond.html#NotePitch"><span class="hs-operator hs-var">`Lilypond.NotePitch`</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe OctaveCheck
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pitch -&gt; Note) -&gt; Pitch -&gt; Note
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1135"></span><span>    </span><span class="annot"><span class="annottext">(PitchName, Int, Int) -&gt; Pitch
</span><a href="Data.Music.Lilypond.Pitch.html#Pitch"><span class="hs-identifier hs-var">Lilypond.Pitch</span></a></span><span>
</span><span id="line-1136"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Int -&gt; PitchName
forall a. Enum a =&gt; Int -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toEnum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromEnum</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Int) -&gt; Name -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Name
</span><a href="Music.Pitch.Common.Internal.html#name"><span class="hs-identifier hs-var">Music.Pitch.name</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602520"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1137"></span><span>        </span><span class="hs-comment">-- FIXME catch if (abs accidental)&gt;2 (or simply normalize)</span><span>
</span><span id="line-1138"></span><span>        </span><span class="annot"><span class="annottext">Accidental -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch -&gt; Accidental
</span><a href="Music.Pitch.Common.Internal.html#accidental"><span class="hs-identifier hs-var">Music.Pitch.accidental</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602520"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1139"></span><span>        </span><span class="hs-comment">-- Lilypond expects SPN, so middle c is octave 4</span><span>
</span><span id="line-1140"></span><span>        </span><span class="annot"><span class="annottext">Octaves -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Octaves -&gt; Int) -&gt; Octaves -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1141"></span><span>          </span><span class="annot"><span class="annottext">Transposition -&gt; Octaves
forall a. HasOctaves a =&gt; a -&gt; Octaves
</span><a href="Music.Pitch.Common.Internal.html#octaves"><span class="hs-identifier hs-var">Music.Pitch.octaves</span></a></span><span>
</span><span id="line-1142"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602520"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Pitch -&gt; Diff Pitch
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">Scalar (Interval Pitch) -&gt; Pitch -&gt; Pitch
forall a. Transposable a =&gt; Scalar (Interval a) -&gt; a -&gt; a
</span><a href="Music.Score.Pitch.html#octavesDown"><span class="hs-identifier hs-var">Music.Score.Pitch.octavesDown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pitch
forall a. IsPitch a =&gt; a
</span><a href="Music.Pitch.Common.Internal.html#c"><span class="hs-identifier hs-var">Music.Pitch.Literal.c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1143"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1144"></span><span>
</span><span id="line-1145"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateDynamicLy"><span class="hs-identifier hs-type">notateDynamicLy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#DynamicNotation"><span class="hs-identifier hs-type">DynamicNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1146"></span><span id="notateDynamicLy"><span class="annot"><span class="annottext">notateDynamicLy :: DynamicNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateDynamicLy"><span class="hs-identifier hs-var hs-var">notateDynamicLy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#DynamicNotation"><span class="hs-identifier hs-type">DN.DynamicNotation</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602507"><span class="annot"><span class="annottext">crescDims :: [CrescDim]
</span><a href="#local-6989586621680602507"><span class="hs-identifier hs-var">crescDims</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602506"><span class="annot"><span class="annottext">level :: Maybe Double
</span><a href="#local-6989586621680602506"><span class="hs-identifier hs-var">level</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1147"></span><span>  </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Export.StandardNotation.html#rcomposed"><span class="hs-identifier hs-var">rcomposed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CrescDim -&gt; Music -&gt; Music) -&gt; [CrescDim] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CrescDim -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateCrescDim"><span class="hs-identifier hs-var">notateCrescDim</span></a></span><span> </span><span class="annot"><span class="annottext">[CrescDim]
</span><a href="#local-6989586621680602507"><span class="hs-identifier hs-var">crescDims</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1148"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Double -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateLevel"><span class="hs-identifier hs-var">notateLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Double
</span><a href="#local-6989586621680602506"><span class="hs-identifier hs-var">level</span></a></span><span>
</span><span id="line-1149"></span><span>
</span><span id="line-1150"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateCrescDim"><span class="hs-identifier hs-type">notateCrescDim</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#CrescDim"><span class="hs-identifier hs-type">DN.CrescDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1151"></span><span id="notateCrescDim"><span class="annot"><span class="annottext">notateCrescDim :: CrescDim -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateCrescDim"><span class="hs-identifier hs-var hs-var">notateCrescDim</span></a></span></span><span> </span><span id="local-6989586621680602502"><span class="annot"><span class="annottext">crescDims :: CrescDim
</span><a href="#local-6989586621680602502"><span class="hs-identifier hs-var">crescDims</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CrescDim
</span><a href="#local-6989586621680602502"><span class="hs-identifier hs-var">crescDims</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1152"></span><span>  </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#NoCrescDim"><span class="hs-identifier hs-type">DN.NoCrescDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1153"></span><span>  </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#BeginCresc"><span class="hs-identifier hs-type">DN.BeginCresc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginCresc"><span class="hs-identifier hs-var">Lilypond.beginCresc</span></a></span><span>
</span><span id="line-1154"></span><span>  </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#EndCresc"><span class="hs-identifier hs-type">DN.EndCresc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#endCresc"><span class="hs-identifier hs-var">Lilypond.endCresc</span></a></span><span>
</span><span id="line-1155"></span><span>  </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#BeginDim"><span class="hs-identifier hs-type">DN.BeginDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginDim"><span class="hs-identifier hs-var">Lilypond.beginDim</span></a></span><span>
</span><span id="line-1156"></span><span>  </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#EndDim"><span class="hs-identifier hs-type">DN.EndDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#endDim"><span class="hs-identifier hs-var">Lilypond.endDim</span></a></span><span>
</span><span id="line-1157"></span><span>
</span><span id="line-1158"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateLevel"><span class="hs-identifier hs-type">notateLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1159"></span><span id="notateLevel"><span class="annot"><span class="annottext">notateLevel :: Maybe Double -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateLevel"><span class="hs-identifier hs-var hs-var">notateLevel</span></a></span></span><span> </span><span id="local-6989586621680602492"><span class="annot"><span class="annottext">showLevel :: Maybe Double
</span><a href="#local-6989586621680602492"><span class="hs-identifier hs-var">showLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Double
</span><a href="#local-6989586621680602492"><span class="hs-identifier hs-var">showLevel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1160"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1161"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602491"><span class="annot"><span class="annottext">lvl :: Double
</span><a href="#local-6989586621680602491"><span class="hs-identifier hs-var">lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1162"></span><span>    </span><span class="annot"><span class="annottext">Dynamics -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addDynamics"><span class="hs-identifier hs-var">Lilypond.addDynamics</span></a></span><span>
</span><span id="line-1163"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">DynamicsL -&gt; Dynamics
forall a. IsDynamics a =&gt; DynamicsL -&gt; a
</span><a href="Music.Dynamics.Literal.html#fromDynamics"><span class="hs-identifier hs-var">fromDynamics</span></a></span><span>
</span><span id="line-1164"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(Maybe Double, Maybe Double) -&gt; DynamicsL
</span><a href="Music.Dynamics.Literal.html#DynamicsL"><span class="hs-identifier hs-var">DynamicsL</span></a></span><span>
</span><span id="line-1165"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Maybe Double
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Double
</span><a href="Music.Score.Export.StandardNotation.html#fixLevel"><span class="hs-identifier hs-var">fixLevel</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; Double) -&gt; (Double -&gt; Double) -&gt; Double -&gt; Double
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; Double) -&gt; Double -&gt; Double
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680602491"><span class="hs-identifier hs-var">lvl</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Double
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#fixLevel"><span class="hs-identifier hs-type">fixLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-1170"></span><span id="fixLevel"><span class="annot"><span class="annottext">fixLevel :: Double -&gt; Double
</span><a href="Music.Score.Export.StandardNotation.html#fixLevel"><span class="hs-identifier hs-var hs-var">fixLevel</span></a></span></span><span> </span><span id="local-6989586621680602487"><span class="annot"><span class="annottext">x :: Double
</span><a href="#local-6989586621680602487"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Double
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Integer
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680602487"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="hs-number">0.5</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">0.5</span></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateArticulationLy"><span class="hs-identifier hs-type">notateArticulationLy</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1173"></span><span>  </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">ArticulationNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1174"></span><span>  </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1175"></span><span>  </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1176"></span><span id="notateArticulationLy"><span class="annot"><span class="annottext">notateArticulationLy :: ArticulationNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateArticulationLy"><span class="hs-identifier hs-var hs-var">notateArticulationLy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">AN.ArticulationNotation</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602484"><span class="annot"><span class="annottext">slurs :: [Slur]
</span><a href="#local-6989586621680602484"><span class="hs-identifier hs-var">slurs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602483"><span class="annot"><span class="annottext">marks :: [Mark]
</span><a href="#local-6989586621680602483"><span class="hs-identifier hs-var">marks</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1177"></span><span>  </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Export.StandardNotation.html#rcomposed"><span class="hs-identifier hs-var">rcomposed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Mark -&gt; Music -&gt; Music) -&gt; [Mark] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Mark -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateMark"><span class="hs-identifier hs-var">notateMark</span></a></span><span> </span><span class="annot"><span class="annottext">[Mark]
</span><a href="#local-6989586621680602483"><span class="hs-identifier hs-var">marks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>    </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Export.StandardNotation.html#rcomposed"><span class="hs-identifier hs-var">rcomposed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Slur -&gt; Music -&gt; Music) -&gt; [Slur] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Slur -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateSlur"><span class="hs-identifier hs-var">notateSlur</span></a></span><span> </span><span class="annot"><span class="annottext">[Slur]
</span><a href="#local-6989586621680602484"><span class="hs-identifier hs-var">slurs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1179"></span><span>
</span><span id="line-1180"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateMark"><span class="hs-identifier hs-type">notateMark</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1181"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Mark"><span class="hs-identifier hs-type">AN.Mark</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1182"></span><span>  </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1183"></span><span>  </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1184"></span><span id="notateMark"><span class="annot"><span class="annottext">notateMark :: Mark -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateMark"><span class="hs-identifier hs-var hs-var">notateMark</span></a></span></span><span> </span><span id="local-6989586621680602480"><span class="annot"><span class="annottext">mark :: Mark
</span><a href="#local-6989586621680602480"><span class="hs-identifier hs-var">mark</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Mark
</span><a href="#local-6989586621680602480"><span class="hs-identifier hs-var">mark</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1185"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#NoMark"><span class="hs-identifier hs-type">AN.NoMark</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1186"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Staccato"><span class="hs-identifier hs-type">AN.Staccato</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addStaccato"><span class="hs-identifier hs-var">Lilypond.addStaccato</span></a></span><span>
</span><span id="line-1187"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#MoltoStaccato"><span class="hs-identifier hs-type">AN.MoltoStaccato</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addStaccatissimo"><span class="hs-identifier hs-var">Lilypond.addStaccatissimo</span></a></span><span>
</span><span id="line-1188"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Marcato"><span class="hs-identifier hs-type">AN.Marcato</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addMarcato"><span class="hs-identifier hs-var">Lilypond.addMarcato</span></a></span><span>
</span><span id="line-1189"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Accent"><span class="hs-identifier hs-type">AN.Accent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addAccent"><span class="hs-identifier hs-var">Lilypond.addAccent</span></a></span><span>
</span><span id="line-1190"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Tenuto"><span class="hs-identifier hs-type">AN.Tenuto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addTenuto"><span class="hs-identifier hs-var">Lilypond.addTenuto</span></a></span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-comment">-- TODO proper exception</span><span>
</span><span id="line-1192"></span><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Music -&gt; Music
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Lilypond export: Unknown articulation mark&quot;</span></span><span>
</span><span id="line-1193"></span><span>
</span><span id="line-1194"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateSlur"><span class="hs-identifier hs-type">notateSlur</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Slur"><span class="hs-identifier hs-type">AN.Slur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1195"></span><span id="notateSlur"><span class="annot"><span class="annottext">notateSlur :: Slur -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateSlur"><span class="hs-identifier hs-var hs-var">notateSlur</span></a></span></span><span> </span><span id="local-6989586621680602468"><span class="annot"><span class="annottext">slurs :: Slur
</span><a href="#local-6989586621680602468"><span class="hs-identifier hs-var">slurs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Slur
</span><a href="#local-6989586621680602468"><span class="hs-identifier hs-var">slurs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1196"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#NoSlur"><span class="hs-identifier hs-type">AN.NoSlur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1197"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#BeginSlur"><span class="hs-identifier hs-type">AN.BeginSlur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginSlur"><span class="hs-identifier hs-var">Lilypond.beginSlur</span></a></span><span>
</span><span id="line-1198"></span><span>  </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#EndSlur"><span class="hs-identifier hs-type">AN.EndSlur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#endSlur"><span class="hs-identifier hs-var">Lilypond.endSlur</span></a></span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="hs-comment">-- TODO This syntax might change in future Lilypond versions</span><span>
</span><span id="line-1201"></span><span class="hs-comment">-- TODO handle any color</span><span>
</span><span id="line-1202"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateColor"><span class="hs-identifier hs-type">notateColor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier hs-type">Colour</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1203"></span><span id="notateColor"><span class="annot"><span class="annottext">notateColor :: Option (First (Colour Double)) -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateColor"><span class="hs-identifier hs-var hs-var">notateColor</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1204"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateColor"><span class="hs-identifier hs-var">notateColor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">First</span></a></span><span> </span><span id="local-6989586621680602462"><span class="annot"><span class="annottext">color :: Colour Double
</span><a href="#local-6989586621680602462"><span class="hs-identifier hs-var">color</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680602461"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602461"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1205"></span><span>  </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Sequential"><span class="hs-identifier hs-var">Lilypond.Sequential</span></a></span><span>
</span><span id="line-1206"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; Value -&gt; Music
</span><a href="Data.Music.Lilypond.html#Override"><span class="hs-identifier hs-var">Lilypond.Override</span></a></span><span>
</span><span id="line-1207"></span><span>        </span><span class="annot"><span class="hs-string">&quot;NoteHead#' color&quot;</span></span><span>
</span><span id="line-1208"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Value
</span><a href="Data.Music.Lilypond.Value.html#toLiteralValue"><span class="hs-identifier hs-var">Lilypond.toLiteralValue</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Value) -&gt; String -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;#&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#colorName"><span class="hs-identifier hs-var">colorName</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double
</span><a href="#local-6989586621680602462"><span class="hs-identifier hs-var">color</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1209"></span><span>      </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602461"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1210"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Music
</span><a href="Data.Music.Lilypond.html#Revert"><span class="hs-identifier hs-var">Lilypond.Revert</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;NoteHead#' color&quot;</span></span><span>
</span><span id="line-1211"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1212"></span><span>
</span><span id="line-1213"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#colorName"><span class="hs-identifier hs-type">colorName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier hs-type">Colour</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-1214"></span><span id="colorName"><span class="annot"><span class="annottext">colorName :: Colour Double -&gt; String
</span><a href="Music.Score.Export.StandardNotation.html#colorName"><span class="hs-identifier hs-var hs-var">colorName</span></a></span></span><span> </span><span id="local-6989586621680602456"><span class="annot"><span class="annottext">c :: Colour Double
</span><a href="#local-6989586621680602456"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-1215"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Colour Double
</span><a href="#local-6989586621680602456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double -&gt; Colour Double -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double
forall a. Num a =&gt; Colour a
</span><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier hs-var">Data.Colour.Names.black</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;black&quot;</span></span><span>
</span><span id="line-1216"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Colour Double
</span><a href="#local-6989586621680602456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double -&gt; Colour Double -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double
forall a. (Ord a, Floating a) =&gt; Colour a
</span><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier hs-var">Data.Colour.Names.red</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;red&quot;</span></span><span>
</span><span id="line-1217"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Colour Double
</span><a href="#local-6989586621680602456"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double -&gt; Colour Double -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Colour Double
forall a. (Ord a, Floating a) =&gt; Colour a
</span><a href="../file:///nix/store/k3irns0ihl5b8m68yhyd0g48y5yffpcb-colour-2.3.5-doc/share/doc/colour-2.3.5/html/src"><span class="hs-identifier hs-var">Data.Colour.Names.blue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;blue&quot;</span></span><span>
</span><span id="line-1218"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Lilypond backend: Unkown color&quot;</span></span><span>
</span><span id="line-1219"></span><span>
</span><span id="line-1220"></span><span class="hs-comment">-- TODO not used for now</span><span>
</span><span id="line-1221"></span><span class="hs-comment">-- We need to rescale the music according to the returned duration</span><span>
</span><span id="line-1222"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#_notateTremolo"><span class="hs-identifier hs-type">_notateTremolo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1223"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1224"></span><span>  </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1225"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span id="_notateTremolo"><span class="annot"><span class="annottext">_notateTremolo :: Maybe Int -&gt; Duration -&gt; (Music -&gt; Music, Duration)
</span><a href="Music.Score.Export.StandardNotation.html#_notateTremolo"><span class="hs-identifier hs-var hs-var">_notateTremolo</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span id="local-6989586621680602451"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602451"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602451"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1227"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#_notateTremolo"><span class="hs-identifier hs-var">_notateTremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680602450"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602450"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602450"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1228"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#_notateTremolo"><span class="hs-identifier hs-var">_notateTremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602449"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602449"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680602448"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602448"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1229"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602447"><span class="annot"><span class="annottext">scale :: Duration
</span><a href="#local-6989586621680602447"><span class="hs-identifier hs-var hs-var">scale</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Int -&gt; Duration
forall a b. (Num a, Integral b) =&gt; a -&gt; b -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">^</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602449"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1230"></span><span>      </span><span id="local-6989586621680602445"><span class="annot"><span class="annottext">newDur :: Duration
</span><a href="#local-6989586621680602445"><span class="hs-identifier hs-var hs-var">newDur</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602448"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">`min`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="hs-number">4</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602447"><span class="hs-identifier hs-var">scale</span></a></span><span>
</span><span id="line-1231"></span><span>      </span><span id="local-6989586621680602442"><span class="annot"><span class="annottext">repeats :: Duration
</span><a href="#local-6989586621680602442"><span class="hs-identifier hs-var hs-var">repeats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602448"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602445"><span class="hs-identifier hs-var">newDur</span></a></span><span>
</span><span id="line-1232"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#Tremolo"><span class="hs-identifier hs-var">Lilypond.Tremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Int
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602442"><span class="hs-identifier hs-var">repeats</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602445"><span class="hs-identifier hs-var">newDur</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1233"></span><span>
</span><span id="line-1234"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateText"><span class="hs-identifier hs-type">notateText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1235"></span><span id="notateText"><span class="annot"><span class="annottext">notateText :: [String] -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateText"><span class="hs-identifier hs-var hs-var">notateText</span></a></span></span><span> </span><span id="local-6989586621680602440"><span class="annot"><span class="annottext">texts :: [String]
</span><a href="#local-6989586621680602440"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Export.StandardNotation.html#composed"><span class="hs-identifier hs-var">composed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String -&gt; Music -&gt; Music) -&gt; [String] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Direction -&gt; String -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addText%27"><span class="hs-identifier hs-var">Lilypond.addText'</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Music.Lilypond.html#Above"><span class="hs-identifier hs-var">Lilypond.Above</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621680602440"><span class="hs-identifier hs-var">texts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>
</span><span id="line-1237"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateHarmonic"><span class="hs-identifier hs-type">notateHarmonic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#HarmonicNotation"><span class="hs-identifier hs-type">HarmonicNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1238"></span><span id="notateHarmonic"><span class="annot"><span class="annottext">notateHarmonic :: HarmonicNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateHarmonic"><span class="hs-identifier hs-var hs-var">notateHarmonic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602435"><span class="annot"><span class="annottext">isNat :: Bool
</span><a href="#local-6989586621680602435"><span class="hs-identifier hs-var">isNat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621680602433"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602433"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602435"><span class="hs-identifier hs-var">isNat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602433"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1239"></span><span>  </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1240"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">True</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602432"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602432"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
forall p. p -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602431"><span class="hs-identifier hs-var">notateNatural</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602432"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1241"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">False</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602430"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602430"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
forall (cat :: * -&gt; * -&gt; *) p a. Category cat =&gt; p -&gt; cat a a
</span><a href="#local-6989586621680602429"><span class="hs-identifier hs-var">notateArtificial</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602430"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1242"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1243"></span><span>    </span><span id="local-6989586621680602431"><span class="annot"><span class="annottext">notateNatural :: p -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602431"><span class="hs-identifier hs-var hs-var">notateNatural</span></a></span></span><span> </span><span id="local-6989586621680602428"><span class="annot"><span class="annottext">_n :: p
</span><a href="#local-6989586621680602428"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#addFlageolet"><span class="hs-identifier hs-var">Lilypond.addFlageolet</span></a></span><span> </span><span class="hs-comment">-- addOpen?</span><span>
</span><span id="line-1244"></span><span>    </span><span id="local-6989586621680602429"><span class="annot"><span class="annottext">notateArtificial :: p -&gt; cat a a
</span><a href="#local-6989586621680602429"><span class="hs-identifier hs-var hs-var">notateArtificial</span></a></span></span><span> </span><span id="local-6989586621680602426"><span class="annot"><span class="annottext">_n :: p
</span><a href="#local-6989586621680602426"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">cat a a
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-1245"></span><span>
</span><span id="line-1246"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateGliss"><span class="hs-identifier hs-type">notateGliss</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1247"></span><span id="notateGliss"><span class="annot"><span class="annottext">notateGliss :: SlideNotation -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateGliss"><span class="hs-identifier hs-var hs-var">notateGliss</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602425"><span class="annot"><span class="annottext">_eg :: Bool
</span><a href="#local-6989586621680602425"><span class="hs-identifier hs-var">_eg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602424"><span class="annot"><span class="annottext">_es :: Bool
</span><a href="#local-6989586621680602424"><span class="hs-identifier hs-var">_es</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602423"><span class="annot"><span class="annottext">bg :: Bool
</span><a href="#local-6989586621680602423"><span class="hs-identifier hs-var">bg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602422"><span class="annot"><span class="annottext">bs :: Bool
</span><a href="#local-6989586621680602422"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1248"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602423"><span class="hs-identifier hs-var">bg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginGlissando"><span class="hs-identifier hs-var">Lilypond.beginGlissando</span></a></span><span>
</span><span id="line-1249"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602422"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginGlissando"><span class="hs-identifier hs-var">Lilypond.beginGlissando</span></a></span><span>
</span><span id="line-1250"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1251"></span><span>
</span><span id="line-1252"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#notateTies"><span class="hs-identifier hs-type">notateTies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Ties"><span class="hs-identifier hs-type">Ties</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span>
</span><span id="line-1253"></span><span id="notateTies"><span class="annot"><span class="annottext">notateTies :: (SmallOrLarge, SmallOrLarge) -&gt; Music -&gt; Music
</span><a href="Music.Score.Export.StandardNotation.html#notateTies"><span class="hs-identifier hs-var hs-var">notateTies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602420"><span class="annot"><span class="annottext">ta :: Bool
</span><a href="#local-6989586621680602420"><span class="hs-identifier hs-var">ta</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602419"><span class="annot"><span class="annottext">tb :: Bool
</span><a href="#local-6989586621680602419"><span class="hs-identifier hs-var">tb</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1254"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602420"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602419"><span class="hs-identifier hs-var">tb</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginTie"><span class="hs-identifier hs-var">Lilypond.beginTie</span></a></span><span>
</span><span id="line-1255"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602419"><span class="hs-identifier hs-var">tb</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#beginTie"><span class="hs-identifier hs-var">Lilypond.beginTie</span></a></span><span>
</span><span id="line-1256"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602420"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1257"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1258"></span><span>
</span><span id="line-1259"></span><span id="local-6989586621680602416"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#composed"><span class="hs-identifier hs-type">composed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680602416"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602416"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602416"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602416"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1260"></span><span id="composed"><span class="annot"><span class="annottext">composed :: [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Export.StandardNotation.html#composed"><span class="hs-identifier hs-var hs-var">composed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a -&gt; a] -&gt; a -&gt; a
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Internal.Util.html#composed"><span class="hs-identifier hs-var">Music.Score.Internal.Util.composed</span></a></span><span>
</span><span id="line-1261"></span><span>
</span><span id="line-1262"></span><span id="local-6989586621680604009"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#rcomposed"><span class="hs-identifier hs-type">rcomposed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680604009"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604009"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604009"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680604009"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1263"></span><span id="rcomposed"><span class="annot"><span class="annottext">rcomposed :: [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Export.StandardNotation.html#rcomposed"><span class="hs-identifier hs-var hs-var">rcomposed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a -&gt; a] -&gt; a -&gt; a
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Internal.Util.html#composed"><span class="hs-identifier hs-var">Music.Score.Internal.Util.composed</span></a></span><span> </span><span class="annot"><span class="annottext">([a -&gt; a] -&gt; a -&gt; a)
-&gt; ([a -&gt; a] -&gt; [a -&gt; a]) -&gt; [a -&gt; a] -&gt; a -&gt; a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[a -&gt; a] -&gt; [a -&gt; a]
forall a. [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">reverse</span></a></span><span>
</span><span id="line-1264"></span><span>
</span><span id="line-1265"></span><span id="local-6989586621680604057"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLyStaffGroup"><span class="hs-identifier hs-type">toLyStaffGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1266"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondExportM"><span class="hs-identifier hs-type">LilypondExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680604057"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1267"></span><span>  </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1268"></span><span>  </span><span class="annot"><a href="#local-6989586621680604057"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.Lilypond.html#Music"><span class="hs-identifier hs-type">Lilypond.Music</span></a></span></span><span>
</span><span id="line-1269"></span><span id="toLyStaffGroup"><span class="annot"><span class="annottext">toLyStaffGroup :: LabelTree BracketType Music -&gt; m Music
</span><a href="Music.Score.Export.StandardNotation.html#toLyStaffGroup"><span class="hs-identifier hs-var hs-var">toLyStaffGroup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; m Music
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; m Music)
-&gt; (LabelTree BracketType Music -&gt; Music)
-&gt; LabelTree BracketType Music
-&gt; m Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music)
-&gt; (BracketType -&gt; [Music] -&gt; Music)
-&gt; LabelTree BracketType Music
-&gt; Music
forall a c b. (a -&gt; c) -&gt; (b -&gt; [c] -&gt; c) -&gt; LabelTree b a -&gt; c
</span><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-var">foldLabelTree</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">BracketType -&gt; [Music] -&gt; Music
</span><a href="#local-6989586621680602413"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-1270"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1271"></span><span>    </span><span class="hs-comment">-- Note: PianoStaff is handled in toLyStaffGroup</span><span>
</span><span id="line-1272"></span><span>    </span><span class="hs-comment">-- Note: Nothing for name (we dump everything inside staves, so no need to identify them)</span><span>
</span><span id="line-1273"></span><span>    </span><span id="local-6989586621680602413"><span class="annot"><span class="annottext">g :: BracketType -&gt; [Music] -&gt; Music
</span><a href="#local-6989586621680602413"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoBracket"><span class="hs-identifier hs-type">NoBracket</span></a></span><span> </span><span id="local-6989586621680602412"><span class="annot"><span class="annottext">ms :: [Music]
</span><a href="#local-6989586621680602412"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="#local-6989586621680602411"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602412"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1274"></span><span>    </span><span class="annot"><a href="#local-6989586621680602413"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bracket"><span class="hs-identifier hs-type">Bracket</span></a></span><span> </span><span id="local-6989586621680602410"><span class="annot"><span class="annottext">ms :: [Music]
</span><a href="#local-6989586621680602410"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#New"><span class="hs-identifier hs-var">Lilypond.New</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;StaffGroup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; Music -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="#local-6989586621680602411"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602410"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1275"></span><span>    </span><span class="annot"><a href="#local-6989586621680602413"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Subbracket"><span class="hs-identifier hs-type">Subbracket</span></a></span><span> </span><span id="local-6989586621680602409"><span class="annot"><span class="annottext">ms :: [Music]
</span><a href="#local-6989586621680602409"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#New"><span class="hs-identifier hs-var">Lilypond.New</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;GrandStaff&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; Music -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="#local-6989586621680602411"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602409"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1276"></span><span>    </span><span class="annot"><a href="#local-6989586621680602413"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Brace"><span class="hs-identifier hs-type">Brace</span></a></span><span> </span><span id="local-6989586621680602408"><span class="annot"><span class="annottext">ms :: [Music]
</span><a href="#local-6989586621680602408"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; Music -&gt; Music
</span><a href="Data.Music.Lilypond.html#New"><span class="hs-identifier hs-var">Lilypond.New</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;GrandStaff&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; Music -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
</span><a href="#local-6989586621680602411"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602408"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1277"></span><span>    </span><span class="hs-comment">-- Why False? No separation mark is necessary as the wrapped music is all in separate staves</span><span>
</span><span id="line-1278"></span><span>    </span><span id="local-6989586621680602411"><span class="annot"><span class="annottext">k :: [Music] -&gt; Music
</span><a href="#local-6989586621680602411"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Music] -&gt; Music
</span><a href="Data.Music.Lilypond.html#Simultaneous"><span class="hs-identifier hs-var">Lilypond.Simultaneous</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-1279"></span><span>
</span><span id="line-1280"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-1281"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span class="hs-comment">{-
Refernces:
  http://lilypond.org/doc/v2.18/input/regression/musicxml/collated-files.html

  http://www.musicxml.com, specifically
  http://www.musicxml.com/UserManuals/MusicXML/MusicXML.htm

  Reference files:
    http://www.musicxml.com/music-in-musicxml/
    Also formats such as Lilypond, Finale and Sibelius can be converted

  See also reference files in:
    musicxml2/test/musicxml
    music-suite/test/extra-musicxml/tests
-}</span><span>
</span><span id="line-1298"></span><span>
</span><span id="line-1299"></span><span class="hs-keyword">type</span><span> </span><span id="MusicXmlExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-var">MusicXmlExportM</span></a></span></span><span> </span><span id="local-6989586621680602407"><span class="annot"><a href="#local-6989586621680602407"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-type">MonadLog</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602407"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602407"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>
</span><span id="line-1301"></span><span id="local-6989586621680602406"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toXml"><span class="hs-identifier hs-type">toXml</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602406"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602406"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Score"><span class="hs-identifier hs-type">MusicXml.Score</span></a></span></span><span>
</span><span id="line-1302"></span><span id="toXml"><span class="annot"><span class="annottext">toXml :: Work -&gt; m Score
</span><a href="Music.Score.Export.StandardNotation.html#toXml"><span class="hs-identifier hs-var hs-var">toXml</span></a></span></span><span> </span><span id="local-6989586621680602405"><span class="annot"><span class="annottext">work :: Work
</span><a href="#local-6989586621680602405"><span class="hs-identifier hs-var">work</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1303"></span><span>  </span><span class="hs-comment">-- TODO assumes one movement</span><span>
</span><span id="line-1304"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MusicXML: Assuming one movement only&quot;</span></span><span>
</span><span id="line-1305"></span><span>  </span><span id="local-6989586621680602404"><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602404"><span class="hs-identifier hs-var">firstMovement</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Movement -&gt; Movement) -&gt; m Movement -&gt; m Movement
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Movement
</span><a href="Music.Score.Export.StandardNotation.html#movementAssureSameNumberOfBars"><span class="hs-identifier hs-var">movementAssureSameNumberOfBars</span></a></span><span> </span><span class="annot"><span class="annottext">(m Movement -&gt; m Movement) -&gt; m Movement -&gt; m Movement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1306"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Work
</span><a href="#local-6989586621680602405"><span class="hs-identifier hs-var">work</span></a></span><span> </span><span class="annot"><span class="annottext">Work -&gt; Getting (First Movement) Work Movement -&gt; Maybe Movement
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">([Movement] -&gt; Const (First Movement) [Movement])
-&gt; Work -&gt; Const (First Movement) Work
Lens' Work [Movement]
</span><a href="Music.Score.Export.StandardNotation.html#movements"><span class="hs-identifier hs-var">movements</span></a></span><span> </span><span class="annot"><span class="annottext">(([Movement] -&gt; Const (First Movement) [Movement])
 -&gt; Work -&gt; Const (First Movement) Work)
-&gt; ((Movement -&gt; Const (First Movement) Movement)
    -&gt; [Movement] -&gt; Const (First Movement) [Movement])
-&gt; Getting (First Movement) Work Movement
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Movement -&gt; Const (First Movement) Movement)
-&gt; [Movement] -&gt; Const (First Movement) [Movement]
forall s a. Cons s s a a =&gt; Traversal' s a
</span><span class="hs-identifier hs-var">_head</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1307"></span><span>      </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Movement
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;StandardNotation: Expected a one-movement piece&quot;</span></span><span>
</span><span id="line-1308"></span><span>      </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602403"><span class="annot"><span class="annottext">x :: Movement
</span><a href="#local-6989586621680602403"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Movement -&gt; m Movement
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602403"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1309"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MusicXML: Extracting title and composer&quot;</span></span><span>
</span><span id="line-1310"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602402"><span class="annot"><span class="annottext">title :: String
</span><a href="#local-6989586621680602402"><span class="hs-identifier hs-var hs-var">title</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602404"><span class="hs-identifier hs-var">firstMovement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Getting String Movement String -&gt; String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(MovementInfo -&gt; Const String MovementInfo)
-&gt; Movement -&gt; Const String Movement
Lens' Movement MovementInfo
</span><a href="Music.Score.Export.StandardNotation.html#movementInfo"><span class="hs-identifier hs-var">movementInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((MovementInfo -&gt; Const String MovementInfo)
 -&gt; Movement -&gt; Const String Movement)
-&gt; ((String -&gt; Const String String)
    -&gt; MovementInfo -&gt; Const String MovementInfo)
-&gt; Getting String Movement String
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Const String String)
-&gt; MovementInfo -&gt; Const String MovementInfo
Lens' MovementInfo String
</span><a href="Music.Score.Export.StandardNotation.html#movementTitle"><span class="hs-identifier hs-var">movementTitle</span></a></span><span>
</span><span id="line-1311"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602401"><span class="annot"><span class="annottext">composer :: String
</span><a href="#local-6989586621680602401"><span class="hs-identifier hs-var hs-var">composer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS -&gt; Maybe String -&gt; String
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; String) -&gt; Maybe String -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602404"><span class="hs-identifier hs-var">firstMovement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
-&gt; Getting (Maybe String) Movement (Maybe String) -&gt; Maybe String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(MovementInfo -&gt; Const (Maybe String) MovementInfo)
-&gt; Movement -&gt; Const (Maybe String) Movement
Lens' Movement MovementInfo
</span><a href="Music.Score.Export.StandardNotation.html#movementInfo"><span class="hs-identifier hs-var">movementInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((MovementInfo -&gt; Const (Maybe String) MovementInfo)
 -&gt; Movement -&gt; Const (Maybe String) Movement)
-&gt; ((Maybe String -&gt; Const (Maybe String) (Maybe String))
    -&gt; MovementInfo -&gt; Const (Maybe String) MovementInfo)
-&gt; Getting (Maybe String) Movement (Maybe String)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Attribution -&gt; Const (Maybe String) Attribution)
-&gt; MovementInfo -&gt; Const (Maybe String) MovementInfo
Lens' MovementInfo Attribution
</span><a href="Music.Score.Export.StandardNotation.html#movementAttribution"><span class="hs-identifier hs-var">movementAttribution</span></a></span><span> </span><span class="annot"><span class="annottext">((Attribution -&gt; Const (Maybe String) Attribution)
 -&gt; MovementInfo -&gt; Const (Maybe String) MovementInfo)
-&gt; ((Maybe String -&gt; Const (Maybe String) (Maybe String))
    -&gt; Attribution -&gt; Const (Maybe String) Attribution)
-&gt; (Maybe String -&gt; Const (Maybe String) (Maybe String))
-&gt; MovementInfo
-&gt; Const (Maybe String) MovementInfo
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Index Attribution
-&gt; Lens' Attribution (Maybe (IxValue Attribution))
forall m. At m =&gt; Index m -&gt; Lens' m (Maybe (IxValue m))
</span><span class="hs-identifier hs-var">at</span></span><span> </span><span class="annot"><span class="hs-string">&quot;composer&quot;</span></span><span>
</span><span id="line-1312"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MusicXML: Generating part list&quot;</span></span><span>
</span><span id="line-1313"></span><span>  </span><span id="local-6989586621680602399"><span class="annot"><span class="annottext">PartList
</span><a href="#local-6989586621680602399"><span class="hs-identifier hs-var">partList</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Movement -&gt; m PartList
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; Movement -&gt; m PartList
</span><a href="Music.Score.Export.StandardNotation.html#movementToPartList"><span class="hs-identifier hs-var">movementToPartList</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602404"><span class="hs-identifier hs-var">firstMovement</span></a></span><span>
</span><span id="line-1314"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MusicXML: Generating bar content&quot;</span></span><span>
</span><span id="line-1315"></span><span>  </span><span id="local-6989586621680602397"><span class="annot"><span class="annottext">[[Music]]
</span><a href="#local-6989586621680602397"><span class="hs-identifier hs-var">partWise</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Movement -&gt; m [[Music]]
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; Movement -&gt; m [[Music]]
</span><a href="Music.Score.Export.StandardNotation.html#movementToPartwiseXml"><span class="hs-identifier hs-var">movementToPartwiseXml</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602404"><span class="hs-identifier hs-var">firstMovement</span></a></span><span>
</span><span id="line-1316"></span><span>  </span><span class="annot"><span class="annottext">Score -&gt; m Score
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Score -&gt; m Score) -&gt; Score -&gt; m Score
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; PartList -&gt; [[Music]] -&gt; Score
</span><a href="Data.Music.MusicXml.Simple.html#fromParts"><span class="hs-identifier hs-var">MusicXml.fromParts</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602402"><span class="hs-identifier hs-var">title</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680602401"><span class="hs-identifier hs-var">composer</span></a></span><span> </span><span class="annot"><span class="annottext">PartList
</span><a href="#local-6989586621680602399"><span class="hs-identifier hs-var">partList</span></a></span><span> </span><span class="annot"><span class="annottext">[[Music]]
</span><a href="#local-6989586621680602397"><span class="hs-identifier hs-var">partWise</span></a></span><span>
</span><span id="line-1317"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1318"></span><span>
</span><span id="line-1319"></span><span class="hs-comment">{-
  Returns the part list, specifying instruments, staves and gruops
  (but not the musical contents of the staves).
-}</span><span>
</span><span id="line-1323"></span><span id="local-6989586621680603981"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementToPartList"><span class="hs-identifier hs-type">movementToPartList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603981"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603981"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#PartList"><span class="hs-identifier hs-type">MusicXml.PartList</span></a></span></span><span>
</span><span id="line-1324"></span><span id="movementToPartList"><span class="annot"><span class="annottext">movementToPartList :: Movement -&gt; m PartList
</span><a href="Music.Score.Export.StandardNotation.html#movementToPartList"><span class="hs-identifier hs-var hs-var">movementToPartList</span></a></span></span><span> </span><span id="local-6989586621680602394"><span class="annot"><span class="annottext">m :: Movement
</span><a href="#local-6989586621680602394"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PartList -&gt; m PartList
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(PartList -&gt; m PartList) -&gt; PartList -&gt; m PartList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Staff -&gt; PartList)
-&gt; (BracketType -&gt; [PartList] -&gt; PartList)
-&gt; LabelTree BracketType Staff
-&gt; PartList
forall a c b. (a -&gt; c) -&gt; (b -&gt; [c] -&gt; c) -&gt; LabelTree b a -&gt; c
</span><a href="Music.Score.Export.StandardNotation.html#foldLabelTree"><span class="hs-identifier hs-var">foldLabelTree</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; PartList
</span><a href="#local-6989586621680602393"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">BracketType -&gt; [PartList] -&gt; PartList
</span><a href="#local-6989586621680602392"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602394"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
-&gt; Getting
     (LabelTree BracketType Staff)
     Movement
     (LabelTree BracketType Staff)
-&gt; LabelTree BracketType Staff
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (LabelTree BracketType Staff)
  Movement
  (LabelTree BracketType Staff)
Lens' Movement (LabelTree BracketType Staff)
</span><a href="Music.Score.Export.StandardNotation.html#staves"><span class="hs-identifier hs-var">staves</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1326"></span><span>    </span><span class="hs-comment">-- TODO generally, what name to use?</span><span>
</span><span id="line-1327"></span><span>    </span><span class="hs-comment">-- TODO use MusicXML sound id</span><span>
</span><span id="line-1328"></span><span>    </span><span id="local-6989586621680602393"><span class="annot"><span class="annottext">f :: Staff -&gt; PartList
</span><a href="#local-6989586621680602393"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680602391"><span class="annot"><span class="annottext">s :: Staff
</span><a href="#local-6989586621680602391"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; PartList
</span><a href="Data.Music.MusicXml.Simple.html#partList"><span class="hs-identifier hs-var">MusicXml.partList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Staff
</span><a href="#local-6989586621680602391"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; Getting String Staff String -&gt; String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(StaffInfo -&gt; Const String StaffInfo)
-&gt; Staff -&gt; Const String Staff
Lens' Staff StaffInfo
</span><a href="Music.Score.Export.StandardNotation.html#staffInfo"><span class="hs-identifier hs-var">staffInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((StaffInfo -&gt; Const String StaffInfo)
 -&gt; Staff -&gt; Const String Staff)
-&gt; ((String -&gt; Const String String)
    -&gt; StaffInfo -&gt; Const String StaffInfo)
-&gt; Getting String Staff String
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Const String String)
-&gt; StaffInfo -&gt; Const String StaffInfo
Lens' StaffInfo String
</span><a href="Music.Score.Export.StandardNotation.html#sibeliusFriendlyName"><span class="hs-identifier hs-var">sibeliusFriendlyName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1329"></span><span>    </span><span id="local-6989586621680602392"><span class="annot"><span class="annottext">g :: BracketType -&gt; [PartList] -&gt; PartList
</span><a href="#local-6989586621680602392"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621680602389"><span class="annot"><span class="annottext">bt :: BracketType
</span><a href="#local-6989586621680602389"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621680602388"><span class="annot"><span class="annottext">pl :: [PartList]
</span><a href="#local-6989586621680602388"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="#local-6989586621680602389"><span class="hs-identifier hs-var">bt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1330"></span><span>      </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoBracket"><span class="hs-identifier hs-type">NoBracket</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[PartList] -&gt; PartList
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">[PartList]
</span><a href="#local-6989586621680602388"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-1331"></span><span>      </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Subbracket"><span class="hs-identifier hs-type">Subbracket</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[PartList] -&gt; PartList
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">[PartList]
</span><a href="#local-6989586621680602388"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-1332"></span><span>      </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bracket"><span class="hs-identifier hs-type">Bracket</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PartList -&gt; PartList
</span><a href="Data.Music.MusicXml.Simple.html#bracket"><span class="hs-identifier hs-var">MusicXml.bracket</span></a></span><span> </span><span class="annot"><span class="annottext">(PartList -&gt; PartList) -&gt; PartList -&gt; PartList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[PartList] -&gt; PartList
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">[PartList]
</span><a href="#local-6989586621680602388"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-1333"></span><span>      </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Brace"><span class="hs-identifier hs-type">Brace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PartList -&gt; PartList
</span><a href="Data.Music.MusicXml.Simple.html#brace"><span class="hs-identifier hs-var">MusicXml.brace</span></a></span><span> </span><span class="annot"><span class="annottext">(PartList -&gt; PartList) -&gt; PartList -&gt; PartList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[PartList] -&gt; PartList
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">[PartList]
</span><a href="#local-6989586621680602388"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-1334"></span><span>
</span><span id="line-1335"></span><span class="hs-comment">{-
  Returns a matrix of bars in in row-major order, i.e. each inner list
  represents the bars of one particular MusicXML part[1].

  This is suitable for a &quot;partwise&quot; MusicXML score. The transpose of the
  returned matrix is suitable for a &quot;timewise&quot; score.

  [1]: Note that a MusicXML part can be rendered as 1 staff (default) or more,
  so there are two ways to render a piano staff:
    1) Use two MusicXML parts grouped with a brace.
    2) Use one MusicXML part with 2 staves. In this case each note must
       have a staff child element.

-}</span><span>
</span><span id="line-1349"></span><span id="local-6989586621680603978"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#movementToPartwiseXml"><span class="hs-identifier hs-type">movementToPartwiseXml</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603978"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-type">Movement</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span></span><span>
</span><span id="line-1350"></span><span id="movementToPartwiseXml"><span class="annot"><span class="annottext">movementToPartwiseXml :: Movement -&gt; m [[Music]]
</span><a href="Music.Score.Export.StandardNotation.html#movementToPartwiseXml"><span class="hs-identifier hs-var hs-var">movementToPartwiseXml</span></a></span></span><span> </span><span id="local-6989586621680602385"><span class="annot"><span class="annottext">movement :: Movement
</span><a href="#local-6989586621680602385"><span class="hs-identifier hs-var">movement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m [[Music]]
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; m [[Music]]
</span><a href="#local-6989586621680602384"><span class="hs-identifier hs-var">music</span></a></span><span>
</span><span id="line-1351"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1352"></span><span>    </span><span id="local-6989586621680603975"><span class="annot"><a href="#local-6989586621680602384"><span class="hs-identifier hs-type">music</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603975"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603975"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span></span><span>
</span><span id="line-1353"></span><span>    </span><span id="local-6989586621680602384"><span class="annot"><span class="annottext">music :: m [[Music]]
</span><a href="#local-6989586621680602384"><span class="hs-identifier hs-var hs-var">music</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1354"></span><span>      </span><span id="local-6989586621680602383"><span class="annot"><span class="annottext">[[Music]]
</span><a href="#local-6989586621680602383"><span class="hs-identifier hs-var">staffMusic_</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m [[Music]]
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; m [[Music]]
</span><a href="#local-6989586621680602382"><span class="hs-identifier hs-var">staffMusic</span></a></span><span>
</span><span id="line-1355"></span><span>      </span><span class="annot"><span class="annottext">[[Music]] -&gt; m [[Music]]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">([[Music]] -&gt; m [[Music]]) -&gt; [[Music]] -&gt; m [[Music]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; [Music]) -&gt; [[Music]] -&gt; [[Music]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Music -&gt; Music -&gt; Music) -&gt; [Music] -&gt; [Music] -&gt; [Music]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602381"><span class="hs-identifier hs-var">allSystemBarDirections</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Music]]
</span><a href="#local-6989586621680602383"><span class="hs-identifier hs-var">staffMusic_</span></a></span><span>
</span><span id="line-1356"></span><span>    </span><span class="hs-comment">{-
      Old comment:
            Each entry in outer list must be prepended to the FIRST staff (whatever that is)
            We could also prepend it to other staves, but that is reduntant and makes the
            generated XML file much larger.
      Trying a new approach here by including this in all parts.

      ---
      Again, this definition is a sequnce of elements to be prepended to each bar
      (typically divisions and attributes).
    -}</span><span>
</span><span id="line-1367"></span><span>    </span><span class="annot"><a href="#local-6989586621680602381"><span class="hs-identifier hs-type">allSystemBarDirections</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1368"></span><span>    </span><span id="local-6989586621680602381"><span class="annot"><span class="annottext">allSystemBarDirections :: [Music]
</span><a href="#local-6989586621680602381"><span class="hs-identifier hs-var hs-var">allSystemBarDirections</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1369"></span><span>      </span><span class="annot"><span class="annottext">(Music -&gt; Music -&gt; Music -&gt; Music)
-&gt; [Music] -&gt; [Music] -&gt; [Music] -&gt; [Music]
forall a b c d. (a -&gt; b -&gt; c -&gt; d) -&gt; [a] -&gt; [b] -&gt; [c] -&gt; [d]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith3</span></a></span><span>
</span><span id="line-1370"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680602379"><span class="annot"><span class="annottext">a :: Music
</span><a href="#local-6989586621680602379"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680602378"><span class="annot"><span class="annottext">b :: Music
</span><a href="#local-6989586621680602378"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680602377"><span class="annot"><span class="annottext">c :: Music
</span><a href="#local-6989586621680602377"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602379"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602378"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602377"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>        </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602376"><span class="hs-identifier hs-var">divisions_</span></a></span><span>
</span><span id="line-1372"></span><span>        </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602375"><span class="hs-identifier hs-var">timeSignatures_</span></a></span><span>
</span><span id="line-1373"></span><span>        </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602374"><span class="hs-identifier hs-var">keySignatures_</span></a></span><span>
</span><span id="line-1374"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1375"></span><span>        </span><span class="hs-comment">-- TODO bar numbers (?)</span><span>
</span><span id="line-1376"></span><span>        </span><span class="hs-comment">-- TODO reh marks (direction)</span><span>
</span><span id="line-1377"></span><span>        </span><span class="hs-comment">-- TODO tempo marks (direction)</span><span>
</span><span id="line-1378"></span><span>        </span><span class="hs-comment">-- TODO merge attribute elements in the beginning of each bar?</span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span>        </span><span class="annot"><a href="#local-6989586621680602376"><span class="hs-identifier hs-type">divisions_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1381"></span><span>        </span><span id="local-6989586621680602376"><span class="annot"><span class="annottext">divisions_ :: [Music]
</span><a href="#local-6989586621680602376"><span class="hs-identifier hs-var hs-var">divisions_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="Data.Music.MusicXml.Simple.html#defaultDivisions"><span class="hs-identifier hs-var">MusicXml.defaultDivisions</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music]
forall a. a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">Music
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1382"></span><span>
</span><span id="line-1383"></span><span>        </span><span class="annot"><a href="#local-6989586621680602374"><span class="hs-identifier hs-type">keySignatures_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1384"></span><span>        </span><span id="local-6989586621680602374"><span class="annot"><span class="annottext">keySignatures_ :: [Music]
</span><a href="#local-6989586621680602374"><span class="hs-identifier hs-var hs-var">keySignatures_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SystemBar -&gt; Music) -&gt; [SystemBar] -&gt; [Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeySignature -&gt; Music
</span><a href="#local-6989586621680602372"><span class="hs-identifier hs-var">expKS</span></a></span><span> </span><span class="annot"><span class="annottext">(KeySignature -&gt; Music)
-&gt; (SystemBar -&gt; KeySignature) -&gt; SystemBar -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting KeySignature SystemBar KeySignature
-&gt; SystemBar -&gt; KeySignature
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting KeySignature SystemBar KeySignature
Lens' SystemBar KeySignature
</span><a href="Music.Score.Export.StandardNotation.html#keySignature"><span class="hs-identifier hs-var">keySignature</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([SystemBar] -&gt; [Music]) -&gt; [SystemBar] -&gt; [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1385"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602385"><span class="hs-identifier hs-var">movement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Getting [SystemBar] Movement [SystemBar] -&gt; [SystemBar]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [SystemBar] Movement [SystemBar]
Lens' Movement [SystemBar]
</span><a href="Music.Score.Export.StandardNotation.html#systemStaff"><span class="hs-identifier hs-var">systemStaff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1387"></span><span>            </span><span id="local-6989586621680602372"><span class="annot"><span class="annottext">expKS :: KeySignature -&gt; Music
</span><a href="#local-6989586621680602372"><span class="hs-identifier hs-var hs-var">expKS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Meta.Key.html#KeySignature"><span class="hs-identifier hs-type">Music.Score.Meta.Key.KeySignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Data.Monoid.First</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1388"></span><span>              </span><span class="annot"><span class="annottext">Music
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1389"></span><span>            </span><span class="annot"><a href="#local-6989586621680602372"><span class="hs-identifier hs-var">expKS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Meta.Key.html#KeySignature"><span class="hs-identifier hs-type">Music.Score.Meta.Key.KeySignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Data.Monoid.First</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602371"><span class="annot"><span class="annottext">ks :: (Pitch, MajorMinor)
</span><a href="#local-6989586621680602371"><span class="hs-identifier hs-var">ks</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1390"></span><span>              </span><span class="hs-keyword">let</span><span>
</span><span id="line-1391"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621680602370"><span class="annot"><span class="annottext">fifths :: Pitch
</span><a href="#local-6989586621680602370"><span class="hs-identifier hs-var">fifths</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602369"><span class="annot"><span class="annottext">mode :: MajorMinor
</span><a href="#local-6989586621680602369"><span class="hs-identifier hs-var">mode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pitch, MajorMinor)
</span><a href="#local-6989586621680602371"><span class="hs-identifier hs-var">ks</span></a></span><span>
</span><span id="line-1392"></span><span>
</span><span id="line-1393"></span><span>                </span><span id="local-6989586621680602368"><span class="annot"><span class="annottext">fifths' :: Fifths
</span><a href="#local-6989586621680602368"><span class="hs-identifier hs-var hs-var">fifths'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Fifths
</span><a href="Data.Music.MusicXml.Pitch.html#Fifths"><span class="hs-identifier hs-var">MusicXml.Fifths</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Fifths) -&gt; Int -&gt; Fifths
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Int) -&gt; Integer -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1394"></span><span>                  </span><span class="annot"><span class="annottext">Fifths -&gt; Integer
</span><a href="Music.Score.Meta.Key.html#getFifths"><span class="hs-identifier hs-var hs-var">Music.Score.Meta.Key.getFifths</span></a></span><span> </span><span class="annot"><span class="annottext">(Fifths -&gt; Integer) -&gt; Fifths -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Fifths
forall a. IsPitch a =&gt; Pitch -&gt; a
</span><a href="Music.Pitch.Common.Internal.html#fromPitch"><span class="hs-identifier hs-var">fromPitch</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602370"><span class="hs-identifier hs-var">fifths</span></a></span><span>
</span><span id="line-1395"></span><span>
</span><span id="line-1396"></span><span>                </span><span id="local-6989586621680602365"><span class="annot"><span class="annottext">mode' :: Mode
</span><a href="#local-6989586621680602365"><span class="hs-identifier hs-var hs-var">mode'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MajorMinor
</span><a href="#local-6989586621680602369"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1397"></span><span>                  </span><span class="annot"><a href="Music.Pitch.Common.Names.html#MajorMode"><span class="hs-identifier hs-type">Music.Pitch.MajorMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="Data.Music.MusicXml.Pitch.html#Major"><span class="hs-identifier hs-var">MusicXml.Major</span></a></span><span>
</span><span id="line-1398"></span><span>                  </span><span class="annot"><a href="Music.Pitch.Common.Names.html#MinorMode"><span class="hs-identifier hs-type">Music.Pitch.MinorMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="Data.Music.MusicXml.Pitch.html#Minor"><span class="hs-identifier hs-var">MusicXml.Minor</span></a></span><span>
</span><span id="line-1399"></span><span>
</span><span id="line-1400"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Fifths -&gt; Mode -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#key"><span class="hs-identifier hs-var">MusicXml.key</span></a></span><span> </span><span class="annot"><span class="annottext">Fifths
</span><a href="#local-6989586621680602368"><span class="hs-identifier hs-var">fifths'</span></a></span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="#local-6989586621680602365"><span class="hs-identifier hs-var">mode'</span></a></span><span>
</span><span id="line-1401"></span><span>
</span><span id="line-1402"></span><span>        </span><span class="annot"><a href="#local-6989586621680602375"><span class="hs-identifier hs-type">timeSignatures_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1403"></span><span>        </span><span id="local-6989586621680602375"><span class="annot"><span class="annottext">timeSignatures_ :: [Music]
</span><a href="#local-6989586621680602375"><span class="hs-identifier hs-var hs-var">timeSignatures_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Option (First TimeSignature) -&gt; Music)
-&gt; [Option (First TimeSignature)] -&gt; [Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TimeSignature -&gt; Music
</span><a href="#local-6989586621680602361"><span class="hs-identifier hs-var">expTS</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe TimeSignature -&gt; Music)
-&gt; (Option (First TimeSignature) -&gt; Maybe TimeSignature)
-&gt; Option (First TimeSignature)
-&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First TimeSignature) -&gt; Maybe TimeSignature
forall b. Option (First b) -&gt; Maybe b
</span><a href="#local-6989586621680602360"><span class="hs-identifier hs-var">unOF</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Option (First TimeSignature)] -&gt; [Music])
-&gt; [Option (First TimeSignature)] -&gt; [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(SystemBar -&gt; Option (First TimeSignature))
-&gt; [SystemBar] -&gt; [Option (First TimeSignature)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemBar
-&gt; Getting
     (Option (First TimeSignature))
     SystemBar
     (Option (First TimeSignature))
-&gt; Option (First TimeSignature)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Option (First TimeSignature))
  SystemBar
  (Option (First TimeSignature))
Lens' SystemBar (Option (First TimeSignature))
</span><a href="Music.Score.Export.StandardNotation.html#timeSignature"><span class="hs-identifier hs-var">timeSignature</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602385"><span class="hs-identifier hs-var">movement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Getting [SystemBar] Movement [SystemBar] -&gt; [SystemBar]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [SystemBar] Movement [SystemBar]
Lens' Movement [SystemBar]
</span><a href="Music.Score.Export.StandardNotation.html#systemStaff"><span class="hs-identifier hs-var">systemStaff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1404"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1405"></span><span>            </span><span id="local-6989586621680602360"><span class="annot"><span class="annottext">unOF :: Option (First b) -&gt; Maybe b
</span><a href="#local-6989586621680602360"><span class="hs-identifier hs-var hs-var">unOF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(First b -&gt; b) -&gt; Maybe (First b) -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">First b -&gt; b
forall a. First a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var">getFirst</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (First b) -&gt; Maybe b)
-&gt; (Option (First b) -&gt; Maybe (First b))
-&gt; Option (First b)
-&gt; Maybe b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Option (First b) -&gt; Maybe (First b)
forall a. Option a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var">getOption</span></a></span><span>
</span><span id="line-1406"></span><span>            </span><span class="hs-comment">-- TODO recognize common/cut</span><span>
</span><span id="line-1407"></span><span>            </span><span id="local-6989586621680602361"><span class="annot"><span class="annottext">expTS :: Maybe TimeSignature -&gt; Music
</span><a href="#local-6989586621680602361"><span class="hs-identifier hs-var hs-var">expTS</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Music
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1408"></span><span>            </span><span class="annot"><a href="#local-6989586621680602361"><span class="hs-identifier hs-var">expTS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602357"><span class="annot"><span class="annottext">ts :: TimeSignature
</span><a href="#local-6989586621680602357"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1409"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602356"><span class="annot"><span class="annottext">ms :: [Integer]
</span><a href="#local-6989586621680602356"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602355"><span class="annot"><span class="annottext">n :: Integer
</span><a href="#local-6989586621680602355"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TimeSignature -&gt; ([Integer], Integer)
</span><a href="Music.Score.Meta.Time.html#getTimeSignature"><span class="hs-identifier hs-var hs-var">Music.Score.Meta.Time.getTimeSignature</span></a></span><span> </span><span class="annot"><span class="annottext">TimeSignature
</span><a href="#local-6989586621680602357"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1410"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Beat -&gt; BeatType -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#time"><span class="hs-identifier hs-var">MusicXml.time</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Beat
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Beat) -&gt; Integer -&gt; Beat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Integer] -&gt; Integer
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="annot"><span class="annottext">[Integer]
</span><a href="#local-6989586621680602356"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; BeatType
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680602355"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1411"></span><span>    </span><span class="hs-comment">-- System bar directions per bar</span><span>
</span><span id="line-1412"></span><span>
</span><span id="line-1413"></span><span>    </span><span class="hs-comment">{-
      A matrix similar to the one returned from movementToPartwiseXml, but
      not including information from the system staff.

      TODO we use movementAssureSameNumberOfBars
      We should do a sumilar check on the transpose of the bar/staff matrix
      to assure that all /bars/ have the same duration.
    -}</span><span>
</span><span id="line-1421"></span><span>    </span><span id="local-6989586621680602353"><span class="annot"><a href="#local-6989586621680602382"><span class="hs-identifier hs-type">staffMusic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602353"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602353"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span></span><span>
</span><span id="line-1422"></span><span>    </span><span id="local-6989586621680602382"><span class="annot"><span class="annottext">staffMusic :: m [[Music]]
</span><a href="#local-6989586621680602382"><span class="hs-identifier hs-var hs-var">staffMusic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Staff -&gt; m [Music]) -&gt; [Staff] -&gt; m [[Music]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; m [Music]
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; Staff -&gt; m [Music]
</span><a href="#local-6989586621680602352"><span class="hs-identifier hs-var">renderStaff</span></a></span><span> </span><span class="annot"><span class="annottext">([Staff] -&gt; m [[Music]]) -&gt; [Staff] -&gt; m [[Music]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Movement
</span><a href="#local-6989586621680602385"><span class="hs-identifier hs-var">movement</span></a></span><span> </span><span class="annot"><span class="annottext">Movement -&gt; Getting (Endo [Staff]) Movement Staff -&gt; [Staff]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">(LabelTree BracketType Staff
 -&gt; Const (Endo [Staff]) (LabelTree BracketType Staff))
-&gt; Movement -&gt; Const (Endo [Staff]) Movement
Lens' Movement (LabelTree BracketType Staff)
</span><a href="Music.Score.Export.StandardNotation.html#staves"><span class="hs-identifier hs-var">staves</span></a></span><span> </span><span class="annot"><span class="annottext">((LabelTree BracketType Staff
  -&gt; Const (Endo [Staff]) (LabelTree BracketType Staff))
 -&gt; Movement -&gt; Const (Endo [Staff]) Movement)
-&gt; ((Staff -&gt; Const (Endo [Staff]) Staff)
    -&gt; LabelTree BracketType Staff
    -&gt; Const (Endo [Staff]) (LabelTree BracketType Staff))
-&gt; Getting (Endo [Staff]) Movement Staff
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Staff -&gt; Const (Endo [Staff]) Staff)
-&gt; LabelTree BracketType Staff
-&gt; Const (Endo [Staff]) (LabelTree BracketType Staff)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span>
</span><span id="line-1423"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1424"></span><span>        </span><span class="annot"><a href="#local-6989586621680602350"><span class="hs-identifier hs-type">renderClef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Pitch.Clef.html#Clef"><span class="hs-identifier hs-type">Music.Pitch.Clef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1425"></span><span>        </span><span id="local-6989586621680602350"><span class="annot"><span class="annottext">renderClef :: Clef -&gt; Music
</span><a href="#local-6989586621680602350"><span class="hs-identifier hs-var hs-var">renderClef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Pitch.Clef.html#Clef"><span class="hs-identifier hs-type">Music.Pitch.Clef</span></a></span><span> </span><span id="local-6989586621680602348"><span class="annot"><span class="annottext">clef :: (ClefSymbol, Integer, ClefLine)
</span><a href="#local-6989586621680602348"><span class="hs-identifier hs-var">clef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(ClefSymbol, Integer, ClefLine)
</span><a href="#local-6989586621680602348"><span class="hs-identifier hs-var">clef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1426"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680602347"><span class="annot"><span class="annottext">clefSymbol :: ClefSymbol
</span><a href="#local-6989586621680602347"><span class="hs-identifier hs-var">clefSymbol</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602346"><span class="annot"><span class="annottext">_octCh :: Integer
</span><a href="#local-6989586621680602346"><span class="hs-identifier hs-var">_octCh</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602345"><span class="annot"><span class="annottext">line :: ClefLine
</span><a href="#local-6989586621680602345"><span class="hs-identifier hs-var">line</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1427"></span><span>            </span><span class="annot"><span class="annottext">[MusicElem] -&gt; Music
</span><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-var">X.Music</span></a></span><span> </span><span class="annot"><span class="annottext">([MusicElem] -&gt; Music) -&gt; [MusicElem] -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">MusicElem -&gt; [MusicElem]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(MusicElem -&gt; [MusicElem]) -&gt; MusicElem -&gt; [MusicElem]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Attributes] -&gt; MusicElem
</span><a href="Data.Music.MusicXml.Score.html#MusicAttributes"><span class="hs-identifier hs-var">X.MusicAttributes</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1428"></span><span>              </span><span class="annot"><span class="annottext">ClefSign -&gt; Line -&gt; Maybe OctaveChange -&gt; Attributes
</span><a href="Data.Music.MusicXml.Score.html#Clef"><span class="hs-identifier hs-var">X.Clef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClefSymbol -&gt; ClefSign
</span><a href="#local-6989586621680602341"><span class="hs-identifier hs-var">exportSymbol</span></a></span><span> </span><span class="annot"><span class="annottext">ClefSymbol
</span><a href="#local-6989586621680602347"><span class="hs-identifier hs-var">clefSymbol</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClefLine -&gt; Line
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">ClefLine
</span><a href="#local-6989586621680602345"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="annot"><span class="annottext">Line -&gt; Line -&gt; Line
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe OctaveChange
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1429"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1430"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1431"></span><span>            </span><span class="hs-comment">-- TODO add octave-adjust to musicxml2</span><span>
</span><span id="line-1432"></span><span>            </span><span id="local-6989586621680602341"><span class="annot"><span class="annottext">exportSymbol :: ClefSymbol -&gt; ClefSign
</span><a href="#local-6989586621680602341"><span class="hs-identifier hs-var hs-var">exportSymbol</span></a></span></span><span> </span><span id="local-6989586621680602340"><span class="annot"><span class="annottext">x :: ClefSymbol
</span><a href="#local-6989586621680602340"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ClefSymbol
</span><a href="#local-6989586621680602340"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1433"></span><span>              </span><span class="annot"><a href="Music.Pitch.Clef.html#GClef"><span class="hs-identifier hs-type">Music.Pitch.GClef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ClefSign
</span><a href="Data.Music.MusicXml.Score.html#GClef"><span class="hs-identifier hs-var">X.GClef</span></a></span><span>
</span><span id="line-1434"></span><span>              </span><span class="annot"><a href="Music.Pitch.Clef.html#CClef"><span class="hs-identifier hs-type">Music.Pitch.CClef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ClefSign
</span><a href="Data.Music.MusicXml.Score.html#CClef"><span class="hs-identifier hs-var">X.CClef</span></a></span><span>
</span><span id="line-1435"></span><span>              </span><span class="annot"><a href="Music.Pitch.Clef.html#FClef"><span class="hs-identifier hs-type">Music.Pitch.FClef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ClefSign
</span><a href="Data.Music.MusicXml.Score.html#FClef"><span class="hs-identifier hs-var">X.FClef</span></a></span><span>
</span><span id="line-1436"></span><span>              </span><span class="annot"><a href="Music.Pitch.Clef.html#PercClef"><span class="hs-identifier hs-type">Music.Pitch.PercClef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ClefSign
</span><a href="Data.Music.MusicXml.Score.html#PercClef"><span class="hs-identifier hs-var">X.PercClef</span></a></span><span>
</span><span id="line-1437"></span><span>              </span><span class="annot"><a href="Music.Pitch.Clef.html#NeutralClef"><span class="hs-identifier hs-type">Music.Pitch.NeutralClef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ClefSign
</span><a href="Data.Music.MusicXml.Score.html#TabClef"><span class="hs-identifier hs-var">X.TabClef</span></a></span><span>
</span><span id="line-1438"></span><span>        </span><span id="local-6989586621680603956"><span class="annot"><a href="#local-6989586621680602352"><span class="hs-identifier hs-type">renderStaff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603956"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603956"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1439"></span><span>        </span><span id="local-6989586621680602352"><span class="annot"><span class="annottext">renderStaff :: Staff -&gt; m [Music]
</span><a href="#local-6989586621680602352"><span class="hs-identifier hs-var hs-var">renderStaff</span></a></span></span><span> </span><span id="local-6989586621680602329"><span class="annot"><span class="annottext">staff :: Staff
</span><a href="#local-6989586621680602329"><span class="hs-identifier hs-var">staff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1440"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  MusicXML: Generating staff &lt;&lt;&gt;&gt;&quot;</span></span><span>
</span><span id="line-1441"></span><span>          </span><span id="local-6989586621680602328"><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602328"><span class="hs-identifier hs-var">fromBars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Bar -&gt; m Music) -&gt; [Bar] -&gt; m [Music]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Bar -&gt; m Music
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; Bar -&gt; m Music
</span><a href="#local-6989586621680602327"><span class="hs-identifier hs-var">renderBar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Staff
</span><a href="#local-6989586621680602329"><span class="hs-identifier hs-var">staff</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; Getting [Bar] Staff [Bar] -&gt; [Bar]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Bar] Staff [Bar]
Lens' Staff [Bar]
</span><a href="Music.Score.Export.StandardNotation.html#bars"><span class="hs-identifier hs-var">bars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1442"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602326"><span class="annot"><span class="annottext">clef :: Music
</span><a href="#local-6989586621680602326"><span class="hs-identifier hs-var hs-var">clef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Music
</span><a href="#local-6989586621680602350"><span class="hs-identifier hs-var">renderClef</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602325"><span class="hs-identifier hs-var">initClef</span></a></span><span>
</span><span id="line-1443"></span><span>          </span><span class="annot"><span class="annottext">[Music] -&gt; m [Music]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; m [Music]) -&gt; [Music] -&gt; m [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; [Music] -&gt; [Music]
forall a. (a -&gt; a) -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621680602324"><span class="hs-identifier hs-var">mapHead</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602323"><span class="hs-identifier hs-var">transposeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602326"><span class="hs-identifier hs-var">clef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602328"><span class="hs-identifier hs-var">fromBars</span></a></span><span>
</span><span id="line-1444"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1445"></span><span>            </span><span id="local-6989586621680602324"><span class="annot"><span class="annottext">mapHead :: (a -&gt; a) -&gt; [a] -&gt; [a]
</span><a href="#local-6989586621680602324"><span class="hs-identifier hs-var hs-var">mapHead</span></a></span></span><span> </span><span id="local-6989586621680602322"><span class="annot"><span class="annottext">_f :: a -&gt; a
</span><a href="#local-6989586621680602322"><span class="hs-identifier hs-var">_f</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1446"></span><span>            </span><span class="annot"><a href="#local-6989586621680602324"><span class="hs-identifier hs-var">mapHead</span></a></span><span> </span><span id="local-6989586621680602321"><span class="annot"><span class="annottext">f :: a -&gt; a
</span><a href="#local-6989586621680602321"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602320"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680602320"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621680602319"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680602319"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621680602321"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680602320"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680602319"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1447"></span><span>            </span><span class="annot"><a href="#local-6989586621680602323"><span class="hs-identifier hs-type">transposeInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1448"></span><span>            </span><span id="local-6989586621680602323"><span class="annot"><span class="annottext">transposeInfo :: Music
</span><a href="#local-6989586621680602323"><span class="hs-identifier hs-var hs-var">transposeInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1449"></span><span>            </span><span class="hs-comment">{-
              Always generate a clef at the beginning of the staff based =
              on the instrument default. See comments in the definition of StaffInfo.
            -}</span><span>
</span><span id="line-1453"></span><span>            </span><span id="local-6989586621680602325"><span class="annot"><span class="annottext">initClef :: Clef
</span><a href="#local-6989586621680602325"><span class="hs-identifier hs-var hs-var">initClef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Staff
</span><a href="#local-6989586621680602329"><span class="hs-identifier hs-var">staff</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; Getting Clef Staff Clef -&gt; Clef
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">(StaffInfo -&gt; Const Clef StaffInfo) -&gt; Staff -&gt; Const Clef Staff
Lens' Staff StaffInfo
</span><a href="Music.Score.Export.StandardNotation.html#staffInfo"><span class="hs-identifier hs-var">staffInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((StaffInfo -&gt; Const Clef StaffInfo) -&gt; Staff -&gt; Const Clef Staff)
-&gt; ((Clef -&gt; Const Clef Clef) -&gt; StaffInfo -&gt; Const Clef StaffInfo)
-&gt; Getting Clef Staff Clef
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Clef -&gt; Const Clef Clef) -&gt; StaffInfo -&gt; Const Clef StaffInfo
Lens' StaffInfo Clef
</span><a href="Music.Score.Export.StandardNotation.html#instrumentDefaultClef"><span class="hs-identifier hs-var">instrumentDefaultClef</span></a></span><span>
</span><span id="line-1454"></span><span>        </span><span class="hs-comment">-- TODO how to best render transposed staves (i.e. clarinets)</span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span>        </span><span class="hs-comment">{-
        backup/forward
          - Moves XML &quot;counter&quot; without emitting notes/rests
          - Possibly use sanity check to ensure all layers in a bar are of the
            same length (and the length expected by the time signature).
            If not, we could get some rather strange results!
          - Remember we still need to emit the correct voice (starting with 1 - I recall doing something
           about this, are we always emitting the voice?)
            YES, see setDefaultVoice below?
            How about staff, are we always emitting that?

          - TODO how does this interact with the staff-crossing feature?
            (are we always emitting staff?)
          - TODO how does it interact with clefs/other in-measure elements not
            connected to chords?

            Lots of meta-stuff here about how a bar is represented, would be nice to write up music-score
            eloquently!
        -}</span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span>        </span><span class="hs-comment">-- TODO emit line ===== comments in between measures</span><span>
</span><span id="line-1477"></span><span>
</span><span id="line-1478"></span><span>        </span><span id="local-6989586621680603944"><span class="annot"><a href="#local-6989586621680602327"><span class="hs-identifier hs-type">renderBar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MusicXmlExportM"><span class="hs-identifier hs-type">MusicXmlExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603944"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603944"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span></span><span>
</span><span id="line-1479"></span><span>        </span><span id="local-6989586621680602327"><span class="annot"><span class="annottext">renderBar :: Bar -&gt; m Music
</span><a href="#local-6989586621680602327"><span class="hs-identifier hs-var hs-var">renderBar</span></a></span></span><span> </span><span id="local-6989586621680602318"><span class="annot"><span class="annottext">bar :: Bar
</span><a href="#local-6989586621680602318"><span class="hs-identifier hs-var">bar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1480"></span><span>          </span><span class="hs-comment">-- TODO too verbose: say &quot;    MusicXML: Generating bar &lt;&lt;&gt;&gt;&quot;</span><span>
</span><span id="line-1481"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Bar -&gt; Either [Duration] Duration
</span><a href="Music.Score.Export.StandardNotation.html#barLayersHaveEqualDuration"><span class="hs-identifier hs-var">barLayersHaveEqualDuration</span></a></span><span> </span><span class="annot"><span class="annottext">Bar
</span><a href="#local-6989586621680602318"><span class="hs-identifier hs-var">bar</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1482"></span><span>            </span><span class="hs-comment">-- No layers in this bar</span><span>
</span><span id="line-1483"></span><span>            </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; m Music
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Music
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1484"></span><span>            </span><span class="hs-comment">-- Layers have different durations</span><span>
</span><span id="line-1485"></span><span>            </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m Music
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Layers have different durations&quot;</span></span><span>
</span><span id="line-1486"></span><span>            </span><span class="hs-comment">-- One or more layers with the same duration</span><span>
</span><span id="line-1487"></span><span>            </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680602317"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602317"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1488"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602316"><span class="annot"><span class="annottext">layers :: [Music]
</span><a href="#local-6989586621680602316"><span class="hs-identifier hs-var hs-var">layers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1489"></span><span>                    </span><span class="annot"><span class="annottext">(Int -&gt; Music -&gt; Music) -&gt; [Int] -&gt; [Music] -&gt; [Music]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span>
</span><span id="line-1490"></span><span>                      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680602315"><span class="annot"><span class="annottext">voiceN :: Int
</span><a href="#local-6989586621680602315"><span class="hs-identifier hs-var">voiceN</span></a></span></span><span> </span><span id="local-6989586621680602314"><span class="annot"><span class="annottext">music :: Music
</span><a href="#local-6989586621680602314"><span class="hs-identifier hs-var">music</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#setVoice"><span class="hs-identifier hs-var">MusicXml.setVoice</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602315"><span class="hs-identifier hs-var">voiceN</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602314"><span class="hs-identifier hs-var">music</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1491"></span><span>                      </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-1492"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PitchLayer -&gt; Music) -&gt; [PitchLayer] -&gt; [Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">PitchLayer -&gt; Music
</span><a href="#local-6989586621680602312"><span class="hs-identifier hs-var">renderPitchLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bar
</span><a href="#local-6989586621680602318"><span class="hs-identifier hs-var">bar</span></a></span><span> </span><span class="annot"><span class="annottext">Bar -&gt; Getting [PitchLayer] Bar [PitchLayer] -&gt; [PitchLayer]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [PitchLayer] Bar [PitchLayer]
Lens' Bar [PitchLayer]
</span><a href="Music.Score.Export.StandardNotation.html#pitchLayers"><span class="hs-identifier hs-var">pitchLayers</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1493"></span><span>                  </span><span id="local-6989586621680602311"><span class="annot"><span class="annottext">clefs :: [Music]
</span><a href="#local-6989586621680602311"><span class="hs-identifier hs-var hs-var">clefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1494"></span><span>                    </span><span class="annot"><span class="annottext">(Duration -&gt; Clef -&gt; [Music]) -&gt; Map Duration Clef -&gt; [Music]
forall m k a. Monoid m =&gt; (k -&gt; a -&gt; m) -&gt; Map k a -&gt; m
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.foldMapWithKey</span></a></span><span>
</span><span id="line-1495"></span><span>                      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680602309"><span class="annot"><span class="annottext">time :: Duration
</span><a href="#local-6989586621680602309"><span class="hs-identifier hs-var">time</span></a></span></span><span> </span><span id="local-6989586621680602308"><span class="annot"><span class="annottext">clef :: Clef
</span><a href="#local-6989586621680602308"><span class="hs-identifier hs-var">clef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Duration -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602307"><span class="hs-identifier hs-var">atPosition</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602309"><span class="hs-identifier hs-var">time</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clef -&gt; Music
</span><a href="#local-6989586621680602350"><span class="hs-identifier hs-var">renderClef</span></a></span><span> </span><span class="annot"><span class="annottext">Clef
</span><a href="#local-6989586621680602308"><span class="hs-identifier hs-var">clef</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1496"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bar
</span><a href="#local-6989586621680602318"><span class="hs-identifier hs-var">bar</span></a></span><span> </span><span class="annot"><span class="annottext">Bar
-&gt; Getting (Map Duration Clef) Bar (Map Duration Clef)
-&gt; Map Duration Clef
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Map Duration Clef) Bar (Map Duration Clef)
Lens' Bar (Map Duration Clef)
</span><a href="Music.Score.Export.StandardNotation.html#clefChanges"><span class="hs-identifier hs-var">clefChanges</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1497"></span><span>              </span><span class="annot"><span class="annottext">Music -&gt; m Music
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; m Music) -&gt; Music -&gt; m Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; [Music] -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; [Music] -&gt; [Music]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.intersperse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#backup"><span class="hs-identifier hs-var">MusicXml.backup</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Music) -&gt; Duration -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
</span><a href="#local-6989586621680602304"><span class="hs-identifier hs-var">durToXmlDur</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602317"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; [Music]) -&gt; [Music] -&gt; [Music]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602316"><span class="hs-identifier hs-var">layers</span></a></span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; [Music] -&gt; [Music]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Music]
</span><a href="#local-6989586621680602311"><span class="hs-identifier hs-var">clefs</span></a></span><span>
</span><span id="line-1498"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1499"></span><span>            </span><span class="annot"><a href="#local-6989586621680602307"><span class="hs-identifier hs-type">atPosition</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">X.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">X.Music</span></a></span><span>
</span><span id="line-1500"></span><span>            </span><span id="local-6989586621680602307"><span class="annot"><span class="annottext">atPosition :: Duration -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602307"><span class="hs-identifier hs-var hs-var">atPosition</span></a></span></span><span> </span><span class="hs-number">0</span><span> </span><span id="local-6989586621680602303"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602303"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602303"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1501"></span><span>            </span><span class="annot"><a href="#local-6989586621680602307"><span class="hs-identifier hs-var">atPosition</span></a></span><span> </span><span id="local-6989586621680602302"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602302"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602301"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602301"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#forward"><span class="hs-identifier hs-var">MusicXml.forward</span></a></span><span> </span><span class="annot"><span class="annottext">(Duration -&gt; Music) -&gt; Duration -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
</span><a href="#local-6989586621680602304"><span class="hs-identifier hs-var">durToXmlDur</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602302"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602301"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1502"></span><span>            </span><span class="annot"><a href="#local-6989586621680602304"><span class="hs-identifier hs-type">durToXmlDur</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Time.html#Duration"><span class="hs-identifier hs-type">MusicXml.Duration</span></a></span><span>
</span><span id="line-1503"></span><span>            </span><span id="local-6989586621680602304"><span class="annot"><span class="annottext">durToXmlDur :: Duration -&gt; Duration
</span><a href="#local-6989586621680602304"><span class="hs-identifier hs-var hs-var">durToXmlDur</span></a></span></span><span> </span><span id="local-6989586621680602299"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602299"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Duration
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="Data.Music.MusicXml.Simple.html#defaultDivisionsVal"><span class="hs-identifier hs-var">MusicXml.defaultDivisionsVal</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602299"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>        </span><span class="annot"><a href="#local-6989586621680602312"><span class="hs-identifier hs-type">renderPitchLayer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier hs-type">PitchLayer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1505"></span><span>        </span><span id="local-6989586621680602312"><span class="annot"><span class="annottext">renderPitchLayer :: PitchLayer -&gt; Music
</span><a href="#local-6989586621680602312"><span class="hs-identifier hs-var hs-var">renderPitchLayer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rhythm (Duration -&gt; Music) -&gt; Music
</span><a href="#local-6989586621680602297"><span class="hs-identifier hs-var">renderBarMusic</span></a></span><span> </span><span class="annot"><span class="annottext">(Rhythm (Duration -&gt; Music) -&gt; Music)
-&gt; (PitchLayer -&gt; Rhythm (Duration -&gt; Music))
-&gt; PitchLayer
-&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Chord -&gt; Duration -&gt; Music)
-&gt; Rhythm Chord -&gt; Rhythm (Duration -&gt; Music)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Duration -&gt; Music
</span><a href="#local-6989586621680602296"><span class="hs-identifier hs-var">renderChord</span></a></span><span> </span><span class="annot"><span class="annottext">(Rhythm Chord -&gt; Rhythm (Duration -&gt; Music))
-&gt; (PitchLayer -&gt; Rhythm Chord)
-&gt; PitchLayer
-&gt; Rhythm (Duration -&gt; Music)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PitchLayer -&gt; Rhythm Chord
</span><a href="Music.Score.Export.StandardNotation.html#getPitchLayer"><span class="hs-identifier hs-var hs-var">getPitchLayer</span></a></span><span>
</span><span id="line-1506"></span><span>        </span><span class="hs-comment">{-
        Render a rest/note/chord.

        This returns a series of &lt;note&gt; elements, with appropriate &lt;chord&gt; tags.
        -}</span><span>
</span><span id="line-1511"></span><span>        </span><span class="annot"><a href="#local-6989586621680602296"><span class="hs-identifier hs-type">renderChord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1512"></span><span>        </span><span id="local-6989586621680602296"><span class="annot"><span class="annottext">renderChord :: Chord -&gt; Duration -&gt; Music
</span><a href="#local-6989586621680602296"><span class="hs-identifier hs-var hs-var">renderChord</span></a></span></span><span> </span><span id="local-6989586621680602295"><span class="annot"><span class="annottext">ch :: Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span></span><span> </span><span id="local-6989586621680602294"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602294"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602293"><span class="hs-identifier hs-var">post</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; Music -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting [Pitch] Chord [Pitch] -&gt; [Pitch]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Pitch] Chord [Pitch]
Lens' Chord [Pitch]
</span><a href="Music.Score.Export.StandardNotation.html#pitches"><span class="hs-identifier hs-var">pitches</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1513"></span><span>          </span><span class="hs-comment">-- TODO Don't emit &lt;alter&gt; tag if alteration is 0</span><span>
</span><span id="line-1514"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NoteVal -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#rest"><span class="hs-identifier hs-var">MusicXml.rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; NoteVal
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602294"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1515"></span><span>          </span><span class="hs-special">[</span><span id="local-6989586621680602291"><span class="annot"><span class="annottext">p :: Pitch
</span><a href="#local-6989586621680602291"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; NoteVal -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#note"><span class="hs-identifier hs-var">MusicXml.note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch -&gt; Pitch
forall a. IsPitch a =&gt; Pitch -&gt; a
</span><a href="#local-6989586621680602289"><span class="hs-identifier hs-var">fromPitch_</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602291"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; NoteVal
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602294"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1516"></span><span>          </span><span id="local-6989586621680602288"><span class="annot"><span class="annottext">ps :: [Pitch]
</span><a href="#local-6989586621680602288"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Pitch] -&gt; NoteVal -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#chord"><span class="hs-identifier hs-var">MusicXml.chord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pitch -&gt; Pitch) -&gt; [Pitch] -&gt; [Pitch]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Pitch
forall a. IsPitch a =&gt; Pitch -&gt; a
</span><a href="#local-6989586621680602289"><span class="hs-identifier hs-var">fromPitch_</span></a></span><span> </span><span class="annot"><span class="annottext">[Pitch]
</span><a href="#local-6989586621680602288"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; NoteVal
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602294"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1518"></span><span>            </span><span class="hs-comment">-- Normalize pitch here if it hasn't been done before</span><span>
</span><span id="line-1519"></span><span>            </span><span id="local-6989586621680602289"><span class="annot"><span class="annottext">fromPitch_ :: Pitch -&gt; c
</span><a href="#local-6989586621680602289"><span class="hs-identifier hs-var hs-var">fromPitch_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; c
forall a. IsPitch a =&gt; Pitch -&gt; a
</span><a href="Music.Pitch.Common.Internal.html#fromPitch"><span class="hs-identifier hs-var">fromPitch</span></a></span><span> </span><span class="annot"><span class="annottext">(Pitch -&gt; c) -&gt; (Pitch -&gt; Pitch) -&gt; Pitch -&gt; c
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Pitch -&gt; Pitch
</span><a href="Music.Pitch.Common.Internal.html#useStandardAlterations"><span class="hs-identifier hs-var">Music.Pitch.useStandardAlterations</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
forall a. IsPitch a =&gt; a
</span><a href="Music.Pitch.Common.Internal.html#c"><span class="hs-identifier hs-var">P.c</span></a></span><span>
</span><span id="line-1520"></span><span>            </span><span class="hs-comment">-- TODO arpeggio, breath, color, fermata</span><span>
</span><span id="line-1521"></span><span>            </span><span class="hs-comment">-- (render all constructors from Chord here, except pitch)</span><span>
</span><span id="line-1522"></span><span>            </span><span class="annot"><a href="#local-6989586621680602293"><span class="hs-identifier hs-type">post</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1523"></span><span>            </span><span id="local-6989586621680602293"><span class="annot"><span class="annottext">post :: Music -&gt; Music
</span><a href="#local-6989586621680602293"><span class="hs-identifier hs-var hs-var">post</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1524"></span><span>              </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1525"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ArpeggioNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602285"><span class="hs-identifier hs-var">notateArpeggio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting ArpeggioNotation Chord ArpeggioNotation
-&gt; ArpeggioNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting ArpeggioNotation Chord ArpeggioNotation
Lens' Chord ArpeggioNotation
</span><a href="Music.Score.Export.StandardNotation.html#arpeggioNotation"><span class="hs-identifier hs-var">arpeggioNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1526"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BreathNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602284"><span class="hs-identifier hs-var">notateBreath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting BreathNotation Chord BreathNotation -&gt; BreathNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting BreathNotation Chord BreathNotation
Lens' Chord BreathNotation
</span><a href="Music.Score.Export.StandardNotation.html#breathNotation"><span class="hs-identifier hs-var">breathNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1527"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Fermata -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602283"><span class="hs-identifier hs-var">notateFermata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting Fermata Chord Fermata -&gt; Fermata
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Fermata Chord Fermata
Lens' Chord Fermata
</span><a href="Music.Score.Export.StandardNotation.html#fermata"><span class="hs-identifier hs-var">fermata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1528"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DynamicNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602282"><span class="hs-identifier hs-var">notateDynamic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting DynamicNotation Chord DynamicNotation -&gt; DynamicNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting DynamicNotation Chord DynamicNotation
Lens' Chord DynamicNotation
</span><a href="Music.Score.Export.StandardNotation.html#dynamicNotation"><span class="hs-identifier hs-var">dynamicNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ArticulationNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602281"><span class="hs-identifier hs-var">notateArticulation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting ArticulationNotation Chord ArticulationNotation
-&gt; ArticulationNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting ArticulationNotation Chord ArticulationNotation
Lens' Chord ArticulationNotation
</span><a href="Music.Score.Export.StandardNotation.html#articulationNotation"><span class="hs-identifier hs-var">articulationNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1530"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TremoloNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602280"><span class="hs-identifier hs-var">notateTremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting TremoloNotation Chord TremoloNotation -&gt; TremoloNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting TremoloNotation Chord TremoloNotation
Lens' Chord TremoloNotation
</span><a href="Music.Score.Export.StandardNotation.html#tremoloNotation"><span class="hs-identifier hs-var">tremoloNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602279"><span class="hs-identifier hs-var">notateText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting [String] Chord [String] -&gt; [String]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [String] Chord [String]
Lens' Chord [String]
</span><a href="Music.Score.Export.StandardNotation.html#chordText"><span class="hs-identifier hs-var">chordText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HarmonicNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602278"><span class="hs-identifier hs-var">notateHarmonic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting HarmonicNotation Chord HarmonicNotation
-&gt; HarmonicNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting HarmonicNotation Chord HarmonicNotation
Lens' Chord HarmonicNotation
</span><a href="Music.Score.Export.StandardNotation.html#harmonicNotation"><span class="hs-identifier hs-var">harmonicNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1533"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SlideNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602277"><span class="hs-identifier hs-var">notateSlide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord -&gt; Getting SlideNotation Chord SlideNotation -&gt; SlideNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting SlideNotation Chord SlideNotation
Lens' Chord SlideNotation
</span><a href="Music.Score.Export.StandardNotation.html#slideNotation"><span class="hs-identifier hs-var">slideNotation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>                </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SmallOrLarge, SmallOrLarge) -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602276"><span class="hs-identifier hs-var">notateTie</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chord
</span><a href="#local-6989586621680602295"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
-&gt; Getting
     (SmallOrLarge, SmallOrLarge) Chord (SmallOrLarge, SmallOrLarge)
-&gt; (SmallOrLarge, SmallOrLarge)
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (SmallOrLarge, SmallOrLarge) Chord (SmallOrLarge, SmallOrLarge)
Lens' Chord (SmallOrLarge, SmallOrLarge)
</span><a href="Music.Score.Export.StandardNotation.html#ties"><span class="hs-identifier hs-var">ties</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1535"></span><span>        </span><span class="annot"><a href="#local-6989586621680602297"><span class="hs-identifier hs-type">renderBarMusic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1536"></span><span>        </span><span id="local-6989586621680602297"><span class="annot"><span class="annottext">renderBarMusic :: Rhythm (Duration -&gt; Music) -&gt; Music
</span><a href="#local-6989586621680602297"><span class="hs-identifier hs-var hs-var">renderBarMusic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rhythm (Duration -&gt; Music) -&gt; Music
</span><a href="#local-6989586621680602275"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1537"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1538"></span><span>            </span><span id="local-6989586621680602275"><span class="annot"><span class="annottext">go :: Rhythm (Duration -&gt; Music) -&gt; Music
</span><a href="#local-6989586621680602275"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Beat"><span class="hs-identifier hs-type">Beat</span></a></span><span> </span><span id="local-6989586621680602274"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602274"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602273"><span class="annot"><span class="annottext">x :: Duration -&gt; Music
</span><a href="#local-6989586621680602273"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602272"><span class="hs-identifier hs-var">setDefaultVoice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Music
</span><a href="#local-6989586621680602273"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602274"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1539"></span><span>            </span><span class="annot"><a href="#local-6989586621680602275"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Dotted"><span class="hs-identifier hs-type">Dotted</span></a></span><span> </span><span id="local-6989586621680602271"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602271"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Beat"><span class="hs-identifier hs-type">Beat</span></a></span><span> </span><span id="local-6989586621680602270"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680602270"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680602269"><span class="annot"><span class="annottext">x :: Duration -&gt; Music
</span><a href="#local-6989586621680602269"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602272"><span class="hs-identifier hs-var">setDefaultVoice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Music
</span><a href="#local-6989586621680602269"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602270"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Duration
</span><a href="Music.Score.Internal.Quantize.html#dotMod"><span class="hs-identifier hs-var">dotMod</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602271"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>            </span><span class="annot"><a href="#local-6989586621680602275"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Group"><span class="hs-identifier hs-type">Group</span></a></span><span> </span><span id="local-6989586621680602268"><span class="annot"><span class="annottext">rs :: [Rhythm (Duration -&gt; Music)]
</span><a href="#local-6989586621680602268"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Music] -&gt; Music) -&gt; [Music] -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Rhythm (Duration -&gt; Music) -&gt; Music)
-&gt; [Rhythm (Duration -&gt; Music)] -&gt; [Music]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm (Duration -&gt; Music) -&gt; Music
</span><a href="#local-6989586621680602297"><span class="hs-identifier hs-var">renderBarMusic</span></a></span><span> </span><span class="annot"><span class="annottext">[Rhythm (Duration -&gt; Music)]
</span><a href="#local-6989586621680602268"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-1541"></span><span>            </span><span class="annot"><a href="#local-6989586621680602275"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Tuplet"><span class="hs-identifier hs-type">Tuplet</span></a></span><span> </span><span id="local-6989586621680602267"><span class="annot"><span class="annottext">m :: Duration
</span><a href="#local-6989586621680602267"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621680602266"><span class="annot"><span class="annottext">r :: Rhythm (Duration -&gt; Music)
</span><a href="#local-6989586621680602266"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#tuplet"><span class="hs-identifier hs-var">MusicXml.tuplet</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602264"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602263"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rhythm (Duration -&gt; Music) -&gt; Music
</span><a href="#local-6989586621680602297"><span class="hs-identifier hs-var">renderBarMusic</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm (Duration -&gt; Music)
</span><a href="#local-6989586621680602266"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1542"></span><span>              </span><span class="hs-keyword">where</span><span>
</span><span id="line-1543"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621680602263"><span class="annot"><span class="annottext">a :: Int
</span><a href="#local-6989586621680602263"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602264"><span class="annot"><span class="annottext">b :: Int
</span><a href="#local-6989586621680602264"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Int)
-&gt; (Integer -&gt; Int) -&gt; (Integer, Integer) -&gt; (Int, Int)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">((Integer, Integer) -&gt; (Int, Int))
-&gt; (Integer, Integer) -&gt; (Int, Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; (Integer, Integer)
forall a. Ratio a -&gt; (a, a)
</span><a href="Music.Score.Internal.Util.html#unRatio"><span class="hs-identifier hs-var">unRatio</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; (Integer, Integer)) -&gt; Rational -&gt; (Integer, Integer)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Rational
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602267"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1544"></span><span>            </span><span class="annot"><a href="#local-6989586621680602275"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Music
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MusicXML export: (Dotted x) requires x to be (Beat _)&quot;</span></span><span>
</span><span id="line-1545"></span><span>        </span><span class="annot"><a href="#local-6989586621680602272"><span class="hs-identifier hs-type">setDefaultVoice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1546"></span><span>        </span><span id="local-6989586621680602272"><span class="annot"><span class="annottext">setDefaultVoice :: Music -&gt; Music
</span><a href="#local-6989586621680602272"><span class="hs-identifier hs-var hs-var">setDefaultVoice</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#setVoice"><span class="hs-identifier hs-var">MusicXml.setVoice</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span>
</span><span id="line-1547"></span><span>        </span><span class="annot"><a href="#local-6989586621680602282"><span class="hs-identifier hs-type">notateDynamic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#DynamicNotation"><span class="hs-identifier hs-type">DN.DynamicNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1548"></span><span>        </span><span id="local-6989586621680602282"><span class="annot"><span class="annottext">notateDynamic :: DynamicNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602282"><span class="hs-identifier hs-var hs-var">notateDynamic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#DynamicNotation"><span class="hs-identifier hs-type">DN.DynamicNotation</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602262"><span class="annot"><span class="annottext">crescDims :: [CrescDim]
</span><a href="#local-6989586621680602262"><span class="hs-identifier hs-var">crescDims</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602261"><span class="annot"><span class="annottext">level :: Maybe Double
</span><a href="#local-6989586621680602261"><span class="hs-identifier hs-var">level</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1549"></span><span>          </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Internal.Util.html#composed"><span class="hs-identifier hs-var">Music.Score.Internal.Util.composed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CrescDim -&gt; Music -&gt; Music) -&gt; [CrescDim] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">CrescDim -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602260"><span class="hs-identifier hs-var">notateCrescDim</span></a></span><span> </span><span class="annot"><span class="annottext">[CrescDim]
</span><a href="#local-6989586621680602262"><span class="hs-identifier hs-var">crescDims</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>            </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Double -&gt; Music -&gt; Music
forall t. Real t =&gt; Maybe t -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602259"><span class="hs-identifier hs-var">notateLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Double
</span><a href="#local-6989586621680602261"><span class="hs-identifier hs-var">level</span></a></span><span>
</span><span id="line-1551"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1552"></span><span>            </span><span id="local-6989586621680602260"><span class="annot"><span class="annottext">notateCrescDim :: CrescDim -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602260"><span class="hs-identifier hs-var hs-var">notateCrescDim</span></a></span></span><span> </span><span id="local-6989586621680602258"><span class="annot"><span class="annottext">crescDims :: CrescDim
</span><a href="#local-6989586621680602258"><span class="hs-identifier hs-var">crescDims</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CrescDim
</span><a href="#local-6989586621680602258"><span class="hs-identifier hs-var">crescDims</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1553"></span><span>              </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#NoCrescDim"><span class="hs-identifier hs-type">DN.NoCrescDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1554"></span><span>              </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#BeginCresc"><span class="hs-identifier hs-type">DN.BeginCresc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="Data.Music.MusicXml.Simple.html#beginCresc"><span class="hs-identifier hs-var">MusicXml.beginCresc</span></a></span><span>
</span><span id="line-1555"></span><span>              </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#EndCresc"><span class="hs-identifier hs-type">DN.EndCresc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="Data.Music.MusicXml.Simple.html#endCresc"><span class="hs-identifier hs-var">MusicXml.endCresc</span></a></span><span>
</span><span id="line-1556"></span><span>              </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#BeginDim"><span class="hs-identifier hs-type">DN.BeginDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="Data.Music.MusicXml.Simple.html#beginDim"><span class="hs-identifier hs-var">MusicXml.beginDim</span></a></span><span>
</span><span id="line-1557"></span><span>              </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#EndDim"><span class="hs-identifier hs-type">DN.EndDim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="Data.Music.MusicXml.Simple.html#endDim"><span class="hs-identifier hs-var">MusicXml.endDim</span></a></span><span>
</span><span id="line-1558"></span><span>            </span><span class="hs-comment">-- TODO these literals are not so nice...</span><span>
</span><span id="line-1559"></span><span>            </span><span id="local-6989586621680602259"><span class="annot"><span class="annottext">notateLevel :: Maybe t -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602259"><span class="hs-identifier hs-var hs-var">notateLevel</span></a></span></span><span> </span><span id="local-6989586621680602253"><span class="annot"><span class="annottext">showLevel :: Maybe t
</span><a href="#local-6989586621680602253"><span class="hs-identifier hs-var">showLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe t
</span><a href="#local-6989586621680602253"><span class="hs-identifier hs-var">showLevel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1560"></span><span>              </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1561"></span><span>              </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602252"><span class="annot"><span class="annottext">lvl :: t
</span><a href="#local-6989586621680602252"><span class="hs-identifier hs-var">lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1562"></span><span>                </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music -&gt; Music) -&gt; Music -&gt; Music -&gt; Music
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1563"></span><span>                  </span><span class="annot"><span class="annottext">Dynamics -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#dynamic"><span class="hs-identifier hs-var">MusicXml.dynamic</span></a></span><span>
</span><span id="line-1564"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">DynamicsL -&gt; Dynamics
forall a. IsDynamics a =&gt; DynamicsL -&gt; a
</span><a href="Music.Dynamics.Literal.html#fromDynamics"><span class="hs-identifier hs-var">fromDynamics</span></a></span><span>
</span><span id="line-1565"></span><span>                        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(Maybe Double, Maybe Double) -&gt; DynamicsL
</span><a href="Music.Dynamics.Literal.html#DynamicsL"><span class="hs-identifier hs-var">DynamicsL</span></a></span><span>
</span><span id="line-1566"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Maybe Double
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Double
</span><a href="#local-6989586621680602250"><span class="hs-identifier hs-var">fixLevel</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; Double) -&gt; (t -&gt; Double) -&gt; t -&gt; Double
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; Double) -&gt; t -&gt; Double
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680602252"><span class="hs-identifier hs-var">lvl</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Double
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1567"></span><span>                        </span><span class="hs-special">)</span><span>
</span><span id="line-1568"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-1569"></span><span>            </span><span class="annot"><a href="#local-6989586621680602250"><span class="hs-identifier hs-type">fixLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-1570"></span><span>            </span><span id="local-6989586621680602250"><span class="annot"><span class="annottext">fixLevel :: Double -&gt; Double
</span><a href="#local-6989586621680602250"><span class="hs-identifier hs-var hs-var">fixLevel</span></a></span></span><span> </span><span id="local-6989586621680602249"><span class="annot"><span class="annottext">x :: Double
</span><a href="#local-6989586621680602249"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Double
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/integer-gmp-1.0.2.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Integer
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680602249"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="hs-number">0.5</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">0.5</span></span><span>
</span><span id="line-1571"></span><span>        </span><span class="hs-comment">-- DO NOT use rcomposed as notateDynamic returns &quot;mark&quot; order, not application order</span><span>
</span><span id="line-1572"></span><span>        </span><span class="hs-comment">-- rcomposed = composed . reverse</span><span>
</span><span id="line-1573"></span><span>
</span><span id="line-1574"></span><span>        </span><span class="annot"><a href="#local-6989586621680602281"><span class="hs-identifier hs-type">notateArticulation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">AN.ArticulationNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1575"></span><span>        </span><span id="local-6989586621680602281"><span class="annot"><span class="annottext">notateArticulation :: ArticulationNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602281"><span class="hs-identifier hs-var hs-var">notateArticulation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">AN.ArticulationNotation</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602248"><span class="annot"><span class="annottext">slurs :: [Slur]
</span><a href="#local-6989586621680602248"><span class="hs-identifier hs-var">slurs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602247"><span class="annot"><span class="annottext">marks :: [Mark]
</span><a href="#local-6989586621680602247"><span class="hs-identifier hs-var">marks</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1576"></span><span>          </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Internal.Util.html#composed"><span class="hs-identifier hs-var">Music.Score.Internal.Util.composed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Mark -&gt; Music -&gt; Music) -&gt; [Mark] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Mark -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602246"><span class="hs-identifier hs-var">notateMark</span></a></span><span> </span><span class="annot"><span class="annottext">[Mark]
</span><a href="#local-6989586621680602247"><span class="hs-identifier hs-var">marks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1577"></span><span>            </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Music -&gt; Music] -&gt; Music -&gt; Music
forall a. [a -&gt; a] -&gt; a -&gt; a
</span><a href="Music.Score.Internal.Util.html#composed"><span class="hs-identifier hs-var">Music.Score.Internal.Util.composed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Slur -&gt; Music -&gt; Music) -&gt; [Slur] -&gt; [Music -&gt; Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Slur -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602245"><span class="hs-identifier hs-var">notateSlur</span></a></span><span> </span><span class="annot"><span class="annottext">[Slur]
</span><a href="#local-6989586621680602248"><span class="hs-identifier hs-var">slurs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1579"></span><span>            </span><span id="local-6989586621680602246"><span class="annot"><span class="annottext">notateMark :: Mark -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602246"><span class="hs-identifier hs-var hs-var">notateMark</span></a></span></span><span> </span><span id="local-6989586621680602244"><span class="annot"><span class="annottext">mark :: Mark
</span><a href="#local-6989586621680602244"><span class="hs-identifier hs-var">mark</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Mark
</span><a href="#local-6989586621680602244"><span class="hs-identifier hs-var">mark</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1580"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#NoMark"><span class="hs-identifier hs-type">AN.NoMark</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1581"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Staccato"><span class="hs-identifier hs-type">AN.Staccato</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#staccato"><span class="hs-identifier hs-var">MusicXml.staccato</span></a></span><span>
</span><span id="line-1582"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#MoltoStaccato"><span class="hs-identifier hs-type">AN.MoltoStaccato</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#staccatissimo"><span class="hs-identifier hs-var">MusicXml.staccatissimo</span></a></span><span>
</span><span id="line-1583"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Marcato"><span class="hs-identifier hs-type">AN.Marcato</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#strongAccent"><span class="hs-identifier hs-var">MusicXml.strongAccent</span></a></span><span>
</span><span id="line-1584"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Accent"><span class="hs-identifier hs-type">AN.Accent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#accent"><span class="hs-identifier hs-var">MusicXml.accent</span></a></span><span>
</span><span id="line-1585"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#Tenuto"><span class="hs-identifier hs-type">AN.Tenuto</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#tenuto"><span class="hs-identifier hs-var">MusicXml.tenuto</span></a></span><span>
</span><span id="line-1586"></span><span>              </span><span class="hs-comment">-- TODO proper exception</span><span>
</span><span id="line-1587"></span><span>              </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Music -&gt; Music
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;MusicXML export: Unknown articulation mark&quot;</span></span><span>
</span><span id="line-1588"></span><span>            </span><span id="local-6989586621680602245"><span class="annot"><span class="annottext">notateSlur :: Slur -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602245"><span class="hs-identifier hs-var hs-var">notateSlur</span></a></span></span><span> </span><span id="local-6989586621680602238"><span class="annot"><span class="annottext">slurs :: Slur
</span><a href="#local-6989586621680602238"><span class="hs-identifier hs-var">slurs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Slur
</span><a href="#local-6989586621680602238"><span class="hs-identifier hs-var">slurs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1589"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#NoSlur"><span class="hs-identifier hs-type">AN.NoSlur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1590"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#BeginSlur"><span class="hs-identifier hs-type">AN.BeginSlur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#beginSlur"><span class="hs-identifier hs-var">MusicXml.beginSlur</span></a></span><span>
</span><span id="line-1591"></span><span>              </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#EndSlur"><span class="hs-identifier hs-type">AN.EndSlur</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#endSlur"><span class="hs-identifier hs-var">MusicXml.endSlur</span></a></span><span>
</span><span id="line-1592"></span><span>        </span><span class="annot"><a href="#local-6989586621680602285"><span class="hs-identifier hs-type">notateArpeggio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#ArpeggioNotation"><span class="hs-identifier hs-type">ArpeggioNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1593"></span><span>        </span><span id="local-6989586621680602285"><span class="annot"><span class="annottext">notateArpeggio :: ArpeggioNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602285"><span class="hs-identifier hs-var hs-var">notateArpeggio</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602235"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602235"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602235"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1594"></span><span>        </span><span class="annot"><a href="#local-6989586621680602284"><span class="hs-identifier hs-type">notateBreath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BreathNotation"><span class="hs-identifier hs-type">BreathNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1595"></span><span>        </span><span id="local-6989586621680602284"><span class="annot"><span class="annottext">notateBreath :: BreathNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602284"><span class="hs-identifier hs-var hs-var">notateBreath</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602234"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602234"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602234"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1596"></span><span>        </span><span class="annot"><a href="#local-6989586621680602283"><span class="hs-identifier hs-type">notateFermata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Fermata"><span class="hs-identifier hs-type">Fermata</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1597"></span><span>        </span><span id="local-6989586621680602283"><span class="annot"><span class="annottext">notateFermata :: Fermata -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602283"><span class="hs-identifier hs-var hs-var">notateFermata</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602233"><span class="annot"><span class="annottext">x :: Music
</span><a href="#local-6989586621680602233"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602233"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1598"></span><span>        </span><span class="annot"><a href="#local-6989586621680602280"><span class="hs-identifier hs-type">notateTremolo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#TremoloNotation"><span class="hs-identifier hs-type">TremoloNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1599"></span><span>        </span><span id="local-6989586621680602280"><span class="annot"><span class="annottext">notateTremolo :: TremoloNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602280"><span class="hs-identifier hs-var hs-var">notateTremolo</span></a></span></span><span> </span><span id="local-6989586621680602232"><span class="annot"><span class="annottext">n :: TremoloNotation
</span><a href="#local-6989586621680602232"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TremoloNotation
</span><a href="#local-6989586621680602232"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1600"></span><span>          </span><span class="hs-comment">-- TODO optionally use z cross-beam</span><span>
</span><span id="line-1601"></span><span>          </span><span class="hs-comment">-- TODO support multi-pitch</span><span>
</span><span id="line-1602"></span><span>          </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#NoTremolo"><span class="hs-identifier hs-type">NoTremolo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1603"></span><span>          </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#CrossBeamTremolo"><span class="hs-identifier hs-type">CrossBeamTremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680602231"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602231"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#tremolo"><span class="hs-identifier hs-var">MusicXml.tremolo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602231"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1604"></span><span>          </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#CrossBeamTremolo"><span class="hs-identifier hs-type">CrossBeamTremolo</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#tremolo"><span class="hs-identifier hs-var">MusicXml.tremolo</span></a></span><span> </span><span class="annot"><span class="hs-number">3</span></span><span>
</span><span id="line-1605"></span><span>          </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MultiPitchTremolo"><span class="hs-identifier hs-type">MultiPitchTremolo</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1606"></span><span>        </span><span class="annot"><a href="#local-6989586621680602279"><span class="hs-identifier hs-type">notateText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1607"></span><span>        </span><span id="local-6989586621680602279"><span class="annot"><span class="annottext">notateText :: [String] -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602279"><span class="hs-identifier hs-var hs-var">notateText</span></a></span></span><span> </span><span id="local-6989586621680602229"><span class="annot"><span class="annottext">texts :: [String]
</span><a href="#local-6989586621680602229"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621680602228"><span class="annot"><span class="annottext">a :: Music
</span><a href="#local-6989586621680602228"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Music] -&gt; Music
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String -&gt; Music) -&gt; [String] -&gt; [Music]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#text"><span class="hs-identifier hs-var">MusicXml.text</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621680602229"><span class="hs-identifier hs-var">texts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music -&gt; Music
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680602228"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1608"></span><span>        </span><span class="annot"><a href="#local-6989586621680602278"><span class="hs-identifier hs-type">notateHarmonic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#HarmonicNotation"><span class="hs-identifier hs-type">HarmonicNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1609"></span><span>        </span><span id="local-6989586621680602278"><span class="annot"><span class="annottext">notateHarmonic :: HarmonicNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602278"><span class="hs-identifier hs-var hs-var">notateHarmonic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602226"><span class="annot"><span class="annottext">isNat :: Bool
</span><a href="#local-6989586621680602226"><span class="hs-identifier hs-var">isNat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621680602225"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602225"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Int -&gt; Music -&gt; Music
forall p. (Eq p, Num p) =&gt; Bool -&gt; p -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602224"><span class="hs-identifier hs-var">notate</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602226"><span class="hs-identifier hs-var">isNat</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602225"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1610"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1611"></span><span>            </span><span id="local-6989586621680602224"><span class="annot"><span class="annottext">notate :: Bool -&gt; p -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602224"><span class="hs-identifier hs-var hs-var">notate</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1612"></span><span>            </span><span class="annot"><a href="#local-6989586621680602224"><span class="hs-identifier hs-var">notate</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">True</span></a></span><span> </span><span id="local-6989586621680602223"><span class="annot"><span class="annottext">n :: p
</span><a href="#local-6989586621680602223"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p -&gt; Music -&gt; Music
forall p. p -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602222"><span class="hs-identifier hs-var">notateNatural</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680602223"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1613"></span><span>            </span><span class="annot"><a href="#local-6989586621680602224"><span class="hs-identifier hs-var">notate</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">False</span></a></span><span> </span><span id="local-6989586621680602221"><span class="annot"><span class="annottext">n :: p
</span><a href="#local-6989586621680602221"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p -&gt; Music -&gt; Music
forall (cat :: * -&gt; * -&gt; *) p a. Category cat =&gt; p -&gt; cat a a
</span><a href="#local-6989586621680602220"><span class="hs-identifier hs-var">notateArtificial</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680602221"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1614"></span><span>            </span><span class="hs-comment">-- notateNatural n = Xml.harmonic -- openString?</span><span>
</span><span id="line-1615"></span><span>            </span><span id="local-6989586621680602222"><span class="annot"><span class="annottext">notateNatural :: p -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602222"><span class="hs-identifier hs-var hs-var">notateNatural</span></a></span></span><span> </span><span id="local-6989586621680602219"><span class="annot"><span class="annottext">_n :: p
</span><a href="#local-6989586621680602219"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoteHead -&gt; Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#setNoteHead"><span class="hs-identifier hs-var">MusicXml.setNoteHead</span></a></span><span> </span><span class="annot"><span class="annottext">NoteHead
</span><a href="Data.Music.MusicXml.Score.html#DiamondNoteHead"><span class="hs-identifier hs-var">MusicXml.DiamondNoteHead</span></a></span><span>
</span><span id="line-1616"></span><span>            </span><span class="hs-comment">-- Most programs do not recognize the harmonic tag</span><span>
</span><span id="line-1617"></span><span>            </span><span class="hs-comment">-- We set a single diamond notehead instead, which can be manually replaced</span><span>
</span><span id="line-1618"></span><span>            </span><span id="local-6989586621680602220"><span class="annot"><span class="annottext">notateArtificial :: p -&gt; cat a a
</span><a href="#local-6989586621680602220"><span class="hs-identifier hs-var hs-var">notateArtificial</span></a></span></span><span> </span><span id="local-6989586621680602216"><span class="annot"><span class="annottext">_n :: p
</span><a href="#local-6989586621680602216"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">cat a a
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-1619"></span><span>        </span><span class="annot"><a href="#local-6989586621680602277"><span class="hs-identifier hs-type">notateSlide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SlideNotation"><span class="hs-identifier hs-type">SlideNotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1620"></span><span>        </span><span id="local-6989586621680602277"><span class="annot"><span class="annottext">notateSlide :: SlideNotation -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602277"><span class="hs-identifier hs-var hs-var">notateSlide</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621680602215"><span class="annot"><span class="annottext">eg :: SmallOrLarge
</span><a href="#local-6989586621680602215"><span class="hs-identifier hs-var">eg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602214"><span class="annot"><span class="annottext">es :: SmallOrLarge
</span><a href="#local-6989586621680602214"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602213"><span class="annot"><span class="annottext">bg :: SmallOrLarge
</span><a href="#local-6989586621680602213"><span class="hs-identifier hs-var">bg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602212"><span class="annot"><span class="annottext">bs :: SmallOrLarge
</span><a href="#local-6989586621680602212"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602211"><span class="hs-identifier hs-var">notate</span></a></span><span>
</span><span id="line-1621"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1622"></span><span>            </span><span id="local-6989586621680602211"><span class="annot"><span class="annottext">notate :: Music -&gt; Music
</span><a href="#local-6989586621680602211"><span class="hs-identifier hs-var hs-var">notate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602210"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602209"><span class="hs-identifier hs-var">nes</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602208"><span class="hs-identifier hs-var">nbg</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="#local-6989586621680602207"><span class="hs-identifier hs-var">nbs</span></a></span><span>
</span><span id="line-1623"></span><span>            </span><span id="local-6989586621680602210"><span class="annot"><span class="annottext">neg :: Music -&gt; Music
</span><a href="#local-6989586621680602210"><span class="hs-identifier hs-var hs-var">neg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SmallOrLarge -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var">getAny</span></a></span><span> </span><span class="annot"><span class="annottext">SmallOrLarge
</span><a href="#local-6989586621680602215"><span class="hs-identifier hs-var">eg</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#endGliss"><span class="hs-identifier hs-var">MusicXml.endGliss</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1624"></span><span>            </span><span id="local-6989586621680602209"><span class="annot"><span class="annottext">nes :: Music -&gt; Music
</span><a href="#local-6989586621680602209"><span class="hs-identifier hs-var hs-var">nes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SmallOrLarge -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var">getAny</span></a></span><span> </span><span class="annot"><span class="annottext">SmallOrLarge
</span><a href="#local-6989586621680602214"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#endSlide"><span class="hs-identifier hs-var">MusicXml.endSlide</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1625"></span><span>            </span><span id="local-6989586621680602208"><span class="annot"><span class="annottext">nbg :: Music -&gt; Music
</span><a href="#local-6989586621680602208"><span class="hs-identifier hs-var hs-var">nbg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SmallOrLarge -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var">getAny</span></a></span><span> </span><span class="annot"><span class="annottext">SmallOrLarge
</span><a href="#local-6989586621680602213"><span class="hs-identifier hs-var">bg</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#beginGliss"><span class="hs-identifier hs-var">MusicXml.beginGliss</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1626"></span><span>            </span><span id="local-6989586621680602207"><span class="annot"><span class="annottext">nbs :: Music -&gt; Music
</span><a href="#local-6989586621680602207"><span class="hs-identifier hs-var hs-var">nbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SmallOrLarge -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var">getAny</span></a></span><span> </span><span class="annot"><span class="annottext">SmallOrLarge
</span><a href="#local-6989586621680602212"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#beginSlide"><span class="hs-identifier hs-var">MusicXml.beginSlide</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1627"></span><span>        </span><span class="annot"><a href="#local-6989586621680602276"><span class="hs-identifier hs-type">notateTie</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Ties"><span class="hs-identifier hs-type">Ties</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.Score.html#Music"><span class="hs-identifier hs-type">MusicXml.Music</span></a></span><span>
</span><span id="line-1628"></span><span>        </span><span id="local-6989586621680602276"><span class="annot"><span class="annottext">notateTie :: (SmallOrLarge, SmallOrLarge) -&gt; Music -&gt; Music
</span><a href="#local-6989586621680602276"><span class="hs-identifier hs-var hs-var">notateTie</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602201"><span class="annot"><span class="annottext">ta :: Bool
</span><a href="#local-6989586621680602201"><span class="hs-identifier hs-var">ta</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621680602200"><span class="annot"><span class="annottext">tb :: Bool
</span><a href="#local-6989586621680602200"><span class="hs-identifier hs-var">tb</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1629"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602201"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602200"><span class="hs-identifier hs-var">tb</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#beginTie"><span class="hs-identifier hs-var">MusicXml.beginTie</span></a></span><span> </span><span class="annot"><span class="annottext">(Music -&gt; Music) -&gt; (Music -&gt; Music) -&gt; Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#endTie"><span class="hs-identifier hs-var">MusicXml.endTie</span></a></span><span> </span><span class="hs-comment">-- TODO flip order?</span><span>
</span><span id="line-1630"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602200"><span class="hs-identifier hs-var">tb</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#beginTie"><span class="hs-identifier hs-var">MusicXml.beginTie</span></a></span><span>
</span><span id="line-1631"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680602201"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
</span><a href="Data.Music.MusicXml.Simple.html#endTie"><span class="hs-identifier hs-var">MusicXml.endTie</span></a></span><span>
</span><span id="line-1632"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Music -&gt; Music
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1633"></span><span>
</span><span id="line-1634"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-1635"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-1636"></span><span>
</span><span id="line-1637"></span><span class="hs-keyword">type</span><span> </span><span id="MidiInstr"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiInstr"><span class="hs-identifier hs-var">MidiInstr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.Channel</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Preset</span></span><span class="hs-special">)</span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span class="hs-keyword">data</span><span> </span><span id="MidiScore"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiScore"><span class="hs-identifier hs-var">MidiScore</span></a></span></span><span> </span><span id="local-6989586621680603895"><span class="annot"><a href="#local-6989586621680603895"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MidiScore"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiScore"><span class="hs-identifier hs-var">MidiScore</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiInstr"><span class="hs-identifier hs-type">MidiInstr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602190"><span id="local-6989586621680602192"><span class="annot"><span class="annottext">a -&gt; MidiScore b -&gt; MidiScore a
(a -&gt; b) -&gt; MidiScore a -&gt; MidiScore b
(forall a b. (a -&gt; b) -&gt; MidiScore a -&gt; MidiScore b)
-&gt; (forall a b. a -&gt; MidiScore b -&gt; MidiScore a)
-&gt; Functor MidiScore
forall a b. a -&gt; MidiScore b -&gt; MidiScore a
forall a b. (a -&gt; b) -&gt; MidiScore a -&gt; MidiScore b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; MidiScore b -&gt; MidiScore a
$c&lt;$ :: forall a b. a -&gt; MidiScore b -&gt; MidiScore a
fmap :: (a -&gt; b) -&gt; MidiScore a -&gt; MidiScore b
$cfmap :: forall a b. (a -&gt; b) -&gt; MidiScore a -&gt; MidiScore b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>
</span><span id="line-1642"></span><span class="hs-keyword">type</span><span> </span><span id="MidiExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiExportM"><span class="hs-identifier hs-var">MidiExportM</span></a></span></span><span> </span><span id="local-6989586621680602189"><span class="annot"><a href="#local-6989586621680602189"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-type">MonadLog</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602189"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602189"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1643"></span><span>
</span><span id="line-1644"></span><span class="hs-comment">-- | Convert the given music to a Standard MIDI File.</span><span>
</span><span id="line-1645"></span><span class="hs-comment">--</span><span>
</span><span id="line-1646"></span><span class="hs-comment">-- * A MIDI file is a number of tracks to be composed in parallel.</span><span>
</span><span id="line-1647"></span><span class="hs-comment">--</span><span>
</span><span id="line-1648"></span><span class="hs-comment">-- * Each track consists of timestamped messages. Most messages are one of the</span><span>
</span><span id="line-1649"></span><span class="hs-comment">-- &quot;normal&quot; ones (on, off, pressure, control change, program change, pitch</span><span>
</span><span id="line-1650"></span><span class="hs-comment">-- wheel), each assigned to a channel which is a number in [0..15]. While MIDI</span><span>
</span><span id="line-1651"></span><span class="hs-comment">-- files are unlimited in the number of tracks, we are limited to 16 channels</span><span>
</span><span id="line-1652"></span><span class="hs-comment">-- because that's how MIDI messages work (MIDI messages predate Standard MIDI</span><span>
</span><span id="line-1653"></span><span class="hs-comment">-- Files).</span><span>
</span><span id="line-1654"></span><span class="hs-comment">--</span><span>
</span><span id="line-1655"></span><span class="hs-comment">-- * We do not emit any SysEx messages.</span><span>
</span><span id="line-1656"></span><span class="hs-comment">--</span><span>
</span><span id="line-1657"></span><span class="hs-comment">-- * We do not render many meta messages, only the ones required for correct</span><span>
</span><span id="line-1658"></span><span class="hs-comment">-- play. E.g. no key signature changes etc (instead we transform the delta</span><span>
</span><span id="line-1659"></span><span class="hs-comment">-- times before rendering to MIDI). The MIDI backend is meant to be used for</span><span>
</span><span id="line-1660"></span><span class="hs-comment">-- sound rendering only, *not* as a logical/score-level export format.</span><span>
</span><span id="line-1661"></span><span class="hs-comment">--</span><span>
</span><span id="line-1662"></span><span class="hs-comment">-- * For now we do not support more than 16 sounds types. We only support one</span><span>
</span><span id="line-1663"></span><span class="hs-comment">-- sound per instrument (the &quot;standard&quot; one, e.g. arco for violin). We perform</span><span>
</span><span id="line-1664"></span><span class="hs-comment">-- no reallocation of channels, instead we check how many instruments there are in</span><span>
</span><span id="line-1665"></span><span class="hs-comment">-- the given score and fail if there are more than 15 (we follow convention in</span><span>
</span><span id="line-1666"></span><span class="hs-comment">-- reserving channel 10 for percussion, which we currently don't render). We</span><span>
</span><span id="line-1667"></span><span class="hs-comment">-- then allocate a channel for each sound.</span><span>
</span><span id="line-1668"></span><span class="hs-comment">--</span><span>
</span><span id="line-1669"></span><span class="hs-comment">-- * TODO more than 15 sounds, non GM sounds, not just default instrument sound.</span><span>
</span><span id="line-1670"></span><span id="local-6989586621680602188"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toMidi"><span class="hs-identifier hs-type">toMidi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiExportM"><span class="hs-identifier hs-type">MidiExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602188"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp"><span class="hs-identifier hs-type">Asp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680602188"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Midi</span></span></span><span>
</span><span id="line-1671"></span><span id="toMidi"><span class="annot"><span class="annottext">toMidi :: Asp -&gt; m Midi
</span><a href="Music.Score.Export.StandardNotation.html#toMidi"><span class="hs-identifier hs-var hs-var">toMidi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MidiScore Asp1a -&gt; Midi) -&gt; m (MidiScore Asp1a) -&gt; m Midi
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MidiScore (Score Message) -&gt; Midi
</span><a href="Music.Score.Export.StandardNotation.html#finalizeExport"><span class="hs-identifier hs-var">finalizeExport</span></a></span><span> </span><span class="annot"><span class="annottext">(MidiScore (Score Message) -&gt; Midi)
-&gt; (MidiScore Asp1a -&gt; MidiScore (Score Message))
-&gt; MidiScore Asp1a
-&gt; Midi
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Asp1a -&gt; Score Message)
-&gt; MidiScore Asp1a -&gt; MidiScore (Score Message)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Asp1a -&gt; Score Message
</span><a href="Music.Score.Export.StandardNotation.html#exportNote"><span class="hs-identifier hs-var">exportNote</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (MidiScore Asp1a) -&gt; m Midi)
-&gt; (Asp -&gt; m (MidiScore Asp1a)) -&gt; Asp -&gt; m Midi
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; m (MidiScore Asp1a)
forall (m :: * -&gt; *).
MidiExportM m =&gt;
Score Asp1a -&gt; m (MidiScore Asp1a)
</span><a href="Music.Score.Export.StandardNotation.html#exportScore"><span class="hs-identifier hs-var">exportScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Score Asp1a -&gt; m (MidiScore Asp1a))
-&gt; (Asp -&gt; Score Asp1a) -&gt; Asp -&gt; m (MidiScore Asp1a)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Asp -&gt; Score Asp1a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m (Maybe a) -&gt; m a
</span><span class="hs-identifier hs-var">mcatMaybes</span></span><span>
</span><span id="line-1672"></span><span>
</span><span id="line-1673"></span><span id="local-6989586621680603906"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#exportScore"><span class="hs-identifier hs-type">exportScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiExportM"><span class="hs-identifier hs-type">MidiExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603906"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603906"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiScore"><span class="hs-identifier hs-type">MidiScore</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1674"></span><span id="exportScore"><span class="annot"><span class="annottext">exportScore :: Score Asp1a -&gt; m (MidiScore Asp1a)
</span><a href="Music.Score.Export.StandardNotation.html#exportScore"><span class="hs-identifier hs-var hs-var">exportScore</span></a></span></span><span> </span><span id="local-6989586621680602183"><span class="annot"><span class="annottext">xs :: Score Asp1a
</span><a href="#local-6989586621680602183"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1675"></span><span>  </span><span id="local-6989586621680602182"><span class="annot"><span class="annottext">PartAllocation
</span><a href="#local-6989586621680602182"><span class="hs-identifier hs-var">pa</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PartAllocation"><span class="hs-identifier hs-type">PartAllocation</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set Instrument -&gt; m PartAllocation
forall (m :: * -&gt; *).
MidiExportM m =&gt;
Set Instrument -&gt; m PartAllocation
</span><a href="Music.Score.Export.StandardNotation.html#allocateParts"><span class="hs-identifier hs-var">allocateParts</span></a></span><span> </span><span class="annot"><span class="annottext">(Set Instrument -&gt; m PartAllocation)
-&gt; Set Instrument -&gt; m PartAllocation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Instrument] -&gt; Set Instrument
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([Instrument] -&gt; Set Instrument) -&gt; [Instrument] -&gt; Set Instrument
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Part, Score Asp1a) -&gt; Instrument)
-&gt; [(Part, Score Asp1a)] -&gt; [Instrument]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Instrument Part Instrument -&gt; Part -&gt; Instrument
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Instrument Part Instrument
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span> </span><span class="annot"><span class="annottext">(Part -&gt; Instrument)
-&gt; ((Part, Score Asp1a) -&gt; Part)
-&gt; (Part, Score Asp1a)
-&gt; Instrument
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Part, Score Asp1a) -&gt; Part
forall a b. (a, b) -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Part, Score Asp1a)]
</span><a href="#local-6989586621680602178"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-1676"></span><span>  </span><span class="annot"><span class="annottext">MidiScore Asp1a -&gt; m (MidiScore Asp1a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(MidiScore Asp1a -&gt; m (MidiScore Asp1a))
-&gt; MidiScore Asp1a -&gt; m (MidiScore Asp1a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[((Int, Int), Score Asp1a)] -&gt; MidiScore Asp1a
forall a. [((Int, Int), Score a)] -&gt; MidiScore a
</span><a href="Music.Score.Export.StandardNotation.html#MidiScore"><span class="hs-identifier hs-var">MidiScore</span></a></span><span> </span><span class="annot"><span class="annottext">([((Int, Int), Score Asp1a)] -&gt; MidiScore Asp1a)
-&gt; [((Int, Int), Score Asp1a)] -&gt; MidiScore Asp1a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1677"></span><span>    </span><span class="annot"><span class="annottext">((Part, Score Asp1a) -&gt; ((Int, Int), Score Asp1a))
-&gt; [(Part, Score Asp1a)] -&gt; [((Int, Int), Score Asp1a)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">map</span></a></span><span>
</span><span id="line-1678"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680602177"><span class="annot"><span class="annottext">p :: Part
</span><a href="#local-6989586621680602177"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602176"><span class="annot"><span class="annottext">sc :: Score Asp1a
</span><a href="#local-6989586621680602176"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PartAllocation -&gt; Part -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#getMidiChannel"><span class="hs-identifier hs-var">getMidiChannel</span></a></span><span> </span><span class="annot"><span class="annottext">PartAllocation
</span><a href="#local-6989586621680602182"><span class="hs-identifier hs-var">pa</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680602177"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PartAllocation -&gt; Part -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#getMidiProgram"><span class="hs-identifier hs-var">getMidiProgram</span></a></span><span> </span><span class="annot"><span class="annottext">PartAllocation
</span><a href="#local-6989586621680602182"><span class="hs-identifier hs-var">pa</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680602177"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680602176"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1679"></span><span>      </span><span class="annot"><span class="annottext">[(Part, Score Asp1a)]
</span><a href="#local-6989586621680602178"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-1680"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1681"></span><span>    </span><span class="annot"><a href="#local-6989586621680602178"><span class="hs-identifier hs-type">ys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1682"></span><span>    </span><span id="local-6989586621680602178"><span class="annot"><span class="annottext">ys :: [(Part, Score Asp1a)]
</span><a href="#local-6989586621680602178"><span class="hs-identifier hs-var hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1683"></span><span>      </span><span class="annot"><span class="annottext">Score Asp1a -&gt; [(Part, Score Asp1a)]
forall a.
(Ord (Part a), HasPart' a) =&gt;
Score a -&gt; [(Part a, Score a)]
</span><a href="Music.Score.Part.html#extractPartsWithInfo"><span class="hs-identifier hs-var">Music.Score.Part.extractPartsWithInfo</span></a></span><span>
</span><span id="line-1684"></span><span>        </span><span class="annot"><span class="annottext">(Score Asp1a -&gt; [(Part, Score Asp1a)])
-&gt; Score Asp1a -&gt; [(Part, Score Asp1a)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; Score Asp1a
</span><a href="#local-6989586621680602172"><span class="hs-identifier hs-var">fixTempo</span></a></span><span>
</span><span id="line-1685"></span><span>        </span><span class="annot"><span class="annottext">(Score Asp1a -&gt; Score Asp1a) -&gt; Score Asp1a -&gt; Score Asp1a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; Score Asp1a
forall a. Score a -&gt; Score a
</span><a href="Music.Time.Score.html#normalizeScore"><span class="hs-identifier hs-var">normalizeScore</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680602183"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1686"></span><span>    </span><span class="hs-comment">-- TODO We actually want to extract *all* tempo changes and transform the score appropriately</span><span>
</span><span id="line-1687"></span><span>    </span><span class="hs-comment">-- For the time being, we assume the whole score has the same tempo</span><span>
</span><span id="line-1688"></span><span>    </span><span class="annot"><a href="#local-6989586621680602172"><span class="hs-identifier hs-type">fixTempo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span>
</span><span id="line-1689"></span><span>    </span><span id="local-6989586621680602172"><span class="annot"><span class="annottext">fixTempo :: Score Asp1a -&gt; Score Asp1a
</span><a href="#local-6989586621680602172"><span class="hs-identifier hs-var hs-var">fixTempo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Score Asp1a -&gt; Score Asp1a
forall a. Transformable a =&gt; Duration -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#stretch"><span class="hs-identifier hs-var">stretch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TempoMark -&gt; Duration
</span><a href="Music.Score.Meta.Tempo.html#tempoToDuration"><span class="hs-identifier hs-var">Music.Score.Meta.Tempo.tempoToDuration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Score Asp1a -&gt; TempoMark
forall a b. (HasMeta a, HasPosition a, AttributeClass b) =&gt; a -&gt; b
</span><a href="Music.Score.Meta.html#metaAtStart"><span class="hs-identifier hs-var">Music.Score.Meta.metaAtStart</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680602183"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1690"></span><span>
</span><span id="line-1691"></span><span class="hs-keyword">type</span><span> </span><span id="PartAllocation"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PartAllocation"><span class="hs-identifier hs-var">PartAllocation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Instrument.html#Instrument"><span class="hs-identifier hs-type">Instrument</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.Preset</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Channel</span></span><span class="hs-special">)</span><span>
</span><span id="line-1692"></span><span>
</span><span id="line-1693"></span><span class="hs-comment">-- TODO if &gt;15 sounds, allocate, otherwise set everything to piano and log error</span><span>
</span><span id="line-1694"></span><span id="local-6989586621680603898"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#allocateParts"><span class="hs-identifier hs-type">allocateParts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiExportM"><span class="hs-identifier hs-type">MidiExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Data.Set.Set</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Instrument.html#Instrument"><span class="hs-identifier hs-type">Instrument</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PartAllocation"><span class="hs-identifier hs-type">PartAllocation</span></a></span></span><span>
</span><span id="line-1695"></span><span id="allocateParts"><span class="annot"><span class="annottext">allocateParts :: Set Instrument -&gt; m PartAllocation
</span><a href="Music.Score.Export.StandardNotation.html#allocateParts"><span class="hs-identifier hs-var hs-var">allocateParts</span></a></span></span><span> </span><span id="local-6989586621680602167"><span class="annot"><span class="annottext">ks' :: Set Instrument
</span><a href="#local-6989586621680602167"><span class="hs-identifier hs-var">ks'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1696"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602166"><span class="annot"><span class="annottext">ks :: [Instrument]
</span><a href="#local-6989586621680602166"><span class="hs-identifier hs-var hs-var">ks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Instrument -&gt; [Instrument]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set Instrument
</span><a href="#local-6989586621680602167"><span class="hs-identifier hs-var">ks'</span></a></span><span>
</span><span id="line-1697"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Instrument] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Instrument]
</span><a href="#local-6989586621680602166"><span class="hs-identifier hs-var">ks</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="hs-number">15</span></span><span>
</span><span id="line-1698"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1699"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Warning: Too many sounds: could not allocate more than 15 MIDI channels&quot;</span></span><span>
</span><span id="line-1700"></span><span>      </span><span class="annot"><span class="annottext">PartAllocation -&gt; m PartAllocation
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">PartAllocation
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1701"></span><span>    </span><span class="hs-keyword">else</span><span>
</span><span id="line-1702"></span><span>      </span><span class="annot"><span class="annottext">PartAllocation -&gt; m PartAllocation
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(PartAllocation -&gt; m PartAllocation)
-&gt; PartAllocation -&gt; m PartAllocation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1703"></span><span>        </span><span class="annot"><span class="annottext">[(Instrument, (Int, Int))] -&gt; PartAllocation
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.fromList</span></a></span><span>
</span><span id="line-1704"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(Instrument -&gt; Int -&gt; (Instrument, (Int, Int)))
-&gt; [Instrument] -&gt; [Int] -&gt; [(Instrument, (Int, Int))]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span>
</span><span id="line-1705"></span><span>              </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680602164"><span class="annot"><span class="annottext">p :: Instrument
</span><a href="#local-6989586621680602164"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680602163"><span class="annot"><span class="annottext">ch :: Int
</span><a href="#local-6989586621680602163"><span class="hs-identifier hs-var">ch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Instrument
</span><a href="#local-6989586621680602164"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Int) -&gt; Maybe Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; Maybe Int
</span><a href="Music.Parts.Instrument.html#toMidiProgram"><span class="hs-identifier hs-var">Music.Parts.toMidiProgram</span></a></span><span> </span><span class="annot"><span class="annottext">Instrument
</span><a href="#local-6989586621680602164"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602163"><span class="hs-identifier hs-var">ch</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1706"></span><span>              </span><span class="annot"><span class="annottext">[Instrument]
</span><a href="#local-6989586621680602166"><span class="hs-identifier hs-var">ks</span></a></span><span>
</span><span id="line-1707"></span><span>              </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="hs-number">8</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Int] -&gt; [Int]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="hs-number">15</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1708"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-1709"></span><span>
</span><span id="line-1710"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#getMidiProgram"><span class="hs-identifier hs-type">getMidiProgram</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PartAllocation"><span class="hs-identifier hs-type">PartAllocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Preset</span></span><span>
</span><span id="line-1711"></span><span id="getMidiProgram"><span class="annot"><span class="annottext">getMidiProgram :: PartAllocation -&gt; Part -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#getMidiProgram"><span class="hs-identifier hs-var hs-var">getMidiProgram</span></a></span></span><span> </span><span id="local-6989586621680602161"><span class="annot"><span class="annottext">x :: PartAllocation
</span><a href="#local-6989586621680602161"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602160"><span class="annot"><span class="annottext">p :: Part
</span><a href="#local-6989586621680602160"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; PartAllocation -&gt; Maybe (Int, Int)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Instrument Part Instrument -&gt; Part -&gt; Instrument
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Instrument Part Instrument
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680602160"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PartAllocation
</span><a href="#local-6989586621680602161"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1712"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-1713"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602159"><span class="annot"><span class="annottext">pr :: Int
</span><a href="#local-6989586621680602159"><span class="hs-identifier hs-var">pr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602158"><span class="annot"><span class="annottext">_ch :: Int
</span><a href="#local-6989586621680602158"><span class="hs-identifier hs-var">_ch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602159"><span class="hs-identifier hs-var">pr</span></a></span><span>
</span><span id="line-1714"></span><span>
</span><span id="line-1715"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#getMidiChannel"><span class="hs-identifier hs-type">getMidiChannel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#PartAllocation"><span class="hs-identifier hs-type">PartAllocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Channel</span></span><span>
</span><span id="line-1716"></span><span id="getMidiChannel"><span class="annot"><span class="annottext">getMidiChannel :: PartAllocation -&gt; Part -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#getMidiChannel"><span class="hs-identifier hs-var hs-var">getMidiChannel</span></a></span></span><span> </span><span id="local-6989586621680602157"><span class="annot"><span class="annottext">x :: PartAllocation
</span><a href="#local-6989586621680602157"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680602156"><span class="annot"><span class="annottext">p :: Part
</span><a href="#local-6989586621680602156"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; PartAllocation -&gt; Maybe (Int, Int)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Instrument Part Instrument -&gt; Part -&gt; Instrument
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Instrument Part Instrument
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680602156"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PartAllocation
</span><a href="#local-6989586621680602157"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1717"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-1718"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602155"><span class="annot"><span class="annottext">_pr :: Int
</span><a href="#local-6989586621680602155"><span class="hs-identifier hs-var">_pr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602154"><span class="annot"><span class="annottext">ch :: Int
</span><a href="#local-6989586621680602154"><span class="hs-identifier hs-var">ch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602154"><span class="hs-identifier hs-var">ch</span></a></span><span>
</span><span id="line-1719"></span><span>
</span><span id="line-1720"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#finalizeExport"><span class="hs-identifier hs-type">finalizeExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiScore"><span class="hs-identifier hs-type">MidiScore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Midi</span></span><span>
</span><span id="line-1721"></span><span id="finalizeExport"><span class="annot"><span class="annottext">finalizeExport :: MidiScore (Score Message) -&gt; Midi
</span><a href="Music.Score.Export.StandardNotation.html#finalizeExport"><span class="hs-identifier hs-var hs-var">finalizeExport</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiScore"><span class="hs-identifier hs-type">MidiScore</span></a></span><span> </span><span id="local-6989586621680602153"><span class="annot"><span class="annottext">trs :: [((Int, Int), Score (Score Message))]
</span><a href="#local-6989586621680602153"><span class="hs-identifier hs-var">trs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1722"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680602152"><span class="annot"><span class="annottext">controlTrack :: [(a, Message)]
</span><a href="#local-6989586621680602152"><span class="hs-identifier hs-var hs-var">controlTrack</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.TempoChange</span></span><span> </span><span class="annot"><span class="hs-number">1000000</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
forall p. Num p =&gt; p
</span><a href="#local-6989586621680602150"><span class="hs-identifier hs-var">endDelta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Message
</span><span class="hs-identifier hs-var">Midi.TrackEnd</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1723"></span><span>      </span><span id="local-6989586621680602148"><span class="annot"><span class="annottext">mainTracks :: [[(Int, Message)]]
</span><a href="#local-6989586621680602148"><span class="hs-identifier hs-var hs-var">mainTracks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(((Int, Int), Score (Score Message)) -&gt; [(Int, Message)])
-&gt; [((Int, Int), Score (Score Message))] -&gt; [[(Int, Message)]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Int, Int) -&gt; Score Message -&gt; [(Int, Message)])
-&gt; ((Int, Int), Score Message) -&gt; [(Int, Message)]
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Score Message -&gt; [(Int, Message)]
</span><a href="#local-6989586621680602146"><span class="hs-identifier hs-var">translMidiTrack</span></a></span><span> </span><span class="annot"><span class="annottext">(((Int, Int), Score Message) -&gt; [(Int, Message)])
-&gt; (((Int, Int), Score (Score Message))
    -&gt; ((Int, Int), Score Message))
-&gt; ((Int, Int), Score (Score Message))
-&gt; [(Int, Message)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score (Score Message) -&gt; Score Message)
-&gt; ((Int, Int), Score (Score Message))
-&gt; ((Int, Int), Score Message)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Score (Score Message) -&gt; Score Message
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">join</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[((Int, Int), Score (Score Message))]
</span><a href="#local-6989586621680602153"><span class="hs-identifier hs-var">trs</span></a></span><span>
</span><span id="line-1724"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">FileType -&gt; TimeDiv -&gt; [[(Int, Message)]] -&gt; Midi
</span><span class="hs-identifier hs-var">Midi.Midi</span></span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="#local-6989586621680602144"><span class="hs-identifier hs-var">fileType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TimeDiv
</span><span class="hs-identifier hs-var">Midi.TicksPerBeat</span></span><span> </span><span class="annot"><span class="annottext">Int
forall p. Num p =&gt; p
</span><a href="#local-6989586621680602142"><span class="hs-identifier hs-var">divisions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, Message)]
forall a. Num a =&gt; [(a, Message)]
</span><a href="#local-6989586621680602152"><span class="hs-identifier hs-var">controlTrack</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Message)] -&gt; [[(Int, Message)]] -&gt; [[(Int, Message)]]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[[(Int, Message)]]
</span><a href="#local-6989586621680602148"><span class="hs-identifier hs-var">mainTracks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1725"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1726"></span><span>    </span><span class="annot"><a href="#local-6989586621680602146"><span class="hs-identifier hs-type">translMidiTrack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MidiInstr"><span class="hs-identifier hs-type">MidiInstr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Track</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Ticks</span></span><span>
</span><span id="line-1727"></span><span>    </span><span id="local-6989586621680602146"><span class="annot"><span class="annottext">translMidiTrack :: (Int, Int) -&gt; Score Message -&gt; [(Int, Message)]
</span><a href="#local-6989586621680602146"><span class="hs-identifier hs-var hs-var">translMidiTrack</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602139"><span class="annot"><span class="annottext">ch :: Int
</span><a href="#local-6989586621680602139"><span class="hs-identifier hs-var">ch</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602138"><span class="annot"><span class="annottext">p :: Int
</span><a href="#local-6989586621680602138"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1728"></span><span>      </span><span class="annot"><span class="annottext">[(Int, Message)] -&gt; [(Int, Message)]
</span><a href="#local-6989586621680602137"><span class="hs-identifier hs-var">addTrackEnd</span></a></span><span>
</span><span id="line-1729"></span><span>        </span><span class="annot"><span class="annottext">([(Int, Message)] -&gt; [(Int, Message)])
-&gt; (Score Message -&gt; [(Int, Message)])
-&gt; Score Message
-&gt; [(Int, Message)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; [(Int, Message)] -&gt; [(Int, Message)]
</span><a href="Music.Score.Export.StandardNotation.html#setProgramChannel"><span class="hs-identifier hs-var">setProgramChannel</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602139"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602138"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1730"></span><span>        </span><span class="annot"><span class="annottext">([(Int, Message)] -&gt; [(Int, Message)])
-&gt; (Score Message -&gt; [(Int, Message)])
-&gt; Score Message
-&gt; [(Int, Message)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Score Message -&gt; [(Int, Message)]
</span><a href="Music.Score.Export.StandardNotation.html#scoreToMidiTrack"><span class="hs-identifier hs-var">scoreToMidiTrack</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
forall p. Num p =&gt; p
</span><a href="#local-6989586621680602142"><span class="hs-identifier hs-var">divisions</span></a></span><span>
</span><span id="line-1731"></span><span>    </span><span class="hs-comment">-- Each track needs TrackEnd</span><span>
</span><span id="line-1732"></span><span>    </span><span class="hs-comment">-- We place it a long time after last event just in case (necessary?)</span><span>
</span><span id="line-1733"></span><span>    </span><span class="annot"><a href="#local-6989586621680602137"><span class="hs-identifier hs-type">addTrackEnd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1734"></span><span>    </span><span id="local-6989586621680602137"><span class="annot"><span class="annottext">addTrackEnd :: [(Int, Message)] -&gt; [(Int, Message)]
</span><a href="#local-6989586621680602137"><span class="hs-identifier hs-var hs-var">addTrackEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, Message)] -&gt; [(Int, Message)] -&gt; [(Int, Message)]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
forall p. Num p =&gt; p
</span><a href="#local-6989586621680602150"><span class="hs-identifier hs-var">endDelta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Message
</span><span class="hs-identifier hs-var">Midi.TrackEnd</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1735"></span><span>    </span><span class="hs-comment">-- Hardcoded values for Midi export</span><span>
</span><span id="line-1736"></span><span>    </span><span class="hs-comment">-- We always generate MultiTrack (type 1) files with division 1024</span><span>
</span><span id="line-1737"></span><span>    </span><span id="local-6989586621680602144"><span class="annot"><span class="annottext">fileType :: FileType
</span><a href="#local-6989586621680602144"><span class="hs-identifier hs-var hs-var">fileType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileType
</span><span class="hs-identifier hs-var">Midi.MultiTrack</span></span><span>
</span><span id="line-1738"></span><span>    </span><span id="local-6989586621680602142"><span class="annot"><span class="annottext">divisions :: p
</span><a href="#local-6989586621680602142"><span class="hs-identifier hs-var hs-var">divisions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">1024</span></span><span>
</span><span id="line-1739"></span><span>    </span><span id="local-6989586621680602150"><span class="annot"><span class="annottext">endDelta :: p
</span><a href="#local-6989586621680602150"><span class="hs-identifier hs-var hs-var">endDelta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">10000</span></span><span>
</span><span id="line-1740"></span><span>
</span><span id="line-1741"></span><span class="hs-comment">-- | Set MIDI channel and program/preset for a given track. This changes the channel</span><span>
</span><span id="line-1742"></span><span class="hs-comment">-- of all given messages and inserts a single ProgramChange at the beginning.</span><span>
</span><span id="line-1743"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#setProgramChannel"><span class="hs-identifier hs-type">setProgramChannel</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1744"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Midi.Channel</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1745"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Midi.Preset</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1746"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Midi.Track</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Ticks</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1747"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Midi.Track</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Ticks</span></span><span>
</span><span id="line-1748"></span><span id="setProgramChannel"><span class="annot"><span class="annottext">setProgramChannel :: Int -&gt; Int -&gt; [(Int, Message)] -&gt; [(Int, Message)]
</span><a href="Music.Score.Export.StandardNotation.html#setProgramChannel"><span class="hs-identifier hs-var hs-var">setProgramChannel</span></a></span></span><span> </span><span id="local-6989586621680602133"><span class="annot"><span class="annottext">ch :: Int
</span><a href="#local-6989586621680602133"><span class="hs-identifier hs-var">ch</span></a></span></span><span> </span><span id="local-6989586621680602132"><span class="annot"><span class="annottext">prg :: Int
</span><a href="#local-6989586621680602132"><span class="hs-identifier hs-var">prg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.ProgramChange</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602133"><span class="hs-identifier hs-var">ch</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602132"><span class="hs-identifier hs-var">prg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Int, Message)] -&gt; [(Int, Message)] -&gt; [(Int, Message)]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Int, Message)] -&gt; [(Int, Message)])
-&gt; ([(Int, Message)] -&gt; [(Int, Message)])
-&gt; [(Int, Message)]
-&gt; [(Int, Message)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Int, Message) -&gt; (Int, Message))
-&gt; [(Int, Message)] -&gt; [(Int, Message)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Message -&gt; Message) -&gt; (Int, Message) -&gt; (Int, Message)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((Message -&gt; Message) -&gt; (Int, Message) -&gt; (Int, Message))
-&gt; (Message -&gt; Message) -&gt; (Int, Message) -&gt; (Int, Message)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Message -&gt; Message
</span><a href="Music.Score.Export.StandardNotation.html#setChannel"><span class="hs-identifier hs-var">setChannel</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602133"><span class="hs-identifier hs-var">ch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1749"></span><span>
</span><span id="line-1750"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#scoreToMidiTrack"><span class="hs-identifier hs-type">scoreToMidiTrack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Track</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Ticks</span></span><span>
</span><span id="line-1751"></span><span id="scoreToMidiTrack"><span class="annot"><span class="annottext">scoreToMidiTrack :: Duration -&gt; Score Message -&gt; [(Int, Message)]
</span><a href="Music.Score.Export.StandardNotation.html#scoreToMidiTrack"><span class="hs-identifier hs-var hs-var">scoreToMidiTrack</span></a></span></span><span> </span><span id="local-6989586621680602129"><span class="annot"><span class="annottext">divisions :: Duration
</span><a href="#local-6989586621680602129"><span class="hs-identifier hs-var">divisions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Time, Duration, Message) -&gt; (Int, Message))
-&gt; [(Time, Duration, Message)] -&gt; [(Int, Message)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680602128"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680602128"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602127"><span class="annot"><span class="annottext">x :: Message
</span><a href="#local-6989586621680602127"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; Int
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680602128"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Diff Time
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Duration -&gt; Duration
forall v s. (VectorSpace v, s ~ Scalar v) =&gt; v -&gt; s -&gt; v
</span><span class="hs-operator hs-var">^*</span></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680602129"><span class="hs-identifier hs-var">divisions</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Message
</span><a href="#local-6989586621680602127"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Time, Duration, Message)] -&gt; [(Int, Message)])
-&gt; (Score Message -&gt; [(Time, Duration, Message)])
-&gt; Score Message
-&gt; [(Int, Message)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(Time, Duration, Message)] -&gt; [(Time, Duration, Message)]
forall b. [(Time, Duration, b)] -&gt; [(Time, Duration, b)]
</span><a href="Music.Score.Export.StandardNotation.html#toRelative"><span class="hs-identifier hs-var">toRelative</span></a></span><span> </span><span class="annot"><span class="annottext">([(Time, Duration, Message)] -&gt; [(Time, Duration, Message)])
-&gt; (Score Message -&gt; [(Time, Duration, Message)])
-&gt; Score Message
-&gt; [(Time, Duration, Message)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Score Message
-&gt; Getting
     [(Time, Duration, Message)]
     (Score Message)
     [(Time, Duration, Message)]
-&gt; [(Time, Duration, Message)]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Time, Duration, Message)]
  (Score Message)
  [(Time, Duration, Message)]
forall a b.
Lens
  (Score a) (Score b) [(Time, Duration, a)] [(Time, Duration, b)]
</span><a href="Music.Time.Score.html#triples"><span class="hs-identifier hs-var">triples</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1752"></span><span>
</span><span id="line-1753"></span><span id="local-6989586621680603868"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toRelative"><span class="hs-identifier hs-type">toRelative</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603868"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603868"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1754"></span><span id="toRelative"><span class="annot"><span class="annottext">toRelative :: [(Time, Duration, b)] -&gt; [(Time, Duration, b)]
</span><a href="Music.Score.Export.StandardNotation.html#toRelative"><span class="hs-identifier hs-var hs-var">toRelative</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time, [(Time, Duration, b)]) -&gt; [(Time, Duration, b)]
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Time, [(Time, Duration, b)]) -&gt; [(Time, Duration, b)])
-&gt; ([(Time, Duration, b)] -&gt; (Time, [(Time, Duration, b)]))
-&gt; [(Time, Duration, b)]
-&gt; [(Time, Duration, b)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Time -&gt; (Time, Duration, b) -&gt; (Time, (Time, Duration, b)))
-&gt; Time -&gt; [(Time, Duration, b)] -&gt; (Time, [(Time, Duration, b)])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.mapAccumL</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; (Time, Duration, b) -&gt; (Time, (Time, Duration, b))
forall a p b c.
(Num a, AffineSpace a, AffineSpace p, Diff p ~ Diff a) =&gt;
p -&gt; (p, b, c) -&gt; (p, (a, b, c))
</span><a href="#local-6989586621680602122"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-1755"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1756"></span><span>    </span><span id="local-6989586621680602122"><span class="annot"><span class="annottext">g :: p -&gt; (p, b, c) -&gt; (p, (a, b, c))
</span><a href="#local-6989586621680602122"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621680602121"><span class="annot"><span class="annottext">now :: p
</span><a href="#local-6989586621680602121"><span class="hs-identifier hs-var">now</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602120"><span class="annot"><span class="annottext">t :: p
</span><a href="#local-6989586621680602120"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602119"><span class="annot"><span class="annottext">d :: b
</span><a href="#local-6989586621680602119"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602118"><span class="annot"><span class="annottext">x :: c
</span><a href="#local-6989586621680602118"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680602120"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Diff a -&gt; a
forall p. AffineSpace p =&gt; p -&gt; Diff p -&gt; p
</span><span class="hs-operator hs-var">.+^</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680602120"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">p -&gt; p -&gt; Diff p
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680602121"><span class="hs-identifier hs-var">now</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680602119"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680602118"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1757"></span><span>
</span><span id="line-1758"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#exportNote"><span class="hs-identifier hs-type">exportNote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span>
</span><span id="line-1759"></span><span class="hs-comment">-- TODO make use of SlideT/HarmonicT/TextT/ColorT/TremoloT information</span><span>
</span><span id="line-1760"></span><span class="hs-comment">-- For now we throw all of this away using 'snd'</span><span>
</span><span id="line-1761"></span><span class="hs-comment">--</span><span>
</span><span id="line-1762"></span><span class="hs-comment">-- Arguably these should be retought, see $minorAspect in TODO.md</span><span>
</span><span id="line-1763"></span><span id="exportNote"><span class="annot"><span class="annottext">exportNote :: Asp1a -&gt; Score Message
</span><a href="Music.Score.Export.StandardNotation.html#exportNote"><span class="hs-identifier hs-var hs-var">exportNote</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Part.html#PartT"><span class="hs-identifier hs-type">PartT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">((),
 TechniqueT
   SomeTechnique
   (ArticulationT Articulation (DynamicT Dynamics Pitch)))
-&gt; TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics Pitch))
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(((),
  TechniqueT
    SomeTechnique
    (ArticulationT Articulation (DynamicT Dynamics Pitch)))
 -&gt; TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch)))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; ((),
        TechniqueT
          SomeTechnique
          (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics Pitch))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SlideT
  (TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics Pitch)))
-&gt; ((),
    TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch)))
forall a. SlideT a -&gt; ((), a)
</span><a href="Music.Score.Slide.html#runSlideT"><span class="hs-identifier hs-var">runSlideT</span></a></span><span> </span><span class="annot"><span class="annottext">(SlideT
   (TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch)))
 -&gt; ((),
     TechniqueT
       SomeTechnique
       (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; ((),
    TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch)))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Harmonics,
 SlideT
   (TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics Pitch)))
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Harmonics,
  SlideT
    (TechniqueT
       SomeTechnique
       (ArticulationT Articulation (DynamicT Dynamics Pitch))))
 -&gt; SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; (Harmonics,
        SlideT
          (TechniqueT
             SomeTechnique
             (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics Pitch)))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HarmonicT
  (SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; (Harmonics,
    SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch))))
forall a. HarmonicT a -&gt; (Harmonics, a)
</span><a href="Music.Score.Harmonics.html#runHarmonicT"><span class="hs-identifier hs-var">runHarmonicT</span></a></span><span> </span><span class="annot"><span class="annottext">(HarmonicT
   (SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch))))
 -&gt; (Harmonics,
     SlideT
       (TechniqueT
          SomeTechnique
          (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; (Harmonics,
    SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([String],
 HarmonicT
   (SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics Pitch))))
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(([String],
  HarmonicT
    (SlideT
       (TechniqueT
          SomeTechnique
          (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
 -&gt; HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; ([String],
        HarmonicT
          (SlideT
             (TechniqueT
                SomeTechnique
                (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics Pitch))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TextT
  (HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; ([String],
    HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
forall a. TextT a -&gt; ([String], a)
</span><a href="Music.Score.Text.html#runTextT"><span class="hs-identifier hs-var">runTextT</span></a></span><span> </span><span class="annot"><span class="annottext">(TextT
   (HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
 -&gt; ([String],
     HarmonicT
       (SlideT
          (TechniqueT
             SomeTechnique
             (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; ([String],
    HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Colour Double,
 TextT
   (HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Colour Double,
  TextT
    (HarmonicT
       (SlideT
          (TechniqueT
             SomeTechnique
             (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
 -&gt; TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; (Colour Double,
        TextT
          (HarmonicT
             (SlideT
                (TechniqueT
                   SomeTechnique
                   (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ColorT
  (TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; (Colour Double,
    TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
forall a. ColorT a -&gt; (Colour Double, a)
</span><a href="Music.Score.Color.html#runColorT"><span class="hs-identifier hs-var">runColorT</span></a></span><span> </span><span class="annot"><span class="annottext">(ColorT
   (TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
 -&gt; (Colour Double,
     TextT
       (HarmonicT
          (SlideT
             (TechniqueT
                SomeTechnique
                (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; (Colour Double,
    TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Int,
 ColorT
   (TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Int,
  ColorT
    (TextT
       (HarmonicT
          (SlideT
             (TechniqueT
                SomeTechnique
                (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
 -&gt; ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; (Int,
        ColorT
          (TextT
             (HarmonicT
                (SlideT
                   (TechniqueT
                      SomeTechnique
                      (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TremoloT
  (ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; (Int,
    ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
forall a. TremoloT a -&gt; (Int, a)
</span><a href="Music.Score.Tremolo.html#runTremoloT"><span class="hs-identifier hs-var">runTremoloT</span></a></span><span> </span><span class="annot"><span class="annottext">(TremoloT
   (ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
 -&gt; (Int,
     ColorT
       (TextT
          (HarmonicT
             (SlideT
                (TechniqueT
                   SomeTechnique
                   (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; (Int,
    ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural,
 TremoloT
   (ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Natural,
  TremoloT
    (ColorT
       (TextT
          (HarmonicT
             (SlideT
                (TechniqueT
                   SomeTechnique
                   (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
 -&gt; TremoloT
      (ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; (Natural,
        TremoloT
          (ColorT
             (TextT
                (HarmonicT
                   (SlideT
                      (TechniqueT
                         SomeTechnique
                         (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">StaffNumberT
  (TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; (Natural,
    TremoloT
      (ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
forall a. StaffNumberT a -&gt; (Natural, a)
</span><a href="Music.Score.StaffNumber.html#runStaffNumberT"><span class="hs-identifier hs-var">runStaffNumberT</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621680602115"><span class="annot"><span class="annottext">TechniqueT
  SomeTechnique
  (ArticulationT Articulation (DynamicT Dynamics Pitch))
</span><a href="#local-6989586621680602115"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TechniqueT
  SomeTechnique
  (ArticulationT Articulation (DynamicT Dynamics Pitch))
-&gt; Score Message
forall n n.
TechniqueT n (ArticulationT n (DynamicT Dynamics Pitch))
-&gt; Score Message
</span><a href="#local-6989586621680602114"><span class="hs-identifier hs-var">exportNoteT</span></a></span><span> </span><span class="annot"><span class="annottext">TechniqueT
  SomeTechnique
  (ArticulationT Articulation (DynamicT Dynamics Pitch))
</span><a href="#local-6989586621680602115"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1764"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1765"></span><span>    </span><span id="local-6989586621680602114"><span class="annot"><span class="annottext">exportNoteT :: TechniqueT n (ArticulationT n (DynamicT Dynamics Pitch))
-&gt; Score Message
</span><a href="#local-6989586621680602114"><span class="hs-identifier hs-var hs-var">exportNoteT</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Technique.html#TechniqueT"><span class="hs-identifier hs-type">TechniqueT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Functor.Couple.html#Couple"><span class="hs-identifier hs-type">Couple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602111"><span class="annot"><span class="annottext">x :: ArticulationT n (DynamicT Dynamics Pitch)
</span><a href="#local-6989586621680602111"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArticulationT n (DynamicT Dynamics Pitch) -&gt; Score Message
forall n.
ArticulationT n (DynamicT Dynamics Pitch) -&gt; Score Message
</span><a href="#local-6989586621680602110"><span class="hs-identifier hs-var">exportNoteA</span></a></span><span> </span><span class="annot"><span class="annottext">ArticulationT n (DynamicT Dynamics Pitch)
</span><a href="#local-6989586621680602111"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1766"></span><span>    </span><span id="local-6989586621680602110"><span class="annot"><span class="annottext">exportNoteA :: ArticulationT n (DynamicT Dynamics Pitch) -&gt; Score Message
</span><a href="#local-6989586621680602110"><span class="hs-identifier hs-var hs-var">exportNoteA</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Articulation.html#ArticulationT"><span class="hs-identifier hs-type">ArticulationT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602108"><span class="annot"><span class="annottext">x :: DynamicT Dynamics Pitch
</span><a href="#local-6989586621680602108"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynamicT Dynamics Pitch -&gt; Score Message
</span><a href="#local-6989586621680602107"><span class="hs-identifier hs-var">exportNoteD</span></a></span><span> </span><span class="annot"><span class="annottext">DynamicT Dynamics Pitch
</span><a href="#local-6989586621680602108"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1767"></span><span>    </span><span id="local-6989586621680602107"><span class="annot"><span class="annottext">exportNoteD :: DynamicT Dynamics Pitch -&gt; Score Message
</span><a href="#local-6989586621680602107"><span class="hs-identifier hs-var hs-var">exportNoteD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Dynamics.html#DynamicT"><span class="hs-identifier hs-type">DynamicT</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602105"><span class="annot"><span class="annottext">d :: Dynamics
</span><a href="#local-6989586621680602105"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602104"><span class="annot"><span class="annottext">x :: Pitch
</span><a href="#local-6989586621680602104"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Message -&gt; Message
</span><a href="Music.Score.Export.StandardNotation.html#setVelocity"><span class="hs-identifier hs-var">setVelocity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dynamics -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#dynLevel"><span class="hs-identifier hs-var">dynLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Dynamics
</span><a href="#local-6989586621680602105"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Message -&gt; Message) -&gt; Score Message -&gt; Score Message
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Score Message
</span><a href="Music.Score.Export.StandardNotation.html#mkMidiNote"><span class="hs-identifier hs-var">mkMidiNote</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602104"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1768"></span><span>
</span><span id="line-1769"></span><span class="hs-comment">-- TODO move this to Music.Dynamics.Balance?</span><span>
</span><span id="line-1770"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#dynLevel"><span class="hs-identifier hs-type">dynLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Dynamics.Common.html#Dynamics"><span class="hs-identifier hs-type">Music.Dynamics.Dynamics</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Velocity</span></span><span>
</span><span id="line-1771"></span><span id="dynLevel"><span class="annot"><span class="annottext">dynLevel :: Dynamics -&gt; Int
</span><a href="Music.Score.Export.StandardNotation.html#dynLevel"><span class="hs-identifier hs-var hs-var">dynLevel</span></a></span></span><span> </span><span id="local-6989586621680602099"><span class="annot"><span class="annottext">x' :: Dynamics
</span><a href="#local-6989586621680602099"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Int
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; Int) -&gt; Double -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680602098"><span class="annot"><span class="annottext">x :: Double
</span><a href="#local-6989586621680602098"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680602098"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="hs-number">58.5</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">64</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Double -&gt; Double) -&gt; Double -&gt; Double
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double
forall (cat :: * -&gt; * -&gt; *) a. Category cat =&gt; cat a a
</span><a href="#local-6989586621680602097"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; Double) -&gt; Double -&gt; Double
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Double, Double) -&gt; Double -&gt; Double
forall a. Ord a =&gt; (a, a) -&gt; a -&gt; a
</span><a href="#local-6989586621680602096"><span class="hs-identifier hs-var">inRange</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680602095"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="hs-number">3.5</span></span><span class="hs-special">)</span><span>
</span><span id="line-1772"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1773"></span><span>    </span><span id="local-6989586621680602095"><span class="annot"><span class="annottext">x :: Double
</span><a href="#local-6989586621680602095"><span class="hs-identifier hs-var hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dynamics -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Dynamics
</span><a href="#local-6989586621680602099"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-1774"></span><span>    </span><span id="local-6989586621680602097"><span class="annot"><span class="annottext">f :: cat a a
</span><a href="#local-6989586621680602097"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">cat a a
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1775"></span><span>    </span><span class="hs-comment">-- f x = (x^3)</span><span>
</span><span id="line-1776"></span><span>    </span><span id="local-6989586621680602096"><span class="annot"><span class="annottext">inRange :: (a, a) -&gt; a -&gt; a
</span><a href="#local-6989586621680602096"><span class="hs-identifier hs-var hs-var">inRange</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602094"><span class="annot"><span class="annottext">m :: a
</span><a href="#local-6989586621680602094"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602093"><span class="annot"><span class="annottext">n :: a
</span><a href="#local-6989586621680602093"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680602092"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680602092"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680602094"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">`max`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680602092"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">`min`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680602093"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1777"></span><span>
</span><span id="line-1778"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#mkMidiNote"><span class="hs-identifier hs-type">mkMidiNote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span>
</span><span id="line-1779"></span><span id="mkMidiNote"><span class="annot"><span class="annottext">mkMidiNote :: Pitch -&gt; Score Message
</span><a href="Music.Score.Export.StandardNotation.html#mkMidiNote"><span class="hs-identifier hs-var hs-var">mkMidiNote</span></a></span></span><span> </span><span id="local-6989586621680602090"><span class="annot"><span class="annottext">p' :: Pitch
</span><a href="#local-6989586621680602090"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1780"></span><span>  </span><span class="annot"><span class="annottext">Score Message
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1781"></span><span>    </span><span class="annot"><span class="annottext">Score Message -&gt; Score Message -&gt; Score Message
forall a.
(Semigroup a, HasPosition a, Transformable a) =&gt;
a -&gt; a -&gt; a
</span><a href="Music.Time.Juxtapose.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Message -&gt; Score Message
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.NoteOn</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Semitones -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Semitones -&gt; Int) -&gt; Semitones -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Semitones
</span><a href="#local-6989586621680602087"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Semitones -&gt; Semitones -&gt; Semitones
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">60</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-number">64</span></span><span class="hs-special">)</span><span>
</span><span id="line-1782"></span><span>    </span><span class="annot"><span class="annottext">Score Message -&gt; Score Message -&gt; Score Message
forall a.
(Semigroup a, HasPosition a, Transformable a) =&gt;
a -&gt; a -&gt; a
</span><a href="Music.Time.Juxtapose.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Message -&gt; Score Message
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.NoteOff</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Semitones -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Semitones -&gt; Int) -&gt; Semitones -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Semitones
</span><a href="#local-6989586621680602087"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Semitones -&gt; Semitones -&gt; Semitones
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="hs-number">60</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-number">64</span></span><span class="hs-special">)</span><span>
</span><span id="line-1783"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1784"></span><span>    </span><span id="local-6989586621680602087"><span class="annot"><span class="annottext">p :: Semitones
</span><a href="#local-6989586621680602087"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; Semitones
forall p.
(HasSemitones (Diff p), AffineSpace p, IsPitch p) =&gt;
p -&gt; Semitones
</span><a href="#local-6989586621680602085"><span class="hs-identifier hs-var">pitchToInt</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch
</span><a href="#local-6989586621680602090"><span class="hs-identifier hs-var">p'</span></a></span><span>
</span><span id="line-1785"></span><span>    </span><span id="local-6989586621680602085"><span class="annot"><span class="annottext">pitchToInt :: p -&gt; Semitones
</span><a href="#local-6989586621680602085"><span class="hs-identifier hs-var hs-var">pitchToInt</span></a></span></span><span> </span><span id="local-6989586621680602084"><span class="annot"><span class="annottext">p :: p
</span><a href="#local-6989586621680602084"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diff p -&gt; Semitones
forall a. HasSemitones a =&gt; a -&gt; Semitones
</span><a href="Music.Pitch.Common.Internal.html#semitones"><span class="hs-identifier hs-var">Music.Pitch.semitones</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680602084"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">p -&gt; p -&gt; Diff p
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">p
forall a. IsPitch a =&gt; a
</span><a href="Music.Pitch.Common.Internal.html#c"><span class="hs-identifier hs-var">P.c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1786"></span><span>
</span><span id="line-1787"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#setVelocity"><span class="hs-identifier hs-type">setVelocity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Velocity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span>
</span><span id="line-1788"></span><span id="setVelocity"><span class="annot"><span class="annottext">setVelocity :: Int -&gt; Message -&gt; Message
</span><a href="Music.Score.Export.StandardNotation.html#setVelocity"><span class="hs-identifier hs-var hs-var">setVelocity</span></a></span></span><span> </span><span id="local-6989586621680602082"><span class="annot"><span class="annottext">v :: Int
</span><a href="#local-6989586621680602082"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Message -&gt; Message
</span><a href="#local-6989586621680602081"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1789"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1790"></span><span>    </span><span id="local-6989586621680602081"><span class="annot"><span class="annottext">go :: Message -&gt; Message
</span><a href="#local-6989586621680602081"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.NoteOff</span></span><span> </span><span id="local-6989586621680602080"><span class="annot"><span class="annottext">c :: Int
</span><a href="#local-6989586621680602080"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680602079"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621680602079"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.NoteOff</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602080"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602079"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602082"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1791"></span><span>    </span><span class="annot"><a href="#local-6989586621680602081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.NoteOn</span></span><span> </span><span id="local-6989586621680602078"><span class="annot"><span class="annottext">c :: Int
</span><a href="#local-6989586621680602078"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680602077"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621680602077"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.NoteOn</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602078"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602077"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602082"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1792"></span><span>    </span><span class="annot"><a href="#local-6989586621680602081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.KeyPressure</span></span><span> </span><span id="local-6989586621680602075"><span class="annot"><span class="annottext">c :: Int
</span><a href="#local-6989586621680602075"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680602074"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621680602074"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.KeyPressure</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602075"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602074"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602082"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1793"></span><span>    </span><span class="annot"><a href="#local-6989586621680602081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.ControlChange</span></span><span> </span><span id="local-6989586621680602072"><span class="annot"><span class="annottext">c :: Int
</span><a href="#local-6989586621680602072"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680602071"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602071"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680602070"><span class="annot"><span class="annottext">v :: Int
</span><a href="#local-6989586621680602070"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.ControlChange</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602072"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602071"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602070"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1794"></span><span>    </span><span class="annot"><a href="#local-6989586621680602081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621680602069"><span class="annot"><span class="annottext">x :: Message
</span><a href="#local-6989586621680602069"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Message
</span><a href="#local-6989586621680602069"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1795"></span><span>
</span><span id="line-1796"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#setChannel"><span class="hs-identifier hs-type">setChannel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Channel</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Midi.Message</span></span><span>
</span><span id="line-1797"></span><span id="setChannel"><span class="annot"><span class="annottext">setChannel :: Int -&gt; Message -&gt; Message
</span><a href="Music.Score.Export.StandardNotation.html#setChannel"><span class="hs-identifier hs-var hs-var">setChannel</span></a></span></span><span> </span><span id="local-6989586621680602068"><span class="annot"><span class="annottext">c :: Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Message -&gt; Message
</span><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1798"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1799"></span><span>    </span><span id="local-6989586621680602067"><span class="annot"><span class="annottext">go :: Message -&gt; Message
</span><a href="#local-6989586621680602067"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.NoteOff</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602066"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621680602066"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621680602065"><span class="annot"><span class="annottext">v :: Int
</span><a href="#local-6989586621680602065"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.NoteOff</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602066"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602065"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1800"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.NoteOn</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602064"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621680602064"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621680602063"><span class="annot"><span class="annottext">v :: Int
</span><a href="#local-6989586621680602063"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.NoteOn</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602064"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602063"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1801"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.KeyPressure</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602062"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621680602062"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621680602061"><span class="annot"><span class="annottext">v :: Int
</span><a href="#local-6989586621680602061"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.KeyPressure</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602062"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602061"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1802"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.ChannelPressure</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602059"><span class="annot"><span class="annottext">p :: Int
</span><a href="#local-6989586621680602059"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.ChannelPressure</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602059"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1803"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.ControlChange</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602058"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680602058"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680602057"><span class="annot"><span class="annottext">v :: Int
</span><a href="#local-6989586621680602057"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.ControlChange</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602058"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602057"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1804"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.ProgramChange</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602056"><span class="annot"><span class="annottext">p :: Int
</span><a href="#local-6989586621680602056"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.ProgramChange</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602056"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1805"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Midi.PitchWheel</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680602054"><span class="annot"><span class="annottext">w :: Int
</span><a href="#local-6989586621680602054"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Message
</span><span class="hs-identifier hs-var">Midi.PitchWheel</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602068"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680602054"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1806"></span><span>    </span><span class="annot"><a href="#local-6989586621680602067"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621680602053"><span class="annot"><span class="annottext">x :: Message
</span><a href="#local-6989586621680602053"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Message
</span><a href="#local-6989586621680602053"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1807"></span><span>
</span><span id="line-1808"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-1809"></span><span class="hs-comment">----------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-1810"></span><span>
</span><span id="line-1811"></span><span class="hs-comment">-- $fromAspectTranslation</span><span>
</span><span id="line-1812"></span><span class="hs-comment">-- -</span><span>
</span><span id="line-1813"></span><span class="hs-comment">-- - This piece of code performs the main translation from the internal &quot;linear-algebra style&quot;</span><span>
</span><span id="line-1814"></span><span class="hs-comment">-- - music representation (also known as &quot;Asp&quot; as in &quot;musical aspects&quot;: pitch, dynamics etc)</span><span>
</span><span id="line-1815"></span><span class="hs-comment">-- - to Work, which is a monomorphic type representing standard/Western/common music notation.</span><span>
</span><span id="line-1816"></span><span class="hs-comment">-- - The Work type in turn ins the basis for the translation to MusicXML and Lilypond. This</span><span>
</span><span id="line-1817"></span><span class="hs-comment">-- - translation perform various notation tasks similar to FOMUS (http://fomus.sourceforge.net/).</span><span>
</span><span id="line-1818"></span><span class="hs-comment">-- -</span><span>
</span><span id="line-1819"></span><span class="hs-comment">-- - The (Score Asp1) type is used as input and contains no ties. Overlapping events are allowed.</span><span>
</span><span id="line-1820"></span><span class="hs-comment">-- -</span><span>
</span><span id="line-1821"></span><span class="hs-comment">-- - In (Score Asp2) all exactly overlapping events (in the same part) are grouped into chords,</span><span>
</span><span id="line-1822"></span><span class="hs-comment">-- - bar division is performed and ties are added.</span><span>
</span><span id="line-1823"></span><span class="hs-comment">-- -</span><span>
</span><span id="line-1824"></span><span class="hs-comment">-- - In Asp3, articulation and dynamics are renotated to use explicit context (to allow begin/end</span><span>
</span><span id="line-1825"></span><span class="hs-comment">-- - marks to be placed correctly).</span><span>
</span><span id="line-1826"></span><span class="hs-comment">-- -</span><span>
</span><span id="line-1827"></span><span class="hs-comment">-- - This function also performs quantization, voice and part separation.</span><span>
</span><span id="line-1828"></span><span>
</span><span id="line-1829"></span><span class="hs-keyword">type</span><span> </span><span id="Asp1"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1"><span class="hs-identifier hs-var">Asp1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span>
</span><span id="line-1830"></span><span>
</span><span id="line-1831"></span><span class="hs-keyword">type</span><span> </span><span id="Asp1a"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-var">Asp1a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1832"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Part.html#PartT"><span class="hs-identifier hs-type">PartT</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span>
</span><span id="line-1833"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.StaffNumber.html#StaffNumberT"><span class="hs-identifier hs-type">StaffNumberT</span></a></span><span>
</span><span id="line-1834"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Tremolo.html#TremoloT"><span class="hs-identifier hs-type">TremoloT</span></a></span><span>
</span><span id="line-1835"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Color.html#ColorT"><span class="hs-identifier hs-type">ColorT</span></a></span><span>
</span><span id="line-1836"></span><span>                  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Text.html#TextT"><span class="hs-identifier hs-type">TextT</span></a></span><span>
</span><span id="line-1837"></span><span>                      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Harmonics.html#HarmonicT"><span class="hs-identifier hs-type">HarmonicT</span></a></span><span>
</span><span id="line-1838"></span><span>                          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Slide.html#SlideT"><span class="hs-identifier hs-type">SlideT</span></a></span><span>
</span><span id="line-1839"></span><span>                              </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Technique.html#TechniqueT"><span class="hs-identifier hs-type">TechniqueT</span></a></span><span> </span><span class="annot"><a href="Music.Score.Technique.html#SomeTechnique"><span class="hs-identifier hs-type">SomeTechnique</span></a></span><span>
</span><span id="line-1840"></span><span>                                  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Articulation.html#ArticulationT"><span class="hs-identifier hs-type">ArticulationT</span></a></span><span> </span><span class="annot"><a href="Music.Articulation.html#Articulation"><span class="hs-identifier hs-type">Articulation</span></a></span><span>
</span><span id="line-1841"></span><span>                                      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Dynamics.html#DynamicT"><span class="hs-identifier hs-type">DynamicT</span></a></span><span> </span><span class="annot"><a href="Music.Dynamics.Common.html#Dynamics"><span class="hs-identifier hs-type">Dynamics</span></a></span><span>
</span><span id="line-1842"></span><span>                                          </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span>
</span><span id="line-1843"></span><span>                                      </span><span class="hs-special">)</span><span>
</span><span id="line-1844"></span><span>                                  </span><span class="hs-special">)</span><span>
</span><span id="line-1845"></span><span>                              </span><span class="hs-special">)</span><span>
</span><span id="line-1846"></span><span>                          </span><span class="hs-special">)</span><span>
</span><span id="line-1847"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-1848"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-1849"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-1850"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-1851"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1852"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1853"></span><span>
</span><span id="line-1854"></span><span class="hs-comment">-- We require all notes in a chords to have the same kind of ties</span><span>
</span><span id="line-1855"></span><span class="hs-keyword">type</span><span> </span><span id="Asp2"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp2"><span class="hs-identifier hs-var">Asp2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1856"></span><span>  </span><span class="annot"><a href="Music.Score.Ties.html#TieT"><span class="hs-identifier hs-type">TieT</span></a></span><span>
</span><span id="line-1857"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Part.html#PartT"><span class="hs-identifier hs-type">PartT</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span>
</span><span id="line-1858"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.StaffNumber.html#StaffNumberT"><span class="hs-identifier hs-type">StaffNumberT</span></a></span><span>
</span><span id="line-1859"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Tremolo.html#TremoloT"><span class="hs-identifier hs-type">TremoloT</span></a></span><span>
</span><span id="line-1860"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Color.html#ColorT"><span class="hs-identifier hs-type">ColorT</span></a></span><span>
</span><span id="line-1861"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Text.html#TextT"><span class="hs-identifier hs-type">TextT</span></a></span><span>
</span><span id="line-1862"></span><span>                        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Harmonics.html#HarmonicT"><span class="hs-identifier hs-type">HarmonicT</span></a></span><span>
</span><span id="line-1863"></span><span>                            </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Slide.html#SlideT"><span class="hs-identifier hs-type">SlideT</span></a></span><span>
</span><span id="line-1864"></span><span>                                </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Technique.html#TechniqueT"><span class="hs-identifier hs-type">TechniqueT</span></a></span><span> </span><span class="annot"><a href="Music.Score.Technique.html#SomeTechnique"><span class="hs-identifier hs-type">SomeTechnique</span></a></span><span>
</span><span id="line-1865"></span><span>                                    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Articulation.html#ArticulationT"><span class="hs-identifier hs-type">ArticulationT</span></a></span><span> </span><span class="annot"><a href="Music.Articulation.html#Articulation"><span class="hs-identifier hs-type">Articulation</span></a></span><span>
</span><span id="line-1866"></span><span>                                        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Dynamics.html#DynamicT"><span class="hs-identifier hs-type">DynamicT</span></a></span><span> </span><span class="annot"><a href="Music.Dynamics.Common.html#Dynamics"><span class="hs-identifier hs-type">Dynamics</span></a></span><span>
</span><span id="line-1867"></span><span>                                            </span><span class="hs-special">[</span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1868"></span><span>                                        </span><span class="hs-special">)</span><span>
</span><span id="line-1869"></span><span>                                    </span><span class="hs-special">)</span><span>
</span><span id="line-1870"></span><span>                                </span><span class="hs-special">)</span><span>
</span><span id="line-1871"></span><span>                            </span><span class="hs-special">)</span><span>
</span><span id="line-1872"></span><span>                        </span><span class="hs-special">)</span><span>
</span><span id="line-1873"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-1874"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1875"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1876"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1877"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1878"></span><span>
</span><span id="line-1879"></span><span class="hs-keyword">type</span><span> </span><span id="Asp3"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-var">Asp3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1880"></span><span>  </span><span class="annot"><a href="Music.Score.Ties.html#TieT"><span class="hs-identifier hs-type">TieT</span></a></span><span>
</span><span id="line-1881"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Part.html#PartT"><span class="hs-identifier hs-type">PartT</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span>
</span><span id="line-1882"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.StaffNumber.html#StaffNumberT"><span class="hs-identifier hs-type">StaffNumberT</span></a></span><span>
</span><span id="line-1883"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Tremolo.html#TremoloT"><span class="hs-identifier hs-type">TremoloT</span></a></span><span>
</span><span id="line-1884"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Color.html#ColorT"><span class="hs-identifier hs-type">ColorT</span></a></span><span>
</span><span id="line-1885"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Text.html#TextT"><span class="hs-identifier hs-type">TextT</span></a></span><span>
</span><span id="line-1886"></span><span>                        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Harmonics.html#HarmonicT"><span class="hs-identifier hs-type">HarmonicT</span></a></span><span>
</span><span id="line-1887"></span><span>                            </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Slide.html#SlideT"><span class="hs-identifier hs-type">SlideT</span></a></span><span>
</span><span id="line-1888"></span><span>                                </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Technique.html#TechniqueT"><span class="hs-identifier hs-type">TechniqueT</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.TechniqueNotation.html#TechniqueNotation"><span class="hs-identifier hs-type">TN.TechniqueNotation</span></a></span><span>
</span><span id="line-1889"></span><span>                                    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Articulation.html#ArticulationT"><span class="hs-identifier hs-type">ArticulationT</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.ArticulationNotation.html#ArticulationNotation"><span class="hs-identifier hs-type">AN.ArticulationNotation</span></a></span><span>
</span><span id="line-1890"></span><span>                                        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Music.Score.Dynamics.html#DynamicT"><span class="hs-identifier hs-type">DynamicT</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.DynamicNotation.html#DynamicNotation"><span class="hs-identifier hs-type">DN.DynamicNotation</span></a></span><span>
</span><span id="line-1891"></span><span>                                            </span><span class="hs-special">[</span><span class="annot"><a href="Music.Pitch.Common.Internal.html#Pitch"><span class="hs-identifier hs-type">Pitch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1892"></span><span>                                        </span><span class="hs-special">)</span><span>
</span><span id="line-1893"></span><span>                                    </span><span class="hs-special">)</span><span>
</span><span id="line-1894"></span><span>                                </span><span class="hs-special">)</span><span>
</span><span id="line-1895"></span><span>                            </span><span class="hs-special">)</span><span>
</span><span id="line-1896"></span><span>                        </span><span class="hs-special">)</span><span>
</span><span id="line-1897"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-1898"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1899"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1900"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1901"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1902"></span><span>
</span><span id="line-1903"></span><span class="hs-keyword">type</span><span> </span><span id="Asp"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp"><span class="hs-identifier hs-var">Asp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1"><span class="hs-identifier hs-type">Asp1</span></a></span><span>
</span><span id="line-1904"></span><span>
</span><span id="line-1905"></span><span class="hs-keyword">type</span><span> </span><span id="StandardNotationExportM"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StandardNotationExportM"><span class="hs-identifier hs-var">StandardNotationExportM</span></a></span></span><span> </span><span id="local-6989586621680602052"><span class="annot"><a href="#local-6989586621680602052"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#MonadLog"><span class="hs-identifier hs-type">MonadLog</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602052"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680602052"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1906"></span><span>
</span><span id="line-1907"></span><span class="hs-comment">-- TODO move and hide constructor.</span><span>
</span><span id="line-1908"></span><span class="hs-comment">-- TODO generalize</span><span>
</span><span id="line-1909"></span><span>
</span><span id="line-1910"></span><span class="hs-comment">-- | List with 0 to 4 elements.</span><span>
</span><span id="line-1911"></span><span class="hs-keyword">newtype</span><span> </span><span id="List0To4"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-var">List0To4</span></a></span></span><span> </span><span id="local-6989586621680603783"><span class="annot"><a href="#local-6989586621680603783"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnsafeList0To4"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#UnsafeList0To4"><span class="hs-identifier hs-var">UnsafeList0To4</span></a></span></span><span> </span><span class="hs-special">{</span><span id="_unsafeGetList0To4"><span class="annot"><span class="annottext">List0To4 a -&gt; [a]
</span><a href="Music.Score.Export.StandardNotation.html#_unsafeGetList0To4"><span class="hs-identifier hs-var hs-var">_unsafeGetList0To4</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603783"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-1912"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680602046"><span id="local-6989586621680602048"><span class="annot"><span class="annottext">a -&gt; List0To4 b -&gt; List0To4 a
(a -&gt; b) -&gt; List0To4 a -&gt; List0To4 b
(forall a b. (a -&gt; b) -&gt; List0To4 a -&gt; List0To4 b)
-&gt; (forall a b. a -&gt; List0To4 b -&gt; List0To4 a) -&gt; Functor List0To4
forall a b. a -&gt; List0To4 b -&gt; List0To4 a
forall a b. (a -&gt; b) -&gt; List0To4 a -&gt; List0To4 b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; List0To4 b -&gt; List0To4 a
$c&lt;$ :: forall a b. a -&gt; List0To4 b -&gt; List0To4 a
fmap :: (a -&gt; b) -&gt; List0To4 a -&gt; List0To4 b
$cfmap :: forall a b. (a -&gt; b) -&gt; List0To4 a -&gt; List0To4 b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602012"><span id="local-6989586621680602014"><span id="local-6989586621680602016"><span id="local-6989586621680602018"><span id="local-6989586621680602020"><span id="local-6989586621680602022"><span id="local-6989586621680602024"><span id="local-6989586621680602026"><span id="local-6989586621680602028"><span id="local-6989586621680602030"><span id="local-6989586621680602032"><span id="local-6989586621680602034"><span id="local-6989586621680602036"><span id="local-6989586621680602038"><span id="local-6989586621680602040"><span id="local-6989586621680602042"><span id="local-6989586621680602044"><span class="annot"><span class="annottext">a -&gt; List0To4 a -&gt; Bool
List0To4 m -&gt; m
List0To4 a -&gt; [a]
List0To4 a -&gt; Bool
List0To4 a -&gt; Int
List0To4 a -&gt; a
List0To4 a -&gt; a
List0To4 a -&gt; a
List0To4 a -&gt; a
(a -&gt; m) -&gt; List0To4 a -&gt; m
(a -&gt; m) -&gt; List0To4 a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
(a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
(b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
(b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
(a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
(a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
(forall m. Monoid m =&gt; List0To4 m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; List0To4 a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; List0To4 a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a)
-&gt; (forall a. List0To4 a -&gt; [a])
-&gt; (forall a. List0To4 a -&gt; Bool)
-&gt; (forall a. List0To4 a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; List0To4 a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; List0To4 a -&gt; a)
-&gt; (forall a. Ord a =&gt; List0To4 a -&gt; a)
-&gt; (forall a. Num a =&gt; List0To4 a -&gt; a)
-&gt; (forall a. Num a =&gt; List0To4 a -&gt; a)
-&gt; Foldable List0To4
forall a. Eq a =&gt; a -&gt; List0To4 a -&gt; Bool
forall a. Num a =&gt; List0To4 a -&gt; a
forall a. Ord a =&gt; List0To4 a -&gt; a
forall m. Monoid m =&gt; List0To4 m -&gt; m
forall a. List0To4 a -&gt; Bool
forall a. List0To4 a -&gt; Int
forall a. List0To4 a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; List0To4 a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: List0To4 a -&gt; a
$cproduct :: forall a. Num a =&gt; List0To4 a -&gt; a
sum :: List0To4 a -&gt; a
$csum :: forall a. Num a =&gt; List0To4 a -&gt; a
minimum :: List0To4 a -&gt; a
$cminimum :: forall a. Ord a =&gt; List0To4 a -&gt; a
maximum :: List0To4 a -&gt; a
$cmaximum :: forall a. Ord a =&gt; List0To4 a -&gt; a
elem :: a -&gt; List0To4 a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; List0To4 a -&gt; Bool
length :: List0To4 a -&gt; Int
$clength :: forall a. List0To4 a -&gt; Int
null :: List0To4 a -&gt; Bool
$cnull :: forall a. List0To4 a -&gt; Bool
toList :: List0To4 a -&gt; [a]
$ctoList :: forall a. List0To4 a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; List0To4 a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; List0To4 a -&gt; b
foldMap' :: (a -&gt; m) -&gt; List0To4 a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; List0To4 a -&gt; m
foldMap :: (a -&gt; m) -&gt; List0To4 a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; List0To4 a -&gt; m
fold :: List0To4 m -&gt; m
$cfold :: forall m. Monoid m =&gt; List0To4 m -&gt; m
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680602002"><span id="local-6989586621680602004"><span id="local-6989586621680602006"><span id="local-6989586621680602008"><span class="annot"><span class="annottext">Functor List0To4
Foldable List0To4
(Functor List0To4, Foldable List0To4) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; List0To4 a -&gt; f (List0To4 b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    List0To4 (f a) -&gt; f (List0To4 a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; List0To4 a -&gt; m (List0To4 b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    List0To4 (m a) -&gt; m (List0To4 a))
-&gt; Traversable List0To4
(a -&gt; f b) -&gt; List0To4 a -&gt; f (List0To4 b)
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; List0To4 (m a) -&gt; m (List0To4 a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
List0To4 (f a) -&gt; f (List0To4 a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; List0To4 a -&gt; m (List0To4 b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; List0To4 a -&gt; f (List0To4 b)
sequence :: List0To4 (m a) -&gt; m (List0To4 a)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; List0To4 (m a) -&gt; m (List0To4 a)
mapM :: (a -&gt; m b) -&gt; List0To4 a -&gt; m (List0To4 b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; List0To4 a -&gt; m (List0To4 b)
sequenceA :: List0To4 (f a) -&gt; f (List0To4 a)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
List0To4 (f a) -&gt; f (List0To4 a)
traverse :: (a -&gt; f b) -&gt; List0To4 a -&gt; f (List0To4 b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; List0To4 a -&gt; f (List0To4 b)
$cp2Traversable :: Foldable List0To4
$cp1Traversable :: Functor List0To4
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1913"></span><span>
</span><span id="line-1914"></span><span class="hs-comment">-- list0 :: List0To4 a</span><span>
</span><span id="line-1915"></span><span class="hs-comment">-- list1 :: a -&gt; List0To4 a</span><span>
</span><span id="line-1916"></span><span class="hs-comment">-- list2 :: a -&gt; a -&gt; List0To4 a</span><span>
</span><span id="line-1917"></span><span class="hs-comment">-- list3 :: a -&gt; a -&gt; a -&gt; List0To4 a</span><span>
</span><span id="line-1918"></span><span class="hs-comment">-- list4 :: a -&gt; a -&gt; a -&gt; a -&gt; List0To4 a</span><span>
</span><span id="line-1919"></span><span class="hs-comment">-- list0 = UnsafeList0To4 []</span><span>
</span><span id="line-1920"></span><span class="hs-comment">-- list1 x = UnsafeList0To4 [x]</span><span>
</span><span id="line-1921"></span><span class="hs-comment">-- list2 x y = UnsafeList0To4 [x,y]</span><span>
</span><span id="line-1922"></span><span class="hs-comment">-- list3 x y z = UnsafeList0To4 [x,y,z]</span><span>
</span><span id="line-1923"></span><span class="hs-comment">-- list4 x y z a = UnsafeList0To4 [x,y,z,a]</span><span>
</span><span id="line-1924"></span><span>
</span><span id="line-1925"></span><span id="local-6989586621680603757"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#parseList"><span class="hs-identifier hs-type">parseList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603757"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603757"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1926"></span><span id="parseList"><span class="annot"><span class="annottext">parseList :: [a] -&gt; Maybe (List0To4 a)
</span><a href="Music.Score.Export.StandardNotation.html#parseList"><span class="hs-identifier hs-var hs-var">parseList</span></a></span></span><span> </span><span id="local-6989586621680602000"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680602000"><span class="hs-identifier hs-var">xs</span></a></span></span><span>
</span><span id="line-1927"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680602000"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="hs-number">4</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">List0To4 a -&gt; Maybe (List0To4 a)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(List0To4 a -&gt; Maybe (List0To4 a))
-&gt; List0To4 a -&gt; Maybe (List0To4 a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; List0To4 a
forall a. [a] -&gt; List0To4 a
</span><a href="Music.Score.Export.StandardNotation.html#UnsafeList0To4"><span class="hs-identifier hs-var">UnsafeList0To4</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680602000"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1928"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (List0To4 a)
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1929"></span><span>
</span><span id="line-1930"></span><span class="hs-comment">-- TODO move</span><span>
</span><span id="line-1931"></span><span>
</span><span id="line-1932"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-1933"></span><span class="hs-comment">-- Partition intervals into non-overlapping subsets.</span><span>
</span><span id="line-1934"></span><span class="hs-comment">--</span><span>
</span><span id="line-1935"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1936"></span><span class="hs-comment">-- mconcat (partitionIntervals xs) = xs</span><span>
</span><span id="line-1937"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1938"></span><span class="hs-comment">--</span><span>
</span><span id="line-1939"></span><span class="hs-comment">-- TODO track the fact that the returned maps are all non-overlapping</span><span>
</span><span id="line-1940"></span><span class="hs-comment">-- in the type system?</span><span>
</span><span id="line-1941"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#partitionIntervals"><span class="hs-identifier hs-type">partitionIntervals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680603756"><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680603755"><span class="annot"><a href="#local-6989586621680603755"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680603755"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680603755"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1942"></span><span id="partitionIntervals"><span class="annot"><span class="annottext">partitionIntervals :: Map (a, a) b -&gt; [Map (a, a) b]
</span><a href="Music.Score.Export.StandardNotation.html#partitionIntervals"><span class="hs-identifier hs-var hs-var">partitionIntervals</span></a></span></span><span> </span><span id="local-6989586621680601997"><span class="annot"><span class="annottext">xs :: Map (a, a) b
</span><a href="#local-6989586621680601997"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty ((a, a), b) -&gt; Map (a, a) b)
-&gt; [NonEmpty ((a, a), b)] -&gt; [Map (a, a) b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[((a, a), b)] -&gt; Map (a, a) b
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([((a, a), b)] -&gt; Map (a, a) b)
-&gt; (NonEmpty ((a, a), b) -&gt; [((a, a), b)])
-&gt; NonEmpty ((a, a), b)
-&gt; Map (a, a) b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty ((a, a), b) -&gt; [((a, a), b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NonEmpty ((a, a), b)] -&gt; [Map (a, a) b])
-&gt; [NonEmpty ((a, a), b)] -&gt; [Map (a, a) b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">([()], [NonEmpty ((a, a), b)]) -&gt; [NonEmpty ((a, a), b)]
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(([()], [NonEmpty ((a, a), b)]) -&gt; [NonEmpty ((a, a), b)])
-&gt; ([()], [NonEmpty ((a, a), b)]) -&gt; [NonEmpty ((a, a), b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">State [NonEmpty ((a, a), b)] [()]
-&gt; [NonEmpty ((a, a), b)] -&gt; ([()], [NonEmpty ((a, a), b)])
forall s a. State s a -&gt; s -&gt; (a, s)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-operator hs-var">`runState`</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(State [NonEmpty ((a, a), b)] [()]
 -&gt; ([()], [NonEmpty ((a, a), b)]))
-&gt; State [NonEmpty ((a, a), b)] [()]
-&gt; ([()], [NonEmpty ((a, a), b)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[((a, a), b)]
-&gt; (((a, a), b) -&gt; StateT [NonEmpty ((a, a), b)] Identity ())
-&gt; State [NonEmpty ((a, a), b)] [()]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[((a, a), b)]
</span><a href="#local-6989586621680601994"><span class="hs-identifier hs-var">sorted</span></a></span><span> </span><span class="annot"><span class="annottext">((((a, a), b) -&gt; StateT [NonEmpty ((a, a), b)] Identity ())
 -&gt; State [NonEmpty ((a, a), b)] [()])
-&gt; (((a, a), b) -&gt; StateT [NonEmpty ((a, a), b)] Identity ())
-&gt; State [NonEmpty ((a, a), b)] [()]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680601993"><span class="annot"><span class="annottext">ev :: ((a, a), b)
</span><a href="#local-6989586621680601993"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621680601992"><span class="annot"><span class="annottext">start :: a
</span><a href="#local-6989586621680601992"><span class="hs-identifier hs-var">start</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601991"><span class="annot"><span class="annottext">_stop :: a
</span><a href="#local-6989586621680601991"><span class="hs-identifier hs-var">_stop</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601990"><span class="annot"><span class="annottext">_val :: b
</span><a href="#local-6989586621680601990"><span class="hs-identifier hs-var">_val</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1943"></span><span>  </span><span class="hs-comment">-- Out list of state is the voices/resources</span><span>
</span><span id="line-1944"></span><span>  </span><span class="hs-comment">-- Inner non-empty list is the spans in chronological order</span><span>
</span><span id="line-1945"></span><span>  </span><span id="local-6989586621680601989"><span class="annot"><span class="annottext">[NonEmpty ((a, a), b)]
</span><a href="#local-6989586621680601989"><span class="hs-identifier hs-var">currentResources</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603755"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT [NonEmpty ((a, a), b)] Identity [NonEmpty ((a, a), b)]
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-1946"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601987"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680601987"><span class="hs-identifier hs-var">currentEndTimes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty ((a, a), b) -&gt; a) -&gt; [NonEmpty ((a, a), b)] -&gt; [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, a) -&gt; a
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((a, a) -&gt; a)
-&gt; (NonEmpty ((a, a), b) -&gt; (a, a)) -&gt; NonEmpty ((a, a), b) -&gt; a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((a, a), b) -&gt; (a, a)
forall a b. (a, b) -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">(((a, a), b) -&gt; (a, a))
-&gt; (NonEmpty ((a, a), b) -&gt; ((a, a), b))
-&gt; NonEmpty ((a, a), b)
-&gt; (a, a)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty ((a, a), b) -&gt; ((a, a), b)
forall a. NonEmpty a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.NonEmpty.head</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NonEmpty ((a, a), b)]
</span><a href="#local-6989586621680601989"><span class="hs-identifier hs-var">currentResources</span></a></span><span>
</span><span id="line-1947"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601985"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680601985"><span class="hs-identifier hs-var">nextVoice</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Bool) -&gt; [a] -&gt; Maybe Int
forall a. (a -&gt; Bool) -&gt; [a] -&gt; Maybe Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">findIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680601992"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680601987"><span class="hs-identifier hs-var">currentEndTimes</span></a></span><span>
</span><span id="line-1948"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680601985"><span class="hs-identifier hs-var">nextVoice</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1949"></span><span>    </span><span class="hs-comment">-- A new voice is needed</span><span>
</span><span id="line-1950"></span><span>    </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1951"></span><span>      </span><span class="annot"><span class="annottext">([NonEmpty ((a, a), b)] -&gt; [NonEmpty ((a, a), b)])
-&gt; StateT [NonEmpty ((a, a), b)] Identity ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NonEmpty ((a, a), b)]
-&gt; [NonEmpty ((a, a), b)] -&gt; [NonEmpty ((a, a), b)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">((a, a), b) -&gt; NonEmpty ((a, a), b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">((a, a), b)
</span><a href="#local-6989586621680601993"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>    </span><span class="hs-comment">-- This fits in current voice n (0-index)</span><span>
</span><span id="line-1953"></span><span>    </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680601982"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680601982"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1954"></span><span>      </span><span class="annot"><span class="annottext">([NonEmpty ((a, a), b)] -&gt; [NonEmpty ((a, a), b)])
-&gt; StateT [NonEmpty ((a, a), b)] Identity ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; (NonEmpty ((a, a), b) -&gt; NonEmpty ((a, a), b))
-&gt; [NonEmpty ((a, a), b)]
-&gt; [NonEmpty ((a, a), b)]
forall a. Int -&gt; (a -&gt; a) -&gt; [a] -&gt; [a]
</span><a href="Music.Score.Export.StandardNotation.html#update"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680601982"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmpty ((a, a), b) -&gt; NonEmpty ((a, a), b))
 -&gt; [NonEmpty ((a, a), b)] -&gt; [NonEmpty ((a, a), b)])
-&gt; (NonEmpty ((a, a), b) -&gt; NonEmpty ((a, a), b))
-&gt; [NonEmpty ((a, a), b)]
-&gt; [NonEmpty ((a, a), b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((a, a), b) -&gt; NonEmpty ((a, a), b) -&gt; NonEmpty ((a, a), b)
forall a. a -&gt; NonEmpty a -&gt; NonEmpty a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.NonEmpty.cons</span></a></span><span> </span><span class="annot"><span class="annottext">((a, a), b)
</span><a href="#local-6989586621680601993"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1955"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1956"></span><span>    </span><span class="annot"><a href="#local-6989586621680601994"><span class="hs-identifier hs-type">sorted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603755"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1957"></span><span>    </span><span id="local-6989586621680601994"><span class="annot"><span class="annottext">sorted :: [((a, a), b)]
</span><a href="#local-6989586621680601994"><span class="hs-identifier hs-var hs-var">sorted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (a, a) b -&gt; [((a, a), b)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.toAscList</span></a></span><span> </span><span class="annot"><span class="annottext">Map (a, a) b
</span><a href="#local-6989586621680601997"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1958"></span><span>
</span><span id="line-1959"></span><span id="local-6989586621680603765"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#update"><span class="hs-identifier hs-type">update</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680603765"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603765"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603765"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680603765"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1960"></span><span id="update"><span class="annot"><span class="annottext">update :: Int -&gt; (a -&gt; a) -&gt; [a] -&gt; [a]
</span><a href="Music.Score.Export.StandardNotation.html#update"><span class="hs-identifier hs-var hs-var">update</span></a></span></span><span> </span><span id="local-6989586621680601978"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680601978"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680601977"><span class="annot"><span class="annottext">f :: a -&gt; a
</span><a href="#local-6989586621680601977"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680601976"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680601976"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; [a]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680601978"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680601976"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680601975"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1961"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1962"></span><span>    </span><span id="local-6989586621680601975"><span class="annot"><span class="annottext">rest :: [a]
</span><a href="#local-6989586621680601975"><span class="hs-identifier hs-var hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; [a]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680601978"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680601976"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1963"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1964"></span><span>      </span><span id="local-6989586621680601973"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680601973"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621680601972"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680601972"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; a
</span><a href="#local-6989586621680601977"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680601973"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680601972"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1965"></span><span>
</span><span id="line-1966"></span><span id="local-6989586621680603717"><span id="local-6989586621680603719"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLayer"><span class="hs-identifier hs-type">toLayer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StandardNotationExportM"><span class="hs-identifier hs-type">StandardNotationExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603719"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Music.Parts.Part</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603717"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680603719"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Phrases.html#MVoice"><span class="hs-identifier hs-type">MVoice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603717"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1967"></span><span id="toLayer"><span class="annot"><span class="annottext">toLayer :: Part -&gt; Score a -&gt; m (List0To4 (MVoice a))
</span><a href="Music.Score.Export.StandardNotation.html#toLayer"><span class="hs-identifier hs-var hs-var">toLayer</span></a></span></span><span> </span><span id="local-6989586621680601970"><span class="annot"><span class="annottext">p :: Part
</span><a href="#local-6989586621680601970"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680601969"><span class="annot"><span class="annottext">xs :: Score a
</span><a href="#local-6989586621680601969"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Map (Time, Time) a] -&gt; Maybe (List0To4 (Map (Time, Time) a))
forall a. [a] -&gt; Maybe (List0To4 a)
</span><a href="Music.Score.Export.StandardNotation.html#parseList"><span class="hs-identifier hs-var">parseList</span></a></span><span> </span><span class="annot"><span class="annottext">([Map (Time, Time) a] -&gt; Maybe (List0To4 (Map (Time, Time) a)))
-&gt; [Map (Time, Time) a] -&gt; Maybe (List0To4 (Map (Time, Time) a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Time, Time) a -&gt; [Map (Time, Time) a]
forall a b. Ord a =&gt; Map (a, a) b -&gt; [Map (a, a) b]
</span><a href="Music.Score.Export.StandardNotation.html#partitionIntervals"><span class="hs-identifier hs-var">partitionIntervals</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (Time, Time) a -&gt; [Map (Time, Time) a])
-&gt; Map (Time, Time) a -&gt; [Map (Time, Time) a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Map (Time, Time) a
forall a. Score a -&gt; Map (Time, Time) a
</span><a href="Music.Score.Export.StandardNotation.html#scoreToMap"><span class="hs-identifier hs-var">scoreToMap</span></a></span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680601969"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1968"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m (List0To4 (MVoice a))
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m (List0To4 (MVoice a)))
-&gt; String -&gt; m (List0To4 (MVoice a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Part has more than four overlapping events: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601970"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1969"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680601966"><span class="annot"><span class="annottext">xs :: List0To4 (Map (Time, Time) a)
</span><a href="#local-6989586621680601966"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">List0To4 (MVoice a) -&gt; m (List0To4 (MVoice a))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(List0To4 (MVoice a) -&gt; m (List0To4 (MVoice a)))
-&gt; List0To4 (MVoice a) -&gt; m (List0To4 (MVoice a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (Time, Time) a -&gt; MVoice a)
-&gt; List0To4 (Map (Time, Time) a) -&gt; List0To4 (MVoice a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVoice a -&gt; (MVoice a -&gt; MVoice a) -&gt; Maybe (MVoice a) -&gt; MVoice a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; MVoice a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
forall p. IsString p =&gt; p
</span><a href="#local-6989586621680601965"><span class="hs-identifier hs-var">bug</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MVoice a -&gt; MVoice a
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (MVoice a) -&gt; MVoice a)
-&gt; (Map (Time, Time) a -&gt; Maybe (MVoice a))
-&gt; Map (Time, Time) a
-&gt; MVoice a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First (MVoice a)) (Score a) (MVoice a)
-&gt; Score a -&gt; Maybe (MVoice a)
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var">preview</span></span><span> </span><span class="annot"><span class="annottext">Getting (First (MVoice a)) (Score a) (MVoice a)
forall a b.
(a ~ b) =&gt;
Prism (Score a) (Score b) (MVoice a) (MVoice b)
</span><a href="Music.Score.Phrases.html#singleMVoice"><span class="hs-identifier hs-var">Music.Score.Phrases.singleMVoice</span></a></span><span> </span><span class="annot"><span class="annottext">(Score a -&gt; Maybe (MVoice a))
-&gt; (Map (Time, Time) a -&gt; Score a)
-&gt; Map (Time, Time) a
-&gt; Maybe (MVoice a)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Time, Time) a -&gt; Score a
forall a. Map (Time, Time) a -&gt; Score a
</span><a href="Music.Score.Export.StandardNotation.html#mapToScore"><span class="hs-identifier hs-var">mapToScore</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">List0To4 (Map (Time, Time) a)
</span><a href="#local-6989586621680601966"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1970"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1971"></span><span>    </span><span id="local-6989586621680601965"><span class="annot"><span class="annottext">bug :: p
</span><a href="#local-6989586621680601965"><span class="hs-identifier hs-var hs-var">bug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;partitionIntervals returned overlapping partition. Plese report this as a bug in music-suite.&quot;</span></span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span class="hs-comment">{-
-- TODO:
--  Use partitionIntervals
--    If it returns &gt;4 voices, fail (or do custom tie-based sepration?)
--
--  Use (error &quot;partitionIntervals returned overlapping partition&quot;) for now, see notes
--  in partitionIntervals about tracking non-overlappingness in the types.
fmap list1 .
  maybe
    (throwError $ &quot;Overlapping events in part: &quot; ++ show p)
    return
    . preview Music.Score.Phrases.singleMVoice
-}</span><span>
</span><span id="line-1986"></span><span>
</span><span id="line-1987"></span><span class="hs-comment">-- TODO move</span><span>
</span><span id="line-1988"></span><span id="local-6989586621680603754"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#scoreToMap"><span class="hs-identifier hs-type">scoreToMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603754"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680603754"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1989"></span><span id="scoreToMap"><span class="annot"><span class="annottext">scoreToMap :: Score a -&gt; Map (Time, Time) a
</span><a href="Music.Score.Export.StandardNotation.html#scoreToMap"><span class="hs-identifier hs-var hs-var">scoreToMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[((Time, Time), a)] -&gt; Map (Time, Time) a
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([((Time, Time), a)] -&gt; Map (Time, Time) a)
-&gt; (Score a -&gt; [((Time, Time), a)])
-&gt; Score a
-&gt; Map (Time, Time) a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; ((Time, Time), a)) -&gt; [Event a] -&gt; [((Time, Time), a)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Span -&gt; (Time, Time)) -&gt; (Span, a) -&gt; ((Time, Time), a)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time) -&gt; Span -&gt; (Time, Time)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Time) Span (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Span, a) -&gt; ((Time, Time), a))
-&gt; (Event a -&gt; (Span, a)) -&gt; Event a -&gt; ((Time, Time), a)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Span, a) (Event a) (Span, a) -&gt; Event a -&gt; (Span, a)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnIso (Span, a) (Span, a) (Event a) (Event a)
-&gt; Iso (Event a) (Event a) (Span, a) (Span, a)
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso (Span, a) (Span, a) (Event a) (Event a)
forall a b. Iso (Span, a) (Span, b) (Event a) (Event b)
</span><a href="Music.Time.Event.html#event"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; [((Time, Time), a)])
-&gt; (Score a -&gt; [Event a]) -&gt; Score a -&gt; [((Time, Time), a)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a] -&gt; Score a -&gt; [Event a]
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a]
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-1990"></span><span>
</span><span id="line-1991"></span><span id="local-6989586621680603746"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#mapToScore"><span class="hs-identifier hs-type">mapToScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680603746"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603746"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1992"></span><span id="mapToScore"><span class="annot"><span class="annottext">mapToScore :: Map (Time, Time) a -&gt; Score a
</span><a href="Music.Score.Export.StandardNotation.html#mapToScore"><span class="hs-identifier hs-var hs-var">mapToScore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting (Score a) [Event a] (Score a) -&gt; [Event a] -&gt; Score a
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Score a) [Event a] (Score a)
forall a. Getter [Event a] (Score a)
</span><a href="Music.Time.Score.html#score"><span class="hs-identifier hs-var">score</span></a></span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; Score a)
-&gt; (Map (Time, Time) a -&gt; [Event a])
-&gt; Map (Time, Time) a
-&gt; Score a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(((Time, Time), a) -&gt; Event a) -&gt; [((Time, Time), a)] -&gt; [Event a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Event a) (Span, a) (Event a) -&gt; (Span, a) -&gt; Event a
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Event a) (Span, a) (Event a)
forall a b. Iso (Span, a) (Span, b) (Event a) (Event b)
</span><a href="Music.Time.Event.html#event"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">((Span, a) -&gt; Event a)
-&gt; (((Time, Time), a) -&gt; (Span, a)) -&gt; ((Time, Time), a) -&gt; Event a
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Time, Time) -&gt; Span) -&gt; ((Time, Time), a) -&gt; (Span, a)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Span (Time, Time) Span -&gt; (Time, Time) -&gt; Span
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">(Getting Span (Time, Time) Span -&gt; (Time, Time) -&gt; Span)
-&gt; Getting Span (Time, Time) Span -&gt; (Time, Time) -&gt; Span
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnIso Span Span (Time, Time) (Time, Time)
-&gt; Iso (Time, Time) (Time, Time) Span Span
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso Span Span (Time, Time) (Time, Time)
Iso' Span (Time, Time)
</span><a href="Music.Time.Types.html#onsetAndOffset"><span class="hs-identifier hs-var">onsetAndOffset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([((Time, Time), a)] -&gt; [Event a])
-&gt; (Map (Time, Time) a -&gt; [((Time, Time), a)])
-&gt; Map (Time, Time) a
-&gt; [Event a]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Time, Time) a -&gt; [((Time, Time), a)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Data.Map.toList</span></a></span><span>
</span><span id="line-1993"></span><span>
</span><span id="line-1994"></span><span id="local-6989586621680601957"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toStandardNotation"><span class="hs-identifier hs-type">toStandardNotation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StandardNotationExportM"><span class="hs-identifier hs-type">StandardNotationExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680601957"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp"><span class="hs-identifier hs-type">Asp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680601957"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-type">Work</span></a></span></span><span>
</span><span id="line-1995"></span><span id="toStandardNotation"><span class="annot"><span class="annottext">toStandardNotation :: Asp -&gt; m Work
</span><a href="Music.Score.Export.StandardNotation.html#toStandardNotation"><span class="hs-identifier hs-var hs-var">toStandardNotation</span></a></span></span><span> </span><span id="local-6989586621680601956"><span class="annot"><span class="annottext">sc' :: Asp
</span><a href="#local-6989586621680601956"><span class="hs-identifier hs-var">sc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1996"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Simplifying pitches&quot;</span></span><span>
</span><span id="line-1997"></span><span>  </span><span class="hs-comment">-- Simplify pitch spelling</span><span>
</span><span id="line-1998"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601955"><span class="annot"><span class="annottext">postPitchSimplification :: Score Asp1a
</span><a href="#local-6989586621680601955"><span class="hs-identifier hs-var hs-var">postPitchSimplification</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; Score Asp1a
forall a. (HasPitches' a, Pitch a ~ Pitch) =&gt; a -&gt; a
</span><a href="Music.Score.Pitch.html#simplifyPitches"><span class="hs-identifier hs-var">Music.Score.Pitch.simplifyPitches</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680601953"><span class="hs-identifier hs-var">normScore</span></a></span><span>
</span><span id="line-1999"></span><span>  </span><span class="hs-comment">-- Part extraction</span><span>
</span><span id="line-2000"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Extracting parts&quot;</span></span><span>
</span><span id="line-2001"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601952"><span class="annot"><span class="annottext">[(Part, Score Asp1a)]
</span><a href="#local-6989586621680601952"><span class="hs-identifier hs-var">postPartExtract</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Music.Parts.Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; [(Part Asp1a, Score Asp1a)]
forall a.
(Ord (Part a), HasPart' a) =&gt;
Score a -&gt; [(Part a, Score a)]
</span><a href="Music.Score.Part.html#extractPartsWithInfo"><span class="hs-identifier hs-var">Music.Score.Part.extractPartsWithInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680601955"><span class="hs-identifier hs-var">postPitchSimplification</span></a></span><span>
</span><span id="line-2002"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  Done, &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Part, Score Asp1a)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[(Part, Score Asp1a)]
</span><a href="#local-6989586621680601952"><span class="hs-identifier hs-var">postPartExtract</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot; parts&quot;</span></span><span>
</span><span id="line-2003"></span><span>  </span><span class="hs-comment">-- postPartExtract :: [(Music.Parts.Part,Score Asp1)]</span><span>
</span><span id="line-2004"></span><span>
</span><span id="line-2005"></span><span>  </span><span class="hs-comment">-- Change aspect type as we need Semigroup to compose all simultanous notes</span><span>
</span><span id="line-2006"></span><span>  </span><span class="hs-comment">-- Merge simultanous notes into chords, to simplify voice-separation</span><span>
</span><span id="line-2007"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Merging overlapping notes into chords&quot;</span></span><span>
</span><span id="line-2008"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601951"><span class="annot"><span class="annottext">[(Part, Score Asp2)]
</span><a href="#local-6989586621680601951"><span class="hs-identifier hs-var">postChordMerge</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Music.Parts.Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp2"><span class="hs-identifier hs-type">Asp2</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Part, Score Asp1a) -&gt; (Part, Score Asp2))
-&gt; [(Part, Score Asp1a)] -&gt; [(Part, Score Asp2)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(((Part, Score Asp1a) -&gt; (Part, Score Asp2))
 -&gt; [(Part, Score Asp1a)] -&gt; [(Part, Score Asp2)])
-&gt; ((Score Asp1a -&gt; Score Asp2)
    -&gt; (Part, Score Asp1a) -&gt; (Part, Score Asp2))
-&gt; (Score Asp1a -&gt; Score Asp2)
-&gt; [(Part, Score Asp1a)]
-&gt; [(Part, Score Asp2)]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score Asp1a -&gt; Score Asp2)
-&gt; (Part, Score Asp1a) -&gt; (Part, Score Asp2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Score Asp2 -&gt; Score Asp2
forall a. (Transformable a, Semigroup a) =&gt; Score a -&gt; Score a
</span><a href="Music.Time.Score.html#simultaneous"><span class="hs-identifier hs-var">simultaneous</span></a></span><span> </span><span class="annot"><span class="annottext">(Score Asp2 -&gt; Score Asp2)
-&gt; (Score Asp1a -&gt; Score Asp2) -&gt; Score Asp1a -&gt; Score Asp2
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Asp1a -&gt; Asp2) -&gt; Score Asp1a -&gt; Score Asp2
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Asp1a -&gt; Asp2
</span><a href="Music.Score.Export.StandardNotation.html#asp1ToAsp2"><span class="hs-identifier hs-var">asp1ToAsp2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Part, Score Asp1a)]
</span><a href="#local-6989586621680601952"><span class="hs-identifier hs-var">postPartExtract</span></a></span><span>
</span><span id="line-2009"></span><span>  </span><span class="hs-comment">-- postChordMerge :: [(Music.Parts.Part,Score Asp2)]</span><span>
</span><span id="line-2010"></span><span>
</span><span id="line-2011"></span><span>  </span><span class="hs-comment">{-
    Currently we:
      - Simultaneous note merging (into chords)
      - MVoice conversion (assuming a single voice)
      - Context rewriting (dynamics, articulation, technique)
      - Bar splitting (adding ties)
      - Quantization
    We want:
      - Simultaneous note merging (into chords)
      - Context rewriting (dynamics, articulation, technique)
          TODO how? This only works for single voices as currently written
      - Bar splitting
      - Voice separation
      - Quantization
    OR:
      - Simultaneous note merging (into chords)
      - Voice sepration (whatever currently works remains a single voice)
        - TODO VS must be linear or nearly!
        - Is &quot;greedy interval coloring&quot; (or &quot;interval partitioning&quot; + posthoc good enough?
          - https://algorithmsandme.com/interval-partitioning-problem/
      - Context rewriting (dynamics, articulation, technique)
        - TODO iff the separated voices are rendered on the *same staff*
          we'll need to rethink the contextual notations carefully. Do not
          support multi-voice staves as a starting point.
      - Bar splitting (adding ties)
      - Quantization



    TODO layer sepration (which, again, does not actually happen in current code)
    should happen after bars have been split.

  -}</span><span>
</span><span id="line-2044"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Separating voices&quot;</span></span><span>
</span><span id="line-2045"></span><span>  </span><span id="local-6989586621680601948"><span class="annot"><span class="annottext">[(Part, List0To4 (MVoice Asp2))]
</span><a href="#local-6989586621680601948"><span class="hs-identifier hs-var">postVoiceSeparation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Phrases.html#MVoice"><span class="hs-identifier hs-type">MVoice</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp2"><span class="hs-identifier hs-type">Asp2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-2046"></span><span>    </span><span class="annot"><span class="annottext">((Part, Score Asp2) -&gt; m (Part, List0To4 (MVoice Asp2)))
-&gt; [(Part, Score Asp2)] -&gt; m [(Part, List0To4 (MVoice Asp2))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span>
</span><span id="line-2047"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680601947"><span class="annot"><span class="annottext">a :: (Part, Score Asp2)
</span><a href="#local-6989586621680601947"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621680601946"><span class="annot"><span class="annottext">p :: Part
</span><a href="#local-6989586621680601946"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2048"></span><span>          </span><span class="hs-comment">-- TODO VS: Do actual voice separation here</span><span>
</span><span id="line-2049"></span><span>          </span><span class="annot"><span class="annottext">(Score Asp2 -&gt; m (List0To4 (MVoice Asp2)))
-&gt; (Part, Score Asp2) -&gt; m (Part, List0To4 (MVoice Asp2))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part -&gt; Score Asp2 -&gt; m (List0To4 (MVoice Asp2))
forall (m :: * -&gt; *) a.
StandardNotationExportM m =&gt;
Part -&gt; Score a -&gt; m (List0To4 (MVoice a))
</span><a href="Music.Score.Export.StandardNotation.html#toLayer"><span class="hs-identifier hs-var">toLayer</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601946"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Part, Score Asp2)
</span><a href="#local-6989586621680601947"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-2050"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-2051"></span><span>      </span><span class="annot"><span class="annottext">([(Part, Score Asp2)] -&gt; m [(Part, List0To4 (MVoice Asp2))])
-&gt; [(Part, Score Asp2)] -&gt; m [(Part, List0To4 (MVoice Asp2))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Part, Score Asp2)]
</span><a href="#local-6989586621680601951"><span class="hs-identifier hs-var">postChordMerge</span></a></span><span>
</span><span id="line-2052"></span><span>  </span><span class="hs-comment">-- Rewrite dynamics and articulation to be context-sensitive</span><span>
</span><span id="line-2053"></span><span>  </span><span class="hs-comment">-- This changes the aspect type again</span><span>
</span><span id="line-2054"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Notating dynamics, articulation and playing techniques&quot;</span></span><span>
</span><span id="line-2055"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601945"><span class="annot"><span class="annottext">[(Part, List0To4 (MVoice Asp3))]
</span><a href="#local-6989586621680601945"><span class="hs-identifier hs-var">postContextSensitiveNotationRewrite</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2056"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Phrases.html#MVoice"><span class="hs-identifier hs-type">MVoice</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2057"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Part, List0To4 (MVoice Asp2)) -&gt; (Part, List0To4 (MVoice Asp3)))
-&gt; [(Part, List0To4 (MVoice Asp2))]
-&gt; [(Part, List0To4 (MVoice Asp3))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(((Part, List0To4 (MVoice Asp2)) -&gt; (Part, List0To4 (MVoice Asp3)))
 -&gt; [(Part, List0To4 (MVoice Asp2))]
 -&gt; [(Part, List0To4 (MVoice Asp3))])
-&gt; ((MVoice Asp2 -&gt; MVoice Asp3)
    -&gt; (Part, List0To4 (MVoice Asp2))
    -&gt; (Part, List0To4 (MVoice Asp3)))
-&gt; (MVoice Asp2 -&gt; MVoice Asp3)
-&gt; [(Part, List0To4 (MVoice Asp2))]
-&gt; [(Part, List0To4 (MVoice Asp3))]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(List0To4 (MVoice Asp2) -&gt; List0To4 (MVoice Asp3))
-&gt; (Part, List0To4 (MVoice Asp2)) -&gt; (Part, List0To4 (MVoice Asp3))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((List0To4 (MVoice Asp2) -&gt; List0To4 (MVoice Asp3))
 -&gt; (Part, List0To4 (MVoice Asp2))
 -&gt; (Part, List0To4 (MVoice Asp3)))
-&gt; ((MVoice Asp2 -&gt; MVoice Asp3)
    -&gt; List0To4 (MVoice Asp2) -&gt; List0To4 (MVoice Asp3))
-&gt; (MVoice Asp2 -&gt; MVoice Asp3)
-&gt; (Part, List0To4 (MVoice Asp2))
-&gt; (Part, List0To4 (MVoice Asp3))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(MVoice Asp2 -&gt; MVoice Asp3)
-&gt; List0To4 (MVoice Asp2) -&gt; List0To4 (MVoice Asp3)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MVoice Asp2 -&gt; MVoice Asp3
</span><a href="Music.Score.Export.StandardNotation.html#asp2ToAsp3"><span class="hs-identifier hs-var">asp2ToAsp3</span></a></span><span> </span><span class="annot"><span class="annottext">([(Part, List0To4 (MVoice Asp2))]
 -&gt; [(Part, List0To4 (MVoice Asp3))])
-&gt; [(Part, List0To4 (MVoice Asp2))]
-&gt; [(Part, List0To4 (MVoice Asp3))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Part, List0To4 (MVoice Asp2))]
</span><a href="#local-6989586621680601948"><span class="hs-identifier hs-var">postVoiceSeparation</span></a></span><span>
</span><span id="line-2058"></span><span>  </span><span class="hs-comment">-- postContextSensitiveNotationRewrite :: [(Music.Parts.Part,Voice (Maybe Asp3))]</span><span>
</span><span id="line-2059"></span><span>
</span><span id="line-2060"></span><span>  </span><span class="hs-comment">-- Split each part into bars, splitting notes and adding ties when necessary</span><span>
</span><span id="line-2061"></span><span>  </span><span class="hs-comment">-- Resulting list is list of bars, there is no layering (yet)</span><span>
</span><span id="line-2062"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Dividing the score into bars&quot;</span></span><span>
</span><span id="line-2063"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601943"><span class="annot"><span class="annottext">[(Part, List0To4 [MVoice Asp3])]
</span><a href="#local-6989586621680601943"><span class="hs-identifier hs-var">postTieSplit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2064"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Voice.html#Voice"><span class="hs-identifier hs-type">Voice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2065"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Part, List0To4 (MVoice Asp3)) -&gt; (Part, List0To4 [MVoice Asp3]))
-&gt; [(Part, List0To4 (MVoice Asp3))]
-&gt; [(Part, List0To4 [MVoice Asp3])]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(((Part, List0To4 (MVoice Asp3)) -&gt; (Part, List0To4 [MVoice Asp3]))
 -&gt; [(Part, List0To4 (MVoice Asp3))]
 -&gt; [(Part, List0To4 [MVoice Asp3])])
-&gt; ((MVoice Asp3 -&gt; [MVoice Asp3])
    -&gt; (Part, List0To4 (MVoice Asp3))
    -&gt; (Part, List0To4 [MVoice Asp3]))
-&gt; (MVoice Asp3 -&gt; [MVoice Asp3])
-&gt; [(Part, List0To4 (MVoice Asp3))]
-&gt; [(Part, List0To4 [MVoice Asp3])]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(List0To4 (MVoice Asp3) -&gt; List0To4 [MVoice Asp3])
-&gt; (Part, List0To4 (MVoice Asp3)) -&gt; (Part, List0To4 [MVoice Asp3])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((List0To4 (MVoice Asp3) -&gt; List0To4 [MVoice Asp3])
 -&gt; (Part, List0To4 (MVoice Asp3))
 -&gt; (Part, List0To4 [MVoice Asp3]))
-&gt; ((MVoice Asp3 -&gt; [MVoice Asp3])
    -&gt; List0To4 (MVoice Asp3) -&gt; List0To4 [MVoice Asp3])
-&gt; (MVoice Asp3 -&gt; [MVoice Asp3])
-&gt; (Part, List0To4 (MVoice Asp3))
-&gt; (Part, List0To4 [MVoice Asp3])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(MVoice Asp3 -&gt; [MVoice Asp3])
-&gt; List0To4 (MVoice Asp3) -&gt; List0To4 [MVoice Asp3]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Duration] -&gt; MVoice Asp3 -&gt; [MVoice Asp3]
forall a. Tiable a =&gt; [Duration] -&gt; Voice a -&gt; [Voice a]
</span><a href="Music.Score.Ties.html#splitTiesAt"><span class="hs-identifier hs-var">Music.Score.Ties.splitTiesAt</span></a></span><span> </span><span class="annot"><span class="annottext">[Duration]
</span><a href="#local-6989586621680601941"><span class="hs-identifier hs-var">barDurations</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Part, List0To4 (MVoice Asp3))]
 -&gt; [(Part, List0To4 [MVoice Asp3])])
-&gt; [(Part, List0To4 (MVoice Asp3))]
-&gt; [(Part, List0To4 [MVoice Asp3])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Part, List0To4 (MVoice Asp3))]
</span><a href="#local-6989586621680601945"><span class="hs-identifier hs-var">postContextSensitiveNotationRewrite</span></a></span><span>
</span><span id="line-2066"></span><span>  </span><span class="hs-comment">-- For each bar, quantize all layers. This is where tuplets/note values are generated.</span><span>
</span><span id="line-2067"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Rewriting rhythms&quot;</span></span><span>
</span><span id="line-2068"></span><span>  </span><span id="local-6989586621680601940"><span class="annot"><span class="annottext">[(Part, List0To4 [Rhythm (Maybe Asp3)])]
</span><a href="#local-6989586621680601940"><span class="hs-identifier hs-var">postQuantize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2069"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-2070"></span><span>    </span><span class="annot"><span class="annottext">((Part, List0To4 [MVoice Asp3])
 -&gt; m (Part, List0To4 [Rhythm (Maybe Asp3)]))
-&gt; [(Part, List0To4 [MVoice Asp3])]
-&gt; m [(Part, List0To4 [Rhythm (Maybe Asp3)])]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(List0To4 [MVoice Asp3] -&gt; m (List0To4 [Rhythm (Maybe Asp3)]))
-&gt; (Part, List0To4 [MVoice Asp3])
-&gt; m (Part, List0To4 [Rhythm (Maybe Asp3)])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([MVoice Asp3] -&gt; m [Rhythm (Maybe Asp3)])
-&gt; List0To4 [MVoice Asp3] -&gt; m (List0To4 [Rhythm (Maybe Asp3)])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MVoice Asp3 -&gt; m (Rhythm (Maybe Asp3)))
-&gt; [MVoice Asp3] -&gt; m [Rhythm (Maybe Asp3)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">MVoice Asp3 -&gt; m (Rhythm (Maybe Asp3))
forall (m :: * -&gt; *) a.
(StandardNotationExportM m, Tiable a) =&gt;
Voice (Maybe a) -&gt; m (Rhythm (Maybe a))
</span><a href="Music.Score.Export.StandardNotation.html#quantizeBar"><span class="hs-identifier hs-var">quantizeBar</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Part, List0To4 [MVoice Asp3])]
</span><a href="#local-6989586621680601943"><span class="hs-identifier hs-var">postTieSplit</span></a></span><span>
</span><span id="line-2071"></span><span>  </span><span class="hs-comment">-- postQuantize :: [(Music.Parts.Part,[Rhythm (Maybe Asp3)])]</span><span>
</span><span id="line-2072"></span><span>
</span><span id="line-2073"></span><span>  </span><span class="hs-comment">-- Group staves, generating brackets and braces</span><span>
</span><span id="line-2074"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Generate staff groups&quot;</span></span><span>
</span><span id="line-2075"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601938"><span class="annot"><span class="annottext">LabelTree BracketType (Part, List0To4 [Rhythm (Maybe Asp3)])
</span><a href="#local-6989586621680601938"><span class="hs-identifier hs-var">postStaffGrouping</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2076"></span><span>        </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2077"></span><span>          </span><span class="annot"><span class="annottext">[(Part, List0To4 [Rhythm (Maybe Asp3)])]
-&gt; LabelTree BracketType (Part, List0To4 [Rhythm (Maybe Asp3)])
forall a. [(Part, a)] -&gt; LabelTree BracketType (Part, a)
</span><a href="Music.Score.Export.StandardNotation.html#generateStaffGrouping"><span class="hs-identifier hs-var">generateStaffGrouping</span></a></span><span> </span><span class="annot"><span class="annottext">[(Part, List0To4 [Rhythm (Maybe Asp3)])]
</span><a href="#local-6989586621680601940"><span class="hs-identifier hs-var">postQuantize</span></a></span><span>
</span><span id="line-2078"></span><span>  </span><span class="hs-comment">-- All staves with brackets/braces, with one staff generated per voice</span><span>
</span><span id="line-2079"></span><span>  </span><span class="hs-comment">-- We fold those into the LabelTree using SubBracket</span><span>
</span><span id="line-2080"></span><span>  </span><span class="hs-comment">-- TODO support rendering multiple voices per staff instead</span><span>
</span><span id="line-2081"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601936"><span class="annot"><span class="annottext">LabelTree BracketType [Staff]
</span><a href="#local-6989586621680601936"><span class="hs-identifier hs-var">staffVoices</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2082"></span><span>        </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2083"></span><span>          </span><span class="annot"><span class="annottext">((Part, List0To4 [Rhythm (Maybe Asp3)]) -&gt; [Staff])
-&gt; LabelTree BracketType (Part, List0To4 [Rhythm (Maybe Asp3)])
-&gt; LabelTree BracketType [Staff]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(Part, List0To4 [Rhythm (Maybe Asp3)]) -&gt; [Staff]
</span><a href="Music.Score.Export.StandardNotation.html#aspectsToStaff"><span class="hs-identifier hs-var">aspectsToStaff</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType (Part, List0To4 [Rhythm (Maybe Asp3)])
</span><a href="#local-6989586621680601938"><span class="hs-identifier hs-var">postStaffGrouping</span></a></span><span>
</span><span id="line-2084"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680601934"><span class="annot"><span class="annottext">LabelTree BracketType Staff
</span><a href="#local-6989586621680601934"><span class="hs-identifier hs-var">staves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2085"></span><span>        </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2086"></span><span>          </span><span class="annot"><span class="annottext">BracketType
-&gt; LabelTree BracketType [Staff] -&gt; LabelTree BracketType Staff
forall b a. b -&gt; LabelTree b [a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#concatLT"><span class="hs-identifier hs-var">concatLT</span></a></span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#Subbracket"><span class="hs-identifier hs-var">Subbracket</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType [Staff]
</span><a href="#local-6989586621680601936"><span class="hs-identifier hs-var">staffVoices</span></a></span><span>
</span><span id="line-2087"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;System staff bars: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SystemBar] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[SystemBar]
</span><a href="#local-6989586621680601933"><span class="hs-identifier hs-var">systemStaff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2088"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m ()
forall w (m :: * -&gt; *). MonadLog w m =&gt; w -&gt; m ()
</span><a href="Music.Score.Export.StandardNotation.html#say"><span class="hs-identifier hs-var">say</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Regular staff bars: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Staff -&gt; Int) -&gt; [Staff] -&gt; [Int]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bar] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">([Bar] -&gt; Int) -&gt; (Staff -&gt; [Bar]) -&gt; Staff -&gt; Int
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Staff -&gt; [Bar]
</span><a href="Music.Score.Export.StandardNotation.html#_bars"><span class="hs-identifier hs-var hs-var">_bars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Staff] -&gt; [Int])
-&gt; (LabelTree BracketType Staff -&gt; [Staff])
-&gt; LabelTree BracketType Staff
-&gt; [Int]
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Staff -&gt; [Staff]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">(LabelTree BracketType Staff -&gt; [Int])
-&gt; LabelTree BracketType Staff -&gt; [Int]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Staff
</span><a href="#local-6989586621680601934"><span class="hs-identifier hs-var">staves</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2089"></span><span>  </span><span class="annot"><span class="annottext">Work -&gt; m Work
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Work -&gt; m Work) -&gt; Work -&gt; m Work
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo -&gt; [Movement] -&gt; Work
</span><a href="Music.Score.Export.StandardNotation.html#Work"><span class="hs-identifier hs-var">Work</span></a></span><span> </span><span class="annot"><span class="annottext">WorkInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">MovementInfo
-&gt; [SystemBar] -&gt; LabelTree BracketType Staff -&gt; Movement
</span><a href="Music.Score.Export.StandardNotation.html#Movement"><span class="hs-identifier hs-var">Movement</span></a></span><span> </span><span class="annot"><span class="annottext">MovementInfo
</span><a href="#local-6989586621680601932"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">[SystemBar]
</span><a href="#local-6989586621680601933"><span class="hs-identifier hs-var">systemStaff</span></a></span><span> </span><span class="annot"><span class="annottext">LabelTree BracketType Staff
</span><a href="#local-6989586621680601934"><span class="hs-identifier hs-var">staves</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2090"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2091"></span><span>    </span><span id="local-6989586621680601932"><span class="annot"><span class="annottext">info :: MovementInfo
</span><a href="#local-6989586621680601932"><span class="hs-identifier hs-var hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2092"></span><span>      </span><span class="annot"><span class="annottext">MovementInfo -&gt; MovementInfo
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2093"></span><span>        </span><span class="annot"><span class="annottext">(MovementInfo -&gt; MovementInfo) -&gt; MovementInfo -&gt; MovementInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Identity String)
-&gt; MovementInfo -&gt; Identity MovementInfo
Lens' MovementInfo String
</span><a href="Music.Score.Export.StandardNotation.html#movementTitle"><span class="hs-identifier hs-var">movementTitle</span></a></span><span>
</span><span id="line-2094"></span><span>          </span><span class="annot"><span class="annottext">((String -&gt; Identity String)
 -&gt; MovementInfo -&gt; Identity MovementInfo)
-&gt; String -&gt; MovementInfo -&gt; MovementInfo
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; String
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.Maybe.fromMaybe</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; String) -&gt; Maybe String -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Title -&gt; Int -&gt; Maybe String) -&gt; Int -&gt; Title -&gt; Maybe String
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Title -&gt; Int -&gt; Maybe String
</span><a href="Music.Score.Meta.Title.html#getTitleAt"><span class="hs-identifier hs-var">Music.Score.Meta.Title.getTitleAt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Title -&gt; Maybe String) -&gt; Title -&gt; Maybe String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-2095"></span><span>                 </span><span class="annot"><span class="annottext">Score Asp1a -&gt; Title
forall a b. (HasMeta a, HasPosition a, AttributeClass b) =&gt; a -&gt; b
</span><a href="Music.Score.Meta.html#metaAtStart"><span class="hs-identifier hs-var">Music.Score.Meta.metaAtStart</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680601929"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-2096"></span><span>             </span><span class="hs-special">)</span><span>
</span><span id="line-2097"></span><span>        </span><span class="annot"><span class="annottext">(MovementInfo -&gt; MovementInfo) -&gt; MovementInfo -&gt; MovementInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Attribution -&gt; Identity Attribution)
-&gt; MovementInfo -&gt; Identity MovementInfo
Lens' MovementInfo Attribution
</span><a href="Music.Score.Export.StandardNotation.html#movementAttribution"><span class="hs-identifier hs-var">movementAttribution</span></a></span><span> </span><span class="annot"><span class="annottext">((Attribution -&gt; Identity Attribution)
 -&gt; MovementInfo -&gt; Identity MovementInfo)
-&gt; ((Maybe String -&gt; Identity (Maybe String))
    -&gt; Attribution -&gt; Identity Attribution)
-&gt; (Maybe String -&gt; Identity (Maybe String))
-&gt; MovementInfo
-&gt; Identity MovementInfo
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Index Attribution
-&gt; Lens' Attribution (Maybe (IxValue Attribution))
forall m. At m =&gt; Index m -&gt; Lens' m (Maybe (IxValue m))
</span><span class="hs-identifier hs-var">at</span></span><span> </span><span class="annot"><span class="hs-string">&quot;composer&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2098"></span><span>          </span><span class="annot"><span class="annottext">((Maybe String -&gt; Identity (Maybe String))
 -&gt; MovementInfo -&gt; Identity MovementInfo)
-&gt; Maybe String -&gt; MovementInfo -&gt; MovementInfo
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(Attribution -&gt; String -&gt; Maybe String)
-&gt; String -&gt; Attribution -&gt; Maybe String
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Attribution -&gt; String -&gt; Maybe String
</span><a href="Music.Score.Meta.Attribution.html#getAttribution"><span class="hs-identifier hs-var">Music.Score.Meta.Attribution.getAttribution</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;composer&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Attribution -&gt; Maybe String) -&gt; Attribution -&gt; Maybe String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; Attribution
forall a b. (HasMeta a, HasPosition a, AttributeClass b) =&gt; a -&gt; b
</span><a href="Music.Score.Meta.html#metaAtStart"><span class="hs-identifier hs-var">Music.Score.Meta.metaAtStart</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680601929"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-2099"></span><span>             </span><span class="hs-special">)</span><span>
</span><span id="line-2100"></span><span>        </span><span class="annot"><span class="annottext">(MovementInfo -&gt; MovementInfo) -&gt; MovementInfo -&gt; MovementInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">MovementInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-2101"></span><span>    </span><span class="hs-comment">-- TODO also extract Barline, Key, RehearsalMark, Tempo here</span><span>
</span><span id="line-2102"></span><span>    </span><span class="hs-comment">-- (all of these should force a new bar)</span><span>
</span><span id="line-2103"></span><span>    </span><span class="annot"><a href="#local-6989586621680601933"><span class="hs-identifier hs-type">systemStaff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#SystemStaff"><span class="hs-identifier hs-type">SystemStaff</span></a></span><span>
</span><span id="line-2104"></span><span>    </span><span id="local-6989586621680601933"><span class="annot"><span class="annottext">systemStaff :: [SystemBar]
</span><a href="#local-6989586621680601933"><span class="hs-identifier hs-var hs-var">systemStaff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2105"></span><span>      </span><span class="annot"><span class="annottext">((Duration, Maybe TimeSignature, Maybe KeySignature) -&gt; SystemBar)
-&gt; [(Duration, Maybe TimeSignature, Maybe KeySignature)]
-&gt; [SystemBar]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span>
</span><span id="line-2106"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680601927"><span class="annot"><span class="annottext">_dur :: Duration
</span><a href="#local-6989586621680601927"><span class="hs-identifier hs-var">_dur</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601926"><span class="annot"><span class="annottext">ts :: Maybe TimeSignature
</span><a href="#local-6989586621680601926"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601925"><span class="annot"><span class="annottext">ks :: Maybe KeySignature
</span><a href="#local-6989586621680601925"><span class="hs-identifier hs-var">ks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2107"></span><span>            </span><span class="annot"><span class="annottext">(Option (First TimeSignature)
 -&gt; Identity (Option (First TimeSignature)))
-&gt; SystemBar -&gt; Identity SystemBar
Lens' SystemBar (Option (First TimeSignature))
</span><a href="Music.Score.Export.StandardNotation.html#timeSignature"><span class="hs-identifier hs-var">timeSignature</span></a></span><span> </span><span class="annot"><span class="annottext">((Option (First TimeSignature)
  -&gt; Identity (Option (First TimeSignature)))
 -&gt; SystemBar -&gt; Identity SystemBar)
-&gt; Option (First TimeSignature) -&gt; SystemBar -&gt; SystemBar
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Maybe (First TimeSignature) -&gt; Option (First TimeSignature)
forall a. Maybe a -&gt; Option a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Option</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TimeSignature -&gt; First TimeSignature)
-&gt; Maybe TimeSignature -&gt; Maybe (First TimeSignature)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">TimeSignature -&gt; First TimeSignature
forall a. a -&gt; First a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">First</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TimeSignature
</span><a href="#local-6989586621680601926"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2108"></span><span>              </span><span class="annot"><span class="annottext">(SystemBar -&gt; SystemBar) -&gt; SystemBar -&gt; SystemBar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(KeySignature -&gt; Identity KeySignature)
-&gt; SystemBar -&gt; Identity SystemBar
Lens' SystemBar KeySignature
</span><a href="Music.Score.Export.StandardNotation.html#keySignature"><span class="hs-identifier hs-var">keySignature</span></a></span><span> </span><span class="annot"><span class="annottext">((KeySignature -&gt; Identity KeySignature)
 -&gt; SystemBar -&gt; Identity SystemBar)
-&gt; KeySignature -&gt; SystemBar -&gt; SystemBar
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">KeySignature
-&gt; (KeySignature -&gt; KeySignature)
-&gt; Maybe KeySignature
-&gt; KeySignature
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">KeySignature
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">KeySignature -&gt; KeySignature
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe KeySignature
</span><a href="#local-6989586621680601925"><span class="hs-identifier hs-var">ks</span></a></span><span>
</span><span id="line-2109"></span><span>              </span><span class="annot"><span class="annottext">(SystemBar -&gt; SystemBar) -&gt; SystemBar -&gt; SystemBar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SystemBar
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-2110"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-2111"></span><span>        </span><span class="annot"><span class="annottext">[(Duration, Maybe TimeSignature, Maybe KeySignature)]
</span><a href="#local-6989586621680601924"><span class="hs-identifier hs-var">barMeta</span></a></span><span>
</span><span id="line-2112"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680601941"><span class="annot"><span class="annottext">barDurations :: [Duration]
</span><a href="#local-6989586621680601941"><span class="hs-identifier hs-var">barDurations</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601923"><span class="annot"><span class="annottext">_timeSignatureMarks :: [Maybe TimeSignature]
</span><a href="#local-6989586621680601923"><span class="hs-identifier hs-var">_timeSignatureMarks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601922"><span class="annot"><span class="annottext">_keySignatureMarks :: [Maybe KeySignature]
</span><a href="#local-6989586621680601922"><span class="hs-identifier hs-var">_keySignatureMarks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Duration, Maybe TimeSignature, Maybe KeySignature)]
-&gt; ([Duration], [Maybe TimeSignature], [Maybe KeySignature])
forall a b c. [(a, b, c)] -&gt; ([a], [b], [c])
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">unzip3</span></a></span><span> </span><span class="annot"><span class="annottext">[(Duration, Maybe TimeSignature, Maybe KeySignature)]
</span><a href="#local-6989586621680601924"><span class="hs-identifier hs-var">barMeta</span></a></span><span>
</span><span id="line-2113"></span><span>    </span><span id="local-6989586621680601924"><span class="annot"><span class="annottext">barMeta :: [(Duration, Maybe TimeSignature, Maybe KeySignature)]
</span><a href="#local-6989586621680601924"><span class="hs-identifier hs-var hs-var">barMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score Asp1a
-&gt; [(Duration, Maybe TimeSignature, Maybe KeySignature)]
forall a.
(HasMeta a, HasPosition a, Transformable a) =&gt;
a -&gt; [(Duration, Maybe TimeSignature, Maybe KeySignature)]
</span><a href="Music.Score.Internal.Export.html#extractBars"><span class="hs-identifier hs-var">Music.Score.Internal.Export.extractBars</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680601953"><span class="hs-identifier hs-var">normScore</span></a></span><span>
</span><span id="line-2114"></span><span>    </span><span class="hs-comment">-- Make this more prominent!</span><span>
</span><span id="line-2115"></span><span>    </span><span class="hs-comment">-- This is being used for the actual score!</span><span>
</span><span id="line-2116"></span><span>    </span><span id="local-6989586621680601953"><span class="annot"><span class="annottext">normScore :: Score Asp1a
</span><a href="#local-6989586621680601953"><span class="hs-identifier hs-var hs-var">normScore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score Asp1a -&gt; Score Asp1a
forall a. Score a -&gt; Score a
</span><a href="Music.Time.Score.html#normalizeScore"><span class="hs-identifier hs-var">normalizeScore</span></a></span><span> </span><span class="annot"><span class="annottext">Score Asp1a
</span><a href="#local-6989586621680601929"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-comment">-- TODO not necessarliy set to 0...</span><span>
</span><span id="line-2117"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-2118"></span><span>    </span><span class="annot"><a href="#local-6989586621680601929"><span class="hs-identifier hs-type">sc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span>
</span><span id="line-2119"></span><span>    </span><span id="local-6989586621680601929"><span class="annot"><span class="annottext">sc :: Score Asp1a
</span><a href="#local-6989586621680601929"><span class="hs-identifier hs-var hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Asp -&gt; Score Asp1a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m (Maybe a) -&gt; m a
</span><span class="hs-identifier hs-var">mcatMaybes</span></span><span> </span><span class="annot"><span class="annottext">Asp
</span><a href="#local-6989586621680601956"><span class="hs-identifier hs-var">sc'</span></a></span><span>
</span><span id="line-2120"></span><span>
</span><span id="line-2121"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#asp1ToAsp2"><span class="hs-identifier hs-type">asp1ToAsp2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier hs-type">Asp1a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp2"><span class="hs-identifier hs-type">Asp2</span></a></span><span>
</span><span id="line-2122"></span><span id="asp1ToAsp2"><span class="annot"><span class="annottext">asp1ToAsp2 :: Asp1a -&gt; Asp2
</span><a href="Music.Score.Export.StandardNotation.html#asp1ToAsp2"><span class="hs-identifier hs-var hs-var">asp1ToAsp2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PartT
  Part
  (StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
-&gt; Asp2
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(PartT
   Part
   (StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
 -&gt; Asp2)
-&gt; (Asp1a
    -&gt; PartT
         Part
         (StaffNumberT
            (TremoloT
               (ColorT
                  (TextT
                     (HarmonicT
                        (SlideT
                           (TechniqueT
                              SomeTechnique
                              (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))))
-&gt; Asp1a
-&gt; Asp2
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StaffNumberT
   (TremoloT
      (ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
 -&gt; StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
-&gt; Asp1a
-&gt; PartT
     Part
     (StaffNumberT
        (TremoloT
           (ColorT
              (TextT
                 (HarmonicT
                    (SlideT
                       (TechniqueT
                          SomeTechnique
                          (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((StaffNumberT
    (TremoloT
       (ColorT
          (TextT
             (HarmonicT
                (SlideT
                   (TechniqueT
                      SomeTechnique
                      (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
  -&gt; StaffNumberT
       (TremoloT
          (ColorT
             (TextT
                (HarmonicT
                   (SlideT
                      (TechniqueT
                         SomeTechnique
                         (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
 -&gt; Asp1a
 -&gt; PartT
      Part
      (StaffNumberT
         (TremoloT
            (ColorT
               (TextT
                  (HarmonicT
                     (SlideT
                        (TechniqueT
                           SomeTechnique
                           (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; StaffNumberT
         (TremoloT
            (ColorT
               (TextT
                  (HarmonicT
                     (SlideT
                        (TechniqueT
                           SomeTechnique
                           (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
    -&gt; StaffNumberT
         (TremoloT
            (ColorT
               (TextT
                  (HarmonicT
                     (SlideT
                        (TechniqueT
                           SomeTechnique
                           (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
-&gt; (Pitch -&gt; [Pitch])
-&gt; Asp1a
-&gt; PartT
     Part
     (StaffNumberT
        (TremoloT
           (ColorT
              (TextT
                 (HarmonicT
                    (SlideT
                       (TechniqueT
                          SomeTechnique
                          (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TremoloT
   (ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
 -&gt; TremoloT
      (ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((TremoloT
    (ColorT
       (TextT
          (HarmonicT
             (SlideT
                (TechniqueT
                   SomeTechnique
                   (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
  -&gt; TremoloT
       (ColorT
          (TextT
             (HarmonicT
                (SlideT
                   (TechniqueT
                      SomeTechnique
                      (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))
 -&gt; StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
 -&gt; StaffNumberT
      (TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
    -&gt; TremoloT
         (ColorT
            (TextT
               (HarmonicT
                  (SlideT
                     (TechniqueT
                        SomeTechnique
                        (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))
-&gt; (Pitch -&gt; [Pitch])
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics Pitch))))))))
-&gt; StaffNumberT
     (TremoloT
        (ColorT
           (TextT
              (HarmonicT
                 (SlideT
                    (TechniqueT
                       SomeTechnique
                       (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ColorT
   (TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
 -&gt; ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))
-&gt; TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((ColorT
    (TextT
       (HarmonicT
          (SlideT
             (TechniqueT
                SomeTechnique
                (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
  -&gt; ColorT
       (TextT
          (HarmonicT
             (SlideT
                (TechniqueT
                   SomeTechnique
                   (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))
 -&gt; TremoloT
      (ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
 -&gt; TremoloT
      (ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
    -&gt; ColorT
         (TextT
            (HarmonicT
               (SlideT
                  (TechniqueT
                     SomeTechnique
                     (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))
-&gt; (Pitch -&gt; [Pitch])
-&gt; TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics Pitch)))))))
-&gt; TremoloT
     (ColorT
        (TextT
           (HarmonicT
              (SlideT
                 (TechniqueT
                    SomeTechnique
                    (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TextT
   (HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
 -&gt; TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))
-&gt; ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((TextT
    (HarmonicT
       (SlideT
          (TechniqueT
             SomeTechnique
             (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
  -&gt; TextT
       (HarmonicT
          (SlideT
             (TechniqueT
                SomeTechnique
                (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))
 -&gt; ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
 -&gt; ColorT
      (TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
    -&gt; TextT
         (HarmonicT
            (SlideT
               (TechniqueT
                  SomeTechnique
                  (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))
-&gt; (Pitch -&gt; [Pitch])
-&gt; ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics Pitch))))))
-&gt; ColorT
     (TextT
        (HarmonicT
           (SlideT
              (TechniqueT
                 SomeTechnique
                 (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(HarmonicT
   (SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch))))
 -&gt; HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))
-&gt; TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((HarmonicT
    (SlideT
       (TechniqueT
          SomeTechnique
          (ArticulationT Articulation (DynamicT Dynamics Pitch))))
  -&gt; HarmonicT
       (SlideT
          (TechniqueT
             SomeTechnique
             (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))
 -&gt; TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
 -&gt; TextT
      (HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics Pitch))))
    -&gt; HarmonicT
         (SlideT
            (TechniqueT
               SomeTechnique
               (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))
-&gt; (Pitch -&gt; [Pitch])
-&gt; TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics Pitch)))))
-&gt; TextT
     (HarmonicT
        (SlideT
           (TechniqueT
              SomeTechnique
              (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SlideT
   (TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch)))
 -&gt; SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))
-&gt; HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((SlideT
    (TechniqueT
       SomeTechnique
       (ArticulationT Articulation (DynamicT Dynamics Pitch)))
  -&gt; SlideT
       (TechniqueT
          SomeTechnique
          (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))
 -&gt; HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch))))
 -&gt; HarmonicT
      (SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics Pitch)))
    -&gt; SlideT
         (TechniqueT
            SomeTechnique
            (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))
-&gt; (Pitch -&gt; [Pitch])
-&gt; HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics Pitch))))
-&gt; HarmonicT
     (SlideT
        (TechniqueT
           SomeTechnique
           (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TechniqueT
   SomeTechnique
   (ArticulationT Articulation (DynamicT Dynamics Pitch))
 -&gt; TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics [Pitch])))
-&gt; SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics Pitch)))
-&gt; SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics [Pitch])))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((TechniqueT
    SomeTechnique
    (ArticulationT Articulation (DynamicT Dynamics Pitch))
  -&gt; TechniqueT
       SomeTechnique
       (ArticulationT Articulation (DynamicT Dynamics [Pitch])))
 -&gt; SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch)))
 -&gt; SlideT
      (TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics Pitch))
    -&gt; TechniqueT
         SomeTechnique
         (ArticulationT Articulation (DynamicT Dynamics [Pitch])))
-&gt; (Pitch -&gt; [Pitch])
-&gt; SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics Pitch)))
-&gt; SlideT
     (TechniqueT
        SomeTechnique
        (ArticulationT Articulation (DynamicT Dynamics [Pitch])))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ArticulationT Articulation (DynamicT Dynamics Pitch)
 -&gt; ArticulationT Articulation (DynamicT Dynamics [Pitch]))
-&gt; TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics Pitch))
-&gt; TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics [Pitch]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((ArticulationT Articulation (DynamicT Dynamics Pitch)
  -&gt; ArticulationT Articulation (DynamicT Dynamics [Pitch]))
 -&gt; TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics Pitch))
 -&gt; TechniqueT
      SomeTechnique
      (ArticulationT Articulation (DynamicT Dynamics [Pitch])))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; ArticulationT Articulation (DynamicT Dynamics Pitch)
    -&gt; ArticulationT Articulation (DynamicT Dynamics [Pitch]))
-&gt; (Pitch -&gt; [Pitch])
-&gt; TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics Pitch))
-&gt; TechniqueT
     SomeTechnique
     (ArticulationT Articulation (DynamicT Dynamics [Pitch]))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(DynamicT Dynamics Pitch -&gt; DynamicT Dynamics [Pitch])
-&gt; ArticulationT Articulation (DynamicT Dynamics Pitch)
-&gt; ArticulationT Articulation (DynamicT Dynamics [Pitch])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((DynamicT Dynamics Pitch -&gt; DynamicT Dynamics [Pitch])
 -&gt; ArticulationT Articulation (DynamicT Dynamics Pitch)
 -&gt; ArticulationT Articulation (DynamicT Dynamics [Pitch]))
-&gt; ((Pitch -&gt; [Pitch])
    -&gt; DynamicT Dynamics Pitch -&gt; DynamicT Dynamics [Pitch])
-&gt; (Pitch -&gt; [Pitch])
-&gt; ArticulationT Articulation (DynamicT Dynamics Pitch)
-&gt; ArticulationT Articulation (DynamicT Dynamics [Pitch])
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Pitch -&gt; [Pitch])
-&gt; DynamicT Dynamics Pitch -&gt; DynamicT Dynamics [Pitch]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; [Pitch]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-2123"></span><span>
</span><span id="line-2124"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#asp2ToAsp3"><span class="hs-identifier hs-type">asp2ToAsp3</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Voice.html#Voice"><span class="hs-identifier hs-type">Voice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp2"><span class="hs-identifier hs-type">Asp2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Voice.html#Voice"><span class="hs-identifier hs-type">Voice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2125"></span><span id="asp2ToAsp3"><span class="annot"><span class="annottext">asp2ToAsp3 :: MVoice Asp2 -&gt; MVoice Asp3
</span><a href="Music.Score.Export.StandardNotation.html#asp2ToAsp3"><span class="hs-identifier hs-var hs-var">asp2ToAsp3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2126"></span><span>  </span><span class="annot"><span class="annottext">MVoice Asp3 -&gt; MVoice Asp3
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2127"></span><span>    </span><span class="annot"><span class="annottext">(MVoice Asp3 -&gt; MVoice Asp3)
-&gt; (MVoice Asp2 -&gt; MVoice Asp3) -&gt; MVoice Asp2 -&gt; MVoice Asp3
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">MVoice Asp3 -&gt; MVoice Asp3
forall s a.
(HasPhrases' s a, HasDynamics' a, GetDynamic a ~ DynamicNotation,
 a ~ SetDynamic (GetDynamic a) a) =&gt;
s -&gt; s
</span><a href="Music.Score.Export.DynamicNotation.html#removeCloseDynMarks"><span class="hs-identifier hs-var">DN.removeCloseDynMarks</span></a></span><span>
</span><span id="line-2128"></span><span>          </span><span class="annot"><span class="annottext">(MVoice Asp3 -&gt; MVoice Asp3)
-&gt; (Voice
      (Maybe
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
    -&gt; MVoice Asp3)
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
-&gt; MVoice Asp3
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter
  (MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   ArticulationNotation
                                   (DynamicT (Ctxt Dynamics) [Pitch]))))))))))))
  (MVoice Asp3)
  (Ctxt Dynamics)
  DynamicNotation
-&gt; (Ctxt Dynamics -&gt; DynamicNotation)
-&gt; MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   ArticulationNotation (DynamicT (Ctxt Dynamics) [Pitch])))))))))))
-&gt; MVoice Asp3
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">ASetter
  (MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   ArticulationNotation
                                   (DynamicT (Ctxt Dynamics) [Pitch]))))))))))))
  (MVoice Asp3)
  (Ctxt Dynamics)
  DynamicNotation
forall s t.
HasDynamics s t =&gt;
Traversal s t (GetDynamic s) (GetDynamic t)
</span><a href="Music.Score.Dynamics.html#dynamics"><span class="hs-identifier hs-var">Music.Score.Dynamics.dynamics</span></a></span><span> </span><span class="annot"><span class="annottext">Ctxt Dynamics -&gt; DynamicNotation
forall a. (Ord a, Real a) =&gt; Ctxt a -&gt; DynamicNotation
</span><a href="Music.Score.Export.DynamicNotation.html#notateDynamic"><span class="hs-identifier hs-var">DN.notateDynamic</span></a></span><span>
</span><span id="line-2129"></span><span>          </span><span class="annot"><span class="annottext">(MVoice
   (TieT
      (PartT
         Part
         (StaffNumberT
            (TremoloT
               (ColorT
                  (TextT
                     (HarmonicT
                        (SlideT
                           (TechniqueT
                              TechniqueNotation
                              (ArticulationT
                                 ArticulationNotation (DynamicT (Ctxt Dynamics) [Pitch])))))))))))
 -&gt; MVoice Asp3)
-&gt; (Voice
      (Maybe
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
    -&gt; MVoice
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       ArticulationNotation
                                       (DynamicT (Ctxt Dynamics) [Pitch]))))))))))))
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
-&gt; MVoice Asp3
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Voice
  (Maybe
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
-&gt; MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   ArticulationNotation (DynamicT (Ctxt Dynamics) [Pitch])))))))))))
forall s t a b d.
(HasPhrases s t a b, HasDynamic a a, HasDynamic a b,
 GetDynamic a ~ d, GetDynamic b ~ Ctxt d) =&gt;
s -&gt; t
</span><a href="Music.Score.Dynamics.html#addDynCon"><span class="hs-identifier hs-var">Music.Score.Dynamics.addDynCon</span></a></span><span>
</span><span id="line-2130"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-2131"></span><span>    </span><span class="annot"><span class="annottext">(Voice
   (Maybe
      (TieT
         (PartT
            Part
            (StaffNumberT
               (TremoloT
                  (ColorT
                     (TextT
                        (HarmonicT
                           (SlideT
                              (TechniqueT
                                 TechniqueNotation
                                 (ArticulationT
                                    ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
 -&gt; MVoice Asp3)
-&gt; (MVoice Asp2
    -&gt; Voice
         (Maybe
            (TieT
               (PartT
                  Part
                  (StaffNumberT
                     (TremoloT
                        (ColorT
                           (TextT
                              (HarmonicT
                                 (SlideT
                                    (TechniqueT
                                       TechniqueNotation
                                       (ArticulationT
                                          ArticulationNotation
                                          (DynamicT Dynamics [Pitch])))))))))))))
-&gt; MVoice Asp2
-&gt; MVoice Asp3
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ASetter
  (MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   (Ctxt Articulation) (DynamicT Dynamics [Pitch]))))))))))))
  (Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch])))))))))))))
  (Ctxt Articulation)
  ArticulationNotation
-&gt; (Ctxt Articulation -&gt; ArticulationNotation)
-&gt; MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   (Ctxt Articulation) (DynamicT Dynamics [Pitch])))))))))))
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">ASetter
  (MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   (Ctxt Articulation) (DynamicT Dynamics [Pitch]))))))))))))
  (Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch])))))))))))))
  (Ctxt Articulation)
  ArticulationNotation
forall s t.
HasArticulations s t =&gt;
Traversal s t (Articulation s) (Articulation t)
</span><a href="Music.Score.Articulation.html#articulations"><span class="hs-identifier hs-var">Music.Score.Articulation.articulations</span></a></span><span> </span><span class="annot"><span class="annottext">Ctxt Articulation -&gt; ArticulationNotation
forall a.
(Ord a, Articulated a, Real (Separation a),
 Real (Accentuation a)) =&gt;
Ctxt a -&gt; ArticulationNotation
</span><a href="Music.Score.Export.ArticulationNotation.html#notateArticulation"><span class="hs-identifier hs-var">AN.notateArticulation</span></a></span><span>
</span><span id="line-2132"></span><span>          </span><span class="annot"><span class="annottext">(MVoice
   (TieT
      (PartT
         Part
         (StaffNumberT
            (TremoloT
               (ColorT
                  (TextT
                     (HarmonicT
                        (SlideT
                           (TechniqueT
                              TechniqueNotation
                              (ArticulationT
                                 (Ctxt Articulation) (DynamicT Dynamics [Pitch])))))))))))
 -&gt; Voice
      (Maybe
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       ArticulationNotation (DynamicT Dynamics [Pitch])))))))))))))
-&gt; (Voice
      (Maybe
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       Articulation (DynamicT Dynamics [Pitch]))))))))))))
    -&gt; MVoice
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       (Ctxt Articulation) (DynamicT Dynamics [Pitch]))))))))))))
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      Articulation (DynamicT Dynamics [Pitch]))))))))))))
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Voice
  (Maybe
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))))))
-&gt; MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                TechniqueNotation
                                (ArticulationT
                                   (Ctxt Articulation) (DynamicT Dynamics [Pitch])))))))))))
forall s t a b d.
(HasPhrases s t a b, HasArticulation' a, HasArticulation a b,
 Articulation a ~ d, Articulation b ~ Ctxt d) =&gt;
s -&gt; t
</span><a href="Music.Score.Articulation.html#addArtCon"><span class="hs-identifier hs-var">Music.Score.Articulation.addArtCon</span></a></span><span>
</span><span id="line-2133"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-2134"></span><span>    </span><span class="annot"><span class="annottext">(Voice
   (Maybe
      (TieT
         (PartT
            Part
            (StaffNumberT
               (TremoloT
                  (ColorT
                     (TextT
                        (HarmonicT
                           (SlideT
                              (TechniqueT
                                 TechniqueNotation
                                 (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))))))
 -&gt; Voice
      (Maybe
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       ArticulationNotation (DynamicT Dynamics [Pitch])))))))))))))
-&gt; (MVoice Asp2
    -&gt; Voice
         (Maybe
            (TieT
               (PartT
                  Part
                  (StaffNumberT
                     (TremoloT
                        (ColorT
                           (TextT
                              (HarmonicT
                                 (SlideT
                                    (TechniqueT
                                       TechniqueNotation
                                       (ArticulationT
                                          Articulation (DynamicT Dynamics [Pitch])))))))))))))
-&gt; MVoice Asp2
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      ArticulationNotation (DynamicT Dynamics [Pitch]))))))))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-2135"></span><span>        </span><span class="hs-comment">-- TODO do &quot;removeCloseDynMarks for playing techniques&quot;</span><span>
</span><span id="line-2136"></span><span>        </span><span class="annot"><span class="annottext">ASetter
  (MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                (Ctxt SomeTechnique)
                                (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))))))
  (Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      Articulation (DynamicT Dynamics [Pitch])))))))))))))
  (Ctxt SomeTechnique)
  TechniqueNotation
-&gt; (Ctxt SomeTechnique -&gt; TechniqueNotation)
-&gt; MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                (Ctxt SomeTechnique)
                                (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))))
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      Articulation (DynamicT Dynamics [Pitch]))))))))))))
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="annot"><span class="annottext">ASetter
  (MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                (Ctxt SomeTechnique)
                                (ArticulationT Articulation (DynamicT Dynamics [Pitch]))))))))))))
  (Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      Articulation (DynamicT Dynamics [Pitch])))))))))))))
  (Ctxt SomeTechnique)
  TechniqueNotation
forall s t.
HasTechniques s t =&gt;
Traversal s t (Technique s) (Technique t)
</span><a href="Music.Score.Technique.html#techniques"><span class="hs-identifier hs-var">techniques</span></a></span><span> </span><span class="annot"><span class="annottext">Ctxt SomeTechnique -&gt; TechniqueNotation
</span><a href="Music.Score.Export.TechniqueNotation.html#notateTechnique"><span class="hs-identifier hs-var">TN.notateTechnique</span></a></span><span>
</span><span id="line-2137"></span><span>          </span><span class="annot"><span class="annottext">(MVoice
   (TieT
      (PartT
         Part
         (StaffNumberT
            (TremoloT
               (ColorT
                  (TextT
                     (HarmonicT
                        (SlideT
                           (TechniqueT
                              (Ctxt SomeTechnique)
                              (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))))
 -&gt; Voice
      (Maybe
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    TechniqueNotation
                                    (ArticulationT
                                       Articulation (DynamicT Dynamics [Pitch])))))))))))))
-&gt; (MVoice Asp2
    -&gt; MVoice
         (TieT
            (PartT
               Part
               (StaffNumberT
                  (TremoloT
                     (ColorT
                        (TextT
                           (HarmonicT
                              (SlideT
                                 (TechniqueT
                                    (Ctxt SomeTechnique)
                                    (ArticulationT
                                       Articulation (DynamicT Dynamics [Pitch]))))))))))))
-&gt; MVoice Asp2
-&gt; Voice
     (Maybe
        (TieT
           (PartT
              Part
              (StaffNumberT
                 (TremoloT
                    (ColorT
                       (TextT
                          (HarmonicT
                             (SlideT
                                (TechniqueT
                                   TechniqueNotation
                                   (ArticulationT
                                      Articulation (DynamicT Dynamics [Pitch]))))))))))))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MVoice Asp2
-&gt; MVoice
     (TieT
        (PartT
           Part
           (StaffNumberT
              (TremoloT
                 (ColorT
                    (TextT
                       (HarmonicT
                          (SlideT
                             (TechniqueT
                                (Ctxt SomeTechnique)
                                (ArticulationT Articulation (DynamicT Dynamics [Pitch])))))))))))
forall s t a b d.
(HasPhrases s t a b, HasTechnique a a, HasTechnique a b,
 Technique a ~ d, Technique b ~ Ctxt d) =&gt;
s -&gt; t
</span><a href="Music.Score.Technique.html#addTechniqueCon"><span class="hs-identifier hs-var">Music.Score.Technique.addTechniqueCon</span></a></span><span>
</span><span id="line-2138"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-2139"></span><span>
</span><span id="line-2140"></span><span class="hs-comment">-- TODO optionally log quantization</span><span>
</span><span id="line-2141"></span><span id="local-6989586621680603711"><span id="local-6989586621680603712"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#quantizeBar"><span class="hs-identifier hs-type">quantizeBar</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2142"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#StandardNotationExportM"><span class="hs-identifier hs-type">StandardNotationExportM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603712"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Ties.html#Tiable"><span class="hs-identifier hs-type">Tiable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603711"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-2143"></span><span>  </span><span class="annot"><a href="Music.Time.Voice.html#Voice"><span class="hs-identifier hs-type">Voice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603711"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2144"></span><span>  </span><span class="annot"><a href="#local-6989586621680603712"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603711"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-2145"></span><span id="quantizeBar"><span class="annot"><span class="annottext">quantizeBar :: Voice (Maybe a) -&gt; m (Rhythm (Maybe a))
</span><a href="Music.Score.Export.StandardNotation.html#quantizeBar"><span class="hs-identifier hs-var hs-var">quantizeBar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rhythm (Maybe a) -&gt; Rhythm (Maybe a))
-&gt; m (Rhythm (Maybe a)) -&gt; m (Rhythm (Maybe a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm (Maybe a) -&gt; Rhythm (Maybe a)
forall a. Rhythm a -&gt; Rhythm a
</span><a href="Music.Score.Internal.Quantize.html#rewrite"><span class="hs-identifier hs-var">rewrite</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Rhythm (Maybe a)) -&gt; m (Rhythm (Maybe a)))
-&gt; (Voice (Maybe a) -&gt; m (Rhythm (Maybe a)))
-&gt; Voice (Maybe a)
-&gt; m (Rhythm (Maybe a))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(Duration, Maybe a)] -&gt; m (Rhythm (Maybe a))
forall a (m :: * -&gt; *).
(Tiable a, MonadError String m) =&gt;
[(Duration, a)] -&gt; m (Rhythm a)
</span><a href="#local-6989586621680601910"><span class="hs-identifier hs-var">quantize'</span></a></span><span> </span><span class="annot"><span class="annottext">([(Duration, Maybe a)] -&gt; m (Rhythm (Maybe a)))
-&gt; (Voice (Maybe a) -&gt; [(Duration, Maybe a)])
-&gt; Voice (Maybe a)
-&gt; m (Rhythm (Maybe a))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Duration, Maybe a)] (Voice (Maybe a)) [(Duration, Maybe a)]
-&gt; Voice (Maybe a) -&gt; [(Duration, Maybe a)]
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting
  [(Duration, Maybe a)] (Voice (Maybe a)) [(Duration, Maybe a)]
forall a b. Iso (Voice a) (Voice b) [(Duration, a)] [(Duration, b)]
</span><a href="Music.Time.Voice.html#pairs"><span class="hs-identifier hs-var">Music.Time.pairs</span></a></span><span>
</span><span id="line-2146"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2147"></span><span>    </span><span id="local-6989586621680601910"><span class="annot"><span class="annottext">quantize' :: [(Duration, a)] -&gt; m (Rhythm a)
</span><a href="#local-6989586621680601910"><span class="hs-identifier hs-var hs-var">quantize'</span></a></span></span><span> </span><span id="local-6989586621680601908"><span class="annot"><span class="annottext">x :: [(Duration, a)]
</span><a href="#local-6989586621680601908"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Duration, a)] -&gt; Either String (Rhythm a)
forall a. Tiable a =&gt; [(Duration, a)] -&gt; Either String (Rhythm a)
</span><a href="Music.Score.Internal.Quantize.html#quantize"><span class="hs-identifier hs-var">quantize</span></a></span><span> </span><span class="annot"><span class="annottext">[(Duration, a)]
</span><a href="#local-6989586621680601908"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2148"></span><span>      </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680601907"><span class="annot"><span class="annottext">e :: String
</span><a href="#local-6989586621680601907"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m (Rhythm a)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m (Rhythm a)) -&gt; String -&gt; m (Rhythm a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Quantization failed: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680601907"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2149"></span><span>      </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680601906"><span class="annot"><span class="annottext">x :: Rhythm a
</span><a href="#local-6989586621680601906"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Rhythm a -&gt; m (Rhythm a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm a
</span><a href="#local-6989586621680601906"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2150"></span><span>
</span><span id="line-2151"></span><span class="hs-comment">-- | Convert a list of part into a 'LabelTree BracketType' of parts (e.g.</span><span>
</span><span id="line-2152"></span><span class="hs-comment">-- a tree with bracket/brace information).</span><span>
</span><span id="line-2153"></span><span id="local-6989586621680603710"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#generateStaffGrouping"><span class="hs-identifier hs-type">generateStaffGrouping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603710"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603710"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2154"></span><span id="generateStaffGrouping"><span class="annot"><span class="annottext">generateStaffGrouping :: [(Part, a)] -&gt; LabelTree BracketType (Part, a)
</span><a href="Music.Score.Export.StandardNotation.html#generateStaffGrouping"><span class="hs-identifier hs-var hs-var">generateStaffGrouping</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScoreLayout (Part, a) -&gt; LabelTree BracketType (Part, a)
forall a. ScoreLayout a -&gt; LabelTree BracketType a
</span><a href="Music.Score.Export.StandardNotation.html#scoreLayoutToLabelTree"><span class="hs-identifier hs-var">scoreLayoutToLabelTree</span></a></span><span> </span><span class="annot"><span class="annottext">(ScoreLayout (Part, a) -&gt; LabelTree BracketType (Part, a))
-&gt; ([(Part, a)] -&gt; ScoreLayout (Part, a))
-&gt; [(Part, a)]
-&gt; LabelTree BracketType (Part, a)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(Part, a)] -&gt; ScoreLayout (Part, a)
forall a. [(Part, a)] -&gt; ScoreLayout (Part, a)
</span><a href="Music.Score.Export.StandardNotation.html#partDefault"><span class="hs-identifier hs-var">partDefault</span></a></span><span>
</span><span id="line-2155"></span><span>
</span><span id="line-2156"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#aspectsToStaff"><span class="hs-identifier hs-type">aspectsToStaff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Music.Parts.Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#List0To4"><span class="hs-identifier hs-type">List0To4</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2157"></span><span id="aspectsToStaff"><span class="annot"><span class="annottext">aspectsToStaff :: (Part, List0To4 [Rhythm (Maybe Asp3)]) -&gt; [Staff]
</span><a href="Music.Score.Export.StandardNotation.html#aspectsToStaff"><span class="hs-identifier hs-var hs-var">aspectsToStaff</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680601903"><span class="annot"><span class="annottext">part :: Part
</span><a href="#local-6989586621680601903"><span class="hs-identifier hs-var">part</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#UnsafeList0To4"><span class="hs-identifier hs-type">UnsafeList0To4</span></a></span><span> </span><span id="local-6989586621680601902"><span class="annot"><span class="annottext">voices :: [[Rhythm (Maybe Asp3)]]
</span><a href="#local-6989586621680601902"><span class="hs-identifier hs-var">voices</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2158"></span><span>  </span><span class="annot"><span class="annottext">([Rhythm (Maybe Asp3)] -&gt; Staff)
-&gt; [[Rhythm (Maybe Asp3)]] -&gt; [Staff]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part -&gt; [Rhythm (Maybe Asp3)] -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#singleStaff"><span class="hs-identifier hs-var">singleStaff</span></a></span><span> </span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601903"><span class="hs-identifier hs-var">part</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Rhythm (Maybe Asp3)]]
</span><a href="#local-6989586621680601902"><span class="hs-identifier hs-var">voices</span></a></span><span>
</span><span id="line-2159"></span><span>
</span><span id="line-2160"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#singleStaff"><span class="hs-identifier hs-type">singleStaff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Part</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-type">Staff</span></a></span><span>
</span><span id="line-2161"></span><span id="singleStaff"><span class="annot"><span class="annottext">singleStaff :: Part -&gt; [Rhythm (Maybe Asp3)] -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#singleStaff"><span class="hs-identifier hs-var hs-var">singleStaff</span></a></span></span><span> </span><span id="local-6989586621680601900"><span class="annot"><span class="annottext">part :: Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span></span><span> </span><span id="local-6989586621680601899"><span class="annot"><span class="annottext">bars :: [Rhythm (Maybe Asp3)]
</span><a href="#local-6989586621680601899"><span class="hs-identifier hs-var">bars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaffInfo -&gt; [Bar] -&gt; Staff
</span><a href="Music.Score.Export.StandardNotation.html#Staff"><span class="hs-identifier hs-var">Staff</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo
</span><a href="#local-6989586621680601898"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Rhythm (Maybe Asp3) -&gt; Bar) -&gt; [Rhythm (Maybe Asp3)] -&gt; [Bar]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm (Maybe Asp3) -&gt; Bar
</span><a href="Music.Score.Export.StandardNotation.html#aspectsToBar"><span class="hs-identifier hs-var">aspectsToBar</span></a></span><span> </span><span class="annot"><span class="annottext">[Rhythm (Maybe Asp3)]
</span><a href="#local-6989586621680601899"><span class="hs-identifier hs-var">bars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2162"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2163"></span><span>    </span><span id="local-6989586621680601898"><span class="annot"><span class="annottext">info :: StaffInfo
</span><a href="#local-6989586621680601898"><span class="hs-identifier hs-var hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2164"></span><span>      </span><span class="annot"><span class="annottext">StaffInfo -&gt; StaffInfo
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2165"></span><span>        </span><span class="annot"><span class="annottext">(StaffInfo -&gt; StaffInfo) -&gt; StaffInfo -&gt; StaffInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Transposition -&gt; Identity Transposition)
-&gt; StaffInfo -&gt; Identity StaffInfo
Lens' StaffInfo Transposition
</span><a href="Music.Score.Export.StandardNotation.html#transposition"><span class="hs-identifier hs-var">transposition</span></a></span><span>
</span><span id="line-2166"></span><span>          </span><span class="annot"><span class="annottext">((Transposition -&gt; Identity Transposition)
 -&gt; StaffInfo -&gt; Identity StaffInfo)
-&gt; Transposition -&gt; StaffInfo -&gt; StaffInfo
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting Transposition Part Transposition -&gt; Transposition
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Const Transposition Instrument)
-&gt; Part -&gt; Const Transposition Part
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Instrument -&gt; Const Transposition Instrument)
 -&gt; Part -&gt; Const Transposition Part)
-&gt; ((Transposition -&gt; Const Transposition Transposition)
    -&gt; Instrument -&gt; Const Transposition Instrument)
-&gt; Getting Transposition Part Transposition
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Transposition)
-&gt; (Transposition -&gt; Const Transposition Transposition)
-&gt; Instrument
-&gt; Const Transposition Instrument
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; Transposition
</span><a href="Music.Parts.Instrument.html#transposition"><span class="hs-identifier hs-var">Music.Parts.transposition</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2167"></span><span>        </span><span class="annot"><span class="annottext">(StaffInfo -&gt; StaffInfo) -&gt; StaffInfo -&gt; StaffInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Clef -&gt; Identity Clef) -&gt; StaffInfo -&gt; Identity StaffInfo
Lens' StaffInfo Clef
</span><a href="Music.Score.Export.StandardNotation.html#instrumentDefaultClef"><span class="hs-identifier hs-var">instrumentDefaultClef</span></a></span><span>
</span><span id="line-2168"></span><span>          </span><span class="annot"><span class="annottext">((Clef -&gt; Identity Clef) -&gt; StaffInfo -&gt; Identity StaffInfo)
-&gt; Clef -&gt; StaffInfo -&gt; StaffInfo
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Clef -&gt; Maybe Clef -&gt; Clef
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.Maybe.fromMaybe</span></a></span><span>
</span><span id="line-2169"></span><span>            </span><span class="annot"><span class="annottext">Clef
</span><a href="Music.Pitch.Clef.html#trebleClef"><span class="hs-identifier hs-var">Music.Pitch.trebleClef</span></a></span><span>
</span><span id="line-2170"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting (Maybe Clef) Part (Maybe Clef) -&gt; Maybe Clef
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Const (Maybe Clef) Instrument)
-&gt; Part -&gt; Const (Maybe Clef) Part
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Instrument -&gt; Const (Maybe Clef) Instrument)
 -&gt; Part -&gt; Const (Maybe Clef) Part)
-&gt; ((Maybe Clef -&gt; Const (Maybe Clef) (Maybe Clef))
    -&gt; Instrument -&gt; Const (Maybe Clef) Instrument)
-&gt; Getting (Maybe Clef) Part (Maybe Clef)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Maybe Clef)
-&gt; (Maybe Clef -&gt; Const (Maybe Clef) (Maybe Clef))
-&gt; Instrument
-&gt; Const (Maybe Clef) Instrument
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; Maybe Clef
</span><a href="Music.Parts.Instrument.html#standardClef"><span class="hs-identifier hs-var">Music.Parts.standardClef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2171"></span><span>        </span><span class="annot"><span class="annottext">(StaffInfo -&gt; StaffInfo) -&gt; StaffInfo -&gt; StaffInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Identity String) -&gt; StaffInfo -&gt; Identity StaffInfo
Lens' StaffInfo String
</span><a href="Music.Score.Export.StandardNotation.html#instrumentShortName"><span class="hs-identifier hs-var">instrumentShortName</span></a></span><span>
</span><span id="line-2172"></span><span>          </span><span class="annot"><span class="annottext">((String -&gt; Identity String) -&gt; StaffInfo -&gt; Identity StaffInfo)
-&gt; String -&gt; StaffInfo -&gt; StaffInfo
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; String
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.Maybe.fromMaybe</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting (Maybe String) Part (Maybe String) -&gt; Maybe String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Const (Maybe String) Instrument)
-&gt; Part -&gt; Const (Maybe String) Part
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Instrument -&gt; Const (Maybe String) Instrument)
 -&gt; Part -&gt; Const (Maybe String) Part)
-&gt; ((Maybe String -&gt; Const (Maybe String) (Maybe String))
    -&gt; Instrument -&gt; Const (Maybe String) Instrument)
-&gt; Getting (Maybe String) Part (Maybe String)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Maybe String)
-&gt; (Maybe String -&gt; Const (Maybe String) (Maybe String))
-&gt; Instrument
-&gt; Const (Maybe String) Instrument
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; Maybe String
</span><a href="Music.Parts.Instrument.html#shortName"><span class="hs-identifier hs-var">Music.Parts.shortName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2173"></span><span>        </span><span class="annot"><span class="annottext">(StaffInfo -&gt; StaffInfo) -&gt; StaffInfo -&gt; StaffInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Identity String) -&gt; StaffInfo -&gt; Identity StaffInfo
Lens' StaffInfo String
</span><a href="Music.Score.Export.StandardNotation.html#instrumentFullName"><span class="hs-identifier hs-var">instrumentFullName</span></a></span><span>
</span><span id="line-2174"></span><span>          </span><span class="annot"><span class="annottext">((String -&gt; Identity String) -&gt; StaffInfo -&gt; Identity StaffInfo)
-&gt; String -&gt; StaffInfo -&gt; StaffInfo
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.List.intercalate</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe String] -&gt; [String]
forall a. [Maybe a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Data.Maybe.catMaybes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621680601892"><span class="hs-identifier hs-var">soloStr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621680601891"><span class="hs-identifier hs-var">nameStr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621680601890"><span class="hs-identifier hs-var">subpartStr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2175"></span><span>        </span><span class="annot"><span class="annottext">(StaffInfo -&gt; StaffInfo) -&gt; StaffInfo -&gt; StaffInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StaffInfo
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-2176"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-2177"></span><span>        </span><span id="local-6989586621680601892"><span class="annot"><span class="annottext">soloStr :: Maybe String
</span><a href="#local-6989586621680601892"><span class="hs-identifier hs-var hs-var">soloStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting Solo Part Solo -&gt; Solo
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Solo Part Solo
Lens' Part Solo
</span><a href="Music.Parts.Part.html#_solo"><span class="hs-identifier hs-var">Music.Parts._solo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Solo -&gt; Solo -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Solo
</span><a href="Music.Parts.Solo.html#Solo"><span class="hs-identifier hs-var">Music.Parts.Solo</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Solo&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2178"></span><span>        </span><span id="local-6989586621680601891"><span class="annot"><span class="annottext">nameStr :: Maybe String
</span><a href="#local-6989586621680601891"><span class="hs-identifier hs-var hs-var">nameStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting (Maybe String) Part (Maybe String) -&gt; Maybe String
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Const (Maybe String) Instrument)
-&gt; Part -&gt; Const (Maybe String) Part
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Instrument -&gt; Const (Maybe String) Instrument)
 -&gt; Part -&gt; Const (Maybe String) Part)
-&gt; ((Maybe String -&gt; Const (Maybe String) (Maybe String))
    -&gt; Instrument -&gt; Const (Maybe String) Instrument)
-&gt; Getting (Maybe String) Part (Maybe String)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Instrument -&gt; Maybe String)
-&gt; (Maybe String -&gt; Const (Maybe String) (Maybe String))
-&gt; Instrument
-&gt; Const (Maybe String) Instrument
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">Instrument -&gt; Maybe String
</span><a href="Music.Parts.Instrument.html#fullName"><span class="hs-identifier hs-var">Music.Parts.fullName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2179"></span><span>        </span><span id="local-6989586621680601890"><span class="annot"><span class="annottext">subpartStr :: Maybe String
</span><a href="#local-6989586621680601890"><span class="hs-identifier hs-var hs-var">subpartStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Maybe String) -&gt; String -&gt; Maybe String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Subpart -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601900"><span class="hs-identifier hs-var">part</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting Subpart Part Subpart -&gt; Subpart
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Subpart Part Subpart
forall a. HasSubpart a =&gt; Lens' a (SubpartOf a)
</span><a href="Music.Parts.Subpart.html#subpart"><span class="hs-identifier hs-var">Music.Parts.subpart</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2180"></span><span>
</span><span id="line-2181"></span><span class="hs-comment">-- | Group all parts in the default way (e.g. a standard orchestral score with woodwinds</span><span>
</span><span id="line-2182"></span><span class="hs-comment">-- on top, followed by brass, etc).</span><span>
</span><span id="line-2183"></span><span id="local-6989586621680603638"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#partDefault"><span class="hs-identifier hs-type">partDefault</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Music.Parts.Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603638"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Parts.Group.html#ScoreLayout"><span class="hs-identifier hs-type">ScoreLayout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Part.html#Part"><span class="hs-identifier hs-type">Music.Parts.Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680603638"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2184"></span><span id="partDefault"><span class="annot"><span class="annottext">partDefault :: [(Part, a)] -&gt; ScoreLayout (Part, a)
</span><a href="Music.Score.Export.StandardNotation.html#partDefault"><span class="hs-identifier hs-var hs-var">partDefault</span></a></span></span><span> </span><span id="local-6989586621680601885"><span class="annot"><span class="annottext">xs :: [(Part, a)]
</span><a href="#local-6989586621680601885"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Instrument, (Part, a))] -&gt; ScoreLayout (Part, a)
forall a. [(Instrument, a)] -&gt; ScoreLayout a
</span><a href="Music.Parts.Group.html#groupDefault"><span class="hs-identifier hs-var">Music.Parts.groupDefault</span></a></span><span> </span><span class="annot"><span class="annottext">([(Instrument, (Part, a))] -&gt; ScoreLayout (Part, a))
-&gt; [(Instrument, (Part, a))] -&gt; ScoreLayout (Part, a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Part, a) -&gt; (Instrument, (Part, a)))
-&gt; [(Part, a)] -&gt; [(Instrument, (Part, a))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680601883"><span class="annot"><span class="annottext">p :: Part
</span><a href="#local-6989586621680601883"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601882"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680601882"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601883"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Part -&gt; Getting Instrument Part Instrument -&gt; Instrument
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting Instrument Part Instrument
Lens' Part Instrument
</span><a href="Music.Parts.Part.html#instrument"><span class="hs-identifier hs-var">Music.Parts.instrument</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Part
</span><a href="#local-6989586621680601883"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680601882"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Part, a)]
</span><a href="#local-6989586621680601885"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-2185"></span><span>
</span><span id="line-2186"></span><span class="hs-comment">-- | Transform the staff grouping representation from `Music.Parts` into the one</span><span>
</span><span id="line-2187"></span><span class="hs-comment">-- used by 'Work'.</span><span>
</span><span id="line-2188"></span><span id="local-6989586621680603639"><span class="annot"><a href="Music.Score.Export.StandardNotation.html#scoreLayoutToLabelTree"><span class="hs-identifier hs-type">scoreLayoutToLabelTree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Parts.Group.html#ScoreLayout"><span class="hs-identifier hs-type">ScoreLayout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603639"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LabelTree"><span class="hs-identifier hs-type">LabelTree</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#BracketType"><span class="hs-identifier hs-type">BracketType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680603639"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2189"></span><span id="scoreLayoutToLabelTree"><span class="annot"><span class="annottext">scoreLayoutToLabelTree :: ScoreLayout a -&gt; LabelTree BracketType a
</span><a href="Music.Score.Export.StandardNotation.html#scoreLayoutToLabelTree"><span class="hs-identifier hs-var hs-var">scoreLayoutToLabelTree</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Group.html#Single"><span class="hs-identifier hs-type">Single</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601880"><span class="annot"><span class="annottext">a :: a
</span><a href="#local-6989586621680601880"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; LabelTree BracketType a
forall b a. a -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Leaf"><span class="hs-identifier hs-var">Leaf</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680601880"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-2190"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#scoreLayoutToLabelTree"><span class="hs-identifier hs-var">scoreLayoutToLabelTree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Parts.Group.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span id="local-6989586621680601878"><span class="annot"><span class="annottext">gt :: GroupType
</span><a href="#local-6989586621680601878"><span class="hs-identifier hs-var">gt</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621680601877"><span class="annot"><span class="annottext">xs :: [ScoreLayout a]
</span><a href="#local-6989586621680601877"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BracketType -&gt; [LabelTree BracketType a] -&gt; LabelTree BracketType a
forall b a. b -&gt; [LabelTree b a] -&gt; LabelTree b a
</span><a href="Music.Score.Export.StandardNotation.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GroupType -&gt; BracketType
</span><a href="#local-6989586621680601876"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">GroupType
</span><a href="#local-6989586621680601878"><span class="hs-identifier hs-var">gt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ScoreLayout a -&gt; LabelTree BracketType a)
-&gt; [ScoreLayout a] -&gt; [LabelTree BracketType a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">ScoreLayout a -&gt; LabelTree BracketType a
forall a. ScoreLayout a -&gt; LabelTree BracketType a
</span><a href="Music.Score.Export.StandardNotation.html#scoreLayoutToLabelTree"><span class="hs-identifier hs-var">scoreLayoutToLabelTree</span></a></span><span> </span><span class="annot"><span class="annottext">[ScoreLayout a]
</span><a href="#local-6989586621680601877"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2191"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2192"></span><span>    </span><span id="local-6989586621680601876"><span class="annot"><span class="annottext">k :: GroupType -&gt; BracketType
</span><a href="#local-6989586621680601876"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="annot"><a href="Music.Parts.Group.html#Bracket"><span class="hs-identifier hs-type">Music.Parts.Bracket</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#Bracket"><span class="hs-identifier hs-var">Bracket</span></a></span><span>
</span><span id="line-2193"></span><span>    </span><span class="annot"><a href="#local-6989586621680601876"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Group.html#Invisible"><span class="hs-identifier hs-type">Music.Parts.Invisible</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#NoBracket"><span class="hs-identifier hs-var">NoBracket</span></a></span><span>
</span><span id="line-2194"></span><span>    </span><span class="annot"><a href="#local-6989586621680601876"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Group.html#PianoStaff"><span class="hs-identifier hs-type">Music.Parts.PianoStaff</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#Brace"><span class="hs-identifier hs-var">Brace</span></a></span><span>
</span><span id="line-2195"></span><span>    </span><span class="annot"><a href="#local-6989586621680601876"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><a href="Music.Parts.Group.html#GrandStaff"><span class="hs-identifier hs-type">Music.Parts.GrandStaff</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#Brace"><span class="hs-identifier hs-var">Brace</span></a></span><span>
</span><span id="line-2196"></span><span>    </span><span class="annot"><a href="#local-6989586621680601876"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BracketType
</span><a href="Music.Score.Export.StandardNotation.html#NoBracket"><span class="hs-identifier hs-var">NoBracket</span></a></span><span>
</span><span id="line-2197"></span><span>
</span><span id="line-2198"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#aspectsToChord"><span class="hs-identifier hs-type">aspectsToChord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Chord"><span class="hs-identifier hs-type">Chord</span></a></span><span>
</span><span id="line-2199"></span><span id="aspectsToChord"><span class="annot"><span class="annottext">aspectsToChord :: Maybe Asp3 -&gt; Chord
</span><a href="Music.Score.Export.StandardNotation.html#aspectsToChord"><span class="hs-identifier hs-var hs-var">aspectsToChord</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Chord
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-2200"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#aspectsToChord"><span class="hs-identifier hs-var">aspectsToChord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680601870"><span class="annot"><span class="annottext">asp :: Asp3
</span><a href="#local-6989586621680601870"><span class="hs-identifier hs-var">asp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2201"></span><span>  </span><span class="annot"><span class="annottext">Chord -&gt; Chord
forall k (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2202"></span><span>    </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((SmallOrLarge, SmallOrLarge)
 -&gt; Identity (SmallOrLarge, SmallOrLarge))
-&gt; Chord -&gt; Identity Chord
Lens' Chord (SmallOrLarge, SmallOrLarge)
</span><a href="Music.Score.Export.StandardNotation.html#ties"><span class="hs-identifier hs-var">ties</span></a></span><span> </span><span class="annot"><span class="annottext">(((SmallOrLarge, SmallOrLarge)
  -&gt; Identity (SmallOrLarge, SmallOrLarge))
 -&gt; Chord -&gt; Identity Chord)
-&gt; (SmallOrLarge, SmallOrLarge) -&gt; Chord -&gt; Chord
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; SmallOrLarge
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680601869"><span class="hs-identifier hs-var">endTie</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SmallOrLarge
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680601868"><span class="hs-identifier hs-var">beginTie</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2203"></span><span>    </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(DynamicNotation -&gt; Identity DynamicNotation)
-&gt; Chord -&gt; Identity Chord
Lens' Chord DynamicNotation
</span><a href="Music.Score.Export.StandardNotation.html#dynamicNotation"><span class="hs-identifier hs-var">dynamicNotation</span></a></span><span> </span><span class="annot"><span class="annottext">((DynamicNotation -&gt; Identity DynamicNotation)
 -&gt; Chord -&gt; Identity Chord)
-&gt; DynamicNotation -&gt; Chord -&gt; Chord
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Asp3
</span><a href="#local-6989586621680601870"><span class="hs-identifier hs-var">asp</span></a></span><span> </span><span class="annot"><span class="annottext">Asp3
-&gt; Getting DynamicNotation Asp3 DynamicNotation -&gt; DynamicNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting DynamicNotation Asp3 DynamicNotation
forall s t.
HasDynamic s t =&gt;
Lens s t (GetDynamic s) (GetDynamic t)
</span><a href="Music.Score.Dynamics.html#dynamic"><span class="hs-identifier hs-var">Music.Score.Dynamics.dynamic</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2204"></span><span>    </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(ArticulationNotation -&gt; Identity ArticulationNotation)
-&gt; Chord -&gt; Identity Chord
Lens' Chord ArticulationNotation
</span><a href="Music.Score.Export.StandardNotation.html#articulationNotation"><span class="hs-identifier hs-var">articulationNotation</span></a></span><span> </span><span class="annot"><span class="annottext">((ArticulationNotation -&gt; Identity ArticulationNotation)
 -&gt; Chord -&gt; Identity Chord)
-&gt; ArticulationNotation -&gt; Chord -&gt; Chord
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Asp3
</span><a href="#local-6989586621680601870"><span class="hs-identifier hs-var">asp</span></a></span><span> </span><span class="annot"><span class="annottext">Asp3
-&gt; Getting ArticulationNotation Asp3 ArticulationNotation
-&gt; ArticulationNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting ArticulationNotation Asp3 ArticulationNotation
forall s t.
HasArticulation s t =&gt;
Lens s t (Articulation s) (Articulation t)
</span><a href="Music.Score.Articulation.html#articulation"><span class="hs-identifier hs-var">Music.Score.Articulation.articulation</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2205"></span><span>    </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">([Pitch] -&gt; Identity [Pitch]) -&gt; Chord -&gt; Identity Chord
Lens' Chord [Pitch]
</span><a href="Music.Score.Export.StandardNotation.html#pitches"><span class="hs-identifier hs-var">pitches</span></a></span><span> </span><span class="annot"><span class="annottext">(([Pitch] -&gt; Identity [Pitch]) -&gt; Chord -&gt; Identity Chord)
-&gt; [Pitch] -&gt; Chord -&gt; Chord
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Asp3
</span><a href="#local-6989586621680601870"><span class="hs-identifier hs-var">asp</span></a></span><span> </span><span class="annot"><span class="annottext">Asp3 -&gt; Getting (Endo [Pitch]) Asp3 Pitch -&gt; [Pitch]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Endo [Pitch]) Asp3 Pitch
forall s t. HasPitches s t =&gt; Traversal s t (Pitch s) (Pitch t)
</span><a href="Music.Score.Pitch.html#pitches"><span class="hs-identifier hs-var">Music.Score.Pitch.pitches</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2206"></span><span>    </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; Identity [String]) -&gt; Chord -&gt; Identity Chord
Lens' Chord [String]
</span><a href="Music.Score.Export.StandardNotation.html#chordText"><span class="hs-identifier hs-var">chordText</span></a></span><span> </span><span class="annot"><span class="annottext">(([String] -&gt; Identity [String]) -&gt; Chord -&gt; Identity Chord)
-&gt; [String] -&gt; Chord -&gt; Chord
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">TechniqueNotation -&gt; [String]
</span><a href="Music.Score.Export.TechniqueNotation.html#textualNotations"><span class="hs-identifier hs-var">TN.textualNotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Asp3
</span><a href="#local-6989586621680601870"><span class="hs-identifier hs-var">asp</span></a></span><span> </span><span class="annot"><span class="annottext">Asp3
-&gt; Getting TechniqueNotation Asp3 TechniqueNotation
-&gt; TechniqueNotation
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting TechniqueNotation Asp3 TechniqueNotation
forall s t.
HasTechnique s t =&gt;
Lens s t (Technique s) (Technique t)
</span><a href="Music.Score.Technique.html#technique"><span class="hs-identifier hs-var">Music.Score.Technique.technique</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2207"></span><span>    </span><span class="hs-comment">-- TODO: $ harmonicNotation .~ _ asp</span><span>
</span><span id="line-2208"></span><span>    </span><span class="annot"><span class="annottext">(Chord -&gt; Chord) -&gt; Chord -&gt; Chord
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Chord
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-2209"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2210"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680601869"><span class="annot"><span class="annottext">endTie :: Bool
</span><a href="#local-6989586621680601869"><span class="hs-identifier hs-var">endTie</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680601868"><span class="annot"><span class="annottext">beginTie :: Bool
</span><a href="#local-6989586621680601868"><span class="hs-identifier hs-var">beginTie</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Asp3 -&gt; (Bool, Bool)
forall a. TieT a -&gt; (Bool, Bool)
</span><a href="Music.Score.Ties.html#isTieEndBeginning"><span class="hs-identifier hs-var">Music.Score.Ties.isTieEndBeginning</span></a></span><span> </span><span class="annot"><span class="annottext">Asp3
</span><a href="#local-6989586621680601870"><span class="hs-identifier hs-var">asp</span></a></span><span>
</span><span id="line-2211"></span><span>
</span><span id="line-2212"></span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#aspectsToBar"><span class="hs-identifier hs-type">aspectsToBar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Internal.Quantize.html#Rhythm"><span class="hs-identifier hs-type">Rhythm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp3"><span class="hs-identifier hs-type">Asp3</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-type">Bar</span></a></span><span>
</span><span id="line-2213"></span><span class="hs-comment">-- TODO handle &gt;1 layers (see below)</span><span>
</span><span id="line-2214"></span><span class="hs-comment">-- TODO place clef changes here</span><span>
</span><span id="line-2215"></span><span id="aspectsToBar"><span class="annot"><span class="annottext">aspectsToBar :: Rhythm (Maybe Asp3) -&gt; Bar
</span><a href="Music.Score.Export.StandardNotation.html#aspectsToBar"><span class="hs-identifier hs-var hs-var">aspectsToBar</span></a></span></span><span> </span><span id="local-6989586621680601861"><span class="annot"><span class="annottext">rh :: Rhythm (Maybe Asp3)
</span><a href="#local-6989586621680601861"><span class="hs-identifier hs-var">rh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Duration Clef -&gt; [PitchLayer] -&gt; Bar
</span><a href="Music.Score.Export.StandardNotation.html#Bar"><span class="hs-identifier hs-var">Bar</span></a></span><span> </span><span class="annot"><span class="annottext">Map Duration Clef
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Rhythm Chord -&gt; PitchLayer
</span><a href="Music.Score.Export.StandardNotation.html#PitchLayer"><span class="hs-identifier hs-var">PitchLayer</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm Chord
</span><a href="#local-6989586621680601860"><span class="hs-identifier hs-var">layer1</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2216"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2217"></span><span>    </span><span id="local-6989586621680601860"><span class="annot"><span class="annottext">layer1 :: Rhythm Chord
</span><a href="#local-6989586621680601860"><span class="hs-identifier hs-var hs-var">layer1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe Asp3 -&gt; Chord) -&gt; Rhythm (Maybe Asp3) -&gt; Rhythm Chord
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Asp3 -&gt; Chord
</span><a href="Music.Score.Export.StandardNotation.html#aspectsToChord"><span class="hs-identifier hs-var">aspectsToChord</span></a></span><span> </span><span class="annot"><span class="annottext">Rhythm (Maybe Asp3)
</span><a href="#local-6989586621680601861"><span class="hs-identifier hs-var">rh</span></a></span><span>
</span><span id="line-2218"></span></pre></body></html>