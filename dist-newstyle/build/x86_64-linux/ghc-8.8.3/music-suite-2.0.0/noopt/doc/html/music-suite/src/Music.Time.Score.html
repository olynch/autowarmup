<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wall
  -Wcompat
  -Wincomplete-record-updates
  -Wincomplete-uni-patterns
  -Werror
  -fno-warn-name-shadowing
  -fno-warn-unused-matches
  -fno-warn-unused-imports
  -fno-warn-redundant-constraints #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Music.Time.Score</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Score type</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier">Score</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Construction</span></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- $traversals</span></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#score"><span class="hs-identifier">score</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#events"><span class="hs-identifier">events</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#eras"><span class="hs-identifier">eras</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#triples"><span class="hs-identifier">triples</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Traversal</span></span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#mapWithSpan"><span class="hs-identifier">mapWithSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#filterWithSpan"><span class="hs-identifier">filterWithSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#mapFilterWithSpan"><span class="hs-identifier">mapFilterWithSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#mapWithTime"><span class="hs-identifier">mapWithTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#filterWithTime"><span class="hs-identifier">filterWithTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#mapFilterWithTime"><span class="hs-identifier">mapFilterWithTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Simultaneous</span></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-comment">-- TODO check for overlapping values etc</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-comment">-- simult,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#hasOverlappingEvents"><span class="hs-identifier">hasOverlappingEvents</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#simultaneous"><span class="hs-identifier">simultaneous</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Normalize</span></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#normalizeScore"><span class="hs-identifier">normalizeScore</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#removeRests"><span class="hs-identifier">removeRests</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Unsafe versions</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#eventsIgnoringMeta"><span class="hs-identifier">eventsIgnoringMeta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#triplesIgnoringMeta"><span class="hs-identifier">triplesIgnoringMeta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Conversion</span></span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Music.Time.Score.html#eventToScore"><span class="hs-identifier">eventToScore</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-keyword">hiding</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-operator">(&lt;|)</span></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-identifier">Indexable</span></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="hs-identifier">Level</span></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><span class="hs-identifier">below</span></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><span class="hs-identifier">index</span></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><span class="hs-identifier">inside</span></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><span class="hs-identifier">parts</span></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-identifier">reversed</span></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="hs-identifier">transform</span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-operator">(|&gt;)</span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Monad.Compose.html"><span class="hs-identifier">Control.Monad.Compose</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Plus</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Writer</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JSON</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.AffineSpace</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.AffineSpace.Point.html"><span class="hs-identifier">Data.AffineSpace.Point</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Foldable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Foldable</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Ord</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ord</span></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Ratio</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Semigroup</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.String</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Traversable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Traversable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Traversable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.VectorSpace</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.VectorSpace</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Sum</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Iso.Deriving</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Iso</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Iso'</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Dynamics.Literal.html"><span class="hs-identifier">Music.Dynamics.Literal</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Pitch.Literal.html"><span class="hs-identifier">Music.Pitch.Literal</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Event.html"><span class="hs-identifier">Music.Time.Event</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Internal.Util.html"><span class="hs-identifier">Music.Time.Internal.Util</span></a></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Juxtapose.html"><span class="hs-identifier">Music.Time.Juxtapose</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Meta.html"><span class="hs-identifier">Music.Time.Meta</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Note.html"><span class="hs-identifier">Music.Time.Note</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Time.Voice.html"><span class="hs-identifier">Music.Time.Voice</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-comment">-- $traversals</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- events . each . from event . swapped . mapping onsetAndDuration . swapped</span><span>
</span><span id="line-110"></span><span class="hs-comment">--    :: Traversal (Score a) (Score b) ((Time, Duration), a) ((Time, Duration), b)</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-112"></span><span class="hs-comment">--</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- events . each . from event . swapped . mapping onsetAndOffset . swapped</span><span>
</span><span id="line-115"></span><span class="hs-comment">--    :: Traversal (Score a) (Score b) ((Time, Time), a) ((Time, Time), b)</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">--   * 'empty' creates an empty score</span><span>
</span><span id="line-119"></span><span class="hs-comment">--</span><span>
</span><span id="line-120"></span><span class="hs-comment">--   * 'pure' creates a score containing a single note in the span @0 '&lt;-&gt;' 1@</span><span>
</span><span id="line-121"></span><span class="hs-comment">--</span><span>
</span><span id="line-122"></span><span class="hs-comment">--   * '&lt;|&gt;' composes scores in parallel</span><span>
</span><span id="line-123"></span><span class="hs-comment">--</span><span>
</span><span id="line-124"></span><span class="hs-comment">--   * '|&gt;' composes scores as a forward sequence</span><span>
</span><span id="line-125"></span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span class="hs-comment">--   * '&lt;|' composes scores as a backward sequence</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- You can also use '&lt;&gt;' and 'mempty' of course.</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- | A set of events of type @a@, with an associated time spans.</span><span>
</span><span id="line-132"></span><span class="hs-keyword">newtype</span><span> </span><span id="Score"><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span></span><span> </span><span id="local-6989586621680577679"><span class="annot"><a href="#local-6989586621680577679"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Score"><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span></span><span> </span><span class="hs-special">{</span><span id="getScore"><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Meta.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577679"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680577266"><span id="local-6989586621680577268"><span class="annot"><span class="annottext">a -&gt; Score b -&gt; Score a
(a -&gt; b) -&gt; Score a -&gt; Score b
(forall a b. (a -&gt; b) -&gt; Score a -&gt; Score b)
-&gt; (forall a b. a -&gt; Score b -&gt; Score a) -&gt; Functor Score
forall a b. a -&gt; Score b -&gt; Score a
forall a b. (a -&gt; b) -&gt; Score a -&gt; Score b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; Score b -&gt; Score a
$c&lt;$ :: forall a b. a -&gt; Score b -&gt; Score a
fmap :: (a -&gt; b) -&gt; Score a -&gt; Score b
$cfmap :: forall a b. (a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577259"><span id="local-6989586621680577261"><span id="local-6989586621680577263"><span class="annot"><span class="annottext">b -&gt; Score a -&gt; Score a
NonEmpty (Score a) -&gt; Score a
Score a -&gt; Score a -&gt; Score a
(Score a -&gt; Score a -&gt; Score a)
-&gt; (NonEmpty (Score a) -&gt; Score a)
-&gt; (forall b. Integral b =&gt; b -&gt; Score a -&gt; Score a)
-&gt; Semigroup (Score a)
forall b. Integral b =&gt; b -&gt; Score a -&gt; Score a
forall a. NonEmpty (Score a) -&gt; Score a
forall a. Score a -&gt; Score a -&gt; Score a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
forall a b. Integral b =&gt; b -&gt; Score a -&gt; Score a
stimes :: b -&gt; Score a -&gt; Score a
$cstimes :: forall a b. Integral b =&gt; b -&gt; Score a -&gt; Score a
sconcat :: NonEmpty (Score a) -&gt; Score a
$csconcat :: forall a. NonEmpty (Score a) -&gt; Score a
&lt;&gt; :: Score a -&gt; Score a -&gt; Score a
$c&lt;&gt; :: forall a. Score a -&gt; Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577251"><span id="local-6989586621680577253"><span id="local-6989586621680577255"><span class="annot"><span class="annottext">Semigroup (Score a)
Score a
Semigroup (Score a) =&gt;
Score a
-&gt; (Score a -&gt; Score a -&gt; Score a)
-&gt; ([Score a] -&gt; Score a)
-&gt; Monoid (Score a)
[Score a] -&gt; Score a
Score a -&gt; Score a -&gt; Score a
forall a. Semigroup (Score a)
forall a. Score a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. [Score a] -&gt; Score a
forall a. Score a -&gt; Score a -&gt; Score a
mconcat :: [Score a] -&gt; Score a
$cmconcat :: forall a. [Score a] -&gt; Score a
mappend :: Score a -&gt; Score a -&gt; Score a
$cmappend :: forall a. Score a -&gt; Score a -&gt; Score a
mempty :: Score a
$cmempty :: forall a. Score a
$cp1Monoid :: forall a. Semigroup (Score a)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577216"><span id="local-6989586621680577218"><span id="local-6989586621680577220"><span id="local-6989586621680577222"><span id="local-6989586621680577224"><span id="local-6989586621680577226"><span id="local-6989586621680577228"><span id="local-6989586621680577230"><span id="local-6989586621680577232"><span id="local-6989586621680577234"><span id="local-6989586621680577236"><span id="local-6989586621680577238"><span id="local-6989586621680577240"><span id="local-6989586621680577242"><span id="local-6989586621680577244"><span id="local-6989586621680577246"><span id="local-6989586621680577248"><span class="annot"><span class="annottext">Score a -&gt; Bool
(a -&gt; m) -&gt; Score a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b
(forall m. Monoid m =&gt; Score m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Score a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Score a -&gt; a)
-&gt; (forall a. Score a -&gt; [a])
-&gt; (forall a. Score a -&gt; Bool)
-&gt; (forall a. Score a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; Score a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; Score a -&gt; a)
-&gt; (forall a. Ord a =&gt; Score a -&gt; a)
-&gt; (forall a. Num a =&gt; Score a -&gt; a)
-&gt; (forall a. Num a =&gt; Score a -&gt; a)
-&gt; Foldable Score
forall a. Eq a =&gt; a -&gt; Score a -&gt; Bool
forall a. Num a =&gt; Score a -&gt; a
forall a. Ord a =&gt; Score a -&gt; a
forall m. Monoid m =&gt; Score m -&gt; m
forall a. Score a -&gt; Bool
forall a. Score a -&gt; Int
forall a. Score a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; Score a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: Score a -&gt; a
$cproduct :: forall a. Num a =&gt; Score a -&gt; a
sum :: Score a -&gt; a
$csum :: forall a. Num a =&gt; Score a -&gt; a
minimum :: Score a -&gt; a
$cminimum :: forall a. Ord a =&gt; Score a -&gt; a
maximum :: Score a -&gt; a
$cmaximum :: forall a. Ord a =&gt; Score a -&gt; a
elem :: a -&gt; Score a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; Score a -&gt; Bool
length :: Score a -&gt; Int
$clength :: forall a. Score a -&gt; Int
null :: Score a -&gt; Bool
$cnull :: forall a. Score a -&gt; Bool
toList :: Score a -&gt; [a]
$ctoList :: forall a. Score a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; Score a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Score a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; Score a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Score a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score a -&gt; b
foldMap' :: (a -&gt; m) -&gt; Score a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score a -&gt; m
foldMap :: (a -&gt; m) -&gt; Score a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score a -&gt; m
fold :: Score m -&gt; m
$cfold :: forall m. Monoid m =&gt; Score m -&gt; m
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577205"><span id="local-6989586621680577207"><span id="local-6989586621680577209"><span id="local-6989586621680577211"><span class="annot"><span class="annottext">Functor Score
Foldable Score
(Functor Score, Foldable Score) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; Score a -&gt; f (Score b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    Score (f a) -&gt; f (Score a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; Score a -&gt; m (Score b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; Score (m a) -&gt; m (Score a))
-&gt; Traversable Score
(a -&gt; f b) -&gt; Score a -&gt; f (Score b)
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; Score (m a) -&gt; m (Score a)
forall (f :: * -&gt; *) a. Applicative f =&gt; Score (f a) -&gt; f (Score a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Score a -&gt; m (Score b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Score a -&gt; f (Score b)
sequence :: Score (m a) -&gt; m (Score a)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; Score (m a) -&gt; m (Score a)
mapM :: (a -&gt; m b) -&gt; Score a -&gt; m (Score b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Score a -&gt; m (Score b)
sequenceA :: Score (f a) -&gt; f (Score a)
$csequenceA :: forall (f :: * -&gt; *) a. Applicative f =&gt; Score (f a) -&gt; f (Score a)
traverse :: (a -&gt; f b) -&gt; Score a -&gt; f (Score b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Score a -&gt; f (Score b)
$cp2Traversable :: Foldable Score
$cp1Traversable :: Functor Score
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="hs-comment">{-, Show, Eq, Ord-}</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- You typically create a 'Score' using 'score', 'events', 'voices', and 'phrases', or the 'Alternative' interface.</span><span>
</span><span id="line-137"></span><span class="hs-comment">--</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- Score is an instance of 'Transformable', so you can use 'delay' and 'stretch'.</span><span>
</span><span id="line-139"></span><span class="hs-comment">--</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- Score is an instance of 'HasPosition', so you can use 'duration', 'onset', 'offset', 'era'.</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- To inspect or deconstruct a score, see 'events', 'voices', and 'phrases', as</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- well as 'singleNote', 'singleVoice', and 'singlePhrase'</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-comment">-- | Up to meta-data.</span><span>
</span><span id="line-147"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577195"><span id="local-6989586621680577197"><span id="local-6989586621680577199"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span>  </span><span id="local-6989586621680577193"><span class="annot"><span class="annottext">pure :: a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Meta, Score' a) -&gt; Score a
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="annot"><span class="annottext">((Meta, Score' a) -&gt; Score a)
-&gt; (a -&gt; (Meta, Score' a)) -&gt; a -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; (Meta, Score' a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; (Meta, Score' a))
-&gt; (a -&gt; Score' a) -&gt; a -&gt; (Meta, Score' a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Score' a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621680577191"><span class="annot"><span class="annottext">&lt;*&gt; :: Score (a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score (a -&gt; b) -&gt; Score a -&gt; Score b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">ap</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Up to meta-data.</span><span>
</span><span id="line-154"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577184"><span id="local-6989586621680577186"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680577182"><span class="annot"><span class="annottext">meta :: Meta
</span><a href="#local-6989586621680577182"><span class="hs-identifier hs-var">meta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577181"><span class="annot"><span class="annottext">xs :: Score' a
</span><a href="#local-6989586621680577181"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680577180"><span class="annot"><span class="annottext">&gt;&gt;= :: Score a -&gt; (a -&gt; Score b) -&gt; Score b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></a></span></span><span> </span><span id="local-6989586621680577179"><span class="annot"><span class="annottext">f :: a -&gt; Score b
</span><a href="#local-6989586621680577179"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Meta, Score' b) -&gt; Score b
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Meta
</span><a href="#local-6989586621680577182"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Score' a
</span><a href="#local-6989586621680577181"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; (a -&gt; Score' b) -&gt; Score' b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' b) -&gt; Score' b
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Meta, Score' b) -&gt; Score' b)
-&gt; (a -&gt; (Meta, Score' b)) -&gt; a -&gt; Score' b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score b -&gt; (Meta, Score' b)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Score b -&gt; (Meta, Score' b))
-&gt; (a -&gt; Score b) -&gt; a -&gt; (Meta, Score' b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Score b
</span><a href="#local-6989586621680577179"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577172"><span id="local-6989586621680577174"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Alternative</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621680577170"><span class="annot"><span class="annottext">empty :: Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score a
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621680577168"><span class="annot"><span class="annottext">&lt;|&gt; :: Score a -&gt; Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;|&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Score a -&gt; Score a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mappend</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- | Up to meta-data.</span><span>
</span><span id="line-164"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">MonadPlus</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span>  </span><span id="local-6989586621680577161"><span class="annot"><span class="annottext">mzero :: Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mzero</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score a
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>  </span><span id="local-6989586621680577159"><span class="annot"><span class="annottext">mplus :: Score a -&gt; Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mplus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Score a -&gt; Score a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mappend</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">{-
instance FunctorWithIndex Span Score where
  imap f = over (_Wrapped._2) $ imap f

instance FoldableWithIndex Span Score where
  ifoldMap f (Score (m,x)) = ifoldMap f x

instance TraversableWithIndex Span Score where
  itraverse f (Score (m,x)) = fmap (\x -&gt; Score (m,x)) $ itraverse f x
-}</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span id="local-6989586621680577157"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577150"><span id="local-6989586621680577152"><span id="local-6989586621680577154"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577157"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577157"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-comment">-- TODO meta</span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621680577148"><span class="annot"><span class="annottext">toJSON :: Score a -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621680577146"><span class="annot"><span class="annottext">x :: Score a
</span><a href="#local-6989586621680577146"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">JSON.object</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;events&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Event a] -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">[Event a]
</span><a href="#local-6989586621680577144"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-185"></span><span>      </span><span id="local-6989586621680577144"><span class="annot"><span class="annottext">es :: [Event a]
</span><a href="#local-6989586621680577144"><span class="hs-identifier hs-var hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680577146"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Getting [Event a] (Score a) [Event a] -&gt; [Event a]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a]
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span id="local-6989586621680577142"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577139"><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577142"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577142"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-comment">-- TODO change to include meta</span><span>
</span><span id="line-189"></span><span>  </span><span id="local-6989586621680577137"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Score a)
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">JSON.Object</span></a></span><span> </span><span id="local-6989586621680577134"><span class="annot"><span class="annottext">x :: Object
</span><a href="#local-6989586621680577134"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Score a)
forall a. FromJSON a =&gt; Value -&gt; Parser (Score a)
</span><a href="#local-6989586621680577133"><span class="hs-identifier hs-var">parseEL</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Score a)) -&gt; Parser Value -&gt; Parser (Score a)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680577134"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-operator hs-var">JSON..:</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;events&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-191"></span><span>      </span><span id="local-6989586621680577133"><span class="annot"><span class="annottext">parseEL :: Value -&gt; Parser (Score a)
</span><a href="#local-6989586621680577133"><span class="hs-identifier hs-var hs-var">parseEL</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-type">JSON.Array</span></a></span><span> </span><span id="local-6989586621680577129"><span class="annot"><span class="annottext">xs :: Array
</span><a href="#local-6989586621680577129"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Vector (Event a) -&gt; Score a)
-&gt; Parser (Vector (Event a)) -&gt; Parser (Score a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Event a] -&gt; Getting (Score a) [Event a] (Score a) -&gt; Score a
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (Score a) [Event a] (Score a)
forall a. Getter [Event a] (Score a)
</span><a href="Music.Time.Score.html#score"><span class="hs-identifier hs-var">score</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; Score a)
-&gt; (Vector (Event a) -&gt; [Event a]) -&gt; Vector (Event a) -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Vector (Event a) -&gt; [Event a]
forall (t :: * -&gt; *) a. Traversable t =&gt; t a -&gt; [a]
</span><a href="#local-6989586621680577128"><span class="hs-identifier hs-var">toList</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Parser (Vector (Event a)) -&gt; Parser (Score a))
-&gt; Parser (Vector (Event a)) -&gt; Parser (Score a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Event a)) -&gt; Array -&gt; Parser (Vector (Event a))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Event a)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">parseJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Array
</span><a href="#local-6989586621680577129"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><a href="#local-6989586621680577133"><span class="hs-identifier hs-var">parseEL</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser (Score a)
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span id="local-6989586621680577128"><span class="annot"><span class="annottext">toList :: t a -&gt; [a]
</span><a href="#local-6989586621680577128"><span class="hs-identifier hs-var hs-var">toList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting (Endo [a]) (t a) a -&gt; t a -&gt; [a]
forall a s. Getting (Endo [a]) s a -&gt; s -&gt; [a]
</span><span class="hs-identifier hs-var">toListOf</span></span><span> </span><span class="annot"><span class="annottext">Getting (Endo [a]) (t a) a
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="../file:///nix/store/wfzvc7y6zn39r5c7wn1pk0sinsril5dd-aeson-1.4.7.1-doc/share/doc/aeson-1.4.7.1/html/src"><span class="hs-identifier hs-var">parseJSON</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser (Score a)
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">empty</span></a></span></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span id="local-6989586621680577125"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Time.Internal.Transform.html#Transformable"><span class="hs-identifier hs-type">Transformable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577125"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-197"></span><span>  </span><span id="local-6989586621680577122"><span class="annot"><span class="annottext">transform :: Span -&gt; Score a -&gt; Score a
</span><a href="Music.Time.Internal.Transform.html#transform"><span class="hs-identifier hs-var hs-var hs-var hs-var">transform</span></a></span></span><span> </span><span id="local-6989586621680577120"><span class="annot"><span class="annottext">t :: Span
</span><a href="#local-6989586621680577120"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680577119"><span class="annot"><span class="annottext">m :: Meta
</span><a href="#local-6989586621680577119"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577118"><span class="annot"><span class="annottext">x :: Score' a
</span><a href="#local-6989586621680577118"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Meta, Score' a) -&gt; Score a
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Meta -&gt; Meta
forall a. Transformable a =&gt; Span -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#transform"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680577120"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Meta
</span><a href="#local-6989586621680577119"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Score' a -&gt; Score' a
forall a. Transformable a =&gt; Span -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#transform"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680577120"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Score' a
</span><a href="#local-6989586621680577118"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">-- instance Splittable a =&gt; Splittable (Score a) where</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- split t (Score (m,x)) = (Score (m1,x1), Score (m2,x2))</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- where</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- (m1, m2) = split t m</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- (x1, x2) = split t x</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span id="local-6989586621680577117"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Time.Position.html#HasPosition"><span class="hs-identifier hs-type">HasPosition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577117"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621680577114"><span class="annot"><span class="annottext">_era :: Score a -&gt; Maybe Span
</span><a href="Music.Time.Position.html#_era"><span class="hs-identifier hs-var hs-var hs-var hs-var">_era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; Maybe Span
forall a. HasPosition a =&gt; a -&gt; Maybe Span
</span><a href="Music.Time.Position.html#_era"><span class="hs-identifier hs-var">_era</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; Maybe Span)
-&gt; (Score a -&gt; Score' a) -&gt; Score a -&gt; Maybe Span
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' a) -&gt; Score' a
forall a b. (a, b) -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">((Meta, Score' a) -&gt; Score' a)
-&gt; (Score a -&gt; (Meta, Score' a)) -&gt; Score a -&gt; Score' a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span id="local-6989586621680577112"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577112"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">IsString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577112"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621680577109"><span class="annot"><span class="annottext">fromString :: String -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Score a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Score a) -&gt; (String -&gt; a) -&gt; String -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. IsString a =&gt; String -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromString</span></a></span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span id="local-6989586621680577108"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#IsPitch"><span class="hs-identifier hs-type">IsPitch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577108"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#IsPitch"><span class="hs-identifier hs-type">IsPitch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577108"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>  </span><span id="local-6989586621680577105"><span class="annot"><span class="annottext">fromPitch :: Pitch -&gt; Score a
</span><a href="Music.Pitch.Common.Internal.html#fromPitch"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromPitch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Score a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Score a) -&gt; (Pitch -&gt; a) -&gt; Pitch -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Pitch -&gt; a
forall a. IsPitch a =&gt; Pitch -&gt; a
</span><a href="Music.Pitch.Common.Internal.html#fromPitch"><span class="hs-identifier hs-var">fromPitch</span></a></span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621680577103"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#IsInterval"><span class="hs-identifier hs-type">IsInterval</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Pitch.Common.Internal.html#IsInterval"><span class="hs-identifier hs-type">IsInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577103"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621680577100"><span class="annot"><span class="annottext">fromInterval :: Interval -&gt; Score a
</span><a href="Music.Pitch.Common.Internal.html#fromInterval"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromInterval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Score a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Score a) -&gt; (Interval -&gt; a) -&gt; Interval -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Interval -&gt; a
forall a. IsInterval a =&gt; Interval -&gt; a
</span><a href="Music.Pitch.Common.Internal.html#fromInterval"><span class="hs-identifier hs-var">fromInterval</span></a></span></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span id="local-6989586621680577098"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Dynamics.Literal.html#IsDynamics"><span class="hs-identifier hs-type">IsDynamics</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577098"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Dynamics.Literal.html#IsDynamics"><span class="hs-identifier hs-type">IsDynamics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577098"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621680577095"><span class="annot"><span class="annottext">fromDynamics :: DynamicsL -&gt; Score a
</span><a href="Music.Dynamics.Literal.html#fromDynamics"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromDynamics</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Score a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Score a) -&gt; (DynamicsL -&gt; a) -&gt; DynamicsL -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DynamicsL -&gt; a
forall a. IsDynamics a =&gt; DynamicsL -&gt; a
</span><a href="Music.Dynamics.Literal.html#fromDynamics"><span class="hs-identifier hs-var">fromDynamics</span></a></span></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span id="local-6989586621680577093"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577088"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577093"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577093"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621680577083"><span class="annot"><span class="annottext">fromInteger :: Integer -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromInteger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Score a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Score a) -&gt; (Integer -&gt; a) -&gt; Integer -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; a
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromInteger</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span>  </span><span id="local-6989586621680577082"><span class="annot"><span class="annottext">abs :: Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">abs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; Score a -&gt; Score a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">abs</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621680577080"><span class="annot"><span class="annottext">signum :: Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">signum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; Score a -&gt; Score a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
forall a. Num a =&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">signum</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span>  </span><span id="local-6989586621680577078"><span class="annot"><span class="annottext">+ :: Score a -&gt; Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(+)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; Score a -&gt; Score a -&gt; Score a
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">liftA2</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(+)</span></a></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621680577075"><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; Score a -&gt; Score a -&gt; Score a
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">liftA2</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>  </span><span id="local-6989586621680577074"><span class="annot"><span class="annottext">* :: Score a -&gt; Score a -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(*)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; Score a -&gt; Score a -&gt; Score a
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">liftA2</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">(*)</span></a></span></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span id="local-6989586621680577072"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Time.Meta.html#HasMeta"><span class="hs-identifier hs-type">HasMeta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577072"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>  </span><span id="local-6989586621680577069"><span class="annot"><span class="annottext">meta :: (Meta -&gt; f Meta) -&gt; Score a -&gt; f (Score a)
</span><a href="Music.Time.Meta.html#meta"><span class="hs-identifier hs-var hs-var hs-var hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Score a -&gt; (Meta, Score' a))
-&gt; ((Meta, Score' a) -&gt; Score a)
-&gt; Iso (Score a) (Score a) (Meta, Score' a) (Meta, Score' a)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' a) -&gt; Score a
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="annot"><span class="annottext">(((Meta, Score' a) -&gt; f (Meta, Score' a))
 -&gt; Score a -&gt; f (Score a))
-&gt; ((Meta -&gt; f Meta) -&gt; (Meta, Score' a) -&gt; f (Meta, Score' a))
-&gt; (Meta -&gt; f Meta)
-&gt; Score a
-&gt; f (Score a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta -&gt; f Meta) -&gt; (Meta, Score' a) -&gt; f (Meta, Score' a)
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="hs-comment">-- | This instance exists only for the @enumFrom...@ methods.</span><span>
</span><span id="line-238"></span><span id="local-6989586621680577065"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680577051"><span id="local-6989586621680577053"><span id="local-6989586621680577055"><span id="local-6989586621680577057"><span id="local-6989586621680577061"><span id="local-6989586621680577063"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577065"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577065"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>  </span><span id="local-6989586621680577049"><span class="annot"><span class="annottext">toEnum :: Int -&gt; Score a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEnum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Score a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Score a) -&gt; (Int -&gt; a) -&gt; Int -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; a
forall a. Enum a =&gt; Int -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">toEnum</span></a></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621680577047"><span class="annot"><span class="annottext">fromEnum :: Score a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromEnum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ([a] -&gt; Int) -&gt; [a] -&gt; Int
forall r a. r -&gt; ([a] -&gt; r) -&gt; [a] -&gt; r
</span><a href="Music.Time.Internal.Util.html#list"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromEnum</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Int) -&gt; ([a] -&gt; a) -&gt; [a] -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; a
forall a. [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">head</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Int) -&gt; (Score a -&gt; [a]) -&gt; Score a -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Foldable.toList</span></a></span></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">newtype</span><span> </span><span id="Score%27"><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span></span><span> </span><span id="local-6989586621680577493"><span class="annot"><a href="#local-6989586621680577493"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Score%27"><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span></span><span> </span><span class="hs-special">{</span><span id="getScore%27"><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577493"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-comment">{-Eq, -}</span><span> </span><span class="hs-comment">{-Ord, -}</span><span> </span><span class="hs-comment">{-Show, -}</span><span> </span><span id="local-6989586621680577037"><span id="local-6989586621680577039"><span class="annot"><span class="annottext">a -&gt; Score' b -&gt; Score' a
(a -&gt; b) -&gt; Score' a -&gt; Score' b
(forall a b. (a -&gt; b) -&gt; Score' a -&gt; Score' b)
-&gt; (forall a b. a -&gt; Score' b -&gt; Score' a) -&gt; Functor Score'
forall a b. a -&gt; Score' b -&gt; Score' a
forall a b. (a -&gt; b) -&gt; Score' a -&gt; Score' b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; Score' b -&gt; Score' a
$c&lt;$ :: forall a b. a -&gt; Score' b -&gt; Score' a
fmap :: (a -&gt; b) -&gt; Score' a -&gt; Score' b
$cfmap :: forall a b. (a -&gt; b) -&gt; Score' a -&gt; Score' b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680577003"><span id="local-6989586621680577005"><span id="local-6989586621680577007"><span id="local-6989586621680577009"><span id="local-6989586621680577011"><span id="local-6989586621680577013"><span id="local-6989586621680577015"><span id="local-6989586621680577017"><span id="local-6989586621680577019"><span id="local-6989586621680577021"><span id="local-6989586621680577023"><span id="local-6989586621680577025"><span id="local-6989586621680577027"><span id="local-6989586621680577029"><span id="local-6989586621680577031"><span id="local-6989586621680577033"><span id="local-6989586621680577035"><span class="annot"><span class="annottext">Score' a -&gt; Bool
(a -&gt; m) -&gt; Score' a -&gt; m
(a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b
(forall m. Monoid m =&gt; Score' m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score' a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score' a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a)
-&gt; (forall a. Score' a -&gt; [a])
-&gt; (forall a. Score' a -&gt; Bool)
-&gt; (forall a. Score' a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; Score' a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; Score' a -&gt; a)
-&gt; (forall a. Ord a =&gt; Score' a -&gt; a)
-&gt; (forall a. Num a =&gt; Score' a -&gt; a)
-&gt; (forall a. Num a =&gt; Score' a -&gt; a)
-&gt; Foldable Score'
forall a. Eq a =&gt; a -&gt; Score' a -&gt; Bool
forall a. Num a =&gt; Score' a -&gt; a
forall a. Ord a =&gt; Score' a -&gt; a
forall m. Monoid m =&gt; Score' m -&gt; m
forall a. Score' a -&gt; Bool
forall a. Score' a -&gt; Int
forall a. Score' a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score' a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
product :: Score' a -&gt; a
$cproduct :: forall a. Num a =&gt; Score' a -&gt; a
sum :: Score' a -&gt; a
$csum :: forall a. Num a =&gt; Score' a -&gt; a
minimum :: Score' a -&gt; a
$cminimum :: forall a. Ord a =&gt; Score' a -&gt; a
maximum :: Score' a -&gt; a
$cmaximum :: forall a. Ord a =&gt; Score' a -&gt; a
elem :: a -&gt; Score' a -&gt; Bool
$celem :: forall a. Eq a =&gt; a -&gt; Score' a -&gt; Bool
length :: Score' a -&gt; Int
$clength :: forall a. Score' a -&gt; Int
null :: Score' a -&gt; Bool
$cnull :: forall a. Score' a -&gt; Bool
toList :: Score' a -&gt; [a]
$ctoList :: forall a. Score' a -&gt; [a]
foldl1 :: (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a
foldr1 :: (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Score' a -&gt; a
foldl' :: (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b
foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Score' a -&gt; b
foldr' :: (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b
foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Score' a -&gt; b
foldMap' :: (a -&gt; m) -&gt; Score' a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score' a -&gt; m
foldMap :: (a -&gt; m) -&gt; Score' a -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Score' a -&gt; m
fold :: Score' m -&gt; m
$cfold :: forall m. Monoid m =&gt; Score' m -&gt; m
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576993"><span id="local-6989586621680576995"><span id="local-6989586621680576997"><span id="local-6989586621680576999"><span class="annot"><span class="annottext">Functor Score'
Foldable Score'
(Functor Score', Foldable Score') =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; Score' a -&gt; f (Score' b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    Score' (f a) -&gt; f (Score' a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; Score' a -&gt; m (Score' b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    Score' (m a) -&gt; m (Score' a))
-&gt; Traversable Score'
(a -&gt; f b) -&gt; Score' a -&gt; f (Score' b)
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; Score' (m a) -&gt; m (Score' a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
Score' (f a) -&gt; f (Score' a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Score' a -&gt; m (Score' b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Score' a -&gt; f (Score' b)
sequence :: Score' (m a) -&gt; m (Score' a)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; Score' (m a) -&gt; m (Score' a)
mapM :: (a -&gt; m b) -&gt; Score' a -&gt; m (Score' b)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Score' a -&gt; m (Score' b)
sequenceA :: Score' (f a) -&gt; f (Score' a)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
Score' (f a) -&gt; f (Score' a)
traverse :: (a -&gt; f b) -&gt; Score' a -&gt; f (Score' b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Score' a -&gt; f (Score' b)
$cp2Traversable :: Foldable Score'
$cp1Traversable :: Functor Score'
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576987"><span id="local-6989586621680576989"><span id="local-6989586621680576991"><span class="annot"><span class="annottext">b -&gt; Score' a -&gt; Score' a
NonEmpty (Score' a) -&gt; Score' a
Score' a -&gt; Score' a -&gt; Score' a
(Score' a -&gt; Score' a -&gt; Score' a)
-&gt; (NonEmpty (Score' a) -&gt; Score' a)
-&gt; (forall b. Integral b =&gt; b -&gt; Score' a -&gt; Score' a)
-&gt; Semigroup (Score' a)
forall b. Integral b =&gt; b -&gt; Score' a -&gt; Score' a
forall a. NonEmpty (Score' a) -&gt; Score' a
forall a. Score' a -&gt; Score' a -&gt; Score' a
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
forall a b. Integral b =&gt; b -&gt; Score' a -&gt; Score' a
stimes :: b -&gt; Score' a -&gt; Score' a
$cstimes :: forall a b. Integral b =&gt; b -&gt; Score' a -&gt; Score' a
sconcat :: NonEmpty (Score' a) -&gt; Score' a
$csconcat :: forall a. NonEmpty (Score' a) -&gt; Score' a
&lt;&gt; :: Score' a -&gt; Score' a -&gt; Score' a
$c&lt;&gt; :: forall a. Score' a -&gt; Score' a -&gt; Score' a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576980"><span id="local-6989586621680576982"><span id="local-6989586621680576984"><span class="annot"><span class="annottext">Semigroup (Score' a)
Score' a
Semigroup (Score' a) =&gt;
Score' a
-&gt; (Score' a -&gt; Score' a -&gt; Score' a)
-&gt; ([Score' a] -&gt; Score' a)
-&gt; Monoid (Score' a)
[Score' a] -&gt; Score' a
Score' a -&gt; Score' a -&gt; Score' a
forall a. Semigroup (Score' a)
forall a. Score' a
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall a. [Score' a] -&gt; Score' a
forall a. Score' a -&gt; Score' a -&gt; Score' a
mconcat :: [Score' a] -&gt; Score' a
$cmconcat :: forall a. [Score' a] -&gt; Score' a
mappend :: Score' a -&gt; Score' a -&gt; Score' a
$cmappend :: forall a. Score' a -&gt; Score' a -&gt; Score' a
mempty :: Score' a
$cmempty :: forall a. Score' a
$cp1Monoid :: forall a. Semigroup (Score' a)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576974"><span id="local-6989586621680576976"><span id="local-6989586621680576978"><span class="annot"><span class="annottext">Int -&gt; Score' a -&gt; ShowS
[Score' a] -&gt; ShowS
Score' a -&gt; String
(Int -&gt; Score' a -&gt; ShowS)
-&gt; (Score' a -&gt; String) -&gt; ([Score' a] -&gt; ShowS) -&gt; Show (Score' a)
forall a. Show a =&gt; Int -&gt; Score' a -&gt; ShowS
forall a. Show a =&gt; [Score' a] -&gt; ShowS
forall a. Show a =&gt; Score' a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Score' a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [Score' a] -&gt; ShowS
show :: Score' a -&gt; String
$cshow :: forall a. Show a =&gt; Score' a -&gt; String
showsPrec :: Int -&gt; Score' a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; Score' a -&gt; ShowS
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576969"><span id="local-6989586621680576971"><span class="annot"><span class="annottext">Score' a -&gt; Score' a -&gt; Bool
(Score' a -&gt; Score' a -&gt; Bool)
-&gt; (Score' a -&gt; Score' a -&gt; Bool) -&gt; Eq (Score' a)
forall a. Eq a =&gt; Score' a -&gt; Score' a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Score' a -&gt; Score' a -&gt; Bool
$c/= :: forall a. Eq a =&gt; Score' a -&gt; Score' a -&gt; Bool
== :: Score' a -&gt; Score' a -&gt; Bool
$c== :: forall a. Eq a =&gt; Score' a -&gt; Score' a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span id="local-6989586621680576967"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680576962"><span id="local-6989586621680576965"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576967"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576967"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621680576961"><span class="annot"><span class="annottext">show :: Score a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span id="local-6989586621680576959"><span class="annot"><span class="annottext">x :: Score a
</span><a href="#local-6989586621680576959"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Event a] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576959"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Getting [Event a] (Score a) [Event a] -&gt; [Event a]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a]
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;^.score&quot;</span></span></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span id="local-6989586621680576958"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680576955"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576958"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576958"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>  </span><span id="local-6989586621680576954"><span class="annot"><span class="annottext">x :: Score a
</span><a href="#local-6989586621680576954"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680576953"><span class="annot"><span class="annottext">== :: Score a -&gt; Score a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span id="local-6989586621680576952"><span class="annot"><span class="annottext">y :: Score a
</span><a href="#local-6989586621680576952"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576954"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Getting [Event a] (Score a) [Event a] -&gt; [Event a]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a]
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Event a] -&gt; [Event a] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576952"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Getting [Event a] (Score a) [Event a] -&gt; [Event a]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a]
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span id="local-6989586621680576941"><span id="local-6989586621680576943"><span id="local-6989586621680576945"><span id="local-6989586621680576947"><span id="local-6989586621680576949"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">via</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">`As1`</span></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">instance</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span></span></span></span></span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span id="local-6989586621680576933"><span id="local-6989586621680576935"><span id="local-6989586621680576937"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">via</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">`As1`</span></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-keyword">instance</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span></span></span></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span id="local-6989586621680576932"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Inject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680576932"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576932"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-comment">-- TODO zero-cost version</span><span>
</span><span id="line-265"></span><span>  </span><span id="local-6989586621680576929"><span class="annot"><span class="annottext">inj :: WriterT Span [] x -&gt; Score' x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">inj</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span id="local-6989586621680576926"><span class="annot"><span class="annottext">xs :: [(x, Span)]
</span><a href="#local-6989586621680576926"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Event x] -&gt; Score' x
forall a. [Event a] -&gt; Score' a
</span><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((x, Span) -&gt; Event x) -&gt; [(x, Span)] -&gt; [Event x]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Event x) (Span, x) (Event x) -&gt; (Span, x) -&gt; Event x
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Event x) (Span, x) (Event x)
forall a b. Iso (Span, a) (Span, b) (Event a) (Event b)
</span><a href="Music.Time.Event.html#event"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">((Span, x) -&gt; Event x)
-&gt; ((x, Span) -&gt; (Span, x)) -&gt; (x, Span) -&gt; Event x
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(x, Span) -&gt; (Span, x)
forall a b. (a, b) -&gt; (b, a)
</span><a href="Music.Time.Score.html#swap"><span class="hs-identifier hs-var">swap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(x, Span)]
</span><a href="#local-6989586621680576926"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="local-6989586621680576922"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Project</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680576922"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576922"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-268"></span><span>  </span><span id="local-6989586621680576919"><span class="annot"><span class="annottext">prj :: Score' x -&gt; WriterT Span [] x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">prj</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span id="local-6989586621680576917"><span class="annot"><span class="annottext">xs :: [Event x]
</span><a href="#local-6989586621680576917"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(x, Span)] -&gt; WriterT Span [] x
forall w (m :: * -&gt; *) a. m (a, w) -&gt; WriterT w m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">WriterT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Event x -&gt; (x, Span)) -&gt; [Event x] -&gt; [(x, Span)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Span, x) -&gt; (x, Span)
forall a b. (a, b) -&gt; (b, a)
</span><a href="Music.Time.Score.html#swap"><span class="hs-identifier hs-var">swap</span></a></span><span> </span><span class="annot"><span class="annottext">((Span, x) -&gt; (x, Span))
-&gt; (Event x -&gt; (Span, x)) -&gt; Event x -&gt; (x, Span)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Span, x) (Event x) (Span, x) -&gt; Event x -&gt; (Span, x)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnIso (Span, x) (Span, x) (Event x) (Event x)
-&gt; Iso (Event x) (Event x) (Span, x) (Span, x)
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso (Span, x) (Span, x) (Event x) (Event x)
forall a b. Iso (Span, a) (Span, b) (Event a) (Event b)
</span><a href="Music.Time.Event.html#event"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Event x]
</span><a href="#local-6989586621680576917"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span id="local-6989586621680576915"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680576911"><span class="annot"><span class="hs-identifier hs-type">Isomorphic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680576915"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576915"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span id="local-6989586621680577485"><span id="local-6989586621680577486"><span class="annot"><a href="Music.Time.Score.html#swap"><span class="hs-identifier hs-type">swap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680577486"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680577485"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680577485"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680577486"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-273"></span><span id="swap"><span class="annot"><span class="annottext">swap :: (a, b) -&gt; (b, a)
</span><a href="Music.Time.Score.html#swap"><span class="hs-identifier hs-var hs-var">swap</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680576909"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680576909"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576908"><span class="annot"><span class="annottext">y :: b
</span><a href="#local-6989586621680576908"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680576908"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576909"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680576901"><span id="local-6989586621680576903"><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Alternative</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span>  </span><span id="local-6989586621680576900"><span class="annot"><span class="annottext">empty :: Score' a
</span><a href="#local-6989586621680576900"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score' a
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>  </span><span id="local-6989586621680576899"><span class="annot"><span class="annottext">&lt;|&gt; :: Score' a -&gt; Score' a -&gt; Score' a
</span><a href="#local-6989586621680576899"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;|&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; Score' a -&gt; Score' a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mappend</span></a></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">MonadPlus</span></a></span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>  </span><span id="local-6989586621680576894"><span class="annot"><span class="annottext">mzero :: Score' a
</span><a href="#local-6989586621680576894"><span class="hs-identifier hs-var hs-var hs-var hs-var">mzero</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score' a
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span>  </span><span id="local-6989586621680576893"><span class="annot"><span class="annottext">mplus :: Score' a -&gt; Score' a -&gt; Score' a
</span><a href="#local-6989586621680576893"><span class="hs-identifier hs-var hs-var hs-var hs-var">mplus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; Score' a -&gt; Score' a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mappend</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span id="local-6989586621680576892"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Time.Internal.Transform.html#Transformable"><span class="hs-identifier hs-type">Transformable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576892"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-288"></span><span>  </span><span id="local-6989586621680576890"><span class="annot"><span class="annottext">transform :: Span -&gt; Score' a -&gt; Score' a
</span><a href="#local-6989586621680576890"><span class="hs-identifier hs-var hs-var hs-var hs-var">transform</span></a></span></span><span> </span><span id="local-6989586621680576889"><span class="annot"><span class="annottext">t :: Span
</span><a href="#local-6989586621680576889"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Event a] -&gt; Score' a
forall a. [Event a] -&gt; Score' a
</span><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; Score' a)
-&gt; (Score' a -&gt; [Event a]) -&gt; Score' a -&gt; Score' a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; [Event a] -&gt; [Event a]
forall a. Transformable a =&gt; Span -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#transform"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680576889"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; [Event a])
-&gt; (Score' a -&gt; [Event a]) -&gt; Score' a -&gt; [Event a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
forall a. Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span id="local-6989586621680576888"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Music.Time.Position.html#HasPosition"><span class="hs-identifier hs-type">HasPosition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-type">Score'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576888"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-291"></span><span>  </span><span id="local-6989586621680576886"><span class="annot"><span class="annottext">_era :: Score' a -&gt; Maybe Span
</span><a href="#local-6989586621680576886"><span class="hs-identifier hs-var hs-var hs-var hs-var">_era</span></a></span></span><span> </span><span id="local-6989586621680576885"><span class="annot"><span class="annottext">x :: Score' a
</span><a href="#local-6989586621680576885"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; TimeInterval) -&gt; [Event a] -&gt; TimeInterval
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; TimeInterval
</span><a href="Music.Time.Types.html#NonEmptyInterval"><span class="hs-identifier hs-var">NonEmptyInterval</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; TimeInterval)
-&gt; (Event a -&gt; Span) -&gt; Event a -&gt; TimeInterval
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Event a -&gt; Span
forall a. HasPosition1 a =&gt; a -&gt; Span
</span><a href="Music.Time.Position.html#_era1"><span class="hs-identifier hs-var">_era1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; TimeInterval) -&gt; [Event a] -&gt; TimeInterval
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
forall a. Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span><span> </span><span class="annot"><span class="annottext">Score' a
</span><a href="#local-6989586621680576885"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#EmptyInterval"><span class="hs-identifier hs-type">EmptyInterval</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Span
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><a href="Music.Time.Types.html#NonEmptyInterval"><span class="hs-identifier hs-type">NonEmptyInterval</span></a></span><span> </span><span id="local-6989586621680576880"><span class="annot"><span class="annottext">x :: Span
</span><a href="#local-6989586621680576880"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Maybe Span
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680576880"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-comment">{-
  (f x, g x) ^. from onsetAndOffset
    where
      f, g :: Score' a -&gt; Time
      f = safeMinimum . fmap ((^. onset) . normalizeSpan) . toListOf (each . era) . getScore'
      g = safeMaximum . fmap ((^. offset) . normalizeSpan) . toListOf (each . era) . getScore'
      safeMinimum xs = if null xs then 0 else minimum xs
      safeMaximum xs = if null xs then 0 else maximum xs
-}</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-comment">-- | Create a score from a list of events.</span><span>
</span><span id="line-306"></span><span id="local-6989586621680577616"><span class="annot"><a href="Music.Time.Score.html#score"><span class="hs-identifier hs-type">score</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577616"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577616"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-307"></span><span id="score"><span class="annot"><span class="annottext">score :: (Score a -&gt; f (Score a)) -&gt; [Event a] -&gt; f [Event a]
</span><a href="Music.Time.Score.html#score"><span class="hs-identifier hs-var hs-var">score</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnIso (Score a) (Score a) [Event a] [Event a]
-&gt; Iso [Event a] [Event a] (Score a) (Score a)
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso (Score a) (Score a) [Event a] [Event a]
forall a b. Iso (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#eventsIgnoringMeta"><span class="hs-identifier hs-var">eventsIgnoringMeta</span></a></span><span>
</span><span id="line-308"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Music.Time.Score.html#score"><span class="hs-pragma hs-type">score</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="hs-comment">-- | View a 'Score' as a list of 'Event' values.</span><span>
</span><span id="line-311"></span><span id="local-6989586621680577631"><span id="local-6989586621680577632"><span class="annot"><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-type">events</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577632"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577631"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577632"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577631"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-312"></span><span id="events"><span class="annot"><span class="annottext">events :: ([Event a] -&gt; f [Event b]) -&gt; Score a -&gt; f (Score b)
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var hs-var">events</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Score a -&gt; (Meta, Score' a))
-&gt; ((Meta, Score' b) -&gt; Score b)
-&gt; Iso (Score a) (Score b) (Meta, Score' a) (Meta, Score' b)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' b) -&gt; Score b
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="annot"><span class="annottext">(((Meta, Score' a) -&gt; f (Meta, Score' b))
 -&gt; Score a -&gt; f (Score b))
-&gt; (([Event a] -&gt; f [Event b])
    -&gt; (Meta, Score' a) -&gt; f (Meta, Score' b))
-&gt; ([Event a] -&gt; f [Event b])
-&gt; Score a
-&gt; f (Score b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; f (Score' b))
-&gt; (Meta, Score' a) -&gt; f (Meta, Score' b)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span> </span><span class="annot"><span class="annottext">((Score' a -&gt; f (Score' b))
 -&gt; (Meta, Score' a) -&gt; f (Meta, Score' b))
-&gt; (([Event a] -&gt; f [Event b]) -&gt; Score' a -&gt; f (Score' b))
-&gt; ([Event a] -&gt; f [Event b])
-&gt; (Meta, Score' a)
-&gt; f (Meta, Score' b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; [Event a])
-&gt; ([Event b] -&gt; Score' b)
-&gt; Iso (Score' a) (Score' b) [Event a] [Event b]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
forall a. Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span><span> </span><span class="annot"><span class="annottext">[Event b] -&gt; Score' b
forall a. [Event a] -&gt; Score' a
</span><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span><span> </span><span class="annot"><span class="annottext">(([Event a] -&gt; f [Event b]) -&gt; Score' a -&gt; f (Score' b))
-&gt; (([Event a] -&gt; f [Event b]) -&gt; [Event a] -&gt; f [Event b])
-&gt; ([Event a] -&gt; f [Event b])
-&gt; Score' a
-&gt; f (Score' b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; f [Event b]) -&gt; [Event a] -&gt; f [Event b]
forall s s (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(HasPosition1 s, HasPosition1 s, Transformable s, Transformable s,
 Profunctor p, Functor f) =&gt;
p [s] (f [s]) -&gt; p [s] (f [s])
</span><a href="#local-6989586621680576878"><span class="hs-identifier hs-var">sorted</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-comment">-- TODO should not have to sort...</span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621680576878"><span class="annot"><span class="annottext">sorted :: p [s] (f [s]) -&gt; p [s] (f [s])
</span><a href="#local-6989586621680576878"><span class="hs-identifier hs-var hs-var">sorted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([s] -&gt; [s]) -&gt; ([s] -&gt; [s]) -&gt; Iso [s] [s] [s] [s]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; s -&gt; Ordering) -&gt; [s] -&gt; [s]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; Time) -&gt; s -&gt; s -&gt; Ordering
forall a b. Ord a =&gt; (b -&gt; a) -&gt; b -&gt; b -&gt; Ordering
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Ord.comparing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Getting Time s Time -&gt; Time
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Time s Time
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Time
</span><a href="Music.Time.Position.html#onset"><span class="hs-identifier hs-var">onset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; s -&gt; Ordering) -&gt; [s] -&gt; [s]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; Time) -&gt; s -&gt; s -&gt; Ordering
forall a b. Ord a =&gt; (b -&gt; a) -&gt; b -&gt; b -&gt; Ordering
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Ord.comparing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Getting Time s Time -&gt; Time
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Time s Time
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Time
</span><a href="Music.Time.Position.html#onset"><span class="hs-identifier hs-var">onset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Music.Time.Score.html#events"><span class="hs-pragma hs-type">events</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | Convert an event to a singleton score.</span><span>
</span><span id="line-319"></span><span id="local-6989586621680576874"><span class="annot"><a href="Music.Time.Score.html#eventToScore"><span class="hs-identifier hs-type">eventToScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576874"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576874"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-320"></span><span id="eventToScore"><span class="annot"><span class="annottext">eventToScore :: Event a -&gt; Score a
</span><a href="Music.Time.Score.html#eventToScore"><span class="hs-identifier hs-var hs-var">eventToScore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting (Score a) [Event a] (Score a) -&gt; [Event a] -&gt; Score a
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Score a) [Event a] (Score a)
forall a. Getter [Event a] (Score a)
</span><a href="Music.Time.Score.html#score"><span class="hs-identifier hs-var">score</span></a></span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; Score a)
-&gt; (Event a -&gt; [Event a]) -&gt; Event a -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Event a -&gt; [Event a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-comment">--</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- 'view' 'events'                        :: 'Score' a -&gt; ['Event' a]</span><span>
</span><span id="line-325"></span><span class="hs-comment">-- 'set'  'events'                        :: ['Event' a] -&gt; 'Score' a -&gt; 'Score' a</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- 'over' 'events'                        :: (['Event' a] -&gt; ['Event' b]) -&gt; 'Score' a -&gt; 'Score' b</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-328"></span><span class="hs-comment">--</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- 'preview'  ('events' . 'each')           :: 'Score' a -&gt; 'Maybe' ('Event' a)</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- 'preview'  ('events' . 'element' 1)      :: 'Score' a -&gt; 'Maybe' ('Event' a)</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- 'preview'  ('events' . 'elements' odd)   :: 'Score' a -&gt; 'Maybe' ('Event' a)</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-334"></span><span class="hs-comment">--</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- 'set'      ('events' . 'each')           :: 'Event' a -&gt; 'Score' a -&gt; 'Score' a</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- 'set'      ('events' . 'element' 1)      :: 'Event' a -&gt; 'Score' a -&gt; 'Score' a</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- 'set'      ('events' . 'elements' odd)   :: 'Event' a -&gt; 'Score' a -&gt; 'Score' a</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-340"></span><span class="hs-comment">--</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- 'over'     ('events' . 'each')           :: ('Event' a -&gt; 'Event' b) -&gt; 'Score' a -&gt; 'Score' b</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- 'over'     ('events' . 'element' 1)      :: ('Event' a -&gt; 'Event' a) -&gt; 'Score' a -&gt; 'Score' a</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- 'over'     ('events' . 'elements' odd)   :: ('Event' a -&gt; 'Event' a) -&gt; 'Score' a -&gt; 'Score' a</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-346"></span><span class="hs-comment">--</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- 'toListOf' ('events' . 'each')                :: 'Score' a -&gt; ['Event' a]</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- 'toListOf' ('events' . 'elements' odd)        :: 'Score' a -&gt; ['Event' a]</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- 'toListOf' ('events' . 'each' . 'filtered'</span><span>
</span><span id="line-351"></span><span class="hs-comment">--              (\\x -&gt; x^.'duration' \&lt; 2))  :: 'Score' a -&gt; ['Event' a]</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-comment">-- | A score is a list of events up to meta-data. To preserve meta-data, use the more</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- restricted 'score' and 'events'.</span><span>
</span><span id="line-356"></span><span id="local-6989586621680577448"><span id="local-6989586621680577449"><span class="annot"><a href="Music.Time.Score.html#eventsIgnoringMeta"><span class="hs-identifier hs-type">eventsIgnoringMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Iso</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577449"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577448"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577449"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577448"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-357"></span><span id="eventsIgnoringMeta"><span class="annot"><span class="annottext">eventsIgnoringMeta :: p [Event a] (f [Event b]) -&gt; p (Score a) (f (Score b))
</span><a href="Music.Time.Score.html#eventsIgnoringMeta"><span class="hs-identifier hs-var hs-var">eventsIgnoringMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Score a -&gt; (Meta, Score' a))
-&gt; ((Meta, Score' b) -&gt; Score b)
-&gt; Iso (Score a) (Score b) (Meta, Score' a) (Meta, Score' b)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' b) -&gt; Score b
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="annot"><span class="annottext">(p (Meta, Score' a) (f (Meta, Score' b))
 -&gt; p (Score a) (f (Score b)))
-&gt; (p [Event a] (f [Event b])
    -&gt; p (Meta, Score' a) (f (Meta, Score' b)))
-&gt; p [Event a] (f [Event b])
-&gt; p (Score a) (f (Score b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">p (Score' a) (f (Score' b))
-&gt; p (Meta, Score' a) (f (Meta, Score' b))
forall (w :: * -&gt; *) (m :: * -&gt; *) (p :: * -&gt; * -&gt; *) (f :: * -&gt; *)
       a a.
(Comonad w, Monad m, Profunctor p, Functor f) =&gt;
p a (f a) -&gt; p (w a) (f (m a))
</span><a href="#local-6989586621680576873"><span class="hs-identifier hs-var">noMeta</span></a></span><span> </span><span class="annot"><span class="annottext">(p (Score' a) (f (Score' b))
 -&gt; p (Meta, Score' a) (f (Meta, Score' b)))
-&gt; (p [Event a] (f [Event b]) -&gt; p (Score' a) (f (Score' b)))
-&gt; p [Event a] (f [Event b])
-&gt; p (Meta, Score' a) (f (Meta, Score' b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; [Event a])
-&gt; ([Event b] -&gt; Score' b)
-&gt; Iso (Score' a) (Score' b) [Event a] [Event b]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
forall a. Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span><span> </span><span class="annot"><span class="annottext">[Event b] -&gt; Score' b
forall a. [Event a] -&gt; Score' a
</span><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span><span> </span><span class="annot"><span class="annottext">(p [Event a] (f [Event b]) -&gt; p (Score' a) (f (Score' b)))
-&gt; (p [Event a] (f [Event b]) -&gt; p [Event a] (f [Event b]))
-&gt; p [Event a] (f [Event b])
-&gt; p (Score' a) (f (Score' b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">p [Event a] (f [Event b]) -&gt; p [Event a] (f [Event b])
forall s s (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(HasPosition1 s, HasPosition1 s, Transformable s, Transformable s,
 Profunctor p, Functor f) =&gt;
p [s] (f [s]) -&gt; p [s] (f [s])
</span><a href="#local-6989586621680576872"><span class="hs-identifier hs-var">sorted</span></a></span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621680576872"><span class="annot"><span class="annottext">sorted :: p [s] (f [s]) -&gt; p [s] (f [s])
</span><a href="#local-6989586621680576872"><span class="hs-identifier hs-var hs-var">sorted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([s] -&gt; [s]) -&gt; ([s] -&gt; [s]) -&gt; Iso [s] [s] [s] [s]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; s -&gt; Ordering) -&gt; [s] -&gt; [s]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; Time) -&gt; s -&gt; s -&gt; Ordering
forall a b. Ord a =&gt; (b -&gt; a) -&gt; b -&gt; b -&gt; Ordering
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Ord.comparing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Getting Time s Time -&gt; Time
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Time s Time
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Time
</span><a href="Music.Time.Position.html#onset"><span class="hs-identifier hs-var">onset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; s -&gt; Ordering) -&gt; [s] -&gt; [s]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; Time) -&gt; s -&gt; s -&gt; Ordering
forall a b. Ord a =&gt; (b -&gt; a) -&gt; b -&gt; b -&gt; Ordering
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Ord.comparing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Getting Time s Time -&gt; Time
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Time s Time
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Time
</span><a href="Music.Time.Position.html#onset"><span class="hs-identifier hs-var">onset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621680576873"><span class="annot"><span class="annottext">noMeta :: p a (f a) -&gt; p (w a) (f (m a))
</span><a href="#local-6989586621680576873"><span class="hs-identifier hs-var hs-var">noMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(w a -&gt; a) -&gt; (a -&gt; m a) -&gt; Iso (w a) (m a) a a
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">w a -&gt; a
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><span class="hs-identifier hs-var">extract</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- | A score is a list of (time-duration-value triples) up to meta-data.</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- To preserve meta-data, use the more restricted 'triples'.</span><span>
</span><span id="line-364"></span><span id="local-6989586621680577369"><span id="local-6989586621680577370"><span class="annot"><a href="Music.Time.Score.html#triplesIgnoringMeta"><span class="hs-identifier hs-type">triplesIgnoringMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Iso</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577370"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680577370"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680577369"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-365"></span><span id="triplesIgnoringMeta"><span class="annot"><span class="annottext">triplesIgnoringMeta :: p [(Time, Duration, a)] (f [(Time, Duration, b)])
-&gt; p (Score a) (f (Score b))
</span><a href="Music.Time.Score.html#triplesIgnoringMeta"><span class="hs-identifier hs-var hs-var">triplesIgnoringMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Score a -&gt; [(Time, Duration, a)])
-&gt; ([(Time, Duration, b)] -&gt; Score b)
-&gt; Iso
     (Score a) (Score b) [(Time, Duration, a)] [(Time, Duration, b)]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; [(Time, Duration, a)]
forall a. Score a -&gt; [(Time, Duration, a)]
</span><a href="#local-6989586621680576870"><span class="hs-identifier hs-var">_getScore</span></a></span><span> </span><span class="annot"><span class="annottext">[(Time, Duration, b)] -&gt; Score b
forall a. [(Time, Duration, a)] -&gt; Score a
</span><a href="#local-6989586621680576869"><span class="hs-identifier hs-var">_score</span></a></span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-367"></span><span>    </span><span id="local-6989586621680577405"><span class="annot"><a href="#local-6989586621680576869"><span class="hs-identifier hs-type">_score</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680577405"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577405"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621680576869"><span class="annot"><span class="annottext">_score :: [(Time, Duration, a)] -&gt; Score a
</span><a href="#local-6989586621680576869"><span class="hs-identifier hs-var hs-var">_score</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Score a] -&gt; Score a
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Score a] -&gt; Score a)
-&gt; ([(Time, Duration, a)] -&gt; [Score a])
-&gt; [(Time, Duration, a)]
-&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Time, Duration, a) -&gt; Score a)
-&gt; [(Time, Duration, a)] -&gt; [Score a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Time -&gt; Duration -&gt; a -&gt; Score a)
-&gt; (Time, Duration, a) -&gt; Score a
forall a b c d. (a -&gt; b -&gt; c -&gt; d) -&gt; (a, b, c) -&gt; d
</span><a href="Music.Time.Internal.Util.html#uncurry3"><span class="hs-identifier hs-var">uncurry3</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Duration -&gt; a -&gt; Score a
forall (m :: * -&gt; *) a p.
(Transformable (m a), AffineSpace p, Num p, Monad m,
 Diff p ~ Duration) =&gt;
p -&gt; Duration -&gt; a -&gt; m a
</span><a href="#local-6989586621680576867"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-370"></span><span>        </span><span id="local-6989586621680576867"><span class="annot"><span class="annottext">event :: p -&gt; Duration -&gt; a -&gt; m a
</span><a href="#local-6989586621680576867"><span class="hs-identifier hs-var hs-var">event</span></a></span></span><span> </span><span id="local-6989586621680576866"><span class="annot"><span class="annottext">t :: p
</span><a href="#local-6989586621680576866"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621680576865"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680576865"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621680576864"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680576864"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Duration -&gt; m a -&gt; m a
forall a. Transformable a =&gt; Duration -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#delay"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621680576866"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">p -&gt; p -&gt; Diff p
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m a -&gt; m a) -&gt; (m a -&gt; m a) -&gt; m a -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Duration -&gt; m a -&gt; m a
forall a. Transformable a =&gt; Duration -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#stretch"><span class="hs-identifier hs-var">stretch</span></a></span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680576865"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576864"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>    </span><span id="local-6989586621680577406"><span class="annot"><a href="#local-6989586621680576870"><span class="hs-identifier hs-type">_getScore</span></a></span><span> </span><span class="hs-comment">{-Transformable a =&gt; -}</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577406"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680577406"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-372"></span><span>    </span><span id="local-6989586621680576870"><span class="annot"><span class="annottext">_getScore :: Score a -&gt; [(Time, Duration, a)]
</span><a href="#local-6989586621680576870"><span class="hs-identifier hs-var hs-var">_getScore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-373"></span><span>      </span><span class="annot"><span class="annottext">((Span, a) -&gt; (Time, Duration, a))
-&gt; [(Span, a)] -&gt; [(Time, Duration, a)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
-&gt; Span -&gt; (Time, Duration)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
Iso' Span (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680576859"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680576859"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576858"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680576858"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576857"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680576857"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680576859"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680576858"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576857"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>        </span><span class="annot"><span class="annottext">([(Span, a)] -&gt; [(Time, Duration, a)])
-&gt; (Score a -&gt; [(Span, a)]) -&gt; Score a -&gt; [(Time, Duration, a)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((Span, a) -&gt; (Span, a) -&gt; Ordering) -&gt; [(Span, a)] -&gt; [(Span, a)]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Span, a) -&gt; Span) -&gt; (Span, a) -&gt; (Span, a) -&gt; Ordering
forall a b. Ord a =&gt; (b -&gt; a) -&gt; b -&gt; b -&gt; Ordering
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Ord.comparing</span></a></span><span> </span><span class="annot"><span class="annottext">(Span, a) -&gt; Span
forall a b. (a, b) -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">([(Span, a)] -&gt; [(Span, a)])
-&gt; (Score a -&gt; [(Span, a)]) -&gt; Score a -&gt; [(Span, a)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score (Span, a) -&gt; [(Span, a)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Foldable.toList</span></a></span><span>
</span><span id="line-376"></span><span>        </span><span class="annot"><span class="annottext">(Score (Span, a) -&gt; [(Span, a)])
-&gt; (Score a -&gt; Score (Span, a)) -&gt; Score a -&gt; [(Span, a)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; (Span, a)) -&gt; Score (Event a) -&gt; Score (Span, a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Span, a) (Event a) (Span, a) -&gt; Event a -&gt; (Span, a)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">(Getting (Span, a) (Event a) (Span, a) -&gt; Event a -&gt; (Span, a))
-&gt; Getting (Span, a) (Event a) (Span, a) -&gt; Event a -&gt; (Span, a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnIso (Span, a) (Span, a) (Event a) (Event a)
-&gt; Iso (Event a) (Event a) (Span, a) (Span, a)
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso (Span, a) (Span, a) (Event a) (Event a)
forall a b. Iso (Span, a) (Span, b) (Event a) (Event b)
</span><a href="Music.Time.Event.html#event"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>        </span><span class="annot"><span class="annottext">(Score (Event a) -&gt; Score (Span, a))
-&gt; (Score a -&gt; Score (Event a)) -&gt; Score a -&gt; Score (Span, a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Score (Event a)
forall a. Score a -&gt; Score (Event a)
</span><a href="Music.Time.Score.html#reifyScore"><span class="hs-identifier hs-var">reifyScore</span></a></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-comment">-- | Map with the associated time span.</span><span>
</span><span id="line-380"></span><span id="local-6989586621680577365"><span id="local-6989586621680577366"><span class="annot"><a href="Music.Time.Score.html#mapScore"><span class="hs-identifier hs-type">mapScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577366"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577365"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577366"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577365"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-381"></span><span id="mapScore"><span class="annot"><span class="annottext">mapScore :: (Event a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapScore"><span class="hs-identifier hs-var hs-var">mapScore</span></a></span></span><span> </span><span id="local-6989586621680576854"><span class="annot"><span class="annottext">f :: Event a -&gt; b
</span><a href="#local-6989586621680576854"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter (Score a) (Score b) (Score' a) (Score' b)
-&gt; (Score' a -&gt; Score' b) -&gt; Score a -&gt; Score b
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Score a -&gt; (Meta, Score' a))
-&gt; ((Meta, Score' b) -&gt; Score b)
-&gt; Iso (Score a) (Score b) (Meta, Score' a) (Meta, Score' b)
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' b) -&gt; Score b
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="annot"><span class="annottext">(((Meta, Score' a) -&gt; Identity (Meta, Score' b))
 -&gt; Score a -&gt; Identity (Score b))
-&gt; ((Score' a -&gt; Identity (Score' b))
    -&gt; (Meta, Score' a) -&gt; Identity (Meta, Score' b))
-&gt; ASetter (Score a) (Score b) (Score' a) (Score' b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; Identity (Score' b))
-&gt; (Meta, Score' a) -&gt; Identity (Meta, Score' b)
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Event a -&gt; b) -&gt; Score' a -&gt; Score' b
forall a a. (Event a -&gt; a) -&gt; Score' a -&gt; Score' a
</span><a href="#local-6989586621680576852"><span class="hs-identifier hs-var">mapScore'</span></a></span><span> </span><span class="annot"><span class="annottext">Event a -&gt; b
</span><a href="#local-6989586621680576854"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621680576852"><span class="annot"><span class="annottext">mapScore' :: (Event a -&gt; a) -&gt; Score' a -&gt; Score' a
</span><a href="#local-6989586621680576852"><span class="hs-identifier hs-var hs-var">mapScore'</span></a></span></span><span> </span><span id="local-6989586621680576851"><span class="annot"><span class="annottext">f :: Event a -&gt; a
</span><a href="#local-6989586621680576851"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter (Score' a) (Score' a) (Event a) (Event a)
-&gt; (Event a -&gt; Event a) -&gt; Score' a -&gt; Score' a
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Score' a -&gt; [Event a])
-&gt; ([Event a] -&gt; Score' a)
-&gt; Iso (Score' a) (Score' a) [Event a] [Event a]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
forall a. Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span><span> </span><span class="annot"><span class="annottext">[Event a] -&gt; Score' a
forall a. [Event a] -&gt; Score' a
</span><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span><span> </span><span class="annot"><span class="annottext">(([Event a] -&gt; Identity [Event a])
 -&gt; Score' a -&gt; Identity (Score' a))
-&gt; ((Event a -&gt; Identity (Event a))
    -&gt; [Event a] -&gt; Identity [Event a])
-&gt; ASetter (Score' a) (Score' a) (Event a) (Event a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; Identity (Event a)) -&gt; [Event a] -&gt; Identity [Event a]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Event a -&gt; a) -&gt; Event a -&gt; Event a
forall (w :: * -&gt; *) a b. Comonad w =&gt; (w a -&gt; b) -&gt; w a -&gt; w b
</span><span class="hs-identifier hs-var">extend</span></span><span> </span><span class="annot"><span class="annottext">Event a -&gt; a
</span><a href="#local-6989586621680576851"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span id="local-6989586621680577388"><span class="annot"><a href="Music.Time.Score.html#reifyScore"><span class="hs-identifier hs-type">reifyScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577388"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Event.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577388"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-386"></span><span id="reifyScore"><span class="annot"><span class="annottext">reifyScore :: Score a -&gt; Score (Event a)
</span><a href="Music.Time.Score.html#reifyScore"><span class="hs-identifier hs-var hs-var">reifyScore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter (Score a) (Score (Event a)) [Event a] [Event (Event a)]
-&gt; ([Event a] -&gt; [Event (Event a)]) -&gt; Score a -&gt; Score (Event a)
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Score a -&gt; (Meta, Score' a))
-&gt; ((Meta, Score' (Event a)) -&gt; Score (Event a))
-&gt; Iso
     (Score a)
     (Score (Event a))
     (Meta, Score' a)
     (Meta, Score' (Event a))
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; (Meta, Score' a)
forall a. Score a -&gt; (Meta, Score' a)
</span><a href="Music.Time.Score.html#getScore"><span class="hs-identifier hs-var hs-var">getScore</span></a></span><span> </span><span class="annot"><span class="annottext">(Meta, Score' (Event a)) -&gt; Score (Event a)
forall a. (Meta, Score' a) -&gt; Score a
</span><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-var">Score</span></a></span><span> </span><span class="annot"><span class="annottext">(((Meta, Score' a) -&gt; Identity (Meta, Score' (Event a)))
 -&gt; Score a -&gt; Identity (Score (Event a)))
-&gt; (([Event a] -&gt; Identity [Event (Event a)])
    -&gt; (Meta, Score' a) -&gt; Identity (Meta, Score' (Event a)))
-&gt; ASetter (Score a) (Score (Event a)) [Event a] [Event (Event a)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; Identity (Score' (Event a)))
-&gt; (Meta, Score' a) -&gt; Identity (Meta, Score' (Event a))
forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span> </span><span class="annot"><span class="annottext">((Score' a -&gt; Identity (Score' (Event a)))
 -&gt; (Meta, Score' a) -&gt; Identity (Meta, Score' (Event a)))
-&gt; (([Event a] -&gt; Identity [Event (Event a)])
    -&gt; Score' a -&gt; Identity (Score' (Event a)))
-&gt; ([Event a] -&gt; Identity [Event (Event a)])
-&gt; (Meta, Score' a)
-&gt; Identity (Meta, Score' (Event a))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Score' a -&gt; [Event a])
-&gt; ([Event (Event a)] -&gt; Score' (Event a))
-&gt; Iso (Score' a) (Score' (Event a)) [Event a] [Event (Event a)]
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span> </span><span class="annot"><span class="annottext">Score' a -&gt; [Event a]
forall a. Score' a -&gt; [Event a]
</span><a href="Music.Time.Score.html#getScore%27"><span class="hs-identifier hs-var hs-var">getScore'</span></a></span><span> </span><span class="annot"><span class="annottext">[Event (Event a)] -&gt; Score' (Event a)
forall a. [Event a] -&gt; Score' a
</span><a href="Music.Time.Score.html#Score%27"><span class="hs-identifier hs-var">Score'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Event a] -&gt; [Event (Event a)]) -&gt; Score a -&gt; Score (Event a))
-&gt; ([Event a] -&gt; [Event (Event a)]) -&gt; Score a -&gt; Score (Event a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; Event (Event a)) -&gt; [Event a] -&gt; [Event (Event a)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Event a -&gt; Event (Event a)
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; w (w a)
</span><span class="hs-identifier hs-var">duplicate</span></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-comment">-- | View a score as a list of time-duration-value triplets.</span><span>
</span><span id="line-389"></span><span class="hs-comment">--</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- TODO replace this with traversals</span><span>
</span><span id="line-391"></span><span id="local-6989586621680576847"><span id="local-6989586621680576848"><span class="annot"><a href="Music.Time.Score.html#triples"><span class="hs-identifier hs-type">triples</span></a></span><span> </span><span class="hs-comment">{-Transformable a =&gt; -}</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576848"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576847"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680576848"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680576847"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-392"></span><span id="triples"><span class="annot"><span class="annottext">triples :: ([(Time, Duration, a)] -&gt; f [(Time, Duration, b)])
-&gt; Score a -&gt; f (Score b)
</span><a href="Music.Time.Score.html#triples"><span class="hs-identifier hs-var hs-var">triples</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Time, Duration, a)] -&gt; f [(Time, Duration, b)])
-&gt; Score a -&gt; f (Score b)
forall a b.
Iso (Score a) (Score b) [(Time, Duration, a)] [(Time, Duration, b)]
</span><a href="Music.Time.Score.html#triplesIgnoringMeta"><span class="hs-identifier hs-var">triplesIgnoringMeta</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-comment">-- | Map over the values in a score.</span><span>
</span><span id="line-395"></span><span id="local-6989586621680577351"><span id="local-6989586621680577352"><span class="annot"><a href="Music.Time.Score.html#mapWithSpan"><span class="hs-identifier hs-type">mapWithSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577352"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577351"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577352"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577351"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-396"></span><span id="mapWithSpan"><span class="annot"><span class="annottext">mapWithSpan :: (Span -&gt; a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapWithSpan"><span class="hs-identifier hs-var hs-var">mapWithSpan</span></a></span></span><span> </span><span id="local-6989586621680576846"><span class="annot"><span class="annottext">f :: Span -&gt; a -&gt; b
</span><a href="#local-6989586621680576846"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; b) -&gt; Score a -&gt; Score b
forall a b. (Event a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapScore"><span class="hs-identifier hs-var">mapScore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Span -&gt; a -&gt; b) -&gt; (Span, a) -&gt; b
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; a -&gt; b
</span><a href="#local-6989586621680576846"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Span, a) -&gt; b) -&gt; (Event a -&gt; (Span, a)) -&gt; Event a -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Span, a) (Event a) (Span, a) -&gt; Event a -&gt; (Span, a)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnIso (Span, a) (Span, a) (Event a) (Event a)
-&gt; Iso (Event a) (Event a) (Span, a) (Span, a)
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso (Span, a) (Span, a) (Event a) (Event a)
forall a b. Iso (Span, a) (Span, b) (Event a) (Event b)
</span><a href="Music.Time.Event.html#event"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">-- | Filter the values in a score.</span><span>
</span><span id="line-399"></span><span id="local-6989586621680576844"><span class="annot"><a href="Music.Time.Score.html#filterWithSpan"><span class="hs-identifier hs-type">filterWithSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680576844"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576844"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576844"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-400"></span><span id="filterWithSpan"><span class="annot"><span class="annottext">filterWithSpan :: (Span -&gt; a -&gt; Bool) -&gt; Score a -&gt; Score a
</span><a href="Music.Time.Score.html#filterWithSpan"><span class="hs-identifier hs-var hs-var">filterWithSpan</span></a></span></span><span> </span><span id="local-6989586621680576843"><span class="annot"><span class="annottext">f :: Span -&gt; a -&gt; Bool
</span><a href="#local-6989586621680576843"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; a -&gt; Maybe a) -&gt; Score a -&gt; Score a
forall a b. (Span -&gt; a -&gt; Maybe b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapFilterWithSpan"><span class="hs-identifier hs-var">mapFilterWithSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Span -&gt; a -&gt; Bool) -&gt; Span -&gt; a -&gt; Maybe a
forall a b. (a -&gt; b -&gt; Bool) -&gt; a -&gt; b -&gt; Maybe b
</span><a href="Music.Time.Internal.Util.html#partial2"><span class="hs-identifier hs-var">partial2</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; a -&gt; Bool
</span><a href="#local-6989586621680576843"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-comment">-- | Efficient combination of 'mapWithSpan' and 'filterWithTime'.</span><span>
</span><span id="line-403"></span><span id="local-6989586621680577359"><span id="local-6989586621680577360"><span class="annot"><a href="Music.Time.Score.html#mapFilterWithSpan"><span class="hs-identifier hs-type">mapFilterWithSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577360"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577359"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577360"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577359"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-404"></span><span id="mapFilterWithSpan"><span class="annot"><span class="annottext">mapFilterWithSpan :: (Span -&gt; a -&gt; Maybe b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapFilterWithSpan"><span class="hs-identifier hs-var hs-var">mapFilterWithSpan</span></a></span></span><span> </span><span id="local-6989586621680576841"><span class="annot"><span class="annottext">f :: Span -&gt; a -&gt; Maybe b
</span><a href="#local-6989586621680576841"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score (Maybe b) -&gt; Score b
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m (Maybe a) -&gt; m a
</span><span class="hs-identifier hs-var">mcatMaybes</span></span><span> </span><span class="annot"><span class="annottext">(Score (Maybe b) -&gt; Score b)
-&gt; (Score a -&gt; Score (Maybe b)) -&gt; Score a -&gt; Score b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; a -&gt; Maybe b) -&gt; Score a -&gt; Score (Maybe b)
forall a b. (Span -&gt; a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapWithSpan"><span class="hs-identifier hs-var">mapWithSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; a -&gt; Maybe b
</span><a href="#local-6989586621680576841"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="hs-comment">-- | Map over the values in a score.</span><span>
</span><span id="line-407"></span><span id="local-6989586621680577339"><span id="local-6989586621680577340"><span class="annot"><a href="Music.Time.Score.html#mapWithTime"><span class="hs-identifier hs-type">mapWithTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577339"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577339"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-408"></span><span id="mapWithTime"><span class="annot"><span class="annottext">mapWithTime :: (Time -&gt; Duration -&gt; a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapWithTime"><span class="hs-identifier hs-var hs-var">mapWithTime</span></a></span></span><span> </span><span id="local-6989586621680576839"><span class="annot"><span class="annottext">f :: Time -&gt; Duration -&gt; a -&gt; b
</span><a href="#local-6989586621680576839"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; a -&gt; b) -&gt; Score a -&gt; Score b
forall a b. (Span -&gt; a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapWithSpan"><span class="hs-identifier hs-var">mapWithSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Time -&gt; Duration -&gt; a -&gt; b) -&gt; (Time, Duration) -&gt; a -&gt; b
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Duration -&gt; a -&gt; b
</span><a href="#local-6989586621680576839"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Time, Duration) -&gt; a -&gt; b)
-&gt; (Span -&gt; (Time, Duration)) -&gt; Span -&gt; a -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
-&gt; Span -&gt; (Time, Duration)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
Iso' Span (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-comment">-- | Filter the values in a score.</span><span>
</span><span id="line-411"></span><span id="local-6989586621680576838"><span class="annot"><a href="Music.Time.Score.html#filterWithTime"><span class="hs-identifier hs-type">filterWithTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680576838"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576838"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576838"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-412"></span><span id="filterWithTime"><span class="annot"><span class="annottext">filterWithTime :: (Time -&gt; Duration -&gt; a -&gt; Bool) -&gt; Score a -&gt; Score a
</span><a href="Music.Time.Score.html#filterWithTime"><span class="hs-identifier hs-var hs-var">filterWithTime</span></a></span></span><span> </span><span id="local-6989586621680576837"><span class="annot"><span class="annottext">f :: Time -&gt; Duration -&gt; a -&gt; Bool
</span><a href="#local-6989586621680576837"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Duration -&gt; a -&gt; Maybe a) -&gt; Score a -&gt; Score a
forall a b.
(Time -&gt; Duration -&gt; a -&gt; Maybe b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapFilterWithTime"><span class="hs-identifier hs-var">mapFilterWithTime</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Time -&gt; Duration -&gt; a -&gt; Bool) -&gt; Time -&gt; Duration -&gt; a -&gt; Maybe a
forall a b c. (a -&gt; b -&gt; c -&gt; Bool) -&gt; a -&gt; b -&gt; c -&gt; Maybe c
</span><a href="Music.Time.Internal.Util.html#partial3"><span class="hs-identifier hs-var">partial3</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Duration -&gt; a -&gt; Bool
</span><a href="#local-6989586621680576837"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-comment">-- | Efficient combination of 'mapWithTime' and 'filterWithTime'.</span><span>
</span><span id="line-415"></span><span id="local-6989586621680577346"><span id="local-6989586621680577347"><span class="annot"><a href="Music.Time.Score.html#mapFilterWithTime"><span class="hs-identifier hs-type">mapFilterWithTime</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Types.html#Time"><span class="hs-identifier hs-type">Time</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Duration"><span class="hs-identifier hs-type">Duration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577347"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577346"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577347"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577346"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-416"></span><span id="mapFilterWithTime"><span class="annot"><span class="annottext">mapFilterWithTime :: (Time -&gt; Duration -&gt; a -&gt; Maybe b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapFilterWithTime"><span class="hs-identifier hs-var hs-var">mapFilterWithTime</span></a></span></span><span> </span><span id="local-6989586621680576835"><span class="annot"><span class="annottext">f :: Time -&gt; Duration -&gt; a -&gt; Maybe b
</span><a href="#local-6989586621680576835"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score (Maybe b) -&gt; Score b
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m (Maybe a) -&gt; m a
</span><span class="hs-identifier hs-var">mcatMaybes</span></span><span> </span><span class="annot"><span class="annottext">(Score (Maybe b) -&gt; Score b)
-&gt; (Score a -&gt; Score (Maybe b)) -&gt; Score a -&gt; Score b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Time -&gt; Duration -&gt; a -&gt; Maybe b) -&gt; Score a -&gt; Score (Maybe b)
forall a b. (Time -&gt; Duration -&gt; a -&gt; b) -&gt; Score a -&gt; Score b
</span><a href="Music.Time.Score.html#mapWithTime"><span class="hs-identifier hs-var">mapWithTime</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Duration -&gt; a -&gt; Maybe b
</span><a href="#local-6989586621680576835"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-comment">-- | Normalize a score, assuring its events spans are all forward (as by 'isForwardSpan'),</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- and that its onset is at least zero. Consequently, the onset and offset of each event</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- in the score is at least zero.</span><span>
</span><span id="line-421"></span><span id="local-6989586621680576834"><span class="annot"><a href="Music.Time.Score.html#normalizeScore"><span class="hs-identifier hs-type">normalizeScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576834"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576834"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-422"></span><span id="normalizeScore"><span class="annot"><span class="annottext">normalizeScore :: Score a -&gt; Score a
</span><a href="Music.Time.Score.html#normalizeScore"><span class="hs-identifier hs-var hs-var">normalizeScore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Score a
forall a. Score a -&gt; Score a
</span><a href="Music.Time.Score.html#reset"><span class="hs-identifier hs-var">reset</span></a></span><span> </span><span class="annot"><span class="annottext">(Score a -&gt; Score a) -&gt; (Score a -&gt; Score a) -&gt; Score a -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Score a
forall a. Score a -&gt; Score a
</span><a href="#local-6989586621680576832"><span class="hs-identifier hs-var">normalizeScoreDurations</span></a></span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-424"></span><span>    </span><span id="local-6989586621680576832"><span class="annot"><span class="annottext">normalizeScoreDurations :: Score b -&gt; Score b
</span><a href="#local-6989586621680576832"><span class="hs-identifier hs-var hs-var">normalizeScoreDurations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter (Score b) (Score b) Span Span
-&gt; (Span -&gt; Span) -&gt; Score b -&gt; Score b
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Event b] -&gt; Identity [Event b]) -&gt; Score b -&gt; Identity (Score b)
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span> </span><span class="annot"><span class="annottext">(([Event b] -&gt; Identity [Event b])
 -&gt; Score b -&gt; Identity (Score b))
-&gt; ((Span -&gt; Identity Span) -&gt; [Event b] -&gt; Identity [Event b])
-&gt; ASetter (Score b) (Score b) Span Span
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event b -&gt; Identity (Event b)) -&gt; [Event b] -&gt; Identity [Event b]
forall s t a b. Each s t a b =&gt; Traversal s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">((Event b -&gt; Identity (Event b))
 -&gt; [Event b] -&gt; Identity [Event b])
-&gt; ((Span -&gt; Identity Span) -&gt; Event b -&gt; Identity (Event b))
-&gt; (Span -&gt; Identity Span)
-&gt; [Event b]
-&gt; Identity [Event b]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; Identity Span) -&gt; Event b -&gt; Identity (Event b)
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Span
</span><a href="Music.Time.Position.html#era"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span
</span><a href="Music.Time.Types.html#normalizeSpan"><span class="hs-identifier hs-var">normalizeSpan</span></a></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="hs-comment">-- | Delay a score so that it starts no later than time @0@.</span><span>
</span><span id="line-427"></span><span id="local-6989586621680577337"><span class="annot"><a href="Music.Time.Score.html#reset"><span class="hs-identifier hs-type">reset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577337"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577337"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-428"></span><span id="reset"><span class="annot"><span class="annottext">reset :: Score a -&gt; Score a
</span><a href="Music.Time.Score.html#reset"><span class="hs-identifier hs-var hs-var">reset</span></a></span></span><span> </span><span id="local-6989586621680576828"><span class="annot"><span class="annottext">x :: Score a
</span><a href="#local-6989586621680576828"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Maybe Span
forall a. HasPosition a =&gt; a -&gt; Maybe Span
</span><a href="Music.Time.Position.html#_era"><span class="hs-identifier hs-var">_era</span></a></span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576828"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-429"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576828"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680576827"><span class="annot"><span class="annottext">e :: Span
</span><a href="#local-6989586621680576827"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-431"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680576826"><span class="annot"><span class="annottext">o :: Time
</span><a href="#local-6989586621680576826"><span class="hs-identifier hs-var hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Getting Time Span Time -&gt; Span -&gt; Time
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Time Span Time
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Time
</span><a href="Music.Time.Position.html#onset"><span class="hs-identifier hs-var">onset</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680576827"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-432"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680576826"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Duration -&gt; Score a -&gt; Score a
forall a. Transformable a =&gt; Duration -&gt; a -&gt; a
</span><a href="Music.Time.Internal.Transform.html#delay"><span class="hs-identifier hs-var">delay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Time -&gt; Time -&gt; Diff Time
forall p. AffineSpace p =&gt; p -&gt; p -&gt; Diff p
</span><span class="hs-operator hs-var">.-.</span></span><span> </span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680576826"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576828"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576828"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-comment">-- | Remove all 'Nothing' values in the score.</span><span>
</span><span id="line-435"></span><span id="local-6989586621680576824"><span class="annot"><a href="Music.Time.Score.html#removeRests"><span class="hs-identifier hs-type">removeRests</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576824"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576824"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-436"></span><span id="removeRests"><span class="annot"><span class="annottext">removeRests :: Score (Maybe a) -&gt; Score a
</span><a href="Music.Time.Score.html#removeRests"><span class="hs-identifier hs-var hs-var">removeRests</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Score (Maybe a) -&gt; Score a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m (Maybe a) -&gt; m a
</span><span class="hs-identifier hs-var">mcatMaybes</span></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="hs-comment">-- TODO version that reverses the values where appropriate</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- Use over (events . each) normalizeEvent or similar</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- Print all eras of the given score.</span><span>
</span><span id="line-443"></span><span class="hs-comment">--</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- &gt;&gt;&gt; toListOf eras $ pseq [c,d,e :: Score Integer]</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- [0 &lt;-&gt; 1,1 &lt;-&gt; 2,2 &lt;-&gt; 3]</span><span>
</span><span id="line-446"></span><span id="local-6989586621680577319"><span class="annot"><a href="Music.Time.Score.html#eras"><span class="hs-identifier hs-type">eras</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversal'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577319"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span></span><span>
</span><span id="line-447"></span><span id="eras"><span class="annot"><span class="annottext">eras :: (Span -&gt; f Span) -&gt; Score a -&gt; f (Score a)
</span><a href="Music.Time.Score.html#eras"><span class="hs-identifier hs-var hs-var">eras</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; f [Event a]) -&gt; Score a -&gt; f (Score a)
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span> </span><span class="annot"><span class="annottext">(([Event a] -&gt; f [Event a]) -&gt; Score a -&gt; f (Score a))
-&gt; ((Span -&gt; f Span) -&gt; [Event a] -&gt; f [Event a])
-&gt; (Span -&gt; f Span)
-&gt; Score a
-&gt; f (Score a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; f (Event a)) -&gt; [Event a] -&gt; f [Event a]
forall s t a b. Each s t a b =&gt; Traversal s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">((Event a -&gt; f (Event a)) -&gt; [Event a] -&gt; f [Event a])
-&gt; ((Span -&gt; f Span) -&gt; Event a -&gt; f (Event a))
-&gt; (Span -&gt; f Span)
-&gt; [Event a]
-&gt; f [Event a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; f Span) -&gt; Event a -&gt; f (Event a)
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Span
</span><a href="Music.Time.Position.html#era"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span class="hs-comment">-- TODO rename and expose this</span><span>
</span><span id="line-450"></span><span class="hs-comment">-- We have an (Iso (Score a) (TMap Span [a])), with [] as default value</span><span>
</span><span id="line-451"></span><span id="local-6989586621680577317"><span class="annot"><a href="Music.Time.Score.html#chordEvents"><span class="hs-identifier hs-type">chordEvents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Internal.Transform.html#Transformable"><span class="hs-identifier hs-type">Transformable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577317"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577317"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680577317"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-452"></span><span id="chordEvents"><span class="annot"><span class="annottext">chordEvents :: Span -&gt; Score a -&gt; [a]
</span><a href="Music.Time.Score.html#chordEvents"><span class="hs-identifier hs-var hs-var">chordEvents</span></a></span></span><span> </span><span id="local-6989586621680576822"><span class="annot"><span class="annottext">s :: Span
</span><a href="#local-6989586621680576822"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; a) -&gt; [Event a] -&gt; [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Event a -&gt; a
forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; a
</span><span class="hs-identifier hs-var">extract</span></span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; [a]) -&gt; (Score a -&gt; [Event a]) -&gt; Score a -&gt; [a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; Bool) -&gt; [Event a] -&gt; [Event a]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Span
</span><a href="#local-6989586621680576822"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; Bool) -&gt; (Event a -&gt; Span) -&gt; Event a -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Span (Event a) Span -&gt; Event a -&gt; Span
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Span (Event a) Span
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Span
</span><a href="Music.Time.Position.html#era"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Event a] -&gt; [Event a])
-&gt; (Score a -&gt; [Event a]) -&gt; Score a -&gt; [Event a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a] -&gt; Score a -&gt; [Event a]
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting [Event a] (Score a) [Event a]
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span id="local-6989586621680577311"><span class="annot"><a href="Music.Time.Score.html#simultaneous%27"><span class="hs-identifier hs-type">simultaneous'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Internal.Transform.html#Transformable"><span class="hs-identifier hs-type">Transformable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577311"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577311"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680577311"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-455"></span><span id="simultaneous%27"><span class="annot"><span class="annottext">simultaneous' :: Score a -&gt; Score [a]
</span><a href="Music.Time.Score.html#simultaneous%27"><span class="hs-identifier hs-var hs-var">simultaneous'</span></a></span></span><span> </span><span id="local-6989586621680576820"><span class="annot"><span class="annottext">sc :: Score a
</span><a href="#local-6989586621680576820"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Time, Duration, [a])]
-&gt; Getting (Score [a]) [(Time, Duration, [a])] (Score [a])
-&gt; Score [a]
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">AnIso
  (Score [a])
  (Score [a])
  [(Time, Duration, [a])]
  [(Time, Duration, [a])]
-&gt; Iso
     [(Time, Duration, [a])]
     [(Time, Duration, [a])]
     (Score [a])
     (Score [a])
forall s t a b. AnIso s t a b -&gt; Iso b a t s
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">AnIso
  (Score [a])
  (Score [a])
  [(Time, Duration, [a])]
  [(Time, Duration, [a])]
forall a b.
Iso (Score a) (Score b) [(Time, Duration, a)] [(Time, Duration, b)]
</span><a href="Music.Time.Score.html#triplesIgnoringMeta"><span class="hs-identifier hs-var">triplesIgnoringMeta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Time, Duration, [a])]
</span><a href="#local-6989586621680576819"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-comment">-- es :: [Era]</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-comment">-- evs :: [[a]]</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-comment">-- vs :: [(Time, Duration, [a])]</span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621680576818"><span class="annot"><span class="annottext">es :: [Span]
</span><a href="#local-6989586621680576818"><span class="hs-identifier hs-var hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Span] -&gt; [Span]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.nub</span></a></span><span> </span><span class="annot"><span class="annottext">([Span] -&gt; [Span]) -&gt; [Span] -&gt; [Span]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Endo [Span]) (Score a) Span -&gt; Score a -&gt; [Span]
forall a s. Getting (Endo [a]) s a -&gt; s -&gt; [a]
</span><span class="hs-identifier hs-var">toListOf</span></span><span> </span><span class="annot"><span class="annottext">Getting (Endo [Span]) (Score a) Span
forall a. Traversal' (Score a) Span
</span><a href="Music.Time.Score.html#eras"><span class="hs-identifier hs-var">eras</span></a></span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576820"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-461"></span><span>    </span><span id="local-6989586621680576816"><span class="annot"><span class="annottext">evs :: [[a]]
</span><a href="#local-6989586621680576816"><span class="hs-identifier hs-var hs-var">evs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; [a]) -&gt; [Span] -&gt; [[a]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Span -&gt; Score a -&gt; [a]
forall a. Transformable a =&gt; Span -&gt; Score a -&gt; [a]
</span><a href="Music.Time.Score.html#chordEvents"><span class="hs-operator hs-var">`chordEvents`</span></a></span><span> </span><span class="annot"><span class="annottext">Score a
</span><a href="#local-6989586621680576820"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Span]
</span><a href="#local-6989586621680576818"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span id="local-6989586621680576819"><span class="annot"><span class="annottext">vs :: [(Time, Duration, [a])]
</span><a href="#local-6989586621680576819"><span class="hs-identifier hs-var hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Span -&gt; [a] -&gt; (Time, Duration, [a]))
-&gt; [Span] -&gt; [[a]] -&gt; [(Time, Duration, [a])]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
-&gt; Span -&gt; (Time, Duration)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Time, Duration) Span (Time, Duration)
Iso' Span (Time, Duration)
</span><a href="Music.Time.Types.html#onsetAndDuration"><span class="hs-identifier hs-var">onsetAndDuration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680576814"><span class="annot"><span class="annottext">t :: Time
</span><a href="#local-6989586621680576814"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576813"><span class="annot"><span class="annottext">d :: Duration
</span><a href="#local-6989586621680576813"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680576812"><span class="annot"><span class="annottext">a :: [a]
</span><a href="#local-6989586621680576812"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Time
</span><a href="#local-6989586621680576814"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Duration
</span><a href="#local-6989586621680576813"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680576812"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Span]
</span><a href="#local-6989586621680576818"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[[a]]
</span><a href="#local-6989586621680576816"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="hs-comment">-- overSimult :: Transformable a =&gt; (Score [a] -&gt; Score [b]) -&gt; Score a -&gt; Score b</span><span>
</span><span id="line-465"></span><span class="hs-comment">-- overSimult f = mpseqter . f . simultaneous'</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- | Merge all simultaneous events using their 'Semigroup' instance.</span><span>
</span><span id="line-468"></span><span id="local-6989586621680576811"><span class="annot"><a href="Music.Time.Score.html#simultaneous"><span class="hs-identifier hs-type">simultaneous</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Time.Internal.Transform.html#Transformable"><span class="hs-identifier hs-type">Transformable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576811"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576811"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576811"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-469"></span><span id="simultaneous"><span class="annot"><span class="annottext">simultaneous :: Score a -&gt; Score a
</span><a href="Music.Time.Score.html#simultaneous"><span class="hs-identifier hs-var hs-var">simultaneous</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; a) -&gt; Score [a] -&gt; Score a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty a -&gt; a
forall a. Semigroup a =&gt; NonEmpty a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">sconcat</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty a -&gt; a) -&gt; ([a] -&gt; NonEmpty a) -&gt; [a] -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; NonEmpty a
forall a. [a] -&gt; NonEmpty a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">NonEmpty.fromList</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Score [a] -&gt; Score a)
-&gt; (Score a -&gt; Score [a]) -&gt; Score a -&gt; Score a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Score a -&gt; Score [a]
forall a. Transformable a =&gt; Score a -&gt; Score [a]
</span><a href="Music.Time.Score.html#simultaneous%27"><span class="hs-identifier hs-var">simultaneous'</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-comment">-- | True if the score has more than one overlapping event.</span><span>
</span><span id="line-472"></span><span class="hs-comment">--</span><span>
</span><span id="line-473"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-474"></span><span class="hs-comment">-- hasOverlappingEvents (simultaneous x) = False</span><span>
</span><span id="line-475"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-476"></span><span id="local-6989586621680576808"><span class="annot"><a href="Music.Time.Score.html#hasOverlappingEvents"><span class="hs-identifier hs-type">hasOverlappingEvents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680576808"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-477"></span><span id="hasOverlappingEvents"><span class="annot"><span class="annottext">hasOverlappingEvents :: Score a -&gt; Bool
</span><a href="Music.Time.Score.html#hasOverlappingEvents"><span class="hs-identifier hs-var hs-var">hasOverlappingEvents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Span] -&gt; Bool
</span><a href="Music.Time.Score.html#anyDistinctOverlaps"><span class="hs-identifier hs-var">anyDistinctOverlaps</span></a></span><span> </span><span class="annot"><span class="annottext">([Span] -&gt; Bool) -&gt; (Score a -&gt; [Span]) -&gt; Score a -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Endo [Span]) (Score a) Span -&gt; Score a -&gt; [Span]
forall a s. Getting (Endo [a]) s a -&gt; s -&gt; [a]
</span><span class="hs-identifier hs-var">toListOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Event a] -&gt; Const (Endo [Span]) [Event a])
-&gt; Score a -&gt; Const (Endo [Span]) (Score a)
forall a b. Lens (Score a) (Score b) [Event a] [Event b]
</span><a href="Music.Time.Score.html#events"><span class="hs-identifier hs-var">events</span></a></span><span> </span><span class="annot"><span class="annottext">(([Event a] -&gt; Const (Endo [Span]) [Event a])
 -&gt; Score a -&gt; Const (Endo [Span]) (Score a))
-&gt; ((Span -&gt; Const (Endo [Span]) Span)
    -&gt; [Event a] -&gt; Const (Endo [Span]) [Event a])
-&gt; Getting (Endo [Span]) (Score a) Span
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Event a -&gt; Const (Endo [Span]) (Event a))
-&gt; [Event a] -&gt; Const (Endo [Span]) [Event a]
forall s t a b. Each s t a b =&gt; Traversal s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">((Event a -&gt; Const (Endo [Span]) (Event a))
 -&gt; [Event a] -&gt; Const (Endo [Span]) [Event a])
-&gt; ((Span -&gt; Const (Endo [Span]) Span)
    -&gt; Event a -&gt; Const (Endo [Span]) (Event a))
-&gt; (Span -&gt; Const (Endo [Span]) Span)
-&gt; [Event a]
-&gt; Const (Endo [Span]) [Event a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; Const (Endo [Span]) Span)
-&gt; Event a -&gt; Const (Endo [Span]) (Event a)
forall a. (HasPosition1 a, Transformable a) =&gt; Lens' a Span
</span><a href="Music.Time.Position.html#era"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span id="local-6989586621680577307"><span class="annot"><a href="Music.Time.Score.html#hasDuplicates"><span class="hs-identifier hs-type">hasDuplicates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577307"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680577307"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-480"></span><span id="hasDuplicates"><span class="annot"><span class="annottext">hasDuplicates :: [a] -&gt; Bool
</span><a href="Music.Time.Score.html#hasDuplicates"><span class="hs-identifier hs-var hs-var">hasDuplicates</span></a></span></span><span> </span><span id="local-6989586621680576805"><span class="annot"><span class="annottext">xs :: [a]
</span><a href="#local-6989586621680576805"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">List.nub</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680576805"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680576805"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="annot"><a href="Music.Time.Score.html#anyDistinctOverlaps"><span class="hs-identifier hs-type">anyDistinctOverlaps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Time.Types.html#Span"><span class="hs-identifier hs-type">Span</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-483"></span><span id="anyDistinctOverlaps"><span class="annot"><span class="annottext">anyDistinctOverlaps :: [Span] -&gt; Bool
</span><a href="Music.Time.Score.html#anyDistinctOverlaps"><span class="hs-identifier hs-var hs-var">anyDistinctOverlaps</span></a></span></span><span> </span><span id="local-6989586621680576803"><span class="annot"><span class="annottext">xs :: [Span]
</span><a href="#local-6989586621680576803"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Span] -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; Bool
</span><a href="Music.Time.Score.html#hasDuplicates"><span class="hs-identifier hs-var">hasDuplicates</span></a></span><span> </span><span class="annot"><span class="annottext">[Span]
</span><a href="#local-6989586621680576803"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">[Span] -&gt; Bool
</span><a href="#local-6989586621680576801"><span class="hs-identifier hs-var">anyOverlaps</span></a></span><span> </span><span class="annot"><span class="annottext">[Span]
</span><a href="#local-6989586621680576803"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621680576801"><span class="annot"><span class="annottext">anyOverlaps :: [Span] -&gt; Bool
</span><a href="#local-6989586621680576801"><span class="hs-identifier hs-var hs-var">anyOverlaps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool -&gt; Bool) -&gt; Bool -&gt; [Bool] -&gt; Bool
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">(||)</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-var">False</span></a></span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; Bool) -&gt; ([Span] -&gt; [Bool]) -&gt; [Span] -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Span -&gt; Span -&gt; Bool) -&gt; [Span] -&gt; [Bool]
forall a b. Eq a =&gt; (a -&gt; a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="Music.Time.Score.html#combined"><span class="hs-identifier hs-var">combined</span></a></span><span> </span><span class="annot"><span class="annottext">Span -&gt; Span -&gt; Bool
</span><a href="Music.Time.Types.html#overlaps"><span class="hs-identifier hs-var">overlaps</span></a></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="hs-comment">-- If the span list has duplicates, we have overlaps.</span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span id="local-6989586621680577305"><span id="local-6989586621680577306"><span class="annot"><a href="Music.Time.Score.html#combined"><span class="hs-identifier hs-type">combined</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680577306"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680577306"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577306"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680577305"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680577306"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680577305"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-490"></span><span id="combined"><span class="annot"><span class="annottext">combined :: (a -&gt; a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="Music.Time.Score.html#combined"><span class="hs-identifier hs-var hs-var">combined</span></a></span></span><span> </span><span id="local-6989586621680576797"><span class="annot"><span class="annottext">f :: a -&gt; a -&gt; b
</span><a href="#local-6989586621680576797"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680576796"><span class="annot"><span class="annottext">as :: [a]
</span><a href="#local-6989586621680576796"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe b] -&gt; [b]
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m (Maybe a) -&gt; m a
</span><span class="hs-identifier hs-var">mcatMaybes</span></span><span> </span><span class="hs-special">[</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576795"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576794"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe b
forall a. Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576795"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; b
</span><a href="#local-6989586621680576797"><span class="hs-operator hs-var">`f`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576794"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680576795"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576795"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680576796"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680576794"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680576794"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680576796"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-491"></span></pre></body></html>