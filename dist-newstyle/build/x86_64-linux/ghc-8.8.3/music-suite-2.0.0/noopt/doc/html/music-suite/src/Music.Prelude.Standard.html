<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wall
  -Wcompat
  -Wincomplete-record-updates
  -Wincomplete-uni-patterns
  -Werror
  -fno-warn-name-shadowing
  -fno-warn-unused-imports
  -fno-warn-redundant-constraints #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-comment">------------------------------------------------------------------------------------</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-comment">-------------------------------------------------------------------------------------</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- Copyright   : (c) Hans Hoglund 2012</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- License     : BSD-style</span><span>
</span><span id="line-23"></span><span class="hs-comment">--</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- Maintainer  : hans@hanshoglund.se</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- Portability : non-portable (TF,GNTD)</span><span>
</span><span id="line-27"></span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- Standard music representation and export.</span><span>
</span><span id="line-29"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Music.Prelude.Standard</span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Music.Pitch.html"><span class="hs-identifier">Music.Pitch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Music.Dynamics.html"><span class="hs-identifier">Music.Dynamics</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Music.Articulation.html"><span class="hs-identifier">Music.Articulation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Music.Parts.html"><span class="hs-identifier">Music.Parts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Music.Score.html"><span class="hs-identifier">Music.Score</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#Music"><span class="hs-identifier">Music</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#StandardNote"><span class="hs-identifier">StandardNote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier">Asp1a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#defaultMain"><span class="hs-identifier">defaultMain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Lens re-exports</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><span class="hs-identifier">set</span></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-identifier">over</span></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="hs-identifier">mapped</span></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="hs-identifier">each</span></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-identifier">filtered</span></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Orchestration</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#singleParts"><span class="hs-identifier">singleParts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#doubleParts"><span class="hs-identifier">doubleParts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#doublePartsF"><span class="hs-identifier">doublePartsF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Music.Prelude.Standard.html#doublePartsInOctave"><span class="hs-identifier">doublePartsInOctave</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.Midi</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">each</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">filtered</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapped</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">over</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">set</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Music.MusicXml.html"><span class="hs-identifier">Data.Music.MusicXml</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Articulation.html"><span class="hs-identifier">Music.Articulation</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Dynamics.html"><span class="hs-identifier">Music.Dynamics</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Parts.html"><span class="hs-identifier">Music.Parts</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Pitch.html"><span class="hs-identifier">Music.Pitch</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.html"><span class="hs-identifier">Music.Score</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Articulation.html#Articulation"><span class="hs-identifier">Articulation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Meta.Clef.html#Clef"><span class="hs-identifier">Clef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Meta.Key.html#Fifths"><span class="hs-identifier">Fifths</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Pitch.html#Interval"><span class="hs-identifier">Interval</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Part.html#Part"><span class="hs-identifier">Part</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Pitch.html#Pitch"><span class="hs-identifier">Pitch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html"><span class="hs-identifier">Music.Score.Export.StandardNotation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1"><span class="hs-identifier">Asp1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1a"><span class="hs-identifier">Asp1a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondLayout"><span class="hs-identifier">LilypondLayout</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier">LilypondOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#defaultLilypondOptions"><span class="hs-identifier">defaultLilypondOptions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier">runIOExportM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toLy"><span class="hs-identifier">toLy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toMidi"><span class="hs-identifier">toMidi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toStandardNotation"><span class="hs-identifier">toStandardNotation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#toXml"><span class="hs-identifier">toXml</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Music.Score.Part.html"><span class="hs-identifier">Music.Score.Part</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier">System.Environment</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Text.Pretty</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Options.Applicative</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">O</span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">type</span><span> </span><span id="StandardNote"><span class="annot"><a href="Music.Prelude.Standard.html#StandardNote"><span class="hs-identifier hs-var">StandardNote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#Asp1"><span class="hs-identifier hs-type">Asp1</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">type</span><span> </span><span id="Music"><span class="annot"><a href="Music.Prelude.Standard.html#Music"><span class="hs-identifier hs-var">Music</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Music.Time.Score.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="Music.Prelude.Standard.html#StandardNote"><span class="hs-identifier hs-type">StandardNote</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- TODO set logging level</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- TODO more options?</span><span>
</span><span id="line-77"></span><span class="hs-keyword">data</span><span> </span><span id="ExportBackend"><span class="annot"><a href="Music.Prelude.Standard.html#ExportBackend"><span class="hs-identifier hs-var">ExportBackend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ToXml"><span class="annot"><a href="Music.Prelude.Standard.html#ToXml"><span class="hs-identifier hs-var">ToXml</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ToLy"><span class="annot"><a href="Music.Prelude.Standard.html#ToLy"><span class="hs-identifier hs-var">ToLy</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ToMidi"><span class="annot"><a href="Music.Prelude.Standard.html#ToMidi"><span class="hs-identifier hs-var">ToMidi</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ToLyAndMidi"><span class="annot"><a href="Music.Prelude.Standard.html#ToLyAndMidi"><span class="hs-identifier hs-var">ToLyAndMidi</span></a></span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">data</span><span> </span><span id="CommandLineOptions"><span class="annot"><a href="Music.Prelude.Standard.html#CommandLineOptions"><span class="hs-identifier hs-var">CommandLineOptions</span></a></span></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CommandLineOptions"><span class="annot"><a href="Music.Prelude.Standard.html#CommandLineOptions"><span class="hs-identifier hs-var">CommandLineOptions</span></a></span></span><span>
</span><span id="line-80"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Backend to use.</span><span>
</span><span id="line-81"></span><span>        </span><span id="backend"><span class="annot"><span class="annottext">CommandLineOptions -&gt; ExportBackend
</span><a href="Music.Prelude.Standard.html#backend"><span class="hs-identifier hs-var hs-var">backend</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Prelude.Standard.html#ExportBackend"><span class="hs-identifier hs-type">ExportBackend</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-comment">-- | Lilypond options, ignored when `backend` is not `ToLy`.</span><span>
</span><span id="line-83"></span><span>        </span><span id="lilypondOptions"><span class="annot"><span class="annottext">CommandLineOptions -&gt; LilypondOptions
</span><a href="Music.Prelude.Standard.html#lilypondOptions"><span class="hs-identifier hs-var hs-var">lilypondOptions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-type">LilypondOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-comment">-- | Path to generated file.</span><span>
</span><span id="line-85"></span><span>        </span><span id="output"><span class="annot"><span class="annottext">CommandLineOptions -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#output"><span class="hs-identifier hs-var hs-var">output</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="Music.Prelude.Standard.html#parseOpts"><span class="hs-identifier hs-type">parseOpts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">O.Parser</span></span><span> </span><span class="annot"><a href="Music.Prelude.Standard.html#CommandLineOptions"><span class="hs-identifier hs-type">CommandLineOptions</span></a></span><span>
</span><span id="line-89"></span><span id="parseOpts"><span class="annot"><span class="annottext">parseOpts :: Parser CommandLineOptions
</span><a href="Music.Prelude.Standard.html#parseOpts"><span class="hs-identifier hs-var hs-var">parseOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="annottext">ExportBackend -&gt; LilypondOptions -&gt; FilePath -&gt; CommandLineOptions
</span><a href="Music.Prelude.Standard.html#CommandLineOptions"><span class="hs-identifier hs-var">CommandLineOptions</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="annottext">(ExportBackend
 -&gt; LilypondOptions -&gt; FilePath -&gt; CommandLineOptions)
-&gt; Parser ExportBackend
-&gt; Parser (LilypondOptions -&gt; FilePath -&gt; CommandLineOptions)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ReadM ExportBackend
-&gt; Mod OptionFields ExportBackend -&gt; Parser ExportBackend
forall a. ReadM a -&gt; Mod OptionFields a -&gt; Parser a
</span><span class="hs-identifier hs-var">O.option</span></span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FilePath -&gt; Either FilePath ExportBackend) -&gt; ReadM ExportBackend
forall a. (FilePath -&gt; Either FilePath a) -&gt; ReadM a
</span><span class="hs-identifier hs-var">O.eitherReader</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Either FilePath ExportBackend
forall a.
(Eq a, IsString a, Semigroup a) =&gt;
a -&gt; Either a ExportBackend
</span><a href="#local-6989586621680606828"><span class="hs-identifier hs-var">readBackend</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Mod OptionFields ExportBackend
forall (f :: * -&gt; *) a. HasName f =&gt; FilePath -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.long</span></span><span> </span><span class="annot"><span class="hs-string">&quot;filetype&quot;</span></span><span> </span><span class="annot"><span class="annottext">Mod OptionFields ExportBackend
-&gt; Mod OptionFields ExportBackend -&gt; Mod OptionFields ExportBackend
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Mod OptionFields ExportBackend
forall (f :: * -&gt; *) a. HasName f =&gt; Char -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.short</span></span><span> </span><span class="annot"><span class="hs-char">'f'</span></span><span> </span><span class="annot"><span class="annottext">Mod OptionFields ExportBackend
-&gt; Mod OptionFields ExportBackend -&gt; Mod OptionFields ExportBackend
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Mod OptionFields ExportBackend
forall (f :: * -&gt; *) a. HasMetavar f =&gt; FilePath -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.metavar</span></span><span> </span><span class="annot"><span class="hs-string">&quot;[xml|ly|mid|ly+mid]&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><span class="annottext">Parser (LilypondOptions -&gt; FilePath -&gt; CommandLineOptions)
-&gt; Parser LilypondOptions
-&gt; Parser (FilePath -&gt; CommandLineOptions)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Parser LilypondOptions
</span><a href="Music.Prelude.Standard.html#parseLyOpts"><span class="hs-identifier hs-var">parseLyOpts</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><span class="annottext">Parser (FilePath -&gt; CommandLineOptions)
-&gt; Parser FilePath -&gt; Parser CommandLineOptions
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mod OptionFields FilePath -&gt; Parser FilePath
forall s. IsString s =&gt; Mod OptionFields s -&gt; Parser s
</span><span class="hs-identifier hs-var">O.strOption</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Mod OptionFields FilePath
forall (f :: * -&gt; *) a. HasName f =&gt; FilePath -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.long</span></span><span> </span><span class="annot"><span class="hs-string">&quot;out&quot;</span></span><span> </span><span class="annot"><span class="annottext">Mod OptionFields FilePath
-&gt; Mod OptionFields FilePath -&gt; Mod OptionFields FilePath
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Mod OptionFields FilePath
forall (f :: * -&gt; *) a. HasName f =&gt; Char -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.short</span></span><span> </span><span class="annot"><span class="hs-char">'o'</span></span><span> </span><span class="annot"><span class="annottext">Mod OptionFields FilePath
-&gt; Mod OptionFields FilePath -&gt; Mod OptionFields FilePath
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Mod OptionFields FilePath
forall (f :: * -&gt; *) a. HasMetavar f =&gt; FilePath -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.metavar</span></span><span> </span><span class="annot"><span class="hs-string">&quot;PATH&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621680606828"><span class="annot"><span class="annottext">readBackend :: a -&gt; Either a ExportBackend
</span><a href="#local-6989586621680606828"><span class="hs-identifier hs-var hs-var">readBackend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-98"></span><span>      </span><span class="hs-string">&quot;xml&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExportBackend -&gt; Either a ExportBackend
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToXml"><span class="hs-identifier hs-var">ToXml</span></a></span><span>
</span><span id="line-99"></span><span>      </span><span class="hs-string">&quot;mid&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExportBackend -&gt; Either a ExportBackend
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToMidi"><span class="hs-identifier hs-var">ToMidi</span></a></span><span>
</span><span id="line-100"></span><span>      </span><span class="hs-string">&quot;ly&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExportBackend -&gt; Either a ExportBackend
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToLy"><span class="hs-identifier hs-var">ToLy</span></a></span><span>
</span><span id="line-101"></span><span>      </span><span class="hs-string">&quot;ly+mid&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExportBackend -&gt; Either a ExportBackend
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToLyAndMidi"><span class="hs-identifier hs-var">ToLyAndMidi</span></a></span><span>
</span><span id="line-102"></span><span>      </span><span class="hs-string">&quot;mid+ly&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExportBackend -&gt; Either a ExportBackend
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToLyAndMidi"><span class="hs-identifier hs-var">ToLyAndMidi</span></a></span><span>
</span><span id="line-103"></span><span>      </span><span id="local-6989586621680606822"><span class="annot"><span class="annottext">s :: a
</span><a href="#local-6989586621680606822"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a ExportBackend
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;Backend must be one of [xml|ly|mid|ly+mid], not &quot;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680606822"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><a href="Music.Prelude.Standard.html#parseLyOpts"><span class="hs-identifier hs-type">parseLyOpts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">O.Parser</span></span><span> </span><span class="annot"><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-type">LilypondOptions</span></a></span><span>
</span><span id="line-106"></span><span id="parseLyOpts"><span class="annot"><span class="annottext">parseLyOpts :: Parser LilypondOptions
</span><a href="Music.Prelude.Standard.html#parseLyOpts"><span class="hs-identifier hs-var hs-var">parseLyOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><span class="annottext">LilypondLayout -&gt; LilypondOptions
</span><a href="Music.Score.Export.StandardNotation.html#LilypondOptions"><span class="hs-identifier hs-var">LilypondOptions</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><span class="annottext">(LilypondLayout -&gt; LilypondOptions)
-&gt; Parser LilypondLayout -&gt; Parser LilypondOptions
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ReadM LilypondLayout
-&gt; Mod OptionFields LilypondLayout -&gt; Parser LilypondLayout
forall a. ReadM a -&gt; Mod OptionFields a -&gt; Parser a
</span><span class="hs-identifier hs-var">O.option</span></span><span>
</span><span id="line-109"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FilePath -&gt; Either FilePath LilypondLayout)
-&gt; ReadM LilypondLayout
forall a. (FilePath -&gt; Either FilePath a) -&gt; ReadM a
</span><span class="hs-identifier hs-var">O.eitherReader</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Either FilePath LilypondLayout
forall a a.
(Eq a, IsString a, IsString a) =&gt;
a -&gt; Either a LilypondLayout
</span><a href="#local-6989586621680606820"><span class="hs-identifier hs-var">readLayout</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Mod OptionFields LilypondLayout
forall (f :: * -&gt; *) a. HasName f =&gt; FilePath -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.long</span></span><span> </span><span class="annot"><span class="hs-string">&quot;layout&quot;</span></span><span> </span><span class="annot"><span class="annottext">Mod OptionFields LilypondLayout
-&gt; Mod OptionFields LilypondLayout
-&gt; Mod OptionFields LilypondLayout
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Mod OptionFields LilypondLayout
forall (f :: * -&gt; *) a. HasMetavar f =&gt; FilePath -&gt; Mod f a
</span><span class="hs-identifier hs-var">O.metavar</span></span><span> </span><span class="annot"><span class="hs-string">&quot;[inline|score|big-score] (default big-score)&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="annottext">Parser LilypondOptions
-&gt; Parser LilypondOptions -&gt; Parser LilypondOptions
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondOptions -&gt; Parser LilypondOptions
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondOptions
</span><a href="Music.Score.Export.StandardNotation.html#defaultLilypondOptions"><span class="hs-identifier hs-var">defaultLilypondOptions</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>    </span><span id="local-6989586621680606820"><span class="annot"><span class="annottext">readLayout :: a -&gt; Either a LilypondLayout
</span><a href="#local-6989586621680606820"><span class="hs-identifier hs-var hs-var">readLayout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-string">&quot;inline&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LilypondLayout -&gt; Either a LilypondLayout
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#LilypondInline"><span class="hs-identifier hs-var">LilypondInline</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-string">&quot;score&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LilypondLayout -&gt; Either a LilypondLayout
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#LilypondScore"><span class="hs-identifier hs-var">LilypondScore</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-string">&quot;big-score&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LilypondLayout -&gt; Either a LilypondLayout
forall a b. b -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondLayout
</span><a href="Music.Score.Export.StandardNotation.html#LilypondBigScore"><span class="hs-identifier hs-var">LilypondBigScore</span></a></span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a LilypondLayout
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Lilypond layout must be one of [inline|score|big-score]&quot;</span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="annot"><a href="Music.Prelude.Standard.html#defaultMain"><span class="hs-identifier hs-type">defaultMain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Music.Prelude.Standard.html#Music"><span class="hs-identifier hs-type">Music</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span id="defaultMain"><span class="annot"><span class="annottext">defaultMain :: Music -&gt; IO ()
</span><a href="Music.Prelude.Standard.html#defaultMain"><span class="hs-identifier hs-var hs-var">defaultMain</span></a></span></span><span> </span><span id="local-6989586621680606815"><span class="annot"><span class="annottext">music :: Music
</span><a href="#local-6989586621680606815"><span class="hs-identifier hs-var">music</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621680606814"><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606814"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ParserInfo CommandLineOptions -&gt; IO CommandLineOptions
forall a. ParserInfo a -&gt; IO a
</span><span class="hs-identifier hs-var">O.execParser</span></span><span> </span><span class="annot"><span class="annottext">(ParserInfo CommandLineOptions -&gt; IO CommandLineOptions)
-&gt; ParserInfo CommandLineOptions -&gt; IO CommandLineOptions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Parser CommandLineOptions
-&gt; InfoMod CommandLineOptions -&gt; ParserInfo CommandLineOptions
forall a. Parser a -&gt; InfoMod a -&gt; ParserInfo a
</span><span class="hs-identifier hs-var">O.info</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser CommandLineOptions
</span><a href="Music.Prelude.Standard.html#parseOpts"><span class="hs-identifier hs-var">parseOpts</span></a></span><span> </span><span class="annot"><span class="annottext">Parser CommandLineOptions
-&gt; Parser (CommandLineOptions -&gt; CommandLineOptions)
-&gt; Parser CommandLineOptions
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f (a -&gt; b) -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">&lt;**&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Parser (CommandLineOptions -&gt; CommandLineOptions)
forall a. Parser (a -&gt; a)
</span><span class="hs-identifier hs-var">O.helper</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InfoMod CommandLineOptions
forall a. InfoMod a
</span><span class="hs-identifier hs-var">O.fullDesc</span></span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><span class="annottext">CommandLineOptions -&gt; IO ()
</span><a href="#local-6989586621680606808"><span class="hs-identifier hs-var">handle</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606814"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-126"></span><span>    </span><span id="local-6989586621680606808"><span class="annot"><span class="annottext">handle :: CommandLineOptions -&gt; IO ()
</span><a href="#local-6989586621680606808"><span class="hs-identifier hs-var hs-var">handle</span></a></span></span><span> </span><span id="local-6989586621680606807"><span class="annot"><span class="annottext">opts :: CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CommandLineOptions -&gt; ExportBackend
</span><a href="Music.Prelude.Standard.html#backend"><span class="hs-identifier hs-var hs-var">backend</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><a href="Music.Prelude.Standard.html#ToLyAndMidi"><span class="hs-identifier hs-type">ToLyAndMidi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>        </span><span class="hs-comment">-- TODO run in parallel?</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><span class="annottext">CommandLineOptions -&gt; IO ()
</span><a href="#local-6989586621680606808"><span class="hs-identifier hs-var">handle</span></a></span><span> </span><span class="annot"><span class="annottext">(CommandLineOptions -&gt; IO ()) -&gt; CommandLineOptions -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">backend :: ExportBackend
</span><a href="Music.Prelude.Standard.html#backend"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToMidi"><span class="hs-identifier hs-var">ToMidi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">output :: FilePath
</span><a href="Music.Prelude.Standard.html#output"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#stripSuffix"><span class="hs-identifier hs-var">stripSuffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOptions -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#output"><span class="hs-identifier hs-var hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;.mid&quot;</span></span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="annottext">CommandLineOptions -&gt; IO ()
</span><a href="#local-6989586621680606808"><span class="hs-identifier hs-var">handle</span></a></span><span> </span><span class="annot"><span class="annottext">(CommandLineOptions -&gt; IO ()) -&gt; CommandLineOptions -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">backend :: ExportBackend
</span><a href="Music.Prelude.Standard.html#backend"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExportBackend
</span><a href="Music.Prelude.Standard.html#ToLy"><span class="hs-identifier hs-var">ToLy</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><a href="Music.Prelude.Standard.html#ToMidi"><span class="hs-identifier hs-type">ToMidi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-132"></span><span>        </span><span id="local-6989586621680606805"><span class="annot"><span class="annottext">Midi
</span><a href="#local-6989586621680606805"><span class="hs-identifier hs-var">midi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOExportM Midi -&gt; IO Midi
forall a. IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-var">runIOExportM</span></a></span><span> </span><span class="annot"><span class="annottext">(IOExportM Midi -&gt; IO Midi) -&gt; IOExportM Midi -&gt; IO Midi
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; IOExportM Midi
forall (m :: * -&gt; *). MidiExportM m =&gt; Music -&gt; m Midi
</span><a href="Music.Score.Export.StandardNotation.html#toMidi"><span class="hs-identifier hs-var">toMidi</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680606815"><span class="hs-identifier hs-var">music</span></a></span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="annottext">FilePath -&gt; Midi -&gt; IO ()
</span><span class="hs-identifier hs-var">Codec.Midi.exportFile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOptions -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#output"><span class="hs-identifier hs-var hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Midi
</span><a href="#local-6989586621680606805"><span class="hs-identifier hs-var">midi</span></a></span><span>
</span><span id="line-134"></span><span>      </span><span class="annot"><a href="Music.Prelude.Standard.html#ToLy"><span class="hs-identifier hs-type">ToLy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-135"></span><span>        </span><span id="local-6989586621680606803"><span class="annot"><span class="annottext">Work
</span><a href="#local-6989586621680606803"><span class="hs-identifier hs-var">work</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOExportM Work -&gt; IO Work
forall a. IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-var">runIOExportM</span></a></span><span> </span><span class="annot"><span class="annottext">(IOExportM Work -&gt; IO Work) -&gt; IOExportM Work -&gt; IO Work
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; IOExportM Work
forall (m :: * -&gt; *). StandardNotationExportM m =&gt; Music -&gt; m Work
</span><a href="Music.Score.Export.StandardNotation.html#toStandardNotation"><span class="hs-identifier hs-var">toStandardNotation</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680606815"><span class="hs-identifier hs-var">music</span></a></span><span>
</span><span id="line-136"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680606802"><span class="annot"><span class="annottext">h :: FilePath
</span><a href="#local-6989586621680606802"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680606801"><span class="annot"><span class="annottext">ly :: Music
</span><a href="#local-6989586621680606801"><span class="hs-identifier hs-var">ly</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOExportM (FilePath, Music) -&gt; IO (FilePath, Music)
forall a. IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-var">runIOExportM</span></a></span><span> </span><span class="annot"><span class="annottext">(IOExportM (FilePath, Music) -&gt; IO (FilePath, Music))
-&gt; IOExportM (FilePath, Music) -&gt; IO (FilePath, Music)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LilypondOptions -&gt; Work -&gt; IOExportM (FilePath, Music)
forall (m :: * -&gt; *).
LilypondExportM m =&gt;
LilypondOptions -&gt; Work -&gt; m (FilePath, Music)
</span><a href="Music.Score.Export.StandardNotation.html#toLy"><span class="hs-identifier hs-var">toLy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOptions -&gt; LilypondOptions
</span><a href="Music.Prelude.Standard.html#lilypondOptions"><span class="hs-identifier hs-var hs-var">lilypondOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Work
</span><a href="#local-6989586621680606803"><span class="hs-identifier hs-var">work</span></a></span><span>
</span><span id="line-137"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680606800"><span class="annot"><span class="annottext">ly' :: FilePath
</span><a href="#local-6989586621680606800"><span class="hs-identifier hs-var hs-var">ly'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680606802"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Printer -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Music -&gt; Printer
forall a. Pretty a =&gt; a -&gt; Printer
</span><span class="hs-identifier hs-var">Text.Pretty.pretty</span></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680606801"><span class="hs-identifier hs-var">ly</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>        </span><span class="hs-comment">-- TODO use ByteString/builders, not String?</span><span>
</span><span id="line-139"></span><span>        </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; IO ()
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">writeFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOptions -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#output"><span class="hs-identifier hs-var hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680606800"><span class="hs-identifier hs-var">ly'</span></a></span><span>
</span><span id="line-140"></span><span>      </span><span class="annot"><a href="Music.Prelude.Standard.html#ToXml"><span class="hs-identifier hs-type">ToXml</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-141"></span><span>        </span><span id="local-6989586621680606796"><span class="annot"><span class="annottext">Work
</span><a href="#local-6989586621680606796"><span class="hs-identifier hs-var">work</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOExportM Work -&gt; IO Work
forall a. IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-var">runIOExportM</span></a></span><span> </span><span class="annot"><span class="annottext">(IOExportM Work -&gt; IO Work) -&gt; IOExportM Work -&gt; IO Work
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Music -&gt; IOExportM Work
forall (m :: * -&gt; *). StandardNotationExportM m =&gt; Music -&gt; m Work
</span><a href="Music.Score.Export.StandardNotation.html#toStandardNotation"><span class="hs-identifier hs-var">toStandardNotation</span></a></span><span> </span><span class="annot"><span class="annottext">Music
</span><a href="#local-6989586621680606815"><span class="hs-identifier hs-var">music</span></a></span><span>
</span><span id="line-142"></span><span>        </span><span id="local-6989586621680606795"><span class="annot"><span class="annottext">Score
</span><a href="#local-6989586621680606795"><span class="hs-identifier hs-var">work'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOExportM Score -&gt; IO Score
forall a. IOExportM a -&gt; IO a
</span><a href="Music.Score.Export.StandardNotation.html#runIOExportM"><span class="hs-identifier hs-var">runIOExportM</span></a></span><span> </span><span class="annot"><span class="annottext">(IOExportM Score -&gt; IO Score) -&gt; IOExportM Score -&gt; IO Score
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Work -&gt; IOExportM Score
forall (m :: * -&gt; *). MusicXmlExportM m =&gt; Work -&gt; m Score
</span><a href="Music.Score.Export.StandardNotation.html#toXml"><span class="hs-identifier hs-var">toXml</span></a></span><span> </span><span class="annot"><span class="annottext">Work
</span><a href="#local-6989586621680606796"><span class="hs-identifier hs-var">work</span></a></span><span>
</span><span id="line-143"></span><span>        </span><span class="hs-comment">-- TODO use ByteString/builders, not String?</span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; IO ()
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">writeFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOptions -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#output"><span class="hs-identifier hs-var hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">CommandLineOptions
</span><a href="#local-6989586621680606807"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ()) -&gt; FilePath -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Score -&gt; FilePath
</span><a href="Data.Music.MusicXml.html#showXml"><span class="hs-identifier hs-var">Data.Music.MusicXml.showXml</span></a></span><span> </span><span class="annot"><span class="annottext">Score
</span><a href="#local-6989586621680606795"><span class="hs-identifier hs-var">work'</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="annot"><a href="Music.Prelude.Standard.html#stripSuffix"><span class="hs-identifier hs-type">stripSuffix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-147"></span><span id="stripSuffix"><span class="annot"><span class="annottext">stripSuffix :: FilePath -&gt; FilePath
</span><a href="Music.Prelude.Standard.html#stripSuffix"><span class="hs-identifier hs-var hs-var">stripSuffix</span></a></span></span><span> </span><span id="local-6989586621680606792"><span class="annot"><span class="annottext">xs :: FilePath
</span><a href="#local-6989586621680606792"><span class="hs-identifier hs-var">xs</span></a></span></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-char">'.'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; FilePath -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680606792"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; FilePath) -&gt; FilePath -&gt; FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; FilePath -&gt; FilePath
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">drop</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; FilePath) -&gt; FilePath -&gt; FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; FilePath -&gt; FilePath
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">dropWhile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="hs-char">'.'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; FilePath) -&gt; FilePath -&gt; FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680606792"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680606792"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- TODO move</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Orchestrate in the given parts.</span><span>
</span><span id="line-154"></span><span id="local-6989586621680606786"><span class="annot"><a href="Music.Prelude.Standard.html#singleParts"><span class="hs-identifier hs-type">singleParts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Position.html#HasPosition"><span class="hs-identifier hs-type">HasPosition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Time.Internal.Transform.html#Transformable"><span class="hs-identifier hs-type">Transformable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Part.html#HasParts%27"><span class="hs-identifier hs-type">HasParts'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Part.html#Part"><span class="hs-identifier hs-type">Music.Score.Part.Part</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606786"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-155"></span><span id="singleParts"><span class="annot"><span class="annottext">singleParts :: [Part a] -&gt; [a] -&gt; a
</span><a href="Music.Prelude.Standard.html#singleParts"><span class="hs-identifier hs-var hs-var">singleParts</span></a></span></span><span> </span><span id="local-6989586621680606782"><span class="annot"><span class="annottext">ens :: [Part a]
</span><a href="#local-6989586621680606782"><span class="hs-identifier hs-var">ens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; a
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="Music.Time.Juxtapose.html#ppar"><span class="hs-identifier hs-var">ppar</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; a) -&gt; ([a] -&gt; [a]) -&gt; [a] -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Part a -&gt; a -&gt; a) -&gt; [Part a] -&gt; [a] -&gt; [a]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASetter a a (Part a) (Part a) -&gt; Part a -&gt; a -&gt; a
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">ASetter a a (Part a) (Part a)
forall s t. (HasParts s t, s ~ t) =&gt; Traversal' s (Part s)
</span><a href="Music.Score.Part.html#parts%27"><span class="hs-identifier hs-var">parts'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Part a] -&gt; [Part a]
forall a. [a] -&gt; [a]
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">([Part a] -&gt; [Part a]) -&gt; [Part a] -&gt; [Part a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Part a]
</span><a href="#local-6989586621680606782"><span class="hs-identifier hs-var">ens</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- TODO move</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">-- | Orchestrate by doubling the given music in all given parts.</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- &gt;&gt;&gt; doublePartsInOctave [violins,flutes] $ pseq[c,d,e]</span><span>
</span><span id="line-162"></span><span id="local-6989586621680606777"><span class="annot"><a href="Music.Prelude.Standard.html#doubleParts"><span class="hs-identifier hs-type">doubleParts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606777"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Part.html#HasParts%27"><span class="hs-identifier hs-type">HasParts'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606777"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Part.html#Part"><span class="hs-identifier hs-type">Music.Score.Part.Part</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606777"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606777"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606777"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-163"></span><span id="doubleParts"><span class="annot"><span class="annottext">doubleParts :: [Part a] -&gt; a -&gt; a
</span><a href="Music.Prelude.Standard.html#doubleParts"><span class="hs-identifier hs-var hs-var">doubleParts</span></a></span></span><span> </span><span id="local-6989586621680606776"><span class="annot"><span class="annottext">ps :: [Part a]
</span><a href="#local-6989586621680606776"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680606775"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680606775"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; a
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; a) -&gt; [a] -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Part a -&gt; a) -&gt; [Part a] -&gt; [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680606774"><span class="annot"><span class="annottext">p :: Part a
</span><a href="#local-6989586621680606774"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ASetter a a (Part a) (Part a) -&gt; Part a -&gt; a -&gt; a
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">ASetter a a (Part a) (Part a)
forall s t. (HasParts s t, s ~ t) =&gt; Traversal' s (Part s)
</span><a href="Music.Score.Part.html#parts%27"><span class="hs-identifier hs-var">parts'</span></a></span><span> </span><span class="annot"><span class="annottext">Part a
</span><a href="#local-6989586621680606774"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680606775"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Part a]
</span><a href="#local-6989586621680606776"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- TODO move</span><span>
</span><span id="line-166"></span><span id="local-6989586621680606772"><span id="local-6989586621680606773"><span class="annot"><a href="Music.Prelude.Standard.html#doublePartsF"><span class="hs-identifier hs-type">doublePartsF</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680606773"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606772"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Part.html#HasParts%27"><span class="hs-identifier hs-type">HasParts'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606772"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606773"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Music.Score.Part.html#Part"><span class="hs-identifier hs-type">Music.Score.Part.Part</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606772"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606773"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606772"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606773"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606772"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-167"></span><span id="doublePartsF"><span class="annot"><span class="annottext">doublePartsF :: [Part a] -&gt; f a -&gt; f a
</span><a href="Music.Prelude.Standard.html#doublePartsF"><span class="hs-identifier hs-var hs-var">doublePartsF</span></a></span></span><span> </span><span id="local-6989586621680606771"><span class="annot"><span class="annottext">ps :: [Part a]
</span><a href="#local-6989586621680606771"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680606770"><span class="annot"><span class="annottext">x :: f a
</span><a href="#local-6989586621680606770"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[f a] -&gt; f a
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([f a] -&gt; f a) -&gt; [f a] -&gt; f a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Part a -&gt; f a) -&gt; [Part a] -&gt; [f a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680606769"><span class="annot"><span class="annottext">p :: Part a
</span><a href="#local-6989586621680606769"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ASetter (f a) (f a) (Part a) (Part a) -&gt; Part a -&gt; f a -&gt; f a
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Identity a) -&gt; f a -&gt; Identity (f a)
forall (f :: * -&gt; *) a b. Functor f =&gt; Setter (f a) (f b) a b
</span><span class="hs-identifier hs-var">mapped</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; Identity a) -&gt; f a -&gt; Identity (f a))
-&gt; ((Part a -&gt; Identity (Part a)) -&gt; a -&gt; Identity a)
-&gt; ASetter (f a) (f a) (Part a) (Part a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Part a -&gt; Identity (Part a)) -&gt; a -&gt; Identity a
forall s t. (HasParts s t, s ~ t) =&gt; Traversal' s (Part s)
</span><a href="Music.Score.Part.html#parts%27"><span class="hs-identifier hs-var">parts'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Part a
</span><a href="#local-6989586621680606769"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621680606770"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Part a]
</span><a href="#local-6989586621680606771"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-comment">-- TODO move</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">-- | Orchestrate by doubling in all given parts.</span><span>
</span><span id="line-172"></span><span class="hs-comment">--</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- &gt;&gt;&gt; doublePartsInOctave [(violins,0),(flutes,1)] $ pseq[c,d,e]</span><span>
</span><span id="line-174"></span><span id="local-6989586621680606768"><span class="annot"><a href="Music.Prelude.Standard.html#doublePartsInOctave"><span class="hs-identifier hs-type">doublePartsInOctave</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606768"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Pitch.html#Transposable"><span class="hs-identifier hs-type">Transposable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606768"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Music.Score.Part.html#HasParts%27"><span class="hs-identifier hs-type">HasParts'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606768"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Music.Score.Part.html#Part"><span class="hs-identifier hs-type">Music.Score.Part.Part</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680606768"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.5.3/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606768"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680606768"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-175"></span><span id="doublePartsInOctave"><span class="annot"><span class="annottext">doublePartsInOctave :: [(Part a, Int)] -&gt; a -&gt; a
</span><a href="Music.Prelude.Standard.html#doublePartsInOctave"><span class="hs-identifier hs-var hs-var">doublePartsInOctave</span></a></span></span><span> </span><span id="local-6989586621680606767"><span class="annot"><span class="annottext">ps :: [(Part a, Int)]
</span><a href="#local-6989586621680606767"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621680606766"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621680606766"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; a
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; a) -&gt; [a] -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Part a, Int) -&gt; a) -&gt; [(Part a, Int)] -&gt; [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680606765"><span class="annot"><span class="annottext">p :: Part a
</span><a href="#local-6989586621680606765"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680606764"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621680606764"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ASetter a a (Part a) (Part a) -&gt; Part a -&gt; a -&gt; a
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">ASetter a a (Part a) (Part a)
forall s t. (HasParts s t, s ~ t) =&gt; Traversal' s (Part s)
</span><a href="Music.Score.Part.html#parts%27"><span class="hs-identifier hs-var">parts'</span></a></span><span> </span><span class="annot"><span class="annottext">Part a
</span><a href="#local-6989586621680606765"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; a -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Scalar (Interval a) -&gt; a -&gt; a
forall a. Transposable a =&gt; Scalar (Interval a) -&gt; a -&gt; a
</span><a href="Music.Score.Pitch.html#octavesUp"><span class="hs-identifier hs-var">octavesUp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Scalar (Interval a)
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///nix/store/yi1zp26n2al045qmp9gwpxblhp2c8gs8-ghc-8.8.3-doc/share/doc/ghc/html/libraries/base-4.13.0.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680606764"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680606766"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Part a, Int)]
</span><a href="#local-6989586621680606767"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-176"></span></pre></body></html>